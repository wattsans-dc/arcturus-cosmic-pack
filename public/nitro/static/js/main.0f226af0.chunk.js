(this["webpackJsonpnitro-react"]=this["webpackJsonpnitro-react"]||[]).push([[0],{136:function(e,t,s){},137:function(e,t,s){"use strict";s.r(t);var n=s(40),r=s(89),c=s(1),i=s(75),a=s(2);const o=e=>{if(!e)return 0;let t=0;for(const s of e.achievements)t+=s.levelCount;return t};class l{constructor(e){this._code=void 0,this._achievements=void 0,this._code=e,this._achievements=[]}getProgress(){return h(this)}getMaxProgress(){return o(this)}get code(){return this._code}get achievements(){return this._achievements}set achievements(e){this._achievements=e}}const u=e=>{if(!e)return null;let t=e.badgeId;return e.finalLevel||(t=U().getPreviousLevelBadgeId(t)),t},d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=k("achievements.images.url");let r=s?"achicon_":"achcategory_";return r+=e.code,null!==t&&(r+="_"+(t>0?"active":"inactive")),n.replace("%image%",r)},h=e=>{if(!e)return 0;let t=0;for(const s of e.achievements)t+=s.finalLevel?s.level:s.level-1;return t},j=e=>{if(!e)return 0;let t=0;for(const s of e.achievements)s.unseen>0&&t++;return t},b=e=>!!e&&!!(e.finalLevel||e.level-1>0),g=e=>e?e.finalLevel?e.level:e.level-1:0;class O{constructor(e,t,s){this._productName=void 0,this._customImage=void 0,this._furnitureClassName=void 0,this._productName=e,this._customImage=t,this._furnitureClassName=s}get productName(){return this._productName}get customImage(){return this._customImage}get furnitureClassName(){return this._furnitureClassName}}class m{}m.STATE_UNLOCKED=1,m.STATE_LOCKED_AVAILABLE=2,m.STATE_LOCKED_EXPIRED=3,m.STATE_LOCKED_FUTURE=4;class p{}p.OKAY=0,p.MISSING_OFFER=1,p.FURNI_LIMIT_REACHED=2,p.NOT_IN_ROOM=3,p.NOT_ROOM_OWNER=4,p.GUILD_ROOM=5,p.VISITORS_IN_ROOM=6;class _{constructor(e,t,s){this._depth=0,this._localization="",this._pageId=-1,this._pageName="",this._iconId=0,this._children=void 0,this._offerIds=void 0,this._parent=void 0,this._isVisible=void 0,this._isActive=void 0,this._isOpen=void 0,this._depth=t,this._parent=s,this._localization=e.localization,this._pageId=e.pageId,this._pageName=e.pageName,this._iconId=e.icon,this._children=[],this._offerIds=e.offerIds,this._isVisible=e.visible,this._isActive=!1,this._isOpen=!1}activate(){this._isActive=!0}deactivate(){this._isActive=!1}open(){this._isOpen=!0}close(){this._isOpen=!1}addChild(e){e&&this._children.push(e)}get depth(){return this._depth}get isBranch(){return this._children.length>0}get isLeaf(){return 0===this._children.length}get localization(){return this._localization}get pageId(){return this._pageId}get pageName(){return this._pageName}get iconId(){return this._iconId}get children(){return this._children}get offerIds(){return this._offerIds}get parent(){return this._parent}get isVisible(){return this._isVisible}get isActive(){return this._isActive}get isOpen(){return this._isOpen}}class E{constructor(e,t,s,n,r){let c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:-1;this._pageId=void 0,this._layoutCode=void 0,this._localization=void 0,this._offers=void 0,this._acceptSeasonCurrencyAsCredits=void 0,this._mode=void 0,this._pageId=e,this._layoutCode=t,this._localization=s,this._offers=n,this._acceptSeasonCurrencyAsCredits=r;for(const i of n)i.page=this;this._mode=-1===c?E.MODE_NORMAL:c}get pageId(){return this._pageId}get layoutCode(){return this._layoutCode}get localization(){return this._localization}get offers(){return this._offers}get acceptSeasonCurrencyAsCredits(){return this._acceptSeasonCurrencyAsCredits}get mode(){return this._mode}}E.MODE_NORMAL=0;class f{}f.DUCKET_INFO="ducket_info",f.CREDITS="credits",f.AVATAR_EFFECTS="avatar_effects",f.HC_MEMBERSHIP="hc_membership",f.CLUB_GIFTS="club_gifts",f.LIMITED_SOLD="limited_sold",f.PET_ACCESSORIES="pet_accessories",f.TRAX_SONGS="trax_songs",f.NEW_ADDITIONS="new_additions",f.QUEST_SHELL="quest_shell",f.QUEST_SNOWFLAKES="quest_snowflakes",f.VAL_QUESTS="val_quests",f.GUILD_CUSTOM_FURNI="guild_custom_furni",f.GIFT_SHOP="gift_shop",f.HORSE_STYLES="horse_styles",f.HORSE_SHOE="horse_shoe",f.SET_EASTER="set_easter",f.ECOTRON_TRANSFORM="ecotron_transform",f.LOYALTY_INFO="loyalty_info",f.ROOM_BUNDLES="room_bundles",f.ROOM_BUNDLES_MOBILE="room_bundles_mobile",f.HABBO_CLUB_DESKTOP="habbo_club_desktop",f.MOBILE_SUBSCRIPTIONS="mobile_subscriptions";class x{constructor(e,t){this.breed=e,this.palettes=t}}class I{}I.NONE=0,I.CONFIRM=1,I.PURCHASE=2,I.NO_CREDITS=3,I.NO_POINTS=4,I.SOLD_OUT=5,I.FAILED=6;class T{}function C(){return a.Oe.instance}function S(e){C().addLinkEventTracker(e)}T.NORMAL="NORMAL",T.BUILDER="BUILDERS_CLUB";function N(){return C().avatar}function v(e){return N().structureData.getPalette(e)}function R(e){return N().structureData.getSetType(e)}function A(){return C().cameraManager}function y(e){e=e.startsWith("event:")?e.substring(6):e,C().createLinkEvent(e)}function w(){return C().communication}function k(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return C().getConfiguration(e,t)}function D(){return w().connection}function U(){return C().localization}function P(){return C().ticker}function M(e){C().removeLinkEventTracker(e)}function L(){return C().roomEngine}let F=!1,H=0,B=0;const G=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const s=e.clientX,n=e.clientY;let r=e.type;switch(r===a.Ce.MOUSE_CLICK&&(H&&(B=1,H>=Date.now()-300&&B++),H=Date.now(),2===B&&(F||(r=a.Ce.DOUBLE_CLICK),B=0,H=null)),r){case a.Ce.MOUSE_CLICK:case a.Ce.DOUBLE_CLICK:break;case a.Ce.MOUSE_MOVE:F=!0;break;case a.Ce.MOUSE_DOWN:F=!1;break;case a.Ce.MOUSE_UP:case a.Ce.RIGHT_CLICK:break;default:return}L().dispatchMouseEvent(t,s,n,r,e.altKey,e.ctrlKey||e.metaKey,e.shiftKey,!1)};let W=!1,V=0,q=0,Y=null;const z=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=e.type;s&&(i=a.Th.TOUCH_LONG),i!==a.Th.TOUCH_END||W||(i=a.Ce.MOUSE_CLICK,V&&(q=1,V>=Date.now()-300&&q++),V=Date.now(),2===q&&(i=a.Ce.DOUBLE_CLICK,q=0,V=null)),Y&&clearTimeout(Y);let o=0,l=0;switch(e.touches[0]?(o=e.touches[0].clientX,l=e.touches[0].clientY):e.changedTouches[0]&&(o=e.changedTouches[0].clientX,l=e.changedTouches[0].clientY),i){case a.Ce.MOUSE_CLICK:case a.Ce.DOUBLE_CLICK:break;case a.Th.TOUCH_START:Y=setTimeout((()=>{W||z(e,t,!0)}),300),i=a.Ce.MOUSE_DOWN,W=!1;break;case a.Th.TOUCH_MOVE:i=a.Ce.MOUSE_MOVE,W=!0;break;case a.Th.TOUCH_END:i=a.Ce.MOUSE_UP;break;case a.Th.TOUCH_LONG:i=a.Ce.MOUSE_DOWN_LONG;break;default:return}L().dispatchMouseEvent(t,o,l,i,n,r,c,!1)};function K(e){if(!e||!e.model)return!1;return ee().userId===e.model.getValue(a.Og.FURNITURE_OWNER_ID)}function Q(e,t,s){return!!e&&(e.controllerLevel>=a.eg.GUEST||ee().isModerator||K(L().getRoomObject(e.roomId,t,s)))}function $(){return C().roomSessionManager}function X(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;$().createSession(e,t)}function J(){const e=de();if(!e)return a.k.POSTURE_STAND;return e.model.getValue(a.Og.FIGURE_CAN_STAND_UP)}function Z(){const e=de();if(!e)return!1;const t=e.model.getValue(a.Og.FIGURE_EFFECT);return!(29===t||30===t||185===t)}function ee(){return C().sessionDataManager}function te(){return k("hc.disabled",!1)?a.Ed.VIP:ee().clubLevel}function se(e,t){let s=null;switch(t.toLowerCase()){case er.FLOOR:s=ee().getFloorItemData(e);break;case er.WALL:s=ee().getWallItemData(e)}return s}function ne(e,t,s){const n=L().getRoomObject(e,t,s);if(!n)return;const r=n.model.getValue(a.Og.FURNITURE_TYPE_ID);switch(s){case a.Ig.FLOOR:return ee().getFloorItemData(r);case a.Ig.WALL:return ee().getWallItemData(r)}return null}function re(){const e=de();if(!e)return a.k.POSTURE_STAND;return e.model.getValue(a.Og.FIGURE_POSTURE)}function ce(e){return e?ee().getProductData(e):null}function ie(){return $().getSession(-1)}function ae(){$n(new a.sb)}function oe(){return ee().clubLevel>=a.Ed.CLUB}function le(){return ee().clubLevel>=a.Ed.VIP}const ue=()=>{ie()&&(ae(),$().removeSession(-1))};function de(){const e=ee().userId,t=L().activeRoomId,s=a.Ig.UNIT,n=L().getTotalObjectsForManager(t,s);let r=0;for(;r<n;){const n=L().getRoomObjectByIndex(t,r,s);if(n){const t=ie().userDataManager.getUserDataByIndex(n.id);if(t&&t.webID===e)return n}r++}return null}const he=function(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const r=L().getRoomObjectBoundingRectangle(e,t,s,n);return r?(r.x=Math.round(r.x),r.y=Math.round(r.y),r):null},je=function(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const r=L().getRoomObjectScreenLocation(e,t,s,n);return r?(r.x=Math.round(r.x),r.y=Math.round(r.y),r):null},be=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const n=L(),r=n.activeRoomId;n.initializeRoomInstanceRenderingCanvas(r,s,e,t)};function ge(e,t,s){L().processRoomObjectOperation(e,t,s)}function Oe(e){L().setActiveRoomId(e)}class me{constructor(e,t,s,n){this._id=void 0,this._type=void 0,this._color=void 0,this._brightness=void 0,this._id=e,this._type=t,this._color=s,this._brightness=n}get id(){return this._id}get type(){return this._type}get color(){return this._color}get brightness(){return this._brightness}}class pe{constructor(e,t,s){this._id=void 0,this._category=void 0,this._name=void 0,this._id=e,this._category=t,this._name=s}get id(){return this._id}get category(){return this._category}get name(){return this._name}}class _e extends a.Te{}class Ee extends _e{constructor(e,t,s,n,r){super(Ee.AVATAR_INFO),this._userId=void 0,this._userName=void 0,this._userType=void 0,this._roomIndex=void 0,this._allowNameChange=void 0,this._userId=e,this._userName=t,this._userType=s,this._roomIndex=n,this._allowNameChange=r}get userId(){return this._userId}get userName(){return this._userName}get userType(){return this._userType}get roomIndex(){return this._roomIndex}get allowNameChange(){return this._allowNameChange}}Ee.AVATAR_INFO="RWAIE_AVATAR_INFO";class fe extends _e{constructor(e,t){super(e),this._items=void 0,this._items=t}get items(){return this._items}}fe.USER_CHOOSER_CONTENT="RWCCE_USER_CHOOSER_CONTENT",fe.FURNI_CHOOSER_CONTENT="RWCCE_FURNI_CHOOSER_CONTENT";class xe extends _e{constructor(e){super(xe.FLOOD_CONTROL),this._seconds=0,this._seconds=e}get seconds(){return this._seconds}}xe.FLOOD_CONTROL="RWFCE_FLOOD_CONTROL";class Ie extends _e{constructor(e,t,s,n,r,c){super(e),this._roomIndex=void 0,this._category=void 0,this._id=void 0,this._name=void 0,this._userType=void 0,this._roomIndex=t,this._category=s,this._id=n,this._name=r,this._userType=c}get roomIndex(){return this._roomIndex}get category(){return this._category}get id(){return this._id}get name(){return this._name}get userType(){return this._userType}}Ie.TYPE="RWONE_TYPE";class Te extends _e{constructor(e,t){super(e),this._id=-1,this._summary=void 0,this._headline=void 0,this._numQuestions=0,this._startMessage="",this._endMessage="",this._questionArray=null,this._pollType="",this._npsPoll=!1,this._id=t}get id(){return this._id}get summary(){return this._summary}set summary(e){this._summary=e}get headline(){return this._headline}set headline(e){this._headline=e}get numQuestions(){return this._numQuestions}set numQuestions(e){this._numQuestions=e}get startMessage(){return this._startMessage}set startMessage(e){this._startMessage=e}get endMessage(){return this._endMessage}set endMessage(e){this._endMessage=e}get questionArray(){return this._questionArray}set questionArray(e){this._questionArray=e}get pollType(){return this._pollType}set pollType(e){this._pollType=e}get npsPoll(){return this._npsPoll}set npsPoll(e){this._npsPoll=e}}Te.OFFER="RWPUW_OFFER",Te.ERROR="RWPUW_ERROR",Te.CONTENT="RWPUW_CONTENT";class Ce extends _e{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;super(e),this._hue=void 0,this._saturation=void 0,this._lightness=void 0,this._hue=t,this._saturation=s,this._lightness=n}get hue(){return this._hue}get saturation(){return this._saturation}get lightness(){return this._lightness}}Ce.PREVIEW="RWUBCPE_PREVIEW",Ce.CLEAR_PREVIEW="RWUBCPE_CLEAR_PREVIEW";class Se extends _e{constructor(e,t,s,n,r,c,i,a,o,l,u,d){let h=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,j=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,b=arguments.length>14&&void 0!==arguments[14]?arguments[14]:null;super(e),this._userId=void 0,this._text=void 0,this._chatType=void 0,this._userName=void 0,this._links=void 0,this._userX=void 0,this._userY=void 0,this._userImage=void 0,this._userColor=void 0,this._roomId=void 0,this._userCategory=void 0,this._userType=void 0,this._petType=void 0,this._styleId=void 0,this._userId=t,this._text=s,this._chatType=h,this._userName=n,this._userCategory=r,this._userType=c,this._petType=i,this._links=b,this._userX=a,this._userY=o,this._userImage=l,this._userColor=u,this._roomId=d,this._styleId=j}get userId(){return this._userId}get text(){return this._text}get chatType(){return this._chatType}get userName(){return this._userName}get userCategory(){return this._userCategory}get userType(){return this._userType}get petType(){return this._petType}get links(){return this._links}get userX(){return this._userX}get userY(){return this._userY}get userImage(){return this._userImage}get userColor(){return this._userColor}get roomId(){return this._roomId}get styleId(){return this._styleId}}Se.CHAT_EVENT="RWUCE_CHAT_EVENT",Se.CHAT_TYPE_SPEAK=0,Se.CHAT_TYPE_WHISPER=1,Se.CHAT_TYPE_SHOUT=2,Se.CHAT_TYPE_RESPECT=3,Se.CHAT_TYPE_PETRESPECT=4,Se.CHAT_TYPE_NOTIFY=5,Se.CHAT_TYPE_PETTREAT=6,Se.CHAT_TYPE_PETREVIVE=7,Se.CHAT_TYPE_PET_REBREED_FERTILIZE=8,Se.CHAT_TYPE_PET_SPEED_FERTILIZE=9,Se.CHAT_TYPE_BOT_SPEAK=10,Se.CHAT_TYPE_BOT_SHOUT=11,Se.CHAT_TYPE_BOT_WHISPER=12;class Ne extends _e{constructor(e,t){super(Ne.CHAT_INPUT_CONTENT),this._chatMode="",this._userName="",this._chatMode=e,this._userName=t}get chatMode(){return this._chatMode}get userName(){return this._userName}}Ne.CHAT_INPUT_CONTENT="RWUCICE_CHAT_INPUT_CONTENT",Ne.WHISPER="whisper",Ne.SHOUT="shout";class ve extends _e{constructor(e,t,s,n){super(e),this._objectId=void 0,this._value=void 0,this._furniType=void 0,this._objectId=t,this._value=s,this._furniType=n}get objectId(){return this._objectId}get value(){return this._value}get furniType(){return this._furniType}}ve.CREDIT_FURNI_UPDATE="RWUCFE_CREDIT_FURNI_UPDATE";class Re extends _e{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super(Re.UPDATE_CUSTOM_STACK_HEIGHT),this._objectId=void 0,this._height=void 0,this._objectId=e,this._height=t}get objectId(){return this._objectId}get height(){return this._height}}Re.UPDATE_CUSTOM_STACK_HEIGHT="RWUCSHE_UPDATE_CUSTOM_STACK_HEIGHT";class Ae extends _e{constructor(e){super(Ae.UPDATE_DANCE),this._isDancing=void 0,this._isDancing=e}get isDancing(){return this._isDancing}}Ae.UPDATE_DANCE="RWUDSE_UPDATE_DANCE";class ye extends _e{constructor(e){super(ye.UPDATE_DECORATE),this._isDecorating=void 0,this._isDecorating=e}get isDecorating(){return this._isDecorating}}ye.UPDATE_DECORATE="RWUDME_UPDATE_DECORATE";class we extends _e{constructor(e){super(e),this._selectedPresetId=0,this._presets=void 0,this._presets=[]}get presetCount(){return this._presets.length}get presets(){return this._presets}get selectedPresetId(){return this._selectedPresetId}set selectedPresetId(e){this._selectedPresetId=e}setPresetValues(e,t,s,n){const r=new me(e,t,s,n);this._presets[e-1]=r}getPresetNumber(e){return this._presets[e]}}we.PRESETS="RWUDE_PRESETS",we.HIDE="RWUDE_HIDE";class ke extends _e{constructor(e,t,s,n,r){super(ke.DIMMER_STATE),this._state=void 0,this._presetId=void 0,this._effectId=void 0,this._color=void 0,this._brightness=void 0,this._state=e,this._presetId=t,this._effectId=s,this._color=n,this._brightness=r}get state(){return this._state}get presetId(){return this._presetId}get effectId(){return this._effectId}get color(){return this._color}get brightness(){return this._brightness}}ke.DIMMER_STATE="RWUDSE_DIMMER_STATE";class De extends _e{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(De.UPDATE_EXTERNAL_IMAGE),this._objectId=void 0,this._photoData=void 0,this._objectId=e,this._photoData=t}get objectId(){return this._objectId}get photoData(){return this._photoData}}De.UPDATE_EXTERNAL_IMAGE="RWUEIE_UPDATE_EXTERNAL_IMAGE";class Ue extends _e{}class Pe extends Ue{constructor(){super(...arguments),this.id=0,this.category=0,this.name="",this.description="",this.image=null,this.isWallItem=!1,this.isStickie=!1,this.isRoomOwner=!1,this.roomControllerLevel=0,this.isAnyRoomController=!1,this.expiration=-1,this.purchaseCatalogPageId=-1,this.purchaseOfferId=-1,this.extraParam="",this.isOwner=!1,this.stuffData=null,this.groupId=0,this.ownerId=0,this.ownerName="",this.usagePolicy=0,this.rentCatalogPageId=-1,this.rentOfferId=-1,this.purchaseCouldBeUsedForBuyout=!1,this.rentCouldBeUsedForBuyout=!1,this.availableForBuildersClub=!1,this.tileSizeX=1,this.tileSizeY=1}}Pe.FURNI="RWUIFE_FURNI";class Me extends Ue{constructor(){super(...arguments),this.level=0,this.maximumLevel=0,this.experience=0,this.levelExperienceGoal=0,this.energy=0,this.maximumEnergy=0,this.happyness=0,this.maximumHappyness=0,this.respectsPetLeft=0,this.respect=0,this.age=0,this.name="",this.id=-1,this.image=null,this.petType=0,this.petBreed=0,this.petFigure="",this.posture="std",this.isOwner=!1,this.ownerId=-1,this.ownerName="",this.canRemovePet=!1,this.roomIndex=0,this.unknownRarityLevel=0,this.saddle=!1,this.rider=!1,this.breedable=!1,this.skillTresholds=[],this.publiclyRideable=0,this.fullyGrown=!1,this.dead=!1,this.rarityLevel=0,this.maximumTimeToLive=0,this.remainingTimeToLive=0,this.remainingGrowTime=0,this.publiclyBreedable=!1}}Me.PET_INFO="RWUIPE_PET_INFO";class Le extends Ue{constructor(){super(...arguments),this.name="",this.motto="",this.webID=0,this.figure="",this.badges=[],this.carryItem=0,this.roomIndex=0,this.amIOwner=!1,this.amIAnyRoomController=!1,this.roomControllerLevel=0,this.ownerId=-1,this.ownerName="",this.botSkills=[]}}Le.RENTABLE_BOT="RWUIRBE_RENTABLE_BOT";class Fe extends Ue{constructor(){super(...arguments),this.name="",this.motto="",this.achievementScore=0,this.webID=0,this.xp=0,this.userType=-1,this.figure="",this.badges=[],this.groupId=0,this.groupName="",this.groupBadgeId="",this.carryItem=0,this.roomIndex=0,this.isSpectatorMode=!1,this.allowNameChange=!1,this.amIOwner=!1,this.amIAnyRoomController=!1,this.roomControllerLevel=0,this.canBeKicked=!1,this.canBeBanned=!1,this.canBeMuted=!1,this.respectLeft=0,this.isIgnored=!1,this.isGuildRoom=!1,this.canTrade=!1,this.canTradeReason=0,this.targetRoomControllerLevel=0,this.isAmbassador=!1}get isOwnUser(){return this.type===Fe.OWN_USER}}Fe.OWN_USER="RWUIUE_OWN_USER",Fe.PEER="RWUIUE_PEER",Fe.BOT="RWUIUE_BOT",Fe.TRADE_REASON_OK=0,Fe.TRADE_REASON_SHUTDOWN=2,Fe.TRADE_REASON_NO_TRADING=3,Fe.DEFAULT_BOT_BADGE_ID="BOT";class He extends _e{constructor(e,t,s,n,r){super(e),this._objectId=void 0,this._figure=void 0,this._gender=void 0,this._name=void 0,this._objectId=t,this._figure=s,this._gender=n,this._name=r}get objectId(){return this._objectId}get figure(){return this._figure}get gender(){return this._gender}get name(){return this._name}}He.MANNEQUIN_UPDATE="RWUME_MANNEQUIN_UPDATE";class Be extends _e{constructor(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;super(e),this._objectId=-1,this._classId=0,this._itemType="",this._giftMessage="",this._imageUrl=null,this._isController=void 0,this._purchaserName=void 0,this._purchaserFigure=void 0,this._placedItemId=-1,this._placedItemType="",this._placedInRoom=void 0,this._objectId=t,this._giftMessage=s,this._imageUrl=r,this._isController=n,this._purchaserName=c,this._purchaserFigure=i}get objectId(){return this._objectId}get classId(){return this._classId}set classId(e){this._classId=e}get itemType(){return this._itemType}set itemType(e){this._itemType=e}get giftMessage(){return this._giftMessage}get imageUrl(){return this._imageUrl}get isController(){return this._isController}get purchaserName(){return this._purchaserName}get purchaserFigure(){return this._purchaserFigure}get placedItemId(){return this._placedItemId}set placedItemId(e){this._placedItemId=e}get placedInRoom(){return this._placedInRoom}set placedInRoom(e){this._placedInRoom=e}get placedItemType(){return this._placedItemType}set placedItemType(e){this._placedItemType=e}}Be.PACKAGEINFO="RWUPDE_PACKAGEINFO",Be.CONTENTS="RWUPDE_CONTENTS",Be.CONTENTS_CLUB="RWUPDE_CONTENTS_CLUB",Be.CONTENTS_FLOOR="RWUPDE_CONTENTS_FLOOR",Be.CONTENTS_LANDSCAPE="RWUPDE_CONTENTS_LANDSCAPE",Be.CONTENTS_WALLPAPER="RWUPDE_CONTENTS_WALLPAPER",Be.CONTENTS_IMAGE="RWUPDE_CONTENTS_IMAGE";class Ge extends _e{constructor(e,t,s,n,r,c,i){super(Ge.UPDATE_CHAT),this._objectId=void 0,this._category=void 0,this._botId=void 0,this._chat=void 0,this._automaticChat=void 0,this._chatDelay=void 0,this._mixSentences=void 0,this._objectId=e,this._category=t,this._botId=s,this._chat=n,this._automaticChat=r,this._chatDelay=c,this._mixSentences=i}get objectId(){return this._objectId}get category(){return this._category}get botId(){return this._botId}get chat(){return this._chat}get automaticChat(){return this._automaticChat}get chatDelay(){return this._chatDelay}get mixSentences(){return this._mixSentences}}Ge.UPDATE_CHAT="RWURBCE_UPDATE_CHAT";class We extends _e{constructor(e,t){super(e),this._roomId=0,this._roomId=t}get roomId(){return this._roomId}}We.GAME_MODE="RWUREE_GAME_MODE",We.NORMAL_MODE="RWUREE_NORMAL_MODE";class Ve extends _e{constructor(e,t,s,n){super(e),this._id=void 0,this._category=void 0,this._roomId=void 0,this._id=t,this._category=s,this._roomId=n}get id(){return this._id}get category(){return this._category}get roomId(){return this._roomId}}Ve.OBJECT_SELECTED="RWUROE_OBJECT_SELECTED",Ve.OBJECT_DESELECTED="RWUROE_OBJECT_DESELECTED",Ve.USER_REMOVED="RWUROE_USER_REMOVED",Ve.FURNI_REMOVED="RWUROE_FURNI_REMOVED",Ve.FURNI_ADDED="RWUROE_FURNI_ADDED",Ve.USER_ADDED="RWUROE_USER_ADDED",Ve.OBJECT_ROLL_OVER="RWUROE_OBJECT_ROLL_OVER",Ve.OBJECT_ROLL_OUT="RWUROE_OBJECT_ROLL_OUT",Ve.OBJECT_REQUEST_MANIPULATION="RWUROE_OBJECT_REQUEST_MANIPULATION";class qe extends _e{constructor(e,t,s,n){super(e),this._songId=void 0,this._songName=void 0,this._songAuthor=void 0,this._songId=t,this._songName=s,this._songAuthor=n}get songId(){return this._songId}get songName(){return this._songName}get songAuthor(){return this._songAuthor}}qe.PLAYING_CHANGED="RWUSE_PLAYING_CHANGED",qe.DATA_RECEIVED="RWUSE_DATA_RECEIVED";(class extends _e{constructor(e,t,s,n,r,c){super(e),this._color=void 0,this._name=void 0,this._date=void 0,this._message=void 0,this._extra=void 0,this._color=t,this._name=s,this._date=n,this._message=r,this._extra=c}get color(){return this._color}get name(){return this._name}get date(){return this._date}get message(){return this._message}get extra(){return this._extra}}).TROPHY_UPDATE="RWUTE_TROPHY_UPDATE";class Ye extends _e{constructor(){super(Ye.USER_DATA_UPDATED)}}Ye.USER_DATA_UPDATED="RWUUDE_USER_DATA_UPDATED";class ze extends _e{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super(ze.UPDATE_YOUTUBE_DISPLAY),this._objectId=void 0,this._hasControl=void 0,this._objectId=e,this._hasControl=t}get objectId(){return this._objectId}get hasControl(){return this._hasControl}}ze.UPDATE_YOUTUBE_DISPLAY="RWUEIE_UPDATE_YOUTUBE_DISPLAY";class Ke extends _e{constructor(e,t){super(e),this._items=void 0,this._items=t}get items(){return this._items}}Ke.USE_PRODUCT_BUBBLES="RWUPBE_USE_PRODUCT_BUBBLES";class Qe extends _e{constructor(e,t){super(e),this._id=-1,this._pollType=null,this._pollId=-1,this._questionId=-1,this._duration=-1,this._question=null,this._userId=-1,this._value=void 0,this._answerCounts=void 0,this._id=t}get id(){return this._id}get pollType(){return this._pollType}set pollType(e){this._pollType=e}get pollId(){return this._pollId}set pollId(e){this._pollId=e}get questionId(){return this._questionId}set questionId(e){this._questionId=e}get duration(){return this._duration}set duration(e){this._duration=e}get question(){return this._question}set question(e){this._question=e}get userId(){return this._userId}set userId(e){this._userId=e}get value(){return this._value}set value(e){this._value=e}get answerCounts(){return this._answerCounts}set answerCounts(e){this._answerCounts=e}}Qe.NEW_QUESTION="RWPUW_NEW_QUESTION",Qe.QUESTION_FINISHED="RWPUW_QUESION_FINSIHED",Qe.QUESTION_ANSWERED="RWPUW_QUESTION_ANSWERED";class $e{constructor(e,t,s,n,r,c,i){this._id=void 0,this._category=void 0,this._name=void 0,this._requestRoomObjectId=void 0,this._targetRoomObjectId=void 0,this._requestInventoryStripId=void 0,this._replace=void 0,this._id=e,this._category=t,this._name=s,this._requestRoomObjectId=n,this._requestInventoryStripId=c,this._replace=i}get id(){return this._id}get category(){return this._category}get name(){return this._name}get requestRoomObjectId(){return this._requestRoomObjectId}get requestInventoryStripId(){return this._requestInventoryStripId}get replace(){return this._replace}}const Xe=e=>{if(null==e||"object"!=typeof e)return e;const t=new e.constructor;for(const s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);return t};class Je{static makeColorHex(e){return"#"+e}static makeColorNumberHex(e){let t=e.toString(16);if(t.length<6){const e=6-t.length;for(let s=0;s<e;s++)t="0"+t}return"#"+t}static convertFromHex(e){return parseInt(e.replace("#",""),16)}}const Ze=e=>{let t=C().localization.getBadgeDesc(e);return t&&t.length||(t=`badge_desc_${e}`),t},et=e=>{let t=C().localization.getBadgeName(e);return t&&t.length||(t=`badge_name_${e}`),t};function tt(e){return!e||isNaN(e)?"0":e.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")}function st(e){if(!e||isNaN(e))return"0";let t=Math.abs(e);const s=Math.pow(10,1),n=e<0;let r="";const c=[{key:"Q",value:Math.pow(10,15)},{key:"T",value:Math.pow(10,12)},{key:"B",value:Math.pow(10,9)},{key:"M",value:Math.pow(10,6)},{key:"K",value:1e3}];for(const i of c){let e=t/i.value;if(e=Math.round(e*s)/s,e>=1){t=e,r=i.key;break}}return(n?"-":"")+t+r}function nt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return C().getLocalizationWithParameters(e,t,s)}class rt{}rt.CATALOG_PLACE_MULTIPLE_OBJECTS="catalogPlaceMultipleObjects",rt.CATALOG_SKIP_PURCHASE_CONFIRMATION="catalogSkipPurchaseConfirmation";var ct=s(35);function it(e,t){Object(c.useEffect)((()=>{const s=new e(t);return w().registerMessageEvent(s),()=>w().removeMessageEvent(s)}),[e,t])}const at=()=>{const[e,t]=Object(c.useState)(!0),[s,n]=Object(c.useState)([]),[r,i]=Object(c.useState)(null),[o,u]=Object(c.useState)(-1),[d,h]=Object(c.useState)(0),b=Object(c.useMemo)((()=>{let e=0;return s.forEach((t=>e+=j(t))),e}),[s]),g=Object(c.useMemo)((()=>{let e=0;return s.forEach((t=>e+=t.getProgress())),e}),[s]),O=Object(c.useMemo)((()=>{let e=0;return s.forEach((t=>e+=t.getMaxProgress())),e}),[s]),m=Object(c.useMemo)((()=>~~(100*(g-0)/(O-0)+0)),[g,O]),p=Object(c.useCallback)(((e,t)=>{n((s=>{const n=[...s];for(const r of n)if(r.code===e)for(const e of r.achievements)e.achievementId===t&&(e.unseen=0);return n}))}),[]),_=Object(c.useCallback)((e=>{const t=e.getParser().achievement;n((e=>{const s=[...e],n=s.findIndex((e=>e.code===t.category));if(-1===n){const e=new l(t.category);e.achievements.push(t),s.push(e)}else{const e=Xe(s[n]),r=[...e.achievements],c=r.findIndex((e=>e.achievementId===t.achievementId));let i=null;-1===c?r.push(t):(i=r[c],r[c]=t),(e=>{if(!e)return!1;const t=k("achievements.unseen.ignored"),s=e.badgeId.replace(/[0-9]/g,"");return t.indexOf(s)>=0})(t)||(t.unseen++,i&&(t.unseen+=i.unseen)),e.achievements=r,s[n]=e}return s}))}),[]);it(a.b,_);const E=Object(c.useCallback)((e=>{const t=e.getParser(),s=[];for(const n of t.achievements){const e=n.category;let t=s.find((t=>t.code===e));t||(t=new l(e),s.push(t)),t.achievements.push(n)}n(s)}),[]);it(a.d,E);const f=Object(c.useCallback)((e=>{const t=e.getParser();h(t.score)}),[]);return it(a.e,f),Object(c.useEffect)((()=>{e&&($n(new a.Qf),t(!1))}),[e]),{achievementCategories:s,selectedCategoryCode:r,setSelectedCategoryCode:i,selectedAchievementId:o,setSelectedAchievementId:u,achievementScore:d,getTotalUnseen:b,getProgress:g,getMaxProgress:O,scaledProgressPercent:m,setAchievementSeen:p}};var ot=s(20);class lt extends a.Te{}lt.SHOW_CATALOG="CE_SHOW_CATALOG",lt.HIDE_CATALOG="CE_HIDE_CATALOG",lt.TOGGLE_CATALOG="CE_TOGGLE_CATALOG",lt.SOLD_OUT="CE_SOLD_OUT",lt.APPROVE_NAME_RESULT="CE_APPROVE_NAME_RESULT",lt.PURCHASE_APPROVED="CE_PURCHASE_APPROVED",lt.INIT_GIFT="CE_INIT_GIFT",lt.CATALOG_RESET="CE_RESET",lt.CATALOG_INVISIBLE_PAGE_VISITED="CE_CATALOG_INVISIBLE_PAGE_VISITED";class ut extends lt{constructor(e,t,s){super(lt.INIT_GIFT),this._pageId=void 0,this._offerId=void 0,this._extraData=void 0,this._pageId=e,this._offerId=t,this._extraData=s}get pageId(){return this._pageId}get offerId(){return this._offerId}get extraData(){return this._extraData}}class dt extends lt{constructor(e){super(dt.POST_MARKETPLACE),this._item=void 0,this._item=e}get item(){return this._item}}dt.POST_MARKETPLACE="CE_POST_MARKETPLACE";class ht extends a.Te{constructor(e){super(ht.PURCHASE_SUCCESS),this._purchase=void 0,this._purchase=e}get purchase(){return this._purchase}}ht.PURCHASE_SUCCESS="CPE_PURCHASE_SUCCESS";class jt extends a.Te{constructor(e){super(jt.PURCHASE_FAILED),this._code=void 0,this._code=e}get code(){return this._code}}jt.PURCHASE_FAILED="CPFE_PURCHASE_FAILED";class bt extends a.Te{constructor(e){super(bt.NOT_ALLOWED),this._code=void 0,this._code=e}get code(){return this._code}}bt.NOT_ALLOWED="CPNAE_NOT_ALLOWED";class gt extends a.Te{}gt.WIDGETS_INITIALIZED="CWE_CWE_WIDGETS_INITIALIZED",gt.SELECT_PRODUCT="CWE_SELECT_PRODUCT",gt.SET_EXTRA_PARM="CWE_CWE_SET_EXTRA_PARM",gt.PURCHASE="CWE_PURCHASE",gt.COLOUR_ARRAY="CWE_COLOUR_ARRAY",gt.MULTI_COLOUR_ARRAY="CWE_MULTI_COLOUR_ARRAY",gt.COLOUR_INDEX="CWE_COLOUR_INDEX",gt.TEXT_INPUT="CWE_TEXT_INPUT",gt.DROPMENU_SELECT="CWE_CWE_DROPMENU_SELECT",gt.PURCHASE_OVERRIDE="CWE_PURCHASE_OVERRIDE",gt.SELLABLE_PET_PALETTES="CWE_SELLABLE_PET_PALETTES",gt.UPDATE_ROOM_PREVIEW="CWE_UPDATE_ROOM_PREVIEW",gt.GUILD_SELECTED="CWE_GUILD_SELECTED",gt.TOTAL_PRICE_WIDGET_INITIALIZED="CWE_TOTAL_PRICE_WIDGET_INITIALIZED",gt.PRODUCT_OFFER_UPDATED="CWE_CWE_PRODUCT_OFFER_UPDATED",gt.SET_PREVIEWER_STUFFDATA="CWE_CWE_SET_PREVIEWER_STUFFDATA",gt.EXTRA_PARAM_REQUIRED_FOR_BUY="CWE_CWE_EXTRA_PARAM_REQUIRED_FOR_BUY",gt.TOGGLE="CWE_CWE_TOGGLE",gt.BUILDER_SUBSCRIPTION_UPDATED="CWE_CWE_BUILDER_SUBSCRIPTION_UPDATED",gt.ROOM_CHANGED="CWE_CWE_ROOM_CHANGED",gt.SHOW_WARNING_TEXT="CWE_CWE_SHOW_WARNING_TEXT";a.Te;class Ot extends a.Te{constructor(){super(Ot.SOLD_OUT)}}Ot.SOLD_OUT="CPSOE_SOLD_OUT";a.Te;class mt extends a.Te{constructor(e,t){super(mt.UPDATE_STUFF_DATA),this._offer=void 0,this._stuffData=void 0,this._offer=e,this._stuffData=t}get offer(){return this._offer}get stuffData(){return this._stuffData}}mt.UPDATE_STUFF_DATA="SRPSA_UPDATE_STUFF_DATA";class pt extends a.Te{}pt.SHOW_GUIDE_TOOL="GTE_SHOW_GUIDE_TOOL",pt.HIDE_GUIDE_TOOL="GTE_HIDE_GUIDE_TOOL",pt.TOGGLE_GUIDE_TOOL="GTE_TOGGLE_GUIDE_TOOL",pt.CREATE_HELP_REQUEST="GTE_CREATE_HELP_REQUEST",pt.CREATE_BULLY_REQUEST="GTE_CREATE_BULLY_REQUEST";var _t=s(10);class Et extends _t.a{}Et.INIT="HC_NAME_CHANGE_INIT";class ft extends a.Te{constructor(e){super(ft.REPORT_USER),this._reportedUserId=void 0,this._reportedUserId=e}get reportedUserId(){return this._reportedUserId}}ft.REPORT_USER="HCE_HELP_CENTER_REPORT_USER";class xt extends a.Te{constructor(e,t,s){super(xt.FURNI_ADDED),this.id=e,this.spriteId=t,this.category=s}}xt.FURNI_ADDED="IFAE_FURNI_ADDED";class It extends a.Te{}It.SHOW_MOD_TOOLS="MTE_SHOW_MOD_TOOLS",It.HIDE_MOD_TOOLS="MTE_HIDE_MOD_TOOLS",It.TOGGLE_MOD_TOOLS="MTE_TOGGLE_MOD_TOOLS",It.OPEN_ROOM_INFO="MTE_OPEN_ROOM_INFO",It.OPEN_ROOM_CHATLOG="MTE_OPEN_ROOM_CHATLOG",It.OPEN_USER_INFO="MTE_OPEN_USER_INFO",It.OPEN_USER_CHATLOG="MTE_OPEN_USER_CHATLOG";class Tt extends It{constructor(e){super(It.OPEN_ROOM_CHATLOG),this._roomId=void 0,this._roomId=e}get roomId(){return this._roomId}}class Ct extends It{constructor(e){super(It.OPEN_ROOM_INFO),this._roomId=void 0,this._roomId=e}get roomId(){return this._roomId}}class St extends It{constructor(e){super(It.OPEN_USER_CHATLOG),this._userId=void 0,this._userId=e}get userId(){return this._userId}}class Nt extends It{constructor(e){super(It.OPEN_USER_INFO),this._userId=void 0,this._userId=e}get userId(){return this._userId}}class vt extends a.Te{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;super(vt.ALERT),this._messages=void 0,this._alertType=void 0,this._clickUrl=void 0,this._clickUrlText=void 0,this._title=void 0,this._imageUrl=void 0,this._messages=e,this._alertType=t,this._clickUrl=s,this._clickUrlText=n,this._title=r,this._imageUrl=c}get messages(){return this._messages}get alertType(){return this._alertType}get clickUrl(){return this._clickUrl}get clickUrlText(){return this._clickUrlText}get title(){return this._title}get imageUrl(){return this._imageUrl}}vt.ALERT="NAE_ALERT";class Rt extends a.Te{constructor(e,t,s,n){super(Rt.NEW_BUBBLE),this._message=void 0,this._notificationType=void 0,this._imageUrl=void 0,this._linkUrl=void 0,this._message=e,this._notificationType=t,this._imageUrl=s,this._linkUrl=n}get message(){return this._message}get notificationType(){return this._notificationType}get imageUrl(){return this._imageUrl}get linkUrl(){return this._linkUrl}}Rt.NEW_BUBBLE="NBE_NEW_BUBBLE";class At extends a.Te{constructor(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super(e),this._message=void 0,this._clickUrl=void 0,this._headerText=void 0,this._message=t,this._clickUrl=s,this._headerText=n}get message(){return this._message}get clickUrl(){return this._clickUrl}get headerText(){return this._headerText}}At.HOTEL_ALERT="NCAE_HOTEL_ALERT";class yt extends a.Te{}yt.SHOW_NOTIFICATION_CENTER="NCE_SHOW_NOTIFICATION_CENTER",yt.HIDE_NOTIFICATION_CENTER="NCE_HIDE_NOTIFICATION_CENTER",yt.TOGGLE_NOTIFICATION_CENTER="NCE_TOGGLE_NOTIFICATION_CENTER",yt.ADD_NOTIFICATION="NCE_ADD_NOTIFICATION";class wt extends a.Te{constructor(e,t,s,n,r,c,i){super(wt.CONFIRM),this._confirmType=void 0,this._message=void 0,this._onConfirm=void 0,this._onCancel=void 0,this._confirmText=void 0,this._cancelText=void 0,this._title=void 0,this._confirmType=e,this._message=t,this._onConfirm=s,this._onCancel=n,this._confirmText=r,this._cancelText=c,this._title=i}get confirmType(){return this._confirmType}get message(){return this._message}get onConfirm(){return this._onConfirm}get onCancel(){return this._onCancel}get confirmText(){return this._confirmText}get cancelText(){return this._cancelText}get title(){return this._title}}wt.CONFIRM="NCE_CONFIRM";class kt extends a.Te{}kt.SHOW_THUMBNAIL="NE_SHOW_THUMBNAIL",kt.HIDE_THUMBNAIL="NE_HIDE_THUMBNAIL",kt.TOGGLE_THUMBNAIL="NE_TOGGLE_THUMBNAIL";class Dt extends a.Te{}Dt.SAVE_WIRED="WE_SAVE_WIRED";class Ut extends Dt{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;super(Ut.SELECT_OBJECT),this._objectId=void 0,this._category=void 0,this._objectId=e,this._category=t}get objectId(){return this._objectId}get category(){return this._category}}Ut.SELECT_OBJECT="WE_SELECT_OBJECT";const Pt=(e,t,s)=>{Object(c.useEffect)((()=>(t.addEventListener(e,s),()=>t.removeEventListener(e,s))),[e,t,s])},Mt=(e,t)=>Pt(e,ur().events,t),Lt=(e,t)=>e.dispatchEvent(t),Ft=e=>Lt(C().events,e),Ht=(e,t)=>Pt(e,C().events,t),Bt=(e,t)=>Pt(e,L().events,t),Gt=(e,t)=>Pt(e,$().events,t),Wt=new a.xb,Vt=e=>Lt(Wt,e),qt=(e,t)=>Pt(e,Wt,t),Yt=(e,t)=>{const[s,n]=Object(c.useState)((()=>{if("undefined"===typeof window)return t;try{const s=window.localStorage.getItem(e);return s?JSON.parse(s):t}catch(s){return t}}));return[s,t=>{try{const r=t instanceof Function?t(s):t;n(r),"undefined"!==typeof window&&window.localStorage.setItem(e,JSON.stringify(r))}catch(r){a.We.error(r)}}]},zt=()=>Yt(rt.CATALOG_PLACE_MULTIPLE_OBJECTS,!1),Kt=()=>Object(ot.a)(zt),Qt=()=>Yt(rt.CATALOG_SKIP_PURCHASE_CONFIRMATION,!1),$t=()=>Object(ot.a)(Qt),Xt=()=>{const[e,t]=Object(c.useState)(!1),[s,n]=Object(c.useState)(!1),[r,i]=Object(c.useState)(-1),[o,l]=Object(c.useState)(-1),[u,d]=Object(c.useState)(T.NORMAL),[h,j]=Object(c.useState)(null),[b,g]=Object(c.useState)(null),[O,m]=Object(c.useState)(null),[f,I]=Object(c.useState)(null),[S,N]=Object(c.useState)([]),[v,R]=Object(c.useState)(null),[A,w]=Object(c.useState)([]),[k,D]=Object(c.useState)(null),[U,P]=Object(c.useState)(!1),[M,F]=Object(c.useState)({quantity:1,extraData:null,extraParamRequired:!1,previewStuffData:null}),[H,B]=Object(c.useState)({}),[G,W]=Object(c.useState)(!1),[V,q]=Kt(),[Y,z]=$t(),[K,Q]=Object(c.useState)(null),[$,X]=Object(c.useState)(null),[J,Z]=Object(c.useState)(0),[ee,te]=Object(c.useState)(0),[ne,re]=Object(c.useState)(0),[ae,oe]=Object(c.useState)(0),[le,ue]=Object(c.useState)(0),[de,he]=Object(c.useState)(0),je=Object(c.useRef)(new ar),be=Object(c.useCallback)((()=>{i(-1),l(-1),j(null),g(null),m(null),I(null),N([]),R(null),w([]),t(!1)}),[]),ge=Object(c.useCallback)((e=>{if(!e)return p.MISSING_OFFER;if(J<0||J>=ee)return p.FURNI_LIMIT_REACHED;const t=ie();if(!t)return p.NOT_IN_ROOM;if(!t.isRoomOwner)return p.NOT_ROOM_OWNER;if(ae<=0){const e=L();let s=e.getRoomObjectCount(t.roomId,a.Ig.UNIT);for(;s>0;){const n=e.getRoomObjectByIndex(t.roomId,s,a.Ig.UNIT),r=t.userDataManager.getUserDataByIndex(n.id);if(r&&r.type===a.Mg.USER&&r.roomIndex!==t.ownRoomIndex&&!r.isModerator)return p.VISITORS_IN_ROOM;s--}}return p.OKAY}),[J,ee,ae]),Oe=Object(c.useCallback)((e=>{const t=ie();return!(!(t&&e.page&&"sold_ltd_items"!==e.page.layoutCode&&u===T.NORMAL&&(t.isRoomOwner||t.isGuildRoom&&t.controllerLevel>=a.eg.GUILD_MEMBER)||u===T.BUILDER&&ge(e)===p.OKAY)||e.pricingModel===sr.PRICING_MODEL_BUNDLE||e.product.productType===er.EFFECT||e.product.productType===er.HABBO_CLUB)}),[u,ge]),me=Object(c.useCallback)((e=>{if(!Oe(e))return;const s=e.product;if(!s)return;let n=0;switch(s.productType){case er.FLOOR:n=a.Ig.FLOOR;break;case er.WALL:n=a.Ig.WALL}L().processRoomObjectPlacement(a.Lg.CATALOG,-e.offerId,n,s.productClassId,s.extraParam)&&(Q(e),W(!0),t(!1))}),[Oe]),pe=Object(c.useCallback)(((e,t)=>{const s=L();let n=s.getRoomInstanceVariable(s.activeRoomId,a.Og.ROOM_WALL_TYPE),r=s.getRoomInstanceVariable(s.activeRoomId,a.Og.ROOM_FLOOR_TYPE),c=s.getRoomInstanceVariable(s.activeRoomId,a.Og.ROOM_LANDSCAPE_TYPE);switch(n=n&&n.length?n:"101",r=r&&r.length?r:"101",c=c&&c.length?c:"1.1",e){case"floor":return void s.updateRoomInstancePlaneType(s.activeRoomId,t,n,c,!0);case"wallpaper":return void s.updateRoomInstancePlaneType(s.activeRoomId,r,t,c,!0);case"landscape":return void s.updateRoomInstancePlaneType(s.activeRoomId,r,n,t,!0);default:return void s.updateRoomInstancePlaneType(s.activeRoomId,r,n,c,!0)}}),[]),_e=Object(c.useCallback)((()=>{K&&(L().cancelRoomObjectInsert(),W(!1),Q(null))}),[K]),Ee=Object(c.useCallback)((function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];W((t=>(t&&e&&y("catalog/open"),!1)))}),[]),fe=Object(c.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e||Ee(),X((e=>{if(e)switch(e.category){case a.Ig.FLOOR:L().removeRoomObjectFloor(e.roomId,e.objectId);break;case a.Ig.WALL:switch(e.furniData.className){case"floor":case"wallpaper":case"landscape":pe("reset","");break;default:L().removeRoomObjectWall(e.roomId,e.objectId)}break;default:L().deleteRoomObject(e.objectId,e.category)}return null}))}),[Ee,pe]),xe=Object(c.useCallback)(((e,t)=>{if(t.pageId===e&&t!==h)return t;for(const s of t.children){const t=xe(e,s);if(t)return t}return null}),[h]),Ie=Object(c.useCallback)(((e,t)=>{if(t.pageName===e&&t!==h)return t;for(const s of t.children){const t=Ie(e,s);if(t)return t}return null}),[h]),Te=Object(c.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!b||!b.size)return null;if(t){const t=[],s=b.get(e);if(s&&s.length)for(const e of s)e.isVisible&&t.push(e);if(t.length)return t}return b.get(e)}),[b]),Ce=Object(c.useCallback)(((e,t)=>{e<0||(n(!0),i(e),e>-1&&$n(new a.fc(e,t,u)))}),[u]),Se=Object(c.useCallback)(((e,t,s,n,r,c)=>{const i=new E(e,t,s,n,c);if(m(i),l((t=>-1!==e?e:t)),P(!1),r>-1&&i.offers.length)for(const a of i.offers)if(a.offerId===r){I(a);break}}),[]),Ne=Object(c.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;if(_e(),"root"===e.parent.pageName&&e.children.length)for(const r of e.children)if(r.isVisible){e=r;break}const s=[];let n=e;for(;n&&"root"!==n.pageName;)s.push(n),n=n.parent;s.reverse(),N((t=>{const n=t.indexOf(e)>=0,r=e.isOpen;for(const e of t)e.deactivate(),-1===s.indexOf(e)&&e.close();for(const c of s)c.activate(),c.parent&&c.open(),c===e.parent&&c.children.length&&c.open();return n&&r?e.close():e.open(),s})),e.pageId>-1&&Ce(e.pageId,t)}),[N,Ce,_e]),ve=Object(c.useCallback)((s=>{if(R(null),e){const e=xe(s,h);e&&Ne(e)}else je.current.requestById=s,t(!0)}),[e,h,xe,Ne]),Re=Object(c.useCallback)((s=>{if(R(null),e){const e=Ie(s,h);e&&Ne(e)}else je.current.requestByName=s,t(!0)}),[e,h,Ie,Ne]),Ae=Object(c.useCallback)((s=>{if(R(null),e){const e=Te(s);if(!e||!e.length)return;Ne(e[0],s)}else je.current.requestedByOfferId=s,t(!0)}),[e,Te,Ne]),ye=Object(c.useCallback)((()=>{}),[]),we=Object(c.useCallback)((e=>{const t=e.getParser(),s=new Map,n=(e,t,r)=>{const c=new _(e,t,r);for(const n of c.offerIds)s.has(n)?s.get(n).push(c):s.set(n,[c]);t++;for(const s of e.children)c.addChild(n(s,t,c));return c};j(n(t.root,0,null)),g(s)}),[j,g]);it(a.X,we);const ke=Object(c.useCallback)((e=>{const t=e.getParser();if(t.catalogType!==u)return;const s=[];for(const n of t.offers){const e=[],t=ce(n.localizationId);for(const s of n.products){const n=se(s.furniClassId,s.productType);e.push(new tr(s.productType,s.furniClassId,s.extraParam,s.productCount,t,n,s.uniqueLimitedItem,s.uniqueLimitedSeriesSize,s.uniqueLimitedItemsLeft))}if(!e.length)continue;const r=new sr(n.offerId,n.localizationId,n.rent,n.priceCredits,n.priceActivityPoints,n.priceActivityPointsType,n.giftable,n.clubLevel,e,n.bundlePurchaseAllowed);(u===T.NORMAL||r.pricingModel!==sr.PRICING_MODEL_BUNDLE&&r.pricingModel!==sr.PRICING_MODEL_MULTI)&&s.push(r)}t.frontPageItems&&t.frontPageItems.length&&w(t.frontPageItems),n(!1),r===t.pageId&&Se(t.pageId,t.layoutCode,new cr(t.localization.images.concat(),t.localization.texts.concat()),s,t.offerId,t.acceptSeasonCurrencyAsCredits)}),[u,r,w,n,Se]);it(a.V,ke);const De=Object(c.useCallback)((e=>{const t=e.getParser();Vt(new ht(t.offer))}),[]);it(a.Ff,De);const Ue=Object(c.useCallback)((e=>{const t=e.getParser();Vt(new jt(t.code))}),[]);it(a.Bf,Ue);const Pe=Object(c.useCallback)((e=>{const t=e.getParser();Vt(new bt(t.code))}),[]);it(a.Ef,Pe);const Me=Object(c.useCallback)((e=>{e.getParser();Vt(new Ot)}),[]);it(a.Xd,Me);const Le=Object(c.useCallback)((e=>{const t=e.getParser().offer;if(!t||!t.products.length)return;t.products[0].uniqueLimitedItem;const s=[],n=ce(t.localizationId);for(const c of t.products){const e=se(c.furniClassId,c.productType);s.push(new tr(c.productType,c.furniClassId,c.extraParam,c.productCount,n,e,c.uniqueLimitedItem,c.uniqueLimitedSeriesSize,c.uniqueLimitedItemsLeft))}const r=new sr(t.offerId,t.localizationId,t.rent,t.priceCredits,t.priceActivityPoints,t.priceActivityPointsType,t.giftable,t.clubLevel,s,t.bundlePurchaseAllowed);(u===T.NORMAL||r.pricingModel!==sr.PRICING_MODEL_BUNDLE&&r.pricingModel!==sr.PRICING_MODEL_MULTI)&&(r.page=O,I(r),r.product&&r.product.productType===er.WALL&&F((e=>{const t={...e};return t.extraData=r.product.extraParam||null,t})))}),[u,O,I,F]);it(a.yf,Le);const Fe=Object(c.useCallback)((e=>{const t=e.getParser(),s=new x(t.productCode,t.palettes.slice());B((e=>{const t=[];e.petPalettes&&t.push(...e.petPalettes);for(let n=0;n<t.length;n++){if(t[n].breed===s.breed){t.splice(n,1);break}}return t.push(s),{...e,petPalettes:t}}))}),[B]);it(a.Jh,Fe);const He=Object(c.useCallback)((e=>{const t=e.getParser();B((e=>({...e,clubOffers:t.offers})))}),[B]);it(a.Fd,He);const Be=Object(c.useCallback)((e=>{const t=e.getParser();B((e=>({...e,groups:t.groups})))}),[B]);it(a.Cd,Be);const Ge=Object(c.useCallback)((e=>{const t=e.getParser();B((e=>({...e,giftConfiguration:new rr(t)})))}),[B]);it(a.Fc,Ge);const We=Object(c.useCallback)((e=>{const t=e.getParser();if(!t)return;let s="";s=1===t.result?nt("inventory.marketplace.result.title.success"):nt("inventory.marketplace.result.title.failure");const n=nt(`inventory.marketplace.result.${t.result}`);Pr.simpleAlert(n,yr.DEFAULT,null,null,s)}),[]);it(a.ie,We);const Ve=Object(c.useCallback)((e=>{const t=e.getParser();B((e=>({...e,clubGifts:t})))}),[B]);it(a.gb,Ve);const qe=Object(c.useCallback)((t=>{const s=e;be(),s&&Pr.simpleAlert(nt("catalog.alert.published.description"),yr.ALERT,null,null,nt("catalog.alert.published.title"))}),[e,be]);it(a.Y,qe);const Ye=Object(c.useCallback)((e=>{const t=e.getParser();Z(t.furniCount),ye()}),[ye]);it(a.E,Ye);const ze=Object(c.useCallback)((e=>{const t=e.getParser();te(t._Str_15864),re(t._Str_24094),oe(t._Str_3709),ue(C().time),he(t._Str_24379),ye()}),[ye]);it(a.I,ze);const Ke=Object(c.useCallback)((e=>{Ns(an.CREDITS)}),[]);qt(ht.PURCHASE_SUCCESS,Ke);const Qe=Object(c.useCallback)((e=>{if(!G||e.type!==a.qg.PLACED)return;if(fe(!0),!K)return void Ee();let t=!1;const s=K.product;if(e.category===a.Ig.WALL)switch(s.furnitureData.className){case"floor":case"wallpaper":case"landscape":t=e.placedOnFloor||e.placedOnWall;break;default:t=e.placedInRoom}else t=e.placedInRoom;if(t)switch(X(new ir(e.roomId,e.objectId,e.category,e.wallLocation,e.x,e.y,e.direction,K)),u){case T.NORMAL:{switch(e.category){case a.Ig.FLOOR:L().addFurnitureFloor(e.roomId,e.objectId,s.productClassId,new a.Ui(e.x,e.y,e.z),new a.Ui(e.direction),0,new a.Vd);break;case a.Ig.WALL:switch(s.furnitureData.className){case"floor":case"wallpaper":case"landscape":pe(s.furnitureData.className,s.extraParam);break;default:L().addFurnitureWall(e.roomId,e.objectId,s.productClassId,new a.Ui(e.x,e.y,e.z),new a.Ui(45*e.direction),0,e.instanceData,0)}}const t=L().getRoomObject(e.roomId,e.objectId,e.category);t&&t.model.setValue(a.Og.FURNITURE_ALPHA_MULTIPLIER,.5),Y?($n(new a.Df(r,K.offerId,s.extraParam,1)),V&&me(K)):V&&me(K);break}case T.BUILDER:{let t=K.page.pageId;switch(-12345678===t&&(t=-1),e.category){case a.Ig.FLOOR:$n(new a.F(t,K.offerId,s.extraParam,e.x,e.y,e.direction));break;case a.Ig.WALL:$n(new a.G(t,K.offerId,s.extraParam,e.wallLocation))}V&&me(K);break}}else Ee()}),[G,K,V,Y,u,r,fe,Ee,pe,me]);Bt(a.qg.PLACED,Qe);const $e=Object(c.useCallback)((e=>{const t=L();if($&&$.productClassId===e.spriteId&&$.roomId===t.activeRoomId){switch(e.category){case Rs.FLOOR:{const s=t.getRoomInstanceVariable(t.activeRoomId,a.Og.ROOM_FLOOR_TYPE);$.extraParam!==s&&$n(new a.Wb(e.id));break}case Rs.WALL_PAPER:{const s=t.getRoomInstanceVariable(t.activeRoomId,a.Og.ROOM_WALL_TYPE);$.extraParam!==s&&$n(new a.Wb(e.id));break}case Rs.LANDSCAPE:{const s=t.getRoomInstanceVariable(t.activeRoomId,a.Og.ROOM_LANDSCAPE_TYPE);$.extraParam!==s&&$n(new a.Wb(e.id));break}default:$n(new a.Vb(e.id,$.category,$.wallLocation,$.x,$.y,$.direction))}V||fe()}}),[$,V,fe]);return qt(xt.FURNI_ADDED,$e),Object(c.useEffect)((()=>()=>I(null)),[O]),Object(c.useEffect)((()=>{if(e&&h&&je.current)switch(je.current.requestType){case ar.REQUEST_TYPE_NONE:if(O)return;if(h.isBranch)for(const e of h.children)if(e&&e.isVisible)return void Ne(e);return;case ar.REQUEST_TYPE_ID:return ve(je.current.requestById),void je.current.resetRequest();case ar.REQUEST_TYPE_OFFER:return Ae(je.current.requestedByOfferId),void je.current.resetRequest();case ar.REQUEST_TYPE_NAME:return Re(je.current.requestByName),void je.current.resetRequest()}}),[e,h,O,Ne,ve,Ae,Re]),Object(c.useEffect)((()=>{!v&&O&&-1===O.pageId&&ve(o)}),[v,O,o,ve]),Object(c.useEffect)((()=>{e&&!h&&($n(new a.mc),$n(new a.ic),$n(new a.ec(u)),$n(new a.H))}),[e,h,u]),Object(c.useEffect)((()=>(D(new a.Qg(L(),++a.Qg.PREVIEW_COUNTER)),()=>{D((e=>(e.dispose(),null)))})),[]),{isVisible:e,setIsVisible:t,isBusy:s,pageId:r,previousPageId:o,currentType:u,rootNode:h,offersToNodes:b,currentPage:O,setCurrentPage:m,currentOffer:f,setCurrentOffer:I,activeNodes:S,searchResult:v,setSearchResult:R,frontPageItems:A,roomPreviewer:k,navigationHidden:U,setNavigationHidden:P,purchaseOptions:M,setPurchaseOptions:F,catalogOptions:H,setCatalogOptions:B,getNodeById:xe,getNodeByName:Ie,activateNode:Ne,openPageById:ve,openPageByName:Re,openPageByOfferId:Ae,requestOfferToMover:me}},Jt=()=>Object(ot.a)(Xt),Zt=()=>{const[e,t]=Object(c.useState)([]),[s,n]=Object(c.useState)([]),[r,i]=Object(c.useState)([]),[o,l]=Object(c.useState)(null),u=Object(c.useMemo)((()=>{const t=e.filter((e=>e.online));return t.sort(((e,t)=>e.name<t.name?-1:e.name>t.name?1:0)),t}),[e]),d=Object(c.useMemo)((()=>{const t=e.filter((e=>!e.online));return t.sort(((e,t)=>e.name<t.name?-1:e.name>t.name?1:0)),t}),[e]),h=Object(c.useCallback)((e=>$n(new a.Fb(e.id))),[]),j=Object(c.useCallback)(((e,t)=>t!==e.relationshipStatus&&$n(new a.Oh(e.id,t))),[]),b=Object(c.useCallback)((t=>{for(const s of e)if(s.id===t)return s;return null}),[e]),g=Object(c.useCallback)((e=>!b(e)&&(!s.find((t=>t.requesterUserId===e))&&!(r.indexOf(e)>=0))),[s,r,b]),O=Object(c.useCallback)(((e,t)=>{if(!g(e))return!1;i((t=>{const s=[...t];return s.push(e),s})),$n(new a.Uf(t))}),[g]),m=Object(c.useCallback)(((e,t)=>{-1!==e||t?n((s=>{const n=[...s],r=n.findIndex((t=>t.id===e));return-1===r?s:($n(t?new a.a(n[r].id):new a.qb(!1,n[r].id)),n.splice(r,1),n)})):($n(new a.qb(!0)),n([]))}),[]),p=Object(c.useCallback)((e=>{const t=e.getParser();l(new gr(t.userFriendLimit,t.normalFriendLimit,t.extendedFriendLimit,t.categories)),$n(new a.lc)}),[]);it(a.le,p);const _=Object(c.useCallback)((e=>{const s=e.getParser();t((e=>{const t=[...e];for(const n of s.fragment){const e=t.findIndex((e=>e.id===n.id)),s=new Bn;s.populate(n),e>-1?t[e]=s:t.push(s)}return t}))}),[]);it(a.Hb,_);const E=Object(c.useCallback)((e=>{const s=e.getParser();t((e=>{const t=[...e],n=e=>{const s=t.findIndex((t=>t.id===e.id));if(-1===s){const s=new Bn;s.populate(e),t.unshift(s)}else t[s].populate(e)};for(const r of s.addedFriends)n(r);for(const r of s.updatedFriends)n(r);for(const r of s.removedFriendIds){const e=t.findIndex((e=>e.id===r));e>-1&&t.splice(e,1)}return t}))}),[]);it(a.Ib,E);const f=Object(c.useCallback)((e=>{const t=e.getParser();n((e=>{const s=[...e];for(const n of t.requests){const e=s.findIndex((e=>e.requesterUserId===n.requesterUserId));if(e>0)s[e]=Xe(s[e]),s[e].populate(n);else{const e=new br;e.populate(n),s.push(e)}}return s}))}),[]);it(a.Jb,f);const x=Object(c.useCallback)((e=>{const t=e.getParser().request;n((e=>{const s=[...e];if(-1===s.findIndex((e=>e.requesterUserId===t.requesterUserId))){const e=new br;e.populate(t),s.push(e)}return s}))}),[]);return it(a.Ne,x),Object(c.useEffect)((()=>{$n(new a.ke)}),[]),{friends:e,requests:s,sentRequests:r,settings:o,onlineFriends:u,offlineFriends:d,getFriend:b,canRequestFriend:g,requestFriend:O,requestResponse:m,followFriend:h,updateRelationship:j}},es=()=>Object(ot.a)(Zt),ts=()=>{const[e,t]=Object(c.useState)([]),[s,n]=Object(c.useState)(-1),[r,i]=Object(c.useState)([]),[o,l]=Object(c.useState)(jr.HIDDEN),{getFriend:u=null}=es(),d=Object(c.useMemo)((()=>e.filter((e=>-1===r.indexOf(e.threadId)))),[e,r]),h=Object(c.useMemo)((()=>s>0&&d.find((e=>e.threadId===s||null))),[s,d]),j=Object(c.useCallback)((s=>{let n=e.find((e=>e.participant&&e.participant.id===s));if(n)return n;const r=u(s);return r?(n=new pr(r),t((e=>{const t=[...e];return t.push(n),t})),i((e=>{const t=e.indexOf(n.threadId);if(-1===t)return e;const s=[...e];return s.splice(t,1),s})),n):null}),[e,u]),b=Object(c.useCallback)((e=>{const n=e.getParser();t((e=>{const t=[...e];let r=t.findIndex((e=>e.participant&&e.participant.id===n.senderId)),c=null;if(-1===r){const e=u(n.senderId);e&&(c=new pr(e),t.push(c))}else t[r]=Xe(t[r]),c=t[r];return c.addMessage(n.senderId,n.messageText,n.secondsSinceSent,n.extraData),s===c.threadId&&c.setRead(),c.unreadCount>0&&Ns(an.MESSENGER_MESSAGE_RECEIVED),t}))}),[s,u]);it(a.Me,b);const g=Object(c.useCallback)((e=>{const n=e.getParser();t((e=>{const t=[...e];let r=t.findIndex((e=>e.participant&&e.participant.id===n.senderId)),c=null;if(-1===r){const e=u(n.senderId);e&&(c=new pr(e),t.push(c))}else t[r]=Xe(t[r]),c=t[r];return c.addMessage(null,n.messageText,0,null,Or.ROOM_INVITE),s===c.threadId&&c.setRead(),c.unreadCount>0&&Ns(an.MESSENGER_MESSAGE_RECEIVED),t}))}),[s,u]);it(a.Eg,g);const O=Object(c.useCallback)((e=>{const t=e.getParser(),s="Received room invite error: errorCode: "+t.errorCode+", recipients: "+t.failedRecipients;Pr.simpleAlert(s,yr.DEFAULT,null,null,nt("friendlist.alert.title"))}),[]);return it(a.Dg,O),Object(c.useEffect)((()=>{s<=0||t((e=>{const t=[...e];let n=t.findIndex((e=>e.threadId===s));if(-1!==n)return t[n]=Xe(t[n]),t[n].setRead(),t}))}),[s]),Object(c.useEffect)((()=>{l((e=>{if(!d.length)return jr.HIDDEN;let t=!1;for(const s of d)if(s.unreadCount>0){t=!0;break}return t?jr.UNREAD:jr.SHOW}))}),[d]),{messageThreads:e,activeThread:h,iconState:o,visibleThreads:d,getMessageThread:j,setActiveThreadId:n,closeThread:e=>{i((t=>{const s=[...t];return s.indexOf(e)>=0?t:(s.push(e),s)}))},sendMessage:(n,r)=>{n&&r&&r.length&&($n(new a.Kh(n.participant.id,r)),1===e.length&&1===n.groups.length&&Ns(an.MESSENGER_NEW_THREAD),t((e=>{const t=[...e],c=t.findIndex((e=>e.threadId===n.threadId));return-1===c?e:(t[c]=Xe(t[c]),(n=t[c]).addMessage(ee().userId,r,0,null,Or.CHAT),s===n.threadId&&n.setRead(),t)})))}}},ss=()=>Object(ot.a)(ts),ns=()=>{const[e,t]=Object(c.useState)([]);return{isVisible:Object(c.useMemo)((()=>!!e.length),[e]),activate:Object(c.useCallback)((()=>{let e=-1;return t((t=>{const s=[...t];return e=s.length?s[s.length-1]+1:0,s.push(e),s})),e}),[]),deactivate:Object(c.useCallback)((e=>{t((t=>{const s=[...t],n=s.indexOf(e);return-1===n?t:(s.splice(n,1),s)}))}),[])}},rs=()=>{const[e,t]=Object(c.useState)(new Map),s=Object(c.useCallback)((t=>{var s;return(null===(s=e.get(t))||void 0===s?void 0:s.length)||0}),[e]),n=Object(c.useMemo)((()=>{let t=0;for(const n of e.keys())t+=s(n);return t}),[e,s]),r=Object(c.useCallback)((e=>{let s=!0;return t((t=>{if(!t.has(e))return s=!1,t;const n=new Map(t);return n.delete(e),(e=>{$n(new a.qi(e))})(e),n})),s}),[]),i=Object(c.useCallback)(((e,s)=>{let n=!0;return t((t=>{if(!t.has(e))return n=!1,t;const r=new Map(t),c=r.get(e);if(c)for(const e of s)c.splice(c.indexOf(e),1);return((e,t)=>{$n(new a.ri(e,...t))})(e,s),r})),n}),[]),o=Object(c.useCallback)(((t,s)=>{if(!e.has(t))return!1;return e.get(t).indexOf(s)>=0}),[e]),l=Object(c.useCallback)(((e,s)=>{t((t=>{if(!t.has(e))return t;const n=new Map(t),r=n.get(e),c=r.indexOf(s);return c>=0&&r.splice(c,1),n}))}),[]),u=Object(c.useCallback)((e=>{const s=e.getParser();t((e=>{const t=new Map(e);for(const n of s.categories){let e=t.get(n);e||(e=[],t.set(n,e));const r=s.getItemsByCategory(n);for(const t of r)-1===e.indexOf(t)&&e.push(t)}return t}))}),[]);return it(a.pi,u),{getCount:s,getFullCount:n,resetCategory:r,resetItems:i,isUnseen:o,removeUnseen:l}},cs=()=>Object(ot.a)(rs),is=()=>{const[e,t]=Object(c.useState)(!0),[s,n]=Object(c.useState)([]),[r,i]=Object(c.useState)([]),[o,l]=Object(c.useState)([]),[u,d]=Object(c.useState)(null),{isVisible:h=!1,activate:j=null,deactivate:b=null}=ns(),{isUnseen:g=null,resetCategory:O=null}=cs(),m=k("user.badges.max.slots",5),p=()=>o.length<m,_=Object(c.useCallback)((e=>{const t=e.getParser(),s=t.getAllBadgeCodes(),r=[];for(const n of s)r.push(t.getBadgeId(n));n(s),i(r),l(t.getActiveBadgeCodes())}),[]);it(a.v,_);const E=Object(c.useCallback)((e=>{const t=e.getParser(),s=g(qs.BADGE,t.badgeId);n((e=>{const n=[...e];return s?n.unshift(t.badgeCode):n.push(t.badgeCode),n})),i((e=>{const n=[...e];return s?n.unshift(t.badgeId):n.push(t.badgeId),n}))}),[g]);return it(a.u,E),Object(c.useEffect)((()=>{s&&s.length&&d((e=>{let t=e;return t&&-1===s.indexOf(t)&&(t=null),t||(t=s[0]),t}))}),[s]),Object(c.useEffect)((()=>{if(h)return()=>{O(qs.BADGE)}}),[h,O]),Object(c.useEffect)((()=>{h&&e&&($n(new a.Rf),t(!1))}),[h,e]),{badgeCodes:s,activeBadgeCodes:o,selectedBadgeCode:u,setSelectedBadgeCode:d,isWearingBadge:e=>o.indexOf(e)>=0,canWearBadges:p,toggleBadge:e=>{l((t=>{const s=[...t],n=s.indexOf(e);if(-1===n){if(!p())return t;s.push(e)}else s.splice(n,1);const r=new a.Mh;for(let e=0;e<m;e++)r.addActivatedBadge(s[e]||null);return $n(r),s}))},getBadgeId:e=>{const t=s.indexOf(e);return-1===t?0:r[t]||0},activate:j,deactivate:b}},as=()=>Object(ot.a)(is),os=()=>{const[e,t]=Object(c.useState)(!0),[s,n]=Object(c.useState)([]),[r,i]=Object(c.useState)(null),{isVisible:o=!1,activate:l=null,deactivate:u=null}=ns(),{isUnseen:d=null,resetCategory:h=null}=cs(),j=Object(c.useCallback)((e=>{const t=e.getParser();n((e=>{const s=[...e],n=s.map((e=>e.botData.id)),r=[];for(const c of t.items.values())-1===n.indexOf(c.id)&&r.push(c);for(const c of n){let e=!0;for(const s of t.items.values())if(s.id===c){e=!1;break}if(!e)continue;const n=s.findIndex((e=>e.botData.id===c)),r=s[n];-1!==n&&r&&(Fs()===r.botData.id&&(Bs(),y("inventory/open")),s.splice(n,1))}for(const t of r){const e={botData:t};d(qs.BOT,t.id)?s.unshift(e):s.push(e)}return s}))}),[d]);it(a.A,j);const b=Object(c.useCallback)((e=>{const t=e.getParser();n((e=>{const s=[...e];if(s.findIndex((e=>e.botData.id===t.item.id))>=0)return e;const n={botData:t.item};return d(qs.BOT,n.botData.id)?s.unshift(n):s.push(n),s}))}),[d]);it(a.y,b);const g=Object(c.useCallback)((e=>{const t=e.getParser();n((e=>{const s=[...e],n=s.findIndex((e=>e.botData.id===t.itemId));return-1===n?e:(s.splice(n,1),Fs()===t.itemId&&(Bs(),y("inventory/show")),s)}))}),[]);return it(a.C,g),Object(c.useEffect)((()=>{s&&s.length&&i((e=>{let t=e;return t&&-1===s.indexOf(t)&&(t=null),t||(t=s[0]),t}))}),[s]),Object(c.useEffect)((()=>{if(o)return()=>{h(qs.BOT)}}),[o,h]),Object(c.useEffect)((()=>{o&&e&&($n(new a.dc),t(!1))}),[o,e]),{botItems:s,selectedBot:r,setSelectedBot:i,activate:l,deactivate:u}},ls=()=>Object(ot.a)(os);let us=null;const ds=()=>{const[e,t]=Object(c.useState)(!0),[s,n]=Object(c.useState)([]),[r,i]=Object(c.useState)(null),{isVisible:o=!1,activate:l=null,deactivate:u=null}=ns(),{isUnseen:d=null,resetCategory:h=null}=cs(),j=Object(c.useCallback)((e=>{const t=e.getParser();n((e=>{const s=[...e];for(const n of t.items){let e=0,t=null;for(;e<s.length;){const r=s[e];let c=0;for(;c<r.items.length;){const e=r.items[c];if(e.id===n.itemId){e.update(n);const s=[...r.items];s[c]=e,r.items=s,t=r;break}c++}if(t)break;e++}if(t)t.hasUnseenItems=!0,s[e]=Xe(t);else{const e=new As(n);ks(s,e,d(qs.FURNI,n.itemId)),Vt(new xt(e.id,e.type,e.category))}}return s}))}),[d]);it(a.Nb,j);const b=Object(c.useCallback)((e=>{const t=e.getParser();us||(us=new Array(t.totalFragments));const s=Ds(t.fragment,t.totalFragments,t.fragmentNumber,us);s&&(n((e=>{const t=[...e],n=Us(t);for(const r of n){if(s.get(r))continue;let e=0;for(;e<t.length;){const s=t[e],n=s.remove(r);if(n){Fs()===n.ref&&(Bs(),Ws(s)||y("inventory/show")),s.getTotalCount()<=0&&(t.splice(e,1),s.dispose());break}e++}}for(const r of s.keys()){if(n.indexOf(r)>=0)continue;const e=s.get(r);if(!e)continue;const c=new As(e);ks(t,c,d(qs.FURNI,r)),Vt(new xt(c.id,c.type,c.category))}return t})),us=null)}),[d]);it(a.Pb,b);const g=Object(c.useCallback)((e=>{t(!0)}),[]);it(a.Qb,g);const O=Object(c.useCallback)((e=>{const t=e.getParser();n((e=>{const s=[...e];let n=0;for(;n<s.length;){const e=s[n],r=e.remove(t.itemId);if(r){Fs()===r.ref&&(Bs(),Ws(e)||y("inventory/show")),e.getTotalCount()<=0&&(s.splice(n,1),e.dispose());break}n++}return s}))}),[]);it(a.Rb,O);const m=Object(c.useCallback)((e=>{}),[]);return it(a.Xb,m),Object(c.useEffect)((()=>{s&&s.length&&i((e=>{let t=e;return t&&-1===s.indexOf(t)&&(t=null),t||(t=s[0]),t}))}),[s]),Object(c.useEffect)((()=>{if(o)return()=>{h(qs.FURNI)&&n((e=>{const t=[...e];for(const s of t)s.hasUnseenItems=!1;return t}))}}),[o,h]),Object(c.useEffect)((()=>{o&&e&&($n(new a.Ob),t(!1))}),[o,e]),{isVisible:o,groupItems:s,setGroupItems:n,selectedItem:r,setSelectedItem:i,activate:l,deactivate:u}},hs=()=>Object(ot.a)(ds);let js=null;const bs=()=>{const[e,t]=Object(c.useState)(!0),[s,n]=Object(c.useState)([]),[r,i]=Object(c.useState)(null),{isVisible:o=!1,activate:l=null,deactivate:u=null}=ns(),{isUnseen:d=null,resetCategory:h=null}=cs(),j=Object(c.useCallback)((e=>{const t=e.getParser();js||(js=new Array(t.totalFragments));const s=Qs(t.fragment,t.totalFragments,t.fragmentNumber,js);s&&(n((e=>{const t=[...e];return Ks(t,s,d),t})),js=null)}),[d]);it(a.pf,j);const b=Object(c.useCallback)((e=>{const t=e.getParser();n((e=>{const s=[...e];return Ys(t.pet,s,d(qs.PET,t.pet.id)),s}))}),[d]);it(a.mf,b);const g=Object(c.useCallback)((e=>{const t=e.getParser();n((e=>{const s=[...e];return zs(t.petId,s),s}))}),[]);return it(a.sf,g),Object(c.useEffect)((()=>{s&&s.length&&i((e=>{let t=e;return t&&-1===s.indexOf(t)&&(t=null),t||(t=s[0]),t}))}),[s]),Object(c.useEffect)((()=>{if(o)return()=>{h(qs.PET)}}),[o,h]),Object(c.useEffect)((()=>{o&&e&&($n(new a.Vf),t(!1))}),[o,e]),{petItems:s,selectedPet:r,setSelectedPet:i,activate:l,deactivate:u}},gs=()=>Object(ot.a)(bs),Os=()=>{const[e,t]=Object(c.useState)(null),[s,n]=Object(c.useState)(null),[r,i]=Object(c.useState)($s.TRADING_STATE_READY),{groupItems:o=[],setGroupItems:l=null,activate:u=null,deactivate:d=null}=hs(),h=r>=$s.TRADING_STATE_RUNNING,j=Object(c.useCallback)((r=>{const c=r.getParser();e&&s&&(e.userId===c.userID?t((e=>{const t=Xe(e);return t.accepts=c.userAccepts,t})):s.userId===c.userID&&n((e=>{const t=Xe(e);return t.accepts=c.userAccepts,t})))}),[e,s]);it(a.Vh,j);const b=Object(c.useCallback)((s=>{const r=s.getParser();r.reason===a.Zh.ERROR_WHILE_COMMIT?Zs(Js.ERROR_WHILE_COMMIT):e&&r.userID!==e.userId&&Zs(Js.THEY_CANCELLED),t(null),n(null),i($s.TRADING_STATE_READY)}),[e]);it(a.Yh,b);const g=Object(c.useCallback)((e=>{e.getParser();t(null),n(null),i($s.TRADING_STATE_READY)}),[]);it(a.ai,g);const O=Object(c.useCallback)((e=>{e.getParser();i($s.TRADING_STATE_COUNTDOWN)}),[]);it(a.ci,O);const m=Object(c.useCallback)((e=>{const s=e.getParser(),r=tn(s.firstUserItemArray),c=tn(s.secondUserItemArray);t((e=>{const t=Xe(e);t.userId===s.firstUserID?(t.creditsCount=s.firstUserNumCredits,t.itemCount=s.firstUserNumItems,t.userItems=r):(t.creditsCount=s.secondUserNumCredits,t.itemCount=s.secondUserNumItems,t.userItems=c);const n=[];for(const s of t.userItems.getValues()){let e=0;for(;e<s.getTotalCount();){const t=s.getItemByIndex(e);t&&n.push(t.ref),e++}}return l((e=>{const t=[...e];for(const s of t)s.lockItemIds(n);return t})),t})),n((e=>{const t=Xe(e);return t.userId===s.firstUserID?(t.creditsCount=s.firstUserNumCredits,t.itemCount=s.firstUserNumItems,t.userItems=r):(t.creditsCount=s.secondUserNumCredits,t.itemCount=s.secondUserNumItems,t.userItems=c),t}))}),[l]);it(a.fi,m);const p=Object(c.useCallback)((e=>{e.getParser()}),[]);it(a.hi,p);const _=Object(c.useCallback)((e=>{const s=e.getParser(),r=new Xs,c=ie().userDataManager.getUserData(s.userID);r.userItems=new a.g;const o=new Xs,l=ie().userDataManager.getUserData(s.otherUserID);o.userItems=new a.g,c.webID===ee().userId?(r.userId=c.webID,r.userName=c.name,r.canTrade=s.userCanTrade,o.userId=l.webID,o.userName=l.name,o.canTrade=s.otherUserCanTrade):l.webID===ee().userId&&(r.userId=l.webID,r.userName=l.name,r.canTrade=s.otherUserCanTrade,o.userId=c.webID,o.userName=c.name,o.canTrade=s.userCanTrade),t(r),n(o),i($s.TRADING_STATE_RUNNING)}),[]);it(a.ji,_);const E=Object(c.useCallback)((e=>{const t=e.getParser();Zs(t.reason,t.otherUserName)}),[]);it(a.ki,E);const f=Object(c.useCallback)((e=>{e.getParser();Zs(Js.THEY_NOT_ALLOWED)}),[]);it(a.li,f);const x=Object(c.useCallback)((e=>{e.getParser();Zs(Js.YOU_NOT_ALLOWED)}),[]);return it(a.ni,x),Object(c.useEffect)((()=>{if(r===$s.TRADING_STATE_READY)return;const e=u();return()=>d(e)}),[r,u,d]),{ownUser:e,otherUser:s,tradeState:r,setTradeState:i,isTrading:h,groupItems:o,progressTrade:()=>{switch(r){case $s.TRADING_STATE_RUNNING:return s.itemCount||e.accepts||Pr.simpleAlert(nt("inventory.trading.warning.other_not_offering"),null,null,null),void(e.accepts?$n(new a.mi):$n(new a.Uh));case $s.TRADING_STATE_CONFIRMING:return $n(new a.bi),void i($s.TRADING_STATE_CONFIRMED)}},removeItem:e=>{const t=e.getLastItem();t&&$n(new a.gi(t.id))},stopTrading:()=>{h&&(r!==$s.TRADING_STATE_RUNNING?$n(new a.Wh):$n(new a.Xh))}}},ms=()=>Object(ot.a)(Os),ps=()=>Object(c.useState)({settingsReceived:!1,homeRoomId:0,enteredGuestRoom:null,currentRoomOwner:!1,currentRoomId:0,currentRoomIsStaffPick:!1,createdFlatId:0,avatarId:0,roomPicker:!1,eventMod:!1,currentRoomRating:0,canRate:!0}),_s=()=>Object(ot.a)(ps),Es=()=>{const[e,t]=Object(c.useState)(new Mr),s=Object(c.useMemo)((()=>k("hc.disabled",!1)),[]),n=Object(c.useMemo)((()=>s||e.clubDays>0?Tr.ACTIVE:e.pastVipDays>0||e.pastVipDays>0?Tr.EXPIRED:Tr.NONE),[e,s]),r=Object(c.useCallback)((e=>{const s=e.getParser();t((e=>{const t=Xe(e);return t.credits=parseFloat(s.credits),e.credits!==t.credits&&Ns(an.CREDITS),t}))}),[]);it(a.yi,r);const i=Object(c.useCallback)((e=>{const s=e.getParser();t((e=>{const t=Xe(e);return t.activityPoints=s.currencies,t}))}),[]);it(a.Ai,i);const o=Object(c.useCallback)((e=>{const s=e.getParser();t((e=>{const t=Xe(e);return t.activityPoints=new Map(t.activityPoints),t.activityPoints.set(s.type,s.amount),0===s.type&&Ns(an.DUCKETS),t}))}),[]);it(a.f,o);const l=Object(c.useCallback)((e=>{const s=e.getParser(),n=s.productName;"club_habbo"!==n&&"habbo_club"!==n||t((e=>{const t=Xe(e);return t.clubDays=Math.max(0,s.daysToPeriodEnd),t.clubPeriods=Math.max(0,s.periodsSubscribedAhead),t.isVip=s.isVip,t.pastClubDays=s.pastClubDays,t.pastVipDays=s.pastVipDays,t.isExpiring=s.responseType===a.Si.RESPONSE_TYPE_DISCOUNT_AVAILABLE,t.minutesUntilExpiration=s.minutesUntilExpiration,t.minutesSinceLastModified=s.minutesSinceLastModified,t}))}),[]);return it(a.Ri,l),Object(c.useEffect)((()=>{if(s)return;$n(new a.Qi("habbo_club"));const e=setInterval((()=>$n(new a.Qi("habbo_club"))),5e4);return()=>clearInterval(e)}),[s]),Object(c.useEffect)((()=>{$n(new a.zi)}),[]),{purse:e,hcDisabled:s,clubStatus:n,getCurrencyAmount:t=>{if(-1===t)return e.credits;for(const[s,n]of e.activityPoints.entries())if(s===t)return n;return 0}}},fs=()=>Object(ot.a)(Es),xs=()=>{const[e,t]=Object(c.useState)([]),s=Object(c.useCallback)((s=>{e.indexOf(s)>=0||t([...e,s])}),[e]),n=Object(c.useCallback)((s=>{const n=e.indexOf(s);if(-1===n)return;const r=[...e];r.splice(n,1),t(r)}),[e]),r=Object(c.useCallback)(((e,t)=>{ie().sendDoorbellApprovalMessage(e,t),n(e)}),[n]),i=Object(c.useCallback)((e=>{switch(e.type){case a.Wg.DOORBELL:return void s(e.userName);case a.Wg.RSDE_REJECTED:case a.Wg.RSDE_ACCEPTED:return void n(e.userName)}}),[s,n]);return Gt(a.Wg.DOORBELL,i),Gt(a.Wg.RSDE_REJECTED,i),Gt(a.Wg.RSDE_ACCEPTED,i),{users:e,addUser:s,removeUser:n,answer:r}},Is=()=>{const[e,t]=Object(c.useState)(null),[s,n]=Object(c.useState)(null),r=Object(c.useCallback)((e=>{const s=e.getParser();t(s.userInfo),n(s.userInfo.figure)}),[]);it(a.Fi,r);const i=Object(c.useCallback)((e=>{const t=e.getParser();n(t.figure)}),[]);return it(a.zb,i),{userInfo:e,userFigure:s}},Ts=()=>Object(ot.a)(Is),Cs=e=>{return t=()=>e(),Object(c.useEffect)(t,[]);var t};let Ss=!1;const Ns=e=>{Ss&&Ft(new ct.a(ct.a.PLAY_SOUND,e))},vs=[a.Ce.MOUSE_CLICK];(()=>{const e=t=>(Ss=!0)&&vs.forEach((t=>window.removeEventListener(t,e)));vs.forEach((t=>window.addEventListener(t,e)))})();class Rs{}Rs.DEFAULT=1,Rs.WALL_PAPER=2,Rs.FLOOR=3,Rs.LANDSCAPE=4,Rs.POST_IT=5,Rs.POSTER=6,Rs.SOUND_SET=7,Rs.TRAX_SONG=8,Rs.PRESENT=9,Rs.ECOTRON_BOX=10,Rs.TROPHY=11,Rs.CREDIT_FURNI=12,Rs.PET_SHAMPOO=13,Rs.PET_CUSTOM_PART=14,Rs.PET_CUSTOM_PART_SHAMPOO=15,Rs.PET_SADDLE=16,Rs.GUILD_FURNI=17,Rs.GAME_FURNI=18,Rs.MONSTERPLANT_SEED=19,Rs.MONSTERPLANT_REVIVAL=20,Rs.MONSTERPLANT_REBREED=21,Rs.MONSTERPLANT_FERTILIZE=22,Rs.FIGURE_PURCHASABLE_SET=23;class As{constructor(e){this._expirationTimeStamp=void 0,this._isWallItem=void 0,this._songId=void 0,this._locked=void 0,this._id=void 0,this._ref=void 0,this._category=void 0,this._type=void 0,this._stuffData=void 0,this._extra=void 0,this._recyclable=void 0,this._tradeable=void 0,this._groupable=void 0,this._sellable=void 0,this._secondsToExpiration=void 0,this._hasRentPeriodStarted=void 0,this._creationDay=void 0,this._creationMonth=void 0,this._creationYear=void 0,this._slotId=void 0,this._isRented=void 0,this._flatId=void 0,e&&(this._locked=!1,this._id=e.itemId,this._type=e.spriteId,this._ref=e.ref,this._category=e.category,this._groupable=e.isGroupable&&!e.rentable,this._tradeable=e.tradable,this._recyclable=e.isRecycleable,this._sellable=e.sellable,this._stuffData=e.stuffData,this._extra=e.extra,this._secondsToExpiration=e.secondsToExpiration,this._expirationTimeStamp=e.expirationTimeStamp,this._hasRentPeriodStarted=e.hasRentPeriodStarted,this._creationDay=e.creationDay,this._creationMonth=e.creationMonth,this._creationYear=e.creationYear,this._slotId=e.slotId,this._songId=e.songId,this._flatId=e.flatId,this._isRented=e.rentable,this._isWallItem=e.isWallItem)}get rentable(){return this._isRented}get id(){return this._id}get ref(){return this._ref}get category(){return this._category}get type(){return this._type}get stuffData(){return this._stuffData}set stuffData(e){this._stuffData=e}get extra(){return this._extra}get recyclable(){return this._recyclable}get isTradable(){return this._tradeable}get isGroupable(){return this._groupable}get sellable(){return this._sellable}get secondsToExpiration(){if(-1===this._secondsToExpiration)return-1;let e=-1;return this._hasRentPeriodStarted?(e=this._secondsToExpiration-(C().time-this._expirationTimeStamp)/1e3,e<0&&(e=0)):e=this._secondsToExpiration,e}get creationDay(){return this._creationDay}get creationMonth(){return this._creationMonth}get creationYear(){return this._creationYear}get slotId(){return this._slotId}get songId(){return this._songId}get locked(){return this._locked}set locked(e){this._locked=e}get flatId(){return this._flatId}get isWallItem(){return this._isWallItem}get hasRentPeriodStarted(){return this._hasRentPeriodStarted}get expirationTimeStamp(){return this._expirationTimeStamp}update(e){this._type=e.spriteId,this._ref=e.ref,this._category=e.category,this._groupable=e.isGroupable&&!e.rentable,this._tradeable=e.tradable,this._recyclable=e.isRecycleable,this._sellable=e.sellable,this._stuffData=e.stuffData,this._extra=e.extra,this._secondsToExpiration=e.secondsToExpiration,this._expirationTimeStamp=e.expirationTimeStamp,this._hasRentPeriodStarted=e.hasRentPeriodStarted,this._creationDay=e.creationDay,this._creationMonth=e.creationMonth,this._creationYear=e.creationYear,this._slotId=e.slotId,this._songId=e.songId,this._flatId=e.flatId,this._isRented=e.rentable,this._isWallItem=e.isWallItem}clone(){const e=new As(null);return e._expirationTimeStamp=this._expirationTimeStamp,e._isWallItem=this._isWallItem,e._songId=this._songId,e._locked=this._locked,e._id=this._id,e._ref=this._ref,e._category=this._category,e._type=this._type,e._stuffData=this._stuffData,e._extra=this._extra,e._recyclable=this._recyclable,e._tradeable=this._tradeable,e._groupable=this._groupable,e._sellable=this._sellable,e._secondsToExpiration=this._secondsToExpiration,e._hasRentPeriodStarted=this._hasRentPeriodStarted,e._creationDay=this._creationDay,e._creationMonth=this._creationMonth,e._creationYear=this._creationYear,e._slotId=this._slotId,e._isRented=this._isRented,e._flatId=this._flatId,e}}class ys{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1;this._type=void 0,this._category=void 0,this._roomEngine=void 0,this._stuffData=void 0,this._extra=void 0,this._isWallItem=void 0,this._iconUrl=void 0,this._name=void 0,this._description=void 0,this._locked=void 0,this._selected=void 0,this._hasUnseenItems=void 0,this._items=void 0,this._type=e,this._category=t,this._roomEngine=s,this._stuffData=n,this._extra=r,this._isWallItem=!1,this._iconUrl=null,this._name=null,this._description=null,this._locked=!1,this._selected=!1,this._hasUnseenItems=!1,this._items=[]}clone(){const e=new ys;return e._type=this._type,e._category=this._category,e._roomEngine=this._roomEngine,e._stuffData=this._stuffData,e._extra=this._extra,e._isWallItem=this._isWallItem,e._iconUrl=this._iconUrl,e._name=this._name,e._description=this._description,e._locked=this._locked,e._selected=this._selected,e._hasUnseenItems=this._hasUnseenItems,e._items=this._items,e}prepareGroup(){this.setIcon(),this.setName(),this.setDescription()}dispose(){}getItemByIndex(e){return this._items[e]}getItemById(e){for(const t of this._items)if(t.id===e)return t;return null}getTradeItems(e){const t=[],s=this.getLastItem();if(!s)return t;let n=0,r=0;for(;r<this._items.length&&!(n>=e);){const e=this.getItemByIndex(r);!e.locked&&e.isTradable&&e.type===s.type&&(t.push(e),n++),r++}return t}push(e){const t=[...this._items];let s=0;for(;s<t.length;){let n=t[s];if(n.id===e.id)return n=n.clone(),n.locked=!1,t.splice(s,1),t.push(n),void(this._items=t);s++}t.push(e),this._items=t,1===this._items.length&&this.prepareGroup()}pop(){const e=[...this._items];let t=null;if(e.length>0){const s=e.length-1;t=e[s],e.splice(s,1)}return this._items=e,t}remove(e){const t=[...this._items];let s=0;for(;s<t.length;){let n=t[s];if(n.id===e)return t.splice(s,1),this._items=t,n;s++}return null}getTotalCount(){if(this._category===Rs.POST_IT){let e=0,t=0;for(;t<this._items.length;){const s=this.getItemByIndex(t);e+=parseInt(s.stuffData.getLegacyString()),t++}return e}return this._items.length}getUnlockedCount(){if(this.category===Rs.POST_IT)return this.getTotalCount();let e=0,t=0;for(;t<this._items.length;){this.getItemByIndex(t).locked||e++,t++}return e}getLastItem(){if(!this._items.length)return null;return this.getItemByIndex(this._items.length-1)}unlockAllItems(){const e=[...this._items];let t=0;for(;t<e.length;){const s=e[t];if(s.locked){const n=s.clone();n.locked=!1,e[t]=n}t++}this._items=e}lockItemIds(e){const t=[...this._items];let s=0,n=!1;for(;s<t.length;){const r=t[s],c=e.indexOf(r.ref)>=0;if(r.locked!==c){n=!0;const e=r.clone();e.locked=c,t[s]=e}s++}return this._items=t,n}setName(){const e=this.getLastItem();if(!e)return void(this._name="");let t="";switch(this._category){case Rs.POSTER:t="poster_"+e.stuffData.getLegacyString()+"_name";break;case Rs.TRAX_SONG:return void(this._name="SONG_NAME");default:t=this.isWallItem?"wallItem.name."+e.type:"roomItem.name."+e.type}this._name=nt(t)}setDescription(){this._description=""}setIcon(){if(this._iconUrl)return;let e=null;e=this.isWallItem?this._roomEngine.getFurnitureWallIconUrl(this._type,this._stuffData.getLegacyString()):this._roomEngine.getFurnitureFloorIconUrl(this._type),e&&(this._iconUrl=e)}get type(){return this._type}get category(){return this._category}get stuffData(){return this._stuffData}get extra(){return this._extra}get iconUrl(){return this._iconUrl}get name(){return this._name}get description(){return this._description}get hasUnseenItems(){return this._hasUnseenItems}set hasUnseenItems(e){this._hasUnseenItems=e}get locked(){return this._locked}set locked(e){this._locked=e}get selected(){return this._selected}set selected(e){this._selected=e}get isWallItem(){const e=this.getItemByIndex(0);return!!e&&e.isWallItem}get isGroupable(){const e=this.getItemByIndex(0);return!!e&&e.isGroupable}get isSellable(){const e=this.getItemByIndex(0);return!!e&&e.sellable}get items(){return this._items}set items(e){this._items=e}}const ws=function(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:NaN;return new ys(e,t,L(),s,n)},ks=(e,t,s)=>{t.isGroupable?((e,t,s)=>{let n=null;for(const r of e)if(r.type===t.type&&r.isWallItem===t.isWallItem&&r.isGroupable)if(t.category===Rs.POSTER){if(r.stuffData.getLegacyString()===t.stuffData.getLegacyString()){n=r;break}}else{if(t.category!==Rs.GUILD_FURNI){n=r;break}if(t.stuffData.compare(r.stuffData)){n=r;break}}if(n){if(n.push(t),s){n.hasUnseenItems=!0;const t=e.indexOf(n);t>=0&&e.splice(t,1),e.unshift(n)}return n}n=ws(t.type,t.category,t.stuffData,t.extra),n.push(t),s?(n.hasUnseenItems=!0,e.unshift(n)):e.push(n)})(e,t,s):((e,t,s)=>{const n=[];for(const c of e)c.type===t.type&&n.push(c);for(const c of n)if(c.getItemById(t.id))return c;const r=ws(t.type,t.category,t.stuffData,t.extra);r.push(t),s?(r.hasUnseenItems=!0,e.unshift(r)):e.push(r)})(e,t,s)},Ds=(e,t,s,n)=>{if(1===t)return e;n[s]=e;for(const c of n)if(!c)return null;const r=new Map;for(const c of n){for(const[e,t]of c)r.set(e,t);c.clear()}return n=null,r},Us=e=>{const t=[];for(const s of e){let e=s.getTotalCount();s.category===Rs.POST_IT&&(e=1);let n=0;for(;n<e;)t.push(s.getItemByIndex(n).id),n++}return t};let Ps=!1,Ms=-1;const Ls=e=>Ps=e,Fs=()=>Ms,Hs=e=>Ms=e,Bs=()=>{-1!==Fs()&&(L().cancelRoomObjectPlacement(),Hs(-1),Ls(!1))},Gs=function(e){const t=e.petData;if(!t)return!1;const s=$().getSession(1);return!!s&&(!(!s.isRoomOwner&&!s.allowPets)&&(y("inventory/hide"),L().processRoomObjectPlacement(a.Lg.INVENTORY,-t.id,a.Ig.UNIT,a.Mg.PET,t.figureData.figuredata)&&(Hs(t.id),Ls(!0)),!0))},Ws=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e||!e.getUnlockedCount())return!1;const s=e.getLastItem();if(!s)return!1;if(s.category===Rs.FLOOR||s.category===Rs.WALL_PAPER||s.category===Rs.LANDSCAPE)return t||$n(new a.Wb(s.id)),!1;{y("inventory/hide");let e=0,t=!1;e=s.isWallItem?a.Ig.WALL:a.Ig.FLOOR,t=s.category===Rs.POSTER?L().processRoomObjectPlacement(a.Lg.INVENTORY,s.id,e,s.type,s.stuffData.getLegacyString()):L().processRoomObjectPlacement(a.Lg.INVENTORY,s.id,e,s.type,s.extra.toString(),s.stuffData),t&&(Hs(s.ref),Ls(!0))}return!0},Vs=function(e){const t=e.botData;if(!t)return!1;const s=$().getSession(1);return!(!s||!s.isRoomOwner)&&(y("inventory/hide"),L().processRoomObjectPlacement(a.Lg.INVENTORY,-t.id,a.Ig.UNIT,a.Mg.RENTABLE_BOT,t.figure)&&(Hs(t.id),Ls(!0)),!0)};class qs{}qs.FURNI=1,qs.RENTABLE=2,qs.PET=3,qs.BADGE=4,qs.BOT=5,qs.GAMES=6;const Ys=function(e,t){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const n={petData:e};return s?t.unshift(n):t.push(n),n},zs=(e,t)=>{let s=0;for(;s<t.length;){const n=t[s];if(n&&n.petData.id===e)return Fs()===n.petData.id&&(Bs(),y("inventory/open")),t.splice(s,1),n;s++}return null},Ks=(e,t,s)=>{const n=e.map((e=>e.petData.id));const r=[],c=[];for(const i of t.keys())-1===n.indexOf(i)&&r.push(i);for(const i of n)!t.get(i)&&c.push(i);n.length;for(const i of c)zs(i,e);for(const i of r){const n=t.get(i);n&&Ys(n,e,s(qs.PET,n.id))}return e},Qs=(e,t,s,n)=>{if(1===t)return e;n[s]=e;for(const c of n)if(!c)return null;const r=new Map;for(const c of n){for(const[e,t]of c)r.set(e,t);c.clear()}return n=null,r};class $s{}$s.TRADING_STATE_READY=0,$s.TRADING_STATE_RUNNING=1,$s.TRADING_STATE_COUNTDOWN=2,$s.TRADING_STATE_CONFIRMING=3,$s.TRADING_STATE_CONFIRMED=4,$s.TRADING_STATE_COMPLETED=5,$s.TRADING_STATE_CANCELLED=6;class Xs{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new a.g,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,c=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=arguments.length>6&&void 0!==arguments[6]&&arguments[6];this.userId=e,this.userName=t,this.userItems=s,this.itemCount=n,this.creditsCount=r,this.accepts=c,this.canTrade=i}}class Js{}Js.ALERT_SCAM=0,Js.HOTEL_TRADING_DISABLED=1,Js.YOU_NOT_ALLOWED=2,Js.THEY_NOT_ALLOWED=4,Js.ROOM_DISABLED=6,Js.YOU_OPEN=7,Js.THEY_OPEN=8,Js.ERROR_WHILE_COMMIT=9,Js.THEY_CANCELLED=10;const Zs=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";switch(e){case Js.ALERT_SCAM:return void Pr.simpleAlert(nt("inventory.trading.warning.other_not_offering"),null,null,null,nt("inventory.trading.notification.title"));case Js.HOTEL_TRADING_DISABLED:case Js.YOU_NOT_ALLOWED:case Js.THEY_NOT_ALLOWED:case Js.ROOM_DISABLED:case Js.YOU_OPEN:case Js.THEY_OPEN:return void Pr.simpleAlert(nt(`inventory.trading.openfail.${e}`,["otherusername"],[t]),null,null,null,nt("inventory.trading.openfail.title"));case Js.ERROR_WHILE_COMMIT:return void Pr.simpleAlert(`${nt("inventory.trading.notification.caption")}, ${nt("inventory.trading.notification.commiterror.info")}`,null,null,null,nt("inventory.trading.notification.title"));case Js.THEY_CANCELLED:return void Pr.simpleAlert(nt("inventory.trading.info.closed"),null,null,null,nt("inventory.trading.notification.title"))}},en=e=>{var t;return(null===(t=ee().getWallItemData(e))||void 0===t?void 0:t.isExternalImage)||!1},tn=e=>{const t=new a.g;if(e.length)for(const s of e){const e=s.spriteId,n=s.category;let r=s.furniType+e;s.isGroupable&&!en(e)||(r="itemid"+s.itemId),s.category===Rs.POSTER?r=s.itemId+"poster"+s.stuffData.getLegacyString():s.category===Rs.GUILD_FURNI&&(r="");let c=s.isGroupable&&!en(s.spriteId)?t.getValue(r):null;c||(c=ws(e,n,s.stuffData),t.add(r,c)),c.push(new As(s))}return t};class sn{static getProductImageUrl(e,t,s){let n=null;switch(e){case a.W.S:n=L().getFurnitureFloorIconUrl(t);break;case a.W.I:const e=this.getProductCategory(a.W.I,t);if(1===e)n=L().getFurnitureWallIconUrl(t,s);else switch(e){case Rs.WALL_PAPER:case Rs.LANDSCAPE:case Rs.FLOOR:}case a.W.E:}return n}static getProductCategory(e,t){if(e===a.W.S)return 1;if(e===a.W.I){if(3001===t)return Rs.WALL_PAPER;if(3002===t)return Rs.FLOOR;if(4057===t)return Rs.LANDSCAPE}return 1}}class nn{static getRandomNumber(e){return Math.floor(Math.random()*e)}static getRandomElement(e){return e[this.getRandomNumber(e.length)]}static getRandomElements(e,t){const s=new Array(t);let n=e.length;const r=new Array(n);for(;t--;){var c=this.getRandomNumber(n);s[t]=e[c in r?r[c]:c],r[c]=--n in r?r[n]:n}return s}}var rn=s(81);const cn=new Map;cn.set("r","red"),cn.set("b","blue"),cn.set("g","green"),cn.set("y","yellow"),cn.set("w","white"),cn.set("o","orange"),cn.set("c","cyan"),cn.set("br","brown"),cn.set("pr","purple"),cn.set("pk","pink"),cn.set("red","red"),cn.set("blue","blue"),cn.set("green","green"),cn.set("yellow","yellow"),cn.set("white","white"),cn.set("orange","orange"),cn.set("cyan","cyan"),cn.set("brown","brown"),cn.set("purple","purple"),cn.set("pink","pink");class an{}an.CAMERA_SHUTTER="camera_shutter",an.CREDITS="credits",an.DUCKETS="duckets",an.MESSENGER_NEW_THREAD="messenger_new_thread",an.MESSENGER_MESSAGE_RECEIVED="messenger_message_received",an.MODTOOLS_NEW_TICKET="modtools_new_ticket";class on{constructor(e){this._type=void 0,this._type=e}get type(){return this._type}}class ln extends on{constructor(e){super(ln.AVATAR_EXPRESSION),this._animation=void 0,this._animation=e}get animation(){return this._animation}}ln.AVATAR_EXPRESSION="RWAEM_MESSAGE_AVATAR_EXPRESSION";class un extends on{constructor(e){super(un.CHANGE_MOTTO),this._motto=void 0,this._motto=e}get motto(){return this._motto}}un.CHANGE_MOTTO="RWCMM_CHANGE_MOTTO";class dn extends on{constructor(e){super(dn.CHANGE_POSTURE),this._posture=void 0,this._posture=e}get posture(){return this._posture}}dn.CHANGE_POSTURE="RWCPM_MESSAGE_CHANGE_POSTURE",dn.POSTURE_STAND=0,dn.POSTURE_SIT=1;class hn extends on{constructor(e,t,s,n,r){super(e),this._chatType=void 0,this._text=void 0,this._recipientName=void 0,this._styleId=void 0,this._text=t,this._chatType=s,this._recipientName=n,this._styleId=r}get text(){return this._text}get chatType(){return this._chatType}get recipientName(){return this._recipientName}get styleId(){return this._styleId}}hn.MESSAGE_CHAT="RWCM_MESSAGE_CHAT",hn.CHAT_DEFAULT=0,hn.CHAT_WHISPER=1,hn.CHAT_SHOUT=2;class jn extends on{constructor(e,t,s,n){super(e),this._objectId=void 0,this._userName=void 0,this._roomId=void 0,this._objectId=t,this._userName=s,this._roomId=n}get objectId(){return this._objectId}get userName(){return this._userName}get roomId(){return this._roomId}}jn.MESSAGE_SELECT_AVATAR="RWCSAM_MESSAGE_SELECT_AVATAR";class bn extends on{constructor(e){super(bn.TYPING_STATUS),this._isTyping=void 0,this._isTyping=e}get isTyping(){return this._isTyping}}bn.TYPING_STATUS="RWCTM_TYPING_STATUS";class gn extends on{constructor(e,t){super(e),this._objectId=void 0,this._objectId=t}get objectId(){return this._objectId}}gn.REDEEM="RWCFRM_REDEEM";class On extends on{constructor(e){super(On.DANCE),this._style=0,this._style=e}get style(){return this._style}}On.DANCE="RWDM_MESSAGE_DANCE",On.NORMAL_STYLE=0,On.CLUB_STYLE=[2,3,4];class mn extends on{constructor(){super(mn.CHANGE_STATE)}}mn.CHANGE_STATE="RWCDSM_CHANGE_STATE";class pn extends on{constructor(e,t,s){super(pn.PREVIEW_DIMMER_PRESET),this._color=void 0,this._brightness=void 0,this._bgOnly=void 0,this._color=e,this._brightness=t,this._bgOnly=s}get color(){return this._color}get brightness(){return this._brightness}get bgOnly(){return this._bgOnly}}pn.PREVIEW_DIMMER_PRESET="RWDPM_PREVIEW_DIMMER_PRESET";class _n extends on{constructor(e,t,s,n,r){super(_n.SAVE_PRESET),this._presetNumber=void 0,this._effectTypeId=void 0,this._color=void 0,this._brightness=void 0,this._apply=void 0,this._presetNumber=e,this._effectTypeId=t,this._color=s,this._brightness=n,this._apply=r}get presetNumber(){return this._presetNumber}get effectTypeId(){return this._effectTypeId}get color(){return this._color}get brightness(){return this._brightness}get apply(){return this._apply}}_n.SAVE_PRESET="RWSDPM_SAVE_PRESET";class En extends on{constructor(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;super(e),this._furniId=void 0,this._furniCategory=void 0,this._offerId=void 0,this._objectData=void 0,this._furniId=t,this._furniCategory=s,this._offerId=n,this._objectData=r}get furniId(){return this._furniId}get furniCategory(){return this._furniCategory}get objectData(){return this._objectData}get offerId(){return this._offerId}}En.ROTATE="RWFAM_ROTATE",En.MOVE="RWFAM_MOVE",En.PICKUP="RWFAM_PICKUP",En.EJECT="RWFAM_EJECT",En.USE="RWFAM_USE",En.OPEN_WELCOME_GIFT="RWFAM_OPEN_WELCOME_GIFT",En.SAVE_STUFF_DATA="RWFAM_SAVE_STUFF_DATA";class fn extends on{constructor(e,t,s,n){super(e),this._objectId=void 0,this._category=void 0,this._roomId=void 0,this._objectId=t,this._category=s,this._roomId=n}get objectId(){return this._objectId}get category(){return this._category}get roomId(){return this._roomId}}fn.REQUEST_CREDITFURNI="RWFWM_MESSAGE_REQUEST_CREDITFURNI",fn.REQUEST_STICKIE="RWFWM_MESSAGE_REQUEST_STICKIE",fn.REQUEST_PRESENT="RWFWM_MESSAGE_REQUEST_PRESENT",fn.REQUEST_TROPHY="RWFWM_MESSAGE_REQUEST_TROPHY",fn.REQUEST_TEASER="RWFWM_MESSAGE_REQUEST_TEASER",fn.REQUEST_ECOTRONBOX="RWFWM_MESSAGE_REQUEST_ECOTRONBOX",fn.REQUEST_DIMMER="RWFWM_MESSAGE_REQUEST_DIMMER",fn.REQUEST_PLACEHOLDER="RWFWM_MESSAGE_REQUEST_PLACEHOLDER",fn.REQUEST_CLOTHING_CHANGE="RWFWM_MESSAGE_REQUEST_CLOTHING_CHANGE",fn.REQUEST_PLAYLIST_EDITOR="RWFWM_MESSAGE_REQUEST_PLAYLIST_EDITOR",fn.REQUEST_ACHIEVEMENT_RESOLUTION_ENGRAVING="RWFWM_WIDGET_MESSAGE_REQUEST_ACHIEVEMENT_RESOLUTION_ENGRAVING",fn.REQUEST_ACHIEVEMENT_RESOLUTION_FAILED="RWFWM_WIDGET_MESSAGE_REQUEST_ACHIEVEMENT_RESOLUTION_FAILED",fn.REQUEST_BADGE_DISPLAY_ENGRAVING="RWFWM_WIDGET_MESSAGE_REQUEST_BADGE_DISPLAY_ENGRAVING";class xn extends on{constructor(e,t){super(e),this._id=-1,this._questionId=0,this._answers=null,this._id=t}get id(){return this._id}get questionId(){return this._questionId}set questionId(e){this._questionId=e}get answers(){return this._answers}set answers(e){this._answers=e}}xn.START="RWPM_START",xn.REJECT="RWPM_REJECT",xn.ANSWER="RWPM_ANSWER";class In extends on{constructor(e,t){super(e),this._objectId=void 0,this._objectId=t}get objectId(){return this._objectId}}In.OPEN_PRESENT="RWPOM_OPEN_PRESENT";class Tn extends on{}Tn.USER_CHOOSER="RWRWM_USER_CHOOSER",Tn.FURNI_CHOOSER="RWRWM_FURNI_CHOOSER",Tn.ME_MENU="RWRWM_ME_MENU",Tn.EFFECTS="RWRWM_EFFECTS",Tn.FLOOR_EDITOR="RWRWM_FLOOR_EDITOR";class Cn extends on{constructor(e,t,s){super(e),this._id=void 0,this._category=void 0,this._id=t,this._category=s}get id(){return this._id}get category(){return this._category}}Cn.GET_OBJECT_INFO="RWROM_GET_OBJECT_INFO",Cn.GET_OBJECT_NAME="RWROM_GET_OBJECT_NAME",Cn.SELECT_OBJECT="RWROM_SELECT_OBJECT",Cn.GET_OWN_CHARACTER_INFO="RWROM_GET_OWN_CHARACTER_INFO",Cn.GET_AVATAR_LIST="RWROM_GET_AVATAR_LIST";class Sn extends on{constructor(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;super(e),this._objectId=void 0,this._petId=void 0,this._objectId=t,this._petId=s}get objectId(){return this._objectId}get petId(){return this._petId}}Sn.PET_PRODUCT="RWUPM_PET_PRODUCT",Sn.MONSTERPLANT_SEED="RWUPM_MONSTERPLANT_SEED";class Nn extends on{constructor(e,t){super(e),this._userId=void 0,this._userId=t}get userId(){return this._userId}}Nn.WHISPER_USER="RWUAM_WHISPER_USER",Nn.IGNORE_USER="RWUAM_IGNORE_USER",Nn.IGNORE_USER_BUBBLE="RWUAM_IGNORE_USER_BUBBLE",Nn.UNIGNORE_USER="RWUAM_UNIGNORE_USER",Nn.KICK_USER="RWUAM_KICK_USER",Nn.BAN_USER_HOUR="RWUAM_BAN_USER_HOUR",Nn.BAN_USER_DAY="RWUAM_BAN_USER_DAY",Nn.BAN_USER_PERM="RWUAM_BAN_USER_PERM",Nn.MUTE_USER_2MIN="RWUAM_MUTE_USER_2MIN",Nn.MUTE_USER_5MIN="RWUAM_MUTE_USER_5MIN",Nn.MUTE_USER_10MIN="RWUAM_MUTE_USER_10MIN",Nn.RESPECT_USER="RWUAM_RESPECT_USER",Nn.GIVE_RIGHTS="RWUAM_GIVE_RIGHTS",Nn.TAKE_RIGHTS="RWUAM_TAKE_RIGHTS",Nn.START_TRADING="RWUAM_START_TRADING",Nn.OPEN_HOME_PAGE="RWUAM_OPEN_HOME_PAGE",Nn.REPORT="RWUAM_REPORT",Nn.PICKUP_PET="RWUAM_PICKUP_PET",Nn.MOUNT_PET="RWUAM_MOUNT_PET",Nn.TOGGLE_PET_RIDING_PERMISSION="RWUAM_TOGGLE_PET_RIDING_PERMISSION",Nn.TOGGLE_PET_BREEDING_PERMISSION="RWUAM_TOGGLE_PET_BREEDING_PERMISSION",Nn.DISMOUNT_PET="RWUAM_DISMOUNT_PET",Nn.SADDLE_OFF="RWUAM_SADDLE_OFF",Nn.TRAIN_PET="RWUAM_TRAIN_PET",Nn.RESPECT_PET=" RWUAM_RESPECT_PET",Nn.TREAT_PET="RWUAM_TREAT_PET",Nn.REQUEST_PET_UPDATE="RWUAM_REQUEST_PET_UPDATE",Nn.START_NAME_CHANGE="RWUAM_START_NAME_CHANGE",Nn.PASS_CARRY_ITEM="RWUAM_PASS_CARRY_ITEM",Nn.DROP_CARRY_ITEM="RWUAM_DROP_CARRY_ITEM",Nn.GIVE_CARRY_ITEM_TO_PET="RWUAM_GIVE_CARRY_ITEM_TO_PET",Nn.GIVE_WATER_TO_PET="RWUAM_GIVE_WATER_TO_PET",Nn.GIVE_LIGHT_TO_PET="RWUAM_GIVE_LIGHT_TO_PET",Nn.REQUEST_BREED_PET="RWUAM_REQUEST_BREED_PET",Nn.HARVEST_PET="RWUAM_HARVEST_PET",Nn.REVIVE_PET="RWUAM_REVIVE_PET",Nn.COMPOST_PLANT="RWUAM_COMPOST_PLANT",Nn.GET_BOT_INFO="RWUAM_GET_BOT_INFO",Nn.REPORT_CFH_OTHER="RWUAM_REPORT_CFH_OTHER",Nn.AMBASSADOR_ALERT_USER="RWUAM_AMBASSADOR_ALERT_USER",Nn.AMBASSADOR_KICK_USER="RWUAM_AMBASSADOR_KICK_USER",Nn.AMBASSADOR_MUTE_USER_2MIN="RWUAM_AMBASSADOR_MUTE_2MIN",Nn.AMBASSADOR_MUTE_USER_10MIN="RWUAM_AMBASSADOR_MUTE_10MIN",Nn.AMBASSADOR_MUTE_USER_60MIN="RWUAM_AMBASSADOR_MUTE_60MIN",Nn.AMBASSADOR_MUTE_USER_18HOUR="RWUAM_AMBASSADOR_MUTE_18HOUR",Nn.RELATIONSHIP_NONE="RWUAM_RELATIONSHIP_NONE",Nn.RELATIONSHIP_HEART="RWUAM_RELATIONSHIP_HEART",Nn.RELATIONSHIP_SMILE="RWUAM_RELATIONSHIP_SMILE",Nn.RELATIONSHIP_BOBBA="RWUAM_RELATIONSHIP_BOBBA";class vn{constructor(){this._container=null}get container(){return this._container}set container(e){this._container=e}}class Rn extends vn{processEvent(e){}processWidgetMessage(e){if(!e)return null;switch(e.type){case Tn.FURNI_CHOOSER:this.processChooser();break;case Cn.SELECT_OBJECT:this.selectRoomObject(e)}return null}processChooser(){const e=this.container.roomSession.roomId,t=[],s=L().getRoomObjects(e,a.Ig.WALL),n=L().getRoomObjects(e,a.Ig.FLOOR);s.forEach((e=>{let s=e.type;if(s.startsWith("poster"))s=nt(`poster_${s.replace("poster","")}_name`);else{const t=e.model.getValue(a.Og.FURNITURE_TYPE_ID),n=ee().getWallItemData(t);n&&n.name.length&&(s=n.name)}t.push(new pe(e.id,a.Ig.WALL,s))})),n.forEach((e=>{let s=e.type;const n=e.model.getValue(a.Og.FURNITURE_TYPE_ID),r=ee().getFloorItemData(n);r&&r.name.length&&(s=r.name),t.push(new pe(e.id,a.Ig.FLOOR,s))})),t.sort(((e,t)=>e.name<t.name?-1:1)),this.container.eventDispatcher.dispatchEvent(new fe(fe.FURNI_CHOOSER_CONTENT,t))}selectRoomObject(e){e.category!==a.Ig.WALL&&e.category!==a.Ig.FLOOR||L().selectRoomObject(this.container.roomSession.roomId,e.id,e.category)}get type(){return a.yh.FURNI_CHOOSER}get eventTypes(){return[]}get messageTypes(){return[Tn.FURNI_CHOOSER,Cn.SELECT_OBJECT]}}class An extends vn{processEvent(e){}processWidgetMessage(e){if(e.type===Sn.MONSTERPLANT_SEED){const t=e;this.container.roomSession.useMultistateItem(t.objectId)}return null}get type(){return a.yh.FURNITURE_CONTEXT_MENU}get eventTypes(){return[a.sg.OPEN_FURNI_CONTEXT_MENU,a.sg.CLOSE_FURNI_CONTEXT_MENU]}get messageTypes(){return[Sn.MONSTERPLANT_SEED]}}class yn extends vn{processEvent(e){}processWidgetMessage(e){switch(e.type){case fn.REQUEST_CREDITFURNI:{const t=e,s=L().getRoomObject(t.roomId,t.objectId,t.category);if(!s||!K(s))return;this.container.eventDispatcher.dispatchEvent(new ve(ve.CREDIT_FURNI_UPDATE,t.objectId,s.model.getValue(a.Og.FURNITURE_CREDIT_VALUE),s.model.getValue(a.Og.FURNITURE_TYPE_ID)+"_"+t.type+"_"+t.objectId));break}case gn.REDEEM:{const t=e;this.container.roomSession.connection.send(new a.Mb(t.objectId));break}}return null}get type(){return a.yh.FURNI_CREDIT_WIDGET}get eventTypes(){return[]}get messageTypes(){return[fn.REQUEST_CREDITFURNI,gn.REDEEM]}}class wn extends vn{constructor(){super(...arguments),this._lastFurniId=-1}processEvent(e){switch(e.type){case a.sg.OPEN_WIDGET:{const t=e,s=L().getRoomObject(t.roomId,t.objectId,t.category);if(!s)return;return this._lastFurniId=t.objectId,void this.container.eventDispatcher.dispatchEvent(new Re(this._lastFurniId,s.getLocation().z))}case a.sg.CLOSE_WIDGET:if(e.objectId!==this._lastFurniId)return;return void this.container.eventDispatcher.dispatchEvent(new Re(-1))}}processWidgetMessage(e){return e.type,null}get type(){return a.yh.CUSTOM_STACK_HEIGHT}get eventTypes(){return[]}get messageTypes(){return[]}}class kn extends vn{processEvent(e){switch(e.type){case a.Vg.ROOM_DIMMER_PRESETS:{const t=e,s=new we(we.PRESETS);s.selectedPresetId=t.selectedPresetId;let n=0;for(;n<t.presetCount;){const e=t.getPreset(n);e&&s.setPresetValues(e.id,e.type,e.color,e.brightness),n++}return void this.container.eventDispatcher.dispatchEvent(s)}case a.ng.ROOM_COLOR:{const t=e;return void this.container.eventDispatcher.dispatchEvent(new ke(t.state,t.presetId,t.effectId,t.color,t.brightness))}case a.sg.REMOVE_DIMMER:return void this.container.eventDispatcher.dispatchEvent(new we(we.HIDE))}}processWidgetMessage(e){switch(e.type){case fn.REQUEST_DIMMER:this.canOpenWidget()&&this.container.roomSession.requestMoodlightSettings();break;case _n.SAVE_PRESET:if(this.canOpenWidget()){const t=e;this.container.roomSession.updateMoodlightData(t.presetNumber,t.effectTypeId,t.color,t.brightness,t.apply)}break;case mn.CHANGE_STATE:this.canOpenWidget()&&this.container.roomSession.toggleMoodlightState();break;case pn.PREVIEW_DIMMER_PRESET:{const t=this.container.roomSession.roomId,s=e;L().updateObjectRoomColor(t,s.color,s.brightness,s.bgOnly);break}}return null}canOpenWidget(){return this.container.roomSession.isRoomOwner||this.container.roomSession.controllerLevel>=a.eg.GUEST||ee().isModerator}get type(){return a.yh.ROOM_DIMMER}get eventTypes(){return[a.Vg.ROOM_DIMMER_PRESETS,a.ng.ROOM_COLOR,a.sg.REMOVE_DIMMER]}get messageTypes(){return[fn.REQUEST_DIMMER,_n.SAVE_PRESET,mn.CHANGE_STATE,pn.PREVIEW_DIMMER_PRESET]}}class Dn extends vn{constructor(){super(...arguments),this._lastFurniId=-1}processEvent(e){switch(e.type){case a.sg.OPEN_WIDGET:{const t=e,s=L().getRoomObject(t.roomId,t.objectId,t.category);if(!s)return;this._lastFurniId=t.objectId;const n=s.model.getValue(a.Og.FURNITURE_DATA),r=JSON.parse(n);return void this.container.eventDispatcher.dispatchEvent(new De(s.id,r))}case a.sg.CLOSE_WIDGET:if(e.objectId!==this._lastFurniId)return;return void this.container.eventDispatcher.dispatchEvent(new De(-1))}}processWidgetMessage(e){return e.type,null}get type(){return a.yh.EXTERNAL_IMAGE}get eventTypes(){return[]}get messageTypes(){return[]}}class Un extends vn{processEvent(e){if(e&&e.type===a.sg.REQUEST_INTERNAL_LINK){const t=e,s=L();if(!t||!s)return;const n=s.getRoomObject(t.roomId,t.objectId,t.category);if(n){let e=n.model.getValue(a.Og.FURNITURE_DATA)[Un.INTERNALLINK];e&&e.length||(e=n.model.getValue(a.Og.FURNITURE_INTERNAL_LINK)),e&&e.length&&y(e)}}}processWidgetMessage(e){return null}get type(){return a.yh.INTERNAL_LINK}get eventTypes(){return[a.sg.REQUEST_INTERNAL_LINK]}get messageTypes(){return[]}}Un.INTERNALLINK="internalLink";class Pn extends vn{processEvent(e){if(e.type!==a.sg.REQUEST_MANNEQUIN);else{const t=e,s=L().getRoomObject(t.roomId,t.objectId,t.category);if(!s)return;const n=s.model,r=n.getValue(a.Og.FURNITURE_MANNEQUIN_FIGURE),c=n.getValue(a.Og.FURNITURE_MANNEQUIN_GENDER),i=n.getValue(a.Og.FURNITURE_MANNEQUIN_NAME);this.container.eventDispatcher.dispatchEvent(new He(He.MANNEQUIN_UPDATE,s.id,r,c,i))}}processWidgetMessage(e){return e.type,null}get type(){return a.yh.MANNEQUIN}get eventTypes(){return[a.sg.REQUEST_MANNEQUIN]}get messageTypes(){return[]}}class Mn extends vn{constructor(){super(...arguments),this._lastFurniId=-1,this._name=null}processEvent(e){if(e.type!==a.dh.RSPE_PRESENT_OPENED);else{const t=e;let s=null;t.itemType===er.FLOOR?s=ee().getFloorItemData(t.classId):t.itemType===er.WALL&&(s=ee().getWallItemData(t.classId));let n=!1;if(t.placedInRoom){const e=L().getRoomObject(this.container.roomSession.roomId,t.placedItemId,a.Ig.FLOOR);e&&(n=K(e))}let r=null,c=null;switch(t.itemType){case er.WALL:if(s)switch(s.className){case Mn.FLOOR:c=new Be(Be.CONTENTS_FLOOR,0,nt("inventory.furni.item.floor.name"),n);break;case Mn.LANDSCAPE:c=new Be(Be.CONTENTS_LANDSCAPE,0,nt("inventory.furni.item.landscape.name"),n);break;case Mn.WALLPAPER:c=new Be(Be.CONTENTS_WALLPAPER,0,nt("inventory.furni.item.wallpaper.name"),n);break;case Mn.POSTER:{const e=t.productCode;let i=null;0===e.indexOf("poster")&&(i=e.replace("poster","")),r=L().getFurnitureWallIconUrl(t.classId,i);const a=ee().getProductData(e);a?this._name=a.name:s&&(this._name=s.name),c=new Be(Be.CONTENTS,0,this._name,n,r);break}default:r=L().getFurnitureWallIconUrl(t.classId),s&&(this._name=s.name),c=new Be(Be.CONTENTS,0,this._name,n,r)}break;case er.HABBO_CLUB:c=new Be(Be.CONTENTS_CLUB,0,nt("widget.furni.present.hc"),!1);break;default:{if(t.placedItemType===er.PET){const e=t.petFigureString;if(e&&e.length){const t=new a.of(e),s=L().getRoomObjectPetImage(t.typeId,t.paletteId,t.color,new a.Ui(90),64,this,!0,0,t.customParts);s&&(r=s.getImage().src)}}if(!r){const e=L().getFurnitureFloorImage(t.classId,new a.Ui(90),64,this);e&&(r=e.getImage().src)}const e=ee().getProductData(t.productCode);this._name=e?e.name:s.name,r&&(c=new Be(Be.CONTENTS,0,this._name,n,r));break}}c&&(c.classId=t.classId,c.itemType=t.itemType,c.placedItemId=t.placedItemId,c.placedInRoom=t.placedInRoom,c.placedItemType=t.placedItemType,this.container.eventDispatcher.dispatchEvent(c))}}processWidgetMessage(e){switch(e.type){case fn.REQUEST_PRESENT:{const t=e,s=L().getRoomObject(t.roomId,t.objectId,t.category);if(!s)return null;this._lastFurniId=t.objectId;const n=s.model.getValue(a.Og.FURNITURE_DATA)||"",r=s.model.getValue(a.Og.FURNITURE_PURCHASER_NAME),c=s.model.getValue(a.Og.FURNITURE_PURCHASER_FIGURE),i=s.model.getValue(a.Og.FURNITURE_TYPE_ID),o=s.model.getValue(a.Og.FURNITURE_EXTRAS),l=L().getFurnitureFloorImage(i,new a.Ui(180),64,null,0,o);this.container.eventDispatcher.dispatchEvent(new Be(Be.PACKAGEINFO,t.objectId,n,K(s),l.getImage().src,r,c));break}case In.OPEN_PRESENT:{const t=e;if(t.objectId!==this._lastFurniId)return null;this.container.roomSession.openGift(t.objectId),L().changeObjectModelData(L().activeRoomId,t.objectId,a.Ig.FLOOR,a.Og.FURNITURE_DISABLE_PICKING_ANIMATION,1);break}}return null}imageReady(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=null;s?n=s.src:t&&(n=a.Sh.generateImageUrl(t)),this.container.eventDispatcher.dispatchEvent(new Be(Be.CONTENTS_IMAGE,0,this._name,!1,n))}imageFailed(e){}get type(){return a.yh.FURNI_PRESENT_WIDGET}get eventTypes(){return[a.dh.RSPE_PRESENT_OPENED]}get messageTypes(){return[fn.REQUEST_PRESENT,In.OPEN_PRESENT]}}Mn.FLOOR="floor",Mn.WALLPAPER="wallpaper",Mn.LANDSCAPE="landscape",Mn.POSTER="poster";class Ln extends vn{onRoomInfo(e){}processEvent(e){if(e&&e.type===a.sg.REQUEST_ROOM_LINK){const t=e,s=L();if(!t||!s)return;const n=s.getRoomObject(t.roomId,t.objectId,t.category);if(n){let e=n.model.getValue(a.Og.FURNITURE_DATA)[Ln.INTERNALLINK];e&&e.length||(e=n.model.getValue(a.Og.FURNITURE_INTERNAL_LINK)),e&&e.length&&y("navigator/goto/"+e)}}}processWidgetMessage(e){return null}get type(){return a.yh.ROOM_LINK}get eventTypes(){return[a.sg.REQUEST_ROOM_LINK]}get messageTypes(){return[]}}Ln.INTERNALLINK="internalLink";class Fn extends vn{constructor(){super(...arguments),this._lastFurniId=-1}processEvent(e){switch(e.type){case a.sg.OPEN_WIDGET:{const t=e,s=L().getRoomObject(t.roomId,t.objectId,t.category);if(!s)return;this._lastFurniId=t.objectId;const n=ee().hasSecurity(a.Hh.EMPLOYEE)||K(s);return this.container.eventDispatcher.dispatchEvent(new ze(s.id,n)),void $n(new a.Dc(this._lastFurniId))}case a.sg.CLOSE_WIDGET:if(e.objectId!==this._lastFurniId)return;return void this.container.eventDispatcher.dispatchEvent(new ze(-1))}}processWidgetMessage(e){return e.type,null}get type(){return a.yh.YOUTUBE}get eventTypes(){return[]}get messageTypes(){return[]}}Fn.CONTROL_COMMAND_PREVIOUS_VIDEO=0,Fn.CONTROL_COMMAND_NEXT_VIDEO=1,Fn.CONTROL_COMMAND_PAUSE_VIDEO=2,Fn.CONTROL_COMMAND_CONTINUE_VIDEO=3;class Hn extends vn{processEvent(e){const t=e;let s;switch(e.type){case a.ch.OFFER:s=new Te(Te.OFFER,t.id),s.summary=t.summary,s.headline=t.headline;break;case a.ch.ERROR:s=new Te(Te.ERROR,t.id),s.summary=t.summary,s.headline=t.headline;break;case a.ch.CONTENT:s=new Te(Te.CONTENT,t.id),s.startMessage=t.startMessage,s.endMessage=t.endMessage,s.numQuestions=t.numQuestions,s.questionArray=t.questionArray,s.npsPoll=t.npsPoll}s&&this.container.eventDispatcher.dispatchEvent(s)}processWidgetMessage(e){const t=e;switch(e.type){case xn.START:this.container.roomSession.sendPollStartMessage(t.id);break;case xn.REJECT:this.container.roomSession.sendPollRejectMessage(t.id);break;case xn.ANSWER:this.container.roomSession.sendPollAnswerMessage(t.id,t.questionId,t.answers)}return null}get type(){return a.yh.ROOM_POLL}get eventTypes(){return[a.ch.OFFER,a.ch.ERROR,a.ch.CONTENT]}get messageTypes(){return[xn.ANSWER,xn.REJECT,xn.START]}}class Bn{constructor(){this.id=-1,this.name=null,this.gender=0,this.online=!1,this.followingAllowed=!1,this.figure=null,this.categoryId=0,this.motto=null,this.realName=null,this.lastAccess=null,this.persistedMessageUser=!1,this.vipMember=!1,this.pocketHabboUser=!1,this.relationshipStatus=-1,this.unread=0}populate(e){this.id=e.id,this.name=e.name,this.gender=e.gender,this.online=e.online,this.followingAllowed=e.followingAllowed,this.figure=e.figure,this.categoryId=e.categoryId,this.motto=e.motto,this.realName=e.realName,this.lastAccess=e.lastAccess,this.persistedMessageUser=e.persistedMessageUser,this.vipMember=e.vipMember,this.pocketHabboUser=e.pocketHabboUser,this.relationshipStatus=e.relationshipStatus}}Bn.RELATIONSHIP_NONE=0,Bn.RELATIONSHIP_HEART=1,Bn.RELATIONSHIP_SMILE=2,Bn.RELATIONSHIP_BOBBA=3;class Gn extends vn{processEvent(e){switch(e.type){case a.fh.USER_DATA_UPDATED:return void this.container.eventDispatcher.dispatchEvent(new Ye);case a.Ug.RSDE_DANCE:const t=e;let s=!1;const n=this.container.roomSession.userDataManager.getUserData(ee().userId);return n&&n.roomIndex===t.roomIndex&&(s=0!==t.danceId),void this.container.eventDispatcher.dispatchEvent(new Ae(s));case a.tg.USE_PRODUCT_FROM_INVENTORY:return;case a.tg.USE_PRODUCT_FROM_ROOM:return void this.processUsableRoomObject(e.objectId);case a.bh.PET_STATUS_UPDATE:return void this.processRoomSessionPetStatusUpdateEvent(e)}}processWidgetMessage(e){let t=0;switch(e instanceof Nn&&(t=e.userId),e.type){case Cn.GET_OWN_CHARACTER_INFO:this.processOwnCharacterInfo();break;case Nn.START_NAME_CHANGE:case Nn.REQUEST_PET_UPDATE:break;case Sn.PET_PRODUCT:{const t=e;this.container.roomSession.usePetProduct(t.objectId,t.petId);break}case Nn.HARVEST_PET:this.container.roomSession.harvestPet(t);break;case Nn.COMPOST_PLANT:this.container.roomSession.compostPlant(t);break;case On.DANCE:{const t=e;this.container.roomSession.sendDanceMessage(t.style);break}case ln.AVATAR_EXPRESSION:{const t=e;this.container.roomSession.sendExpressionMessage(t.animation.ordinal);break}case dn.CHANGE_POSTURE:{const t=e;this.container.roomSession.sendPostureMessage(t.posture);break}case Nn.RELATIONSHIP_NONE:$n(new a.Oh(t,Bn.RELATIONSHIP_NONE));break;case Nn.RELATIONSHIP_HEART:$n(new a.Oh(t,Bn.RELATIONSHIP_HEART));break;case Nn.RELATIONSHIP_SMILE:$n(new a.Oh(t,Bn.RELATIONSHIP_SMILE));break;case Nn.RELATIONSHIP_BOBBA:$n(new a.Oh(t,Bn.RELATIONSHIP_BOBBA))}return null}processOwnCharacterInfo(){const e=ee().userId,t=ee().userName,s=ee().canChangeName,n=this.container.roomSession.userDataManager.getUserData(e);n&&this.container.eventDispatcher.dispatchEvent(new Ee(e,t,n.type,n.roomIndex,s))}processUsableRoomObject(e){const t=this.container.roomSession.roomId,s=L().getRoomObject(t,e,a.Ig.FLOOR);if(!s||!K(s))return;const n=s.model.getValue(a.Og.FURNITURE_OWNER_ID),r=s.model.getValue(a.Og.FURNITURE_TYPE_ID),c=ee().getFloorItemData(r),i=c.customParams.split(" "),o=i.length?parseInt(i[0]):-1;-1!==o&&this.processUseableProduct(t,e,o,c.specialType,n)}processUseableProduct(e,t,s,n,r){let c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:-1;const i=[],o=L().getRoomObjects(e,a.Ig.UNIT);for(const l of o){const e=this.container.roomSession.userDataManager.getUserDataByIndex(l.id);let o=!1;if(e&&e.type===a.Mg.PET){if(e.ownerId===r){e.hasSaddle&&n===Rs.PET_SADDLE&&(o=!0);const r=e.figure.split(" ");if((r.length?parseInt(r[0]):-1)===s){if(n===Rs.MONSTERPLANT_REVIVAL&&!e.canRevive)continue;if(n===Rs.MONSTERPLANT_REBREED&&(e.petLevel<7||e.canRevive||e.canBreed))continue;if(n===Rs.MONSTERPLANT_FERTILIZE&&(e.petLevel>=7||e.canRevive))continue;i.push(new $e(e.roomIndex,a.Ig.UNIT,e.name,t,l.id,c,o))}}}else;}i.length&&this.container.eventDispatcher.dispatchEvent(new Ke(Ke.USE_PRODUCT_BUBBLES,i))}processRoomSessionPetStatusUpdateEvent(e){}get type(){return a.yh.AVATAR_INFO}get eventTypes(){return[a.fh.USER_DATA_UPDATED,a.Ug.RSDE_DANCE,a.tg.USE_PRODUCT_FROM_INVENTORY,a.tg.USE_PRODUCT_FROM_ROOM,a.bh.PET_STATUS_UPDATE]}get messageTypes(){return[Cn.GET_OWN_CHARACTER_INFO,Nn.START_NAME_CHANGE,Nn.REQUEST_PET_UPDATE,Sn.PET_PRODUCT,Nn.REQUEST_BREED_PET,Nn.HARVEST_PET,Nn.REVIVE_PET,Nn.COMPOST_PLANT,On.DANCE,ln.AVATAR_EXPRESSION,dn.CHANGE_POSTURE,Nn.RELATIONSHIP_NONE,Nn.RELATIONSHIP_HEART,Nn.RELATIONSHIP_SMILE,Nn.RELATIONSHIP_BOBBA]}}class Wn extends vn{constructor(){super(...arguments),this._avatarColorCache=new Map,this._avatarImageCache=new Map,this._petImageCache=new Map}processEvent(e){if(e.type!==a.Tg.CHAT_EVENT);else{const t=e,s=L().getRoomObject(t.session.roomId,t.objectId,a.Ig.UNIT),n=(s?s.getLocation():new a.Ui,je(t.session.roomId,null===s||void 0===s?void 0:s.id,a.Ig.UNIT)),r=s?this.container.roomSession.userDataManager.getUserDataByIndex(t.objectId):new a.th(-1);let c="",i=0,o=null,l=t.chatType,u=t.style,d=0,h=-1,j=t.message;if(r){d=r.type;const e=r.figure;switch(d){case a.Mg.PET:o=this.getPetImage(e,2,!0,64,s.model.getValue(a.Og.FIGURE_POSTURE)),h=new a.of(e).typeId;break;case a.Mg.USER:o=this.getUserImage(e);break;case a.Mg.RENTABLE_BOT:case a.Mg.BOT:u=a.Rh.BOT}i=this._avatarColorCache.get(e),c=r.name}switch(l){case a.Tg.CHAT_TYPE_RESPECT:j=nt("widgets.chatbubble.respect",["username"],[c]),ur().getValue("respect.options").enabled&&Ns(ur().getValue("respect.options").sound);break;case a.Tg.CHAT_TYPE_PETREVIVE:case a.Tg.CHAT_TYPE_PET_REBREED_FERTILIZE:case a.Tg.CHAT_TYPE_PET_SPEED_FERTILIZE:{let e="widget.chatbubble.petrevived";l===a.Tg.CHAT_TYPE_PET_REBREED_FERTILIZE?e="widget.chatbubble.petrefertilized;":l===a.Tg.CHAT_TYPE_PET_SPEED_FERTILIZE&&(e="widget.chatbubble.petspeedfertilized");let n=null;if(L().getRoomObject(t.session.roomId,t.extraParam,a.Ig.UNIT)){const e=this.container.roomSession.userDataManager.getUserDataByIndex(s.id);e&&(n=e.name)}j=nt(e,["petName","userName"],[c,n]);break}case a.Tg.CHAT_TYPE_PETRESPECT:j=nt("widget.chatbubble.petrespect",["petname"],[c]);break;case a.Tg.CHAT_TYPE_PETTREAT:j=nt("widget.chatbubble.pettreat",["petname"],[c]);break;case a.Tg.CHAT_TYPE_HAND_ITEM_RECEIVED:j=nt("widget.chatbubble.handitem",["username","handitem"],[c,nt("handitem"+t.extraParam)]);break;case a.Tg.CHAT_TYPE_MUTE_REMAINING:j=nt("widget.chatbubble.mutetime",["hours","minutes","seconds"],[(t.extraParam>0?Math.floor(t.extraParam/3600):0).toString(),(t.extraParam>0?Math.floor(t.extraParam%3600/60):0).toString(),(t.extraParam%60).toString()]);break}this.container.eventDispatcher.dispatchEvent(new Se(Se.CHAT_EVENT,r.roomIndex,j,c,a.Ig.UNIT,d,h,n.x,n.y,o,i,t.session.roomId,l,u,[]))}}processWidgetMessage(e){return null}getUserImage(e){let t=this._avatarImageCache.get(e);return t||(t=this.setFigureImage(e)),t}setFigureImage(e){const t=N().createAvatarImage(e,a.q.LARGE,null,this);if(!t)return;const s=t.getCroppedImage(a.r.HEAD),n=t.getPartColor(a.p.CHEST);return this._avatarColorCache.set(e,n&&n.rgb||16777215),t.dispose(),this._avatarImageCache.set(e,s.src),s.src}getPetImage(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,c=this._petImageCache.get(e+r);if(c)return c;const i=new a.of(e),o=i.typeId,l=L().getRoomObjectPetImage(o,i.paletteId,i.color,new a.Ui(45*t),n,null,!1,0,i.customParts,r);return l&&(c=a.Sh.generateImageUrl(l.data),this._petImageCache.set(e+r,c)),c}resetFigure(e){this.setFigureImage(e)}dispose(){}get disposed(){return!1}get type(){return a.yh.CHAT_WIDGET}get eventTypes(){return[a.Tg.CHAT_EVENT]}get messageTypes(){return[]}}class Vn extends vn{processEvent(e){if(e.type===a.Tg.FLOOD_EVENT){const t=e;this.container.eventDispatcher.dispatchEvent(new xe(parseInt(t.message)))}}processWidgetMessage(e){switch(e.type){case bn.TYPING_STATUS:{const t=e;this.container.roomSession.sendChatTypingMessage(t.isTyping);break}case hn.MESSAGE_CHAT:{const t=e;if(""===t.text)return null;let s=t.text;const n=s.split(" ");if(n.length>0){const e=n[0];let r="";if(n.length>1&&(r=n[1]),":"===e.charAt(0)&&"x"===r){const e=L().selectedAvatarId;if(e>-1){const n=this.container.roomSession.userDataManager.getUserDataByIndex(e);n&&(r=n.name,s=t.text.replace(" x"," "+n.name))}}switch(e.toLowerCase()){case":shake":return a.lh.init(2500,5e3),a.lh.turnVisualizationOn(),null;case":rotate":return a.Rg.init(2500,5e3),a.Rg.turnVisualizationOn(),null;case":d":case";d":te()===a.Ed.VIP&&this.container.roomSession.sendExpressionMessage(a.n.LAUGH.ordinal);break;case"o/":case"_o/":return this.container.roomSession.sendExpressionMessage(a.n.WAVE.ordinal),null;case":kiss":if(te()===a.Ed.VIP)return this.container.roomSession.sendExpressionMessage(a.n.BLOW.ordinal),null;break;case":jump":if(te()===a.Ed.VIP)return this.container.roomSession.sendExpressionMessage(a.n.JUMP.ordinal),null;break;case":idle":return this.container.roomSession.sendExpressionMessage(a.n.IDLE.ordinal),null;case"_b":return this.container.roomSession.sendExpressionMessage(a.n.RESPECT.ordinal),null;case":sign":return this.container.roomSession.sendSignMessage(parseInt(r)),null;case":iddqd":case":flip":return L().events.dispatchEvent(new a.Bh(this.container.roomSession.roomId,-1,!0)),null;case":zoom":return L().events.dispatchEvent(new a.Bh(this.container.roomSession.roomId,parseFloat(r),!1)),null;case":screenshot":const e=L().createTextureFromRoom(this.container.roomSession.roomId,1),t=new Image;t.src=a.Sh.generateImageUrl(e);return window.open("").document.write(t.outerHTML),null;case":pickall":return(this.container.roomSession.isRoomOwner||ee().isModerator)&&Pr.confirm(nt("room.confirm.pick_all"),(()=>{ee().sendSpecialCommandMessage(":pickall")}),null,null,null,nt("generic.alert.title")),null;case":furni":return this.container.processWidgetMessage(new Tn(Tn.FURNI_CHOOSER)),null;case":chooser":return this.container.processWidgetMessage(new Tn(Tn.USER_CHOOSER)),null;case":floor":case":bcfloor":return this.container.roomSession.controllerLevel>=a.eg.ROOM_OWNER&&y("floor-editor/show"),null;case":togglefps":return C().ticker.maxFPS>0?C().ticker.maxFPS=0:C().ticker.maxFPS=k("system.animation.fps"),null;case":client":case":nitro":case":billsonnn":return Pr.showNitroAlert(),null;case":settings":return(this.container.roomSession.isRoomOwner||ee().isModerator)&&$n(new a.ih(this.container.roomSession.roomId)),null}}const r=t.styleId;if(this.container&&this.container.roomSession)switch(t.chatType){case hn.CHAT_DEFAULT:this.container.roomSession.sendChatMessage(s,r);break;case hn.CHAT_SHOUT:this.container.roomSession.sendShoutMessage(s,r);break;case hn.CHAT_WHISPER:this.container.roomSession.sendWhisperMessage(t.recipientName,s,r)}break}case jn.MESSAGE_SELECT_AVATAR:{const t=e;L().setSelectedAvatar(t.roomId,t.objectId);break}}return null}get type(){return a.yh.CHAT_INPUT_WIDGET}get eventTypes(){return[a.Tg.FLOOD_EVENT]}get messageTypes(){return[bn.TYPING_STATUS,hn.MESSAGE_CHAT,jn.MESSAGE_SELECT_AVATAR]}}class qn{constructor(e,t){this._roomSession=void 0,this._eventDispatcher=void 0,this._handlers=[],this._eventMap=new Map,this._messageMap=new Map,this._roomSession=e,this._eventDispatcher=t}registerHandler(e){const t=e.eventTypes;if(t.push(a.sg.OPEN_WIDGET,a.sg.CLOSE_WIDGET),t&&t.length)for(const n of t){if(!n)continue;let t=this._eventMap.get(n);t||(t=[],this._eventMap.set(n,t)),t.push(e)}const s=e.messageTypes;if(s&&s.length)for(const n of s){if(!n)continue;let t=this._messageMap.get(n);t||(t=[],this._messageMap.set(n,t)),t.push(e)}e.container=this,this._handlers.push(e)}processEvent(e){const t=this._eventMap.get(e.type);if(!t||!t.length)return null;for(const s of t){if(!s)continue;let t=!0;e.type!==a.sg.OPEN_WIDGET&&e.type!==a.sg.CLOSE_WIDGET||e instanceof a.sg&&(t=s.type===e.widget),t&&s.processEvent(e)}}processWidgetMessage(e){const t=this._messageMap.get(e.type);if(!t||!t.length)return null;for(const s of t){if(!s)continue;const t=s.processWidgetMessage(e);if(t)return t}return null}get roomSession(){return this._roomSession}get eventDispatcher(){return this._eventDispatcher}}class Yn{}Yn.WATER=0,Yn.LIGHT=1;class zn extends vn{processEvent(e){switch(e.type){case a.ah.PET_INFO:return void this.processPetInfoEvent(e);case a.eh.RSUBE_BADGES:case a.gh.USER_FIGURE:case a.Zg.FAVOURITE_GROUP_UPDATE:return void this.container.eventDispatcher.dispatchEvent(e)}}processWidgetMessage(e){let t=0,s=null,n=0,r=0;if(e instanceof Nn){t=e.userId;if(s=[Nn.REQUEST_PET_UPDATE,Nn.RESPECT_PET,Nn.PICKUP_PET,Nn.MOUNT_PET,Nn.TOGGLE_PET_RIDING_PERMISSION,Nn.TOGGLE_PET_BREEDING_PERMISSION,Nn.DISMOUNT_PET,Nn.SADDLE_OFF,Nn.GIVE_CARRY_ITEM_TO_PET,Nn.GIVE_WATER_TO_PET,Nn.GIVE_LIGHT_TO_PET,Nn.TREAT_PET].indexOf(e.type)>=0?this.container.roomSession.userDataManager.getPetData(t):this.container.roomSession.userDataManager.getUserData(t),!s)return null}else e instanceof En&&(n=e.furniId,r=e.furniCategory);switch(e.type){case Cn.GET_OBJECT_NAME:return this.processObjectNameMessage(e);case Cn.GET_OBJECT_INFO:return this.processObjectInfoMessage(e);case Nn.RESPECT_USER:ee().giveRespect(t);break;case Nn.RESPECT_PET:ee().givePetRespect(t);break;case Nn.WHISPER_USER:this.container.eventDispatcher.dispatchEvent(new Ne(Ne.WHISPER,s.name));break;case Nn.IGNORE_USER:ee().ignoreUser(s.name);break;case Nn.UNIGNORE_USER:ee().unignoreUser(s.name);break;case Nn.KICK_USER:this.container.roomSession.sendKickMessage(e.userId);break;case Nn.BAN_USER_DAY:case Nn.BAN_USER_HOUR:case Nn.BAN_USER_PERM:this.container.roomSession.sendBanMessage(e.userId,e.type);break;case Nn.MUTE_USER_2MIN:this.container.roomSession.sendMuteMessage(e.userId,2);break;case Nn.MUTE_USER_5MIN:this.container.roomSession.sendMuteMessage(e.userId,5);break;case Nn.MUTE_USER_10MIN:this.container.roomSession.sendMuteMessage(e.userId,10);break;case Nn.GIVE_RIGHTS:this.container.roomSession.sendGiveRightsMessage(e.userId);break;case Nn.TAKE_RIGHTS:this.container.roomSession.sendTakeRightsMessage(e.userId);break;case Nn.START_TRADING:$n(new a.ii(s.roomIndex));break;case Nn.PICKUP_PET:this.container.roomSession.pickupPet(t);break;case Nn.MOUNT_PET:this.container.roomSession.mountPet(t);break;case Nn.TOGGLE_PET_RIDING_PERMISSION:this.container.roomSession.togglePetRiding(t);break;case Nn.TOGGLE_PET_BREEDING_PERMISSION:this.container.roomSession.togglePetBreeding(t);break;case Nn.DISMOUNT_PET:this.container.roomSession.dismountPet(t);break;case Nn.SADDLE_OFF:this.container.roomSession.removePetSaddle(t);break;case Nn.PASS_CARRY_ITEM:$n(new a.rh(t));break;case Nn.GIVE_CARRY_ITEM_TO_PET:$n(new a.sh(t));break;case Nn.GIVE_WATER_TO_PET:$n(new a.uf(t,Yn.WATER));break;case Nn.GIVE_LIGHT_TO_PET:$n(new a.uf(t,Yn.LIGHT));break;case Nn.TREAT_PET:$n(new a.tf(t));break;case Nn.DROP_CARRY_ITEM:$n(new a.qh);break;case Nn.REQUEST_PET_UPDATE:return void this.container.roomSession.userDataManager.requestPetInfo(t);case Nn.REPORT:return;case Nn.REPORT_CFH_OTHER:return void Vt(new ft(t));case Nn.AMBASSADOR_ALERT_USER:return void this.container.roomSession.sendAmbassadorAlertMessage(t);case Nn.AMBASSADOR_KICK_USER:return void this.container.roomSession.sendKickMessage(t);case Nn.AMBASSADOR_MUTE_USER_2MIN:return void this.container.roomSession.sendMuteMessage(t,2);case Nn.AMBASSADOR_MUTE_USER_10MIN:return void this.container.roomSession.sendMuteMessage(t,10);case Nn.AMBASSADOR_MUTE_USER_60MIN:return void this.container.roomSession.sendMuteMessage(t,60);case Nn.AMBASSADOR_MUTE_USER_18HOUR:return void this.container.roomSession.sendMuteMessage(t,1080);case En.ROTATE:return void L().processRoomObjectOperation(n,r,a.Kg.OBJECT_ROTATE_POSITIVE);case En.MOVE:return void L().processRoomObjectOperation(n,r,a.Kg.OBJECT_MOVE);case En.PICKUP:return void L().processRoomObjectOperation(n,r,a.Kg.OBJECT_PICKUP);case En.EJECT:return void L().processRoomObjectOperation(n,r,a.Kg.OBJECT_EJECT);case En.USE:return void L().useRoomObject(n,r);case En.SAVE_STUFF_DATA:{const t=e;if(!t.objectData)return;const s=new Map,c=t.objectData.split("\t");if(c)for(const e of c){const[t,n]=e.split("=",2);s.set(t,n)}return void L().modifyRoomObjectDataWithMap(n,r,a.Kg.OBJECT_SAVE_STUFF_DATA,s)}case un.CHANGE_MOTTO:return void this.container.roomSession.sendMottoMessage(e.motto)}return null}processObjectNameMessage(e){let t=-1,s=null,n=0;switch(e.category){case a.Ig.FLOOR:case a.Ig.WALL:{const n=L().getRoomObject(this.container.roomSession.roomId,e.id,e.category);if(!n)break;if(0===n.type.indexOf("poster"))s=nt("${poster_"+parseInt(n.type.replace("poster",""))+"_name}");else{let r=null;const c=n.model.getValue(a.Og.FURNITURE_TYPE_ID);if(e.category===a.Ig.FLOOR?r=ee().getFloorItemData(c):e.category===a.Ig.WALL&&(r=ee().getWallItemData(c)),!r)break;t=r.id,s=r.name}break}case a.Ig.UNIT:{const r=this.container.roomSession.userDataManager.getUserDataByIndex(e.id);if(!r)break;t=r.webID,s=r.name,n=r.type;break}}return s&&this.container.eventDispatcher.dispatchEvent(new Ie(Ie.TYPE,e.id,e.category,t,s,n)),null}processObjectInfoMessage(e){const t=this.container.roomSession.roomId;switch(e.category){case a.Ig.FLOOR:case a.Ig.WALL:this.processFurniInfoMessage(e,t);break;case a.Ig.UNIT:{const s=this.container.roomSession.userDataManager.getUserDataByIndex(e.id);if(!s)break;switch(s.type){case a.Mg.PET:this.container.roomSession.userDataManager.requestPetInfo(s.webID);break;case a.Mg.USER:this.processUserInfoMessage(e,t,s);break;case a.Mg.BOT:this.processBotInfoMessage(e,t,s);break;case a.Mg.RENTABLE_BOT:this.processRentableBotInfoMessage(e,t,s)}}}return null}processFurniInfoMessage(e,t){const s=new Pe(Pe.FURNI);s.id=e.id,s.category=e.category;const n=L().getRoomObject(t,e.id,e.category);if(!n)return;const r=n.model;r.getValue(a.zh.INFOSTAND_EXTRA_PARAM)&&(s.extraParam=r.getValue(a.zh.INFOSTAND_EXTRA_PARAM));const c=r.getValue(a.Og.FURNITURE_DATA_FORMAT),i=a.gf.getData(c);i.initializeFromRoomObjectModel(r),s.stuffData=i;const o=n.type;if(0===o.indexOf("poster")){const e=parseInt(o.replace("poster",""));s.name=nt("${poster_"+e+"_name}"),s.description=nt("${poster_"+e+"_desc}")}else{const t=r.getValue(a.Og.FURNITURE_TYPE_ID);let n=null;e.category===a.Ig.FLOOR?n=ee().getFloorItemData(t):e.category===a.Ig.WALL&&(n=ee().getWallItemData(t)),n&&(s.name=n.name,s.description=n.description,s.purchaseOfferId=n.purchaseOfferId,s.purchaseCouldBeUsedForBuyout=n.purchaseCouldBeUsedForBuyout,s.rentOfferId=n.rentOfferId,s.rentCouldBeUsedForBuyout=n.rentCouldBeUsedForBuyout,s.availableForBuildersClub=n.availableForBuildersClub,s.tileSizeX=n.tileSizeX,s.tileSizeY=n.tileSizeY,Vt(new Ut(s.id,s.category)))}o.indexOf("post_it")>-1&&(s.isStickie=!0);const l=r.getValue(a.Og.FURNITURE_EXPIRY_TIME),u=r.getValue(a.Og.FURNITURE_EXPIRTY_TIMESTAMP);s.expiration=l<0?l:Math.max(0,l-(C().time-u)/1e3);let d=L().getRoomObjectImage(t,e.id,e.category,new a.Ui(180),64,null);(!d.data||d.data.width>140||d.data.height>200)&&(d=L().getRoomObjectImage(t,e.id,e.category,new a.Ui(180),1,null)),s.image=d.getImage(),s.isWallItem=e.category===a.Ig.WALL,s.isRoomOwner=this.container.roomSession.isRoomOwner,s.roomControllerLevel=this.container.roomSession.controllerLevel,s.isAnyRoomController=ee().isModerator,s.ownerId=r.getValue(a.Og.FURNITURE_OWNER_ID),s.ownerName=r.getValue(a.Og.FURNITURE_OWNER_NAME),s.usagePolicy=r.getValue(a.Og.FURNITURE_USAGE_POLICY);const h=r.getValue(a.Og.FURNITURE_GUILD_CUSTOMIZED_GUILD_ID);0!==h&&(s.groupId=h),K(n)&&(s.isOwner=!0),this.container.eventDispatcher.dispatchEvent(s)}processUserInfoMessage(e,t,s){let n=Fe.OWN_USER;s.webID!==ee().userId&&(n=Fe.PEER);const r=new Fe(n);r.isSpectatorMode=this.container.roomSession.isSpectator,r.name=s.name,r.motto=s.custom,r.achievementScore=s.activityPoints,r.webID=s.webID,r.roomIndex=s.roomIndex,r.userType=a.Mg.USER;const c=L().getRoomObject(t,s.roomIndex,e.category);if(c&&(r.carryItem=c.model.getValue(a.Og.FIGURE_CARRY_OBJECT)||0),n===Fe.OWN_USER&&(r.allowNameChange=ee().canChangeName),r.amIOwner=this.container.roomSession.isRoomOwner,r.isGuildRoom=this.container.roomSession.isGuildRoom,r.roomControllerLevel=this.container.roomSession.controllerLevel,r.amIAnyRoomController=ee().isModerator,r.isAmbassador=ee().isAmbassador,n===Fe.PEER){if(c){const e=c.model.getValue(a.Og.FIGURE_FLAT_CONTROL);null!==e&&(r.targetRoomControllerLevel=e),r.canBeMuted=this.canBeMuted(r),r.canBeKicked=this.canBeKicked(r),r.canBeBanned=this.canBeBanned(r)}r.isIgnored=ee().isUserIgnored(s.name),r.respectLeft=ee().respectsLeft;const e=ee().isSystemShutdown,t=this.container.roomSession.tradeMode;if(e)r.canTrade=!1;else switch(t){case a.oh.ROOM_CONTROLLER_REQUIRED:{const e=r.roomControllerLevel!==a.eg.NONE&&r.roomControllerLevel!==a.eg.GUILD_MEMBER,t=r.targetRoomControllerLevel!==a.eg.NONE&&r.targetRoomControllerLevel!==a.eg.GUILD_MEMBER;r.canTrade=e||t;break}case a.oh.NO_TRADING:r.canTrade=!0;break;default:r.canTrade=!1}r.canTradeReason=Fe.TRADE_REASON_OK,e&&(r.canTradeReason=Fe.TRADE_REASON_SHUTDOWN),t!==a.oh.FREE_TRADING&&(r.canTradeReason=Fe.TRADE_REASON_NO_TRADING)}r.groupId=s.groupId,r.groupBadgeId=ee().getGroupBadge(r.groupId),r.groupName=s.groupName,r.badges=this.container.roomSession.userDataManager.getUserBadges(s.webID),r.figure=s.figure,this.container.eventDispatcher.dispatchEvent(r)}processBotInfoMessage(e,t,s){const n=new Fe(Fe.BOT);n.name=s.name,n.motto=s.custom,n.webID=s.webID,n.roomIndex=s.roomIndex,n.userType=s.type;const r=L().getRoomObject(t,s.roomIndex,e.category);r&&(n.carryItem=r.model.getValue(a.Og.FIGURE_CARRY_OBJECT)||0),n.amIOwner=this.container.roomSession.isRoomOwner,n.isGuildRoom=this.container.roomSession.isGuildRoom,n.roomControllerLevel=this.container.roomSession.controllerLevel,n.amIAnyRoomController=ee().isModerator,n.isAmbassador=ee().isAmbassador,n.badges=[Fe.DEFAULT_BOT_BADGE_ID],n.figure=s.figure,this.container.eventDispatcher.dispatchEvent(n)}processRentableBotInfoMessage(e,t,s){const n=new Le(Le.RENTABLE_BOT);n.name=s.name,n.motto=s.custom,n.webID=s.webID,n.roomIndex=s.roomIndex,n.ownerId=s.ownerId,n.ownerName=s.ownerName,n.botSkills=s.botSkills;const r=L().getRoomObject(t,s.roomIndex,e.category);r&&(n.carryItem=r.model.getValue(a.Og.FIGURE_CARRY_OBJECT)||0),n.amIOwner=this.container.roomSession.isRoomOwner,n.roomControllerLevel=this.container.roomSession.controllerLevel,n.amIAnyRoomController=ee().isModerator,n.badges=[Fe.DEFAULT_BOT_BADGE_ID],n.figure=s.figure,this.container.eventDispatcher.dispatchEvent(n)}processPetInfoEvent(e){const t=e.petInfo;if(!t)return;const s=this.container.roomSession.userDataManager.getPetData(t.id);if(!s)return;const n=new a.of(s.figure);let r=null;n.typeId===a.vf.MONSTERPLANT&&(r=t.level>=t.adultLevel?"std":"grw"+t.level);const c=t.ownerId===ee().userId,i=new Me(Me.PET_INFO);i.name=s.name,i.id=t.id,i.ownerId=t.ownerId,i.ownerName=t.ownerName,i.rarityLevel=t.rarityLevel,i.petType=n.typeId,i.petBreed=n.paletteId,i.petFigure=s.figure,i.posture=r,i.isOwner=c,i.roomIndex=s.roomIndex,i.level=t.level,i.maximumLevel=t.maximumLevel,i.experience=t.experience,i.levelExperienceGoal=t.levelExperienceGoal,i.energy=t.energy,i.maximumEnergy=t.maximumEnergy,i.happyness=t.happyness,i.maximumHappyness=t.maximumHappyness,i.respect=t.respect,i.respectsPetLeft=ee().respectsPetLeft,i.age=t.age,i.saddle=t.saddle,i.rider=t.rider,i.breedable=t.breedable,i.fullyGrown=t.fullyGrown,i.dead=t.dead,i.rarityLevel=t.rarityLevel,i.skillTresholds=t.skillTresholds,i.canRemovePet=!1,i.publiclyRideable=t.publiclyRideable,i.maximumTimeToLive=t.maximumTimeToLive,i.remainingTimeToLive=t.remainingTimeToLive,i.remainingGrowTime=t.remainingGrowTime,i.publiclyBreedable=t.publiclyBreedable,(c||this.container.roomSession.isRoomOwner||ee().isModerator||this.container.roomSession.controllerLevel>=a.eg.GUEST)&&(i.canRemovePet=!0),this.container.eventDispatcher.dispatchEvent(i)}checkGuildSetting(e){return e.isGuildRoom?e.roomControllerLevel>=a.eg.GUILD_ADMIN:e.roomControllerLevel>=a.eg.GUEST}canBeMuted(e){return this.isValidSetting(e,((e,t)=>t.allowMute===a.Gg.MODERATION_LEVEL_USER_WITH_RIGHTS?this.checkGuildSetting(e):e.roomControllerLevel>=a.eg.ROOM_OWNER))}canBeKicked(e){return this.isValidSetting(e,((e,t)=>{switch(t.allowKick){case a.Gg.MODERATION_LEVEL_ALL:return!0;case a.Gg.MODERATION_LEVEL_USER_WITH_RIGHTS:return this.checkGuildSetting(e);default:return e.roomControllerLevel>=a.eg.ROOM_OWNER}}))}canBeBanned(e){return this.isValidSetting(e,((e,t)=>t.allowBan===a.Gg.MODERATION_LEVEL_USER_WITH_RIGHTS?this.checkGuildSetting(e):e.roomControllerLevel>=a.eg.ROOM_OWNER))}isValidSetting(e,t){if(!this.container.roomSession._Str_7411)return!1;const s=this.container.roomSession.moderationSettings;let n=!1;return s&&(n=t(e,s)),n&&e.targetRoomControllerLevel<a.eg.ROOM_OWNER}get type(){return a.yh.INFOSTAND}get eventTypes(){return[a.ah.PET_INFO,a.eh.RSUBE_BADGES,a.gh.USER_FIGURE,a.Zg.FAVOURITE_GROUP_UPDATE]}get messageTypes(){return[Cn.GET_OBJECT_INFO,Cn.GET_OBJECT_NAME,Nn.RESPECT_USER,Nn.WHISPER_USER,Nn.IGNORE_USER,Nn.UNIGNORE_USER,Nn.KICK_USER,Nn.BAN_USER_DAY,Nn.BAN_USER_HOUR,Nn.BAN_USER_PERM,Nn.MUTE_USER_2MIN,Nn.MUTE_USER_5MIN,Nn.MUTE_USER_10MIN,Nn.GIVE_RIGHTS,Nn.TAKE_RIGHTS,Nn.START_TRADING,Nn.OPEN_HOME_PAGE,Nn.PASS_CARRY_ITEM,Nn.GIVE_CARRY_ITEM_TO_PET,Nn.DROP_CARRY_ITEM,Nn.REPORT,Nn.PICKUP_PET,Nn.MOUNT_PET,Nn.TOGGLE_PET_RIDING_PERMISSION,Nn.TOGGLE_PET_BREEDING_PERMISSION,Nn.DISMOUNT_PET,Nn.SADDLE_OFF,Nn.TRAIN_PET,Nn.RESPECT_PET,Nn.REQUEST_PET_UPDATE,Nn.GIVE_LIGHT_TO_PET,Nn.GIVE_WATER_TO_PET,Nn.TREAT_PET,Nn.REPORT_CFH_OTHER,Nn.AMBASSADOR_ALERT_USER,Nn.AMBASSADOR_KICK_USER,Nn.AMBASSADOR_MUTE_USER_2MIN,Nn.AMBASSADOR_MUTE_USER_10MIN,Nn.AMBASSADOR_MUTE_USER_60MIN,Nn.AMBASSADOR_MUTE_USER_18HOUR,un.CHANGE_MOTTO,En.MOVE,En.ROTATE,En.EJECT,En.PICKUP,En.USE,En.SAVE_STUFF_DATA]}}class Kn extends vn{processEvent(e){}processWidgetMessage(e){if(!e)return null;switch(e.type){case Tn.USER_CHOOSER:this.processChooser();break;case Cn.SELECT_OBJECT:this.selectRoomObject(e)}return null}processChooser(){const e=this.container.roomSession.roomId,t=[];L().getRoomObjects(e,a.Ig.UNIT).forEach((e=>{const s=this.container.roomSession.userDataManager.getUserDataByIndex(e.id);s&&t.push(new pe(s.roomIndex,a.Ig.UNIT,s.name))})),t.sort(((e,t)=>e.name<t.name?-1:1)),this.container.eventDispatcher.dispatchEvent(new fe(fe.USER_CHOOSER_CONTENT,t))}selectRoomObject(e){e.category===a.Ig.UNIT&&L().selectRoomObject(this.container.roomSession.roomId,e.id,e.category)}get type(){return a.yh.USER_CHOOSER}get eventTypes(){return[]}get messageTypes(){return[Tn.USER_CHOOSER,Cn.SELECT_OBJECT]}}class Qn extends vn{processEvent(e){const t=e;let s;switch(e.type){case a.hh.ANSWERED:const e=this.container.roomSession.roomId,n=this.container.roomSession.userDataManager.getUserData(t.userId);if(!n)return;s=new Qe(Qe.QUESTION_ANSWERED,t.id),s.value=t.value,s.userId=t.userId,s.answerCounts=t.answerCounts,"0"===s.value?L().updateRoomObjectUserGesture(e,n.roomIndex,a.k.getGestureId(a.k.GESTURE_SAD)):L().updateRoomObjectUserGesture(e,n.roomIndex,a.k.getGestureId(a.k.GESTURE_SMILE));break;case a.hh.FINISHED:s=new Qe(Qe.QUESTION_FINISHED,t.id),s.pollId=t.pollId,s.questionId=t.questionId,s.answerCounts=t.answerCounts;break;case a.hh.QUESTION:s=new Qe(Qe.NEW_QUESTION,t.id),s.question=t.question,s.duration=t.duration,s.pollType=t.pollType,s.questionId=t.questionId,s.pollId=t.pollId}s&&this.container.eventDispatcher.dispatchEvent(s)}processWidgetMessage(e){return null}get type(){return a.yh.WORD_QUIZZ}get eventTypes(){return[a.hh.ANSWERED,a.hh.FINISHED,a.hh.QUESTION]}get messageTypes(){return[]}}const $n=e=>D().send(e),Xn=e=>{C().sendWorkerEvent(e)},Jn=(e,t)=>{const s=e.get(t),n=[];if(s&&s.length)for(const r of s)r.isVisible&&n.push(r);return n},Zn=(e,t,s,n)=>{if(s.isVisible&&s.pageId>0){let r=!1;const c=[s.pageName,s.localization].join(" ").toLowerCase().replace(/ /gi,"");if(c.indexOf(e)>-1&&(n.push(s),r=!0),!r)for(const e of t)if(c.indexOf(e)>=0){n.push(s);break}}for(const r of s.children)Zn(e,t,r,n)};class er{}er.WALL="i",er.FLOOR="s",er.EFFECT="e",er.HABBO_CLUB="h",er.BADGE="b",er.GAME_TOKEN="GAME_TOKEN",er.PET="p",er.ROBOT="r";class tr{constructor(e,t,s,n,r,c){let i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,o=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;this._productType=void 0,this._productClassId=void 0,this._extraParam=void 0,this._productCount=void 0,this._productData=void 0,this._furnitureData=void 0,this._isUniqueLimitedItem=void 0,this._uniqueLimitedItemSeriesSize=void 0,this._uniqueLimitedItemsLeft=void 0,this._productType=e.toLowerCase(),this._productClassId=t,this._extraParam=s,this._productCount=n,this._productData=r,this._furnitureData=c,this._isUniqueLimitedItem=i,this._uniqueLimitedItemSeriesSize=a,this._uniqueLimitedItemsLeft=o}static stripAddonProducts(e){return 1===e.length?e:e.filter((e=>e.productType!==er.BADGE&&e.productType!==er.EFFECT&&e.productClassId!==tr.EFFECT_CLASSID_NINJA_DISAPPEAR))}getIconUrl(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;switch(this._productType){case er.FLOOR:return L().getFurnitureFloorIconUrl(this.productClassId);case er.WALL:if(e&&this._furnitureData){let t="";switch(this._furnitureData.className){case"floor":t=["th",this._furnitureData.className,e.product.extraParam].join("_");break;case"wallpaper":t=["th","wall",e.product.extraParam].join("_");break;case"landscape":t=["th",this._furnitureData.className,(e.product.extraParam||"").replace(".","_"),"001"].join("_")}if(""!==t){return`${k("catalog.asset.url")}/${t}.png`}}return L().getFurnitureWallIconUrl(this.productClassId,this._extraParam);case er.EFFECT:case er.HABBO_CLUB:return this.productClassId,"";case er.BADGE:return ee().getBadgeUrl(this._extraParam);case er.ROBOT:return null}return null}get productType(){return this._productType}get productClassId(){return this._productClassId}get extraParam(){return this._extraParam}set extraParam(e){this._extraParam=e}get productCount(){return this._productCount}get productData(){return this._productData}get furnitureData(){return this._furnitureData}get isUniqueLimitedItem(){return this._isUniqueLimitedItem}get uniqueLimitedItemSeriesSize(){return this._uniqueLimitedItemSeriesSize}get uniqueLimitedItemsLeft(){return this._uniqueLimitedItemsLeft}set uniqueLimitedItemsLeft(e){this._uniqueLimitedItemsLeft=e}}tr.EFFECT_CLASSID_NINJA_DISAPPEAR=108;class sr{constructor(e,t,s,n,r,c,i,a,o,l){this._pricingModel=void 0,this._priceType=void 0,this._offerId=void 0,this._localizationId=void 0,this._priceInCredits=void 0,this._priceInActivityPoints=void 0,this._activityPointType=void 0,this._giftable=void 0,this._isRentOffer=void 0,this._page=void 0,this._clubLevel=0,this._products=void 0,this._badgeCode=void 0,this._bundlePurchaseAllowed=!1,this._offerId=e,this._localizationId=t,this._isRentOffer=s,this._priceInCredits=n,this._priceInActivityPoints=r,this._activityPointType=c,this._giftable=i,this._clubLevel=a,this._products=o,this._bundlePurchaseAllowed=l,this.setPricingModelForProducts(),this.setPricingType();for(const u of o)if(u.productType===er.BADGE){this._badgeCode=u.extraParam;break}}activate(){}get clubLevel(){return this._clubLevel}get page(){return this._page}set page(e){this._page=e}get offerId(){return this._offerId}get localizationId(){return this._localizationId}get priceInCredits(){return this._priceInCredits}get priceInActivityPoints(){return this._priceInActivityPoints}get activityPointType(){return this._activityPointType}get giftable(){return this._giftable}get product(){if(!this._products||!this._products.length)return null;if(1===this._products.length)return this._products[0];const e=tr.stripAddonProducts(this._products);return e.length?e[0]:null}get pricingModel(){return this._pricingModel}get priceType(){return this._priceType}get bundlePurchaseAllowed(){return this._bundlePurchaseAllowed}get isRentOffer(){return this._isRentOffer}get badgeCode(){return this._badgeCode}get localizationName(){const e=ce(this._localizationId);return e?e.name:nt(this._localizationId)}get localizationDescription(){const e=ce(this._localizationId);return e?e.description:nt(this._localizationId)}get isLazy(){return!1}get products(){return this._products}setPricingModelForProducts(){const e=tr.stripAddonProducts(this._products);1===e.length?1===e[0].productCount?this._pricingModel=sr.PRICING_MODEL_SINGLE:this._pricingModel=sr.PRICING_MODEL_MULTI:e.length>1?this._pricingModel=sr.PRICING_MODEL_BUNDLE:this._pricingModel=sr.PRICING_MODEL_UNKNOWN}setPricingType(){this._priceInCredits>0&&this._priceInActivityPoints>0?this._priceType=sr.PRICE_TYPE_CREDITS_ACTIVITYPOINTS:this._priceInCredits>0?this._priceType=sr.PRICE_TYPE_CREDITS:this._priceInActivityPoints>0?this._priceType=sr.PRICE_TYPE_ACTIVITYPOINTS:this._priceType=sr.PRICE_TYPE_NONE}clone(){const e=[],t=ce(this.localizationId);for(const n of this._products){const s=se(n.productClassId,n.productType);e.push(new tr(n.productType,n.productClassId,n.extraParam,n.productCount,t,s))}const s=new sr(this.offerId,this.localizationId,this.isRentOffer,this.priceInCredits,this.priceInActivityPoints,this.activityPointType,this.giftable,this.clubLevel,e,this.bundlePurchaseAllowed);return s.page=this.page,s}}sr.PRICING_MODEL_UNKNOWN="pricing_model_unknown",sr.PRICING_MODEL_SINGLE="pricing_model_single",sr.PRICING_MODEL_MULTI="pricing_model_multi",sr.PRICING_MODEL_BUNDLE="pricing_model_bundle",sr.PRICING_MODEL_FURNITURE="pricing_model_furniture",sr.PRICE_TYPE_NONE="price_type_none",sr.PRICE_TYPE_CREDITS="price_type_credits",sr.PRICE_TYPE_ACTIVITYPOINTS="price_type_activitypoints",sr.PRICE_TYPE_CREDITS_ACTIVITYPOINTS="price_type_credits_and_activitypoints";class nr{constructor(e){this._furniData=void 0,this._page=void 0,this._product=void 0,this._furniData=e,this._product=new tr(this._furniData.type,this._furniData.id,this._furniData.customParams,1,ce(this._furniData.className),this._furniData)}activate(){$n(new a.vc(this._furniData.rentOfferId>-1?this._furniData.rentOfferId:this._furniData.purchaseOfferId))}get offerId(){return this.isRentOffer?this._furniData.rentOfferId:this._furniData.purchaseOfferId}get priceInActivityPoints(){return 0}get activityPointType(){return 0}get priceInCredits(){return 0}get page(){return this._page}set page(e){this._page=e}get priceType(){return""}get product(){return this._product}get products(){return[this._product]}get localizationId(){return"roomItem.name."+this._furniData.id}get bundlePurchaseAllowed(){return!1}get isRentOffer(){return this._furniData.rentOfferId>-1}get giftable(){return!1}get pricingModel(){return sr.PRICING_MODEL_FURNITURE}get clubLevel(){return 0}get badgeCode(){return""}get localizationName(){return this._furniData.name}get localizationDescription(){return this._furniData.description}get isLazy(){return!0}}class rr{constructor(e){this._isEnabled=!1,this._price=null,this._stuffTypes=null,this._boxTypes=null,this._ribbonTypes=null,this._defaultStuffTypes=null,this._isEnabled=e.isEnabled,this._price=e.price,this._boxTypes=e.boxTypes,this._ribbonTypes=e.ribbonTypes,this._stuffTypes=e.giftWrappers,this._defaultStuffTypes=e.giftFurnis}get isEnabled(){return this._isEnabled}get price(){return this._price}get stuffTypes(){return this._stuffTypes}get boxTypes(){return this._boxTypes}get ribbonTypes(){return this._ribbonTypes}get defaultStuffTypes(){return this._defaultStuffTypes}}class cr{constructor(e,t){this._images=void 0,this._texts=void 0,this._images=e,this._texts=t}getText(e){let t=this._texts[e]||"";return t&&t.length&&(t=t.replace(/\r\n|\r|\n/g,"<br />")),t}getImage(e){const t=this._images[e]||"";if(!t||!t.length)return null;let s=k("catalog.asset.image.url");return s=s.replace("%name%",t),s}}class ir{constructor(e,t,s,n,r,c,i,a){this.roomId=e,this.objectId=t,this.category=s,this.wallLocation=n,this.x=r,this.y=c,this.direction=i,this.offer=a}get offerId(){return this.offer.offerId}get productClassId(){return this.offer.product.productClassId}get productData(){return this.offer.product.productData}get furniData(){return this.offer.product.furnitureData}get extraParam(){return this.offer.product.extraParam}}class ar{constructor(){this._requestType=void 0,this._requestById=void 0,this._requestedByOfferId=void 0,this._requestByName=void 0,this._requestType=ar.REQUEST_TYPE_NONE}resetRequest(){this._requestType=ar.REQUEST_TYPE_NONE,this._requestById=-1,this._requestedByOfferId=-1,this._requestByName=null}get requestType(){return this._requestType}get requestById(){return this._requestById}set requestById(e){this._requestType=ar.REQUEST_TYPE_ID,this._requestById=e}get requestedByOfferId(){return this._requestedByOfferId}set requestedByOfferId(e){this._requestType=ar.REQUEST_TYPE_OFFER,this._requestedByOfferId=e}get requestByName(){return this._requestByName}set requestByName(e){this._requestType=ar.REQUEST_TYPE_NAME,this._requestByName=e}}ar.REQUEST_TYPE_NONE=0,ar.REQUEST_TYPE_ID=1,ar.REQUEST_TYPE_OFFER=2,ar.REQUEST_TYPE_NAME=3;class or{constructor(e,t,s){this.searchValue=e,this.offers=t,this.filteredNodes=s}}function lr(){return C().core}function ur(){return lr().configuration}const dr=e=>{if(!e||!e.length)return null;const t=e.split("/");return{username:t[0],figure:t[1],userId:parseInt(t[2])}};class hr{}hr.GROUP_CHAT=0,hr.PRIVATE_CHAT=1;class jr{}jr.HIDDEN=0,jr.SHOW=1,jr.UNREAD=2;class br{constructor(){this._id=void 0,this._name=void 0,this._requesterUserId=void 0,this._figureString=void 0}populate(e){return!!e&&(this._id=e.requestId,this._name=e.requesterName,this._figureString=e.figureString,this._requesterUserId=e.requesterUserId,!0)}get id(){return this._id}get name(){return this._name}get requesterUserId(){return this._requesterUserId}get figureString(){return this._figureString}}class gr{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];this.userFriendLimit=e,this.normalFriendLimit=t,this.extendedFriendLimit=s,this.categories=n}}class Or{constructor(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;this._type=void 0,this._senderId=void 0,this._message=void 0,this._secondsSinceSent=void 0,this._extraData=void 0,this._date=void 0,this._type=r,this._senderId=e,this._message=t,this._secondsSinceSent=s,this._extraData=n,this._date=new Date}get type(){return this._type}get senderId(){return this._senderId}get message(){return this._message}get secondsSinceSent(){return this._secondsSinceSent}get extraData(){return this._extraData}get date(){return this._date}}Or.CHAT=0,Or.ROOM_INVITE=1,Or.STATUS_NOTIFICATION=2,Or.SECURITY_NOTIFICATION=3;class mr{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hr.PRIVATE_CHAT;this._userId=void 0,this._chats=void 0,this._type=void 0,this._userId=e,this._chats=[],this._type=t}addChat(e){this._chats.push(e)}get userId(){return this._userId}get chats(){return this._chats}get type(){return this._type}set type(e){this._type=e}}class pr{constructor(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._threadId=void 0,this._participant=void 0,this._groups=void 0,this._lastUpdated=void 0,this._unreadCount=void 0,this._threadId=++pr.THREAD_ID,this._participant=e,this._groups=[],this._lastUpdated=new Date,this._unreadCount=0,t&&(this.addMessage(null,nt("messenger.moderationinfo"),0,null,Or.SECURITY_NOTIFICATION),this._unreadCount=0)}addMessage(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;const c=e<0&&n,i=c?dr(n).userId:e,a=this.getLastGroup(i);if(!a)return;c&&(a.type=hr.GROUP_CHAT);const o=new Or(e,t,s,n,r);return a.addChat(o),this._lastUpdated=new Date,this._unreadCount++,o}getLastGroup(e){let t=this._groups[this._groups.length-1];return t&&t.userId===e||(t=new mr(e),this._groups.push(t)),t}setRead(){this._unreadCount=0}get threadId(){return this._threadId}get participant(){return this._participant}get groups(){return this._groups}get lastUpdated(){return this._lastUpdated}get unreadCount(){return this._unreadCount}get unread(){return this._unreadCount>0}}function _r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;y(0===e?"friends-messenger/open":`friends-messenger/${e}`)}pr.MESSAGE_RECEIVED="MT_MESSAGE_RECEIVED",pr.THREAD_ID=0;function Er(e){$n(new a.Tc(e,!0))}function fr(e){y(`groups/manage/${e}`)}function xr(e,t){y(t?`group-members/${e}/${t}`:`group-members/${e}`)}const Ir=e=>$n(new a.Vc(e));class Tr{}Tr.ACTIVE="active",Tr.NONE="none",Tr.EXPIRED="expired";const Cr=["ACH_VipHC1","ACH_VipHC2","ACH_VipHC3","ACH_VipHC4","ACH_VipHC5","HC1","HC2","HC3","HC4","HC5"];class Sr{}Sr.NONE=0,Sr.START_DOORBELL=1,Sr.START_PASSWORD=2,Sr.STATE_PENDING_SERVER=3,Sr.UPDATE_STATE=4,Sr.STATE_WAITING=5,Sr.STATE_NO_ANSWER=6,Sr.STATE_WRONG_PASSWORD=7,Sr.STATE_ACCEPTED=8;class Nr{}Nr.LIST=0,Nr.THUMBNAILS=1,Nr.FORCED_THUMBNAILS=2;const vr=(()=>{const e=[];for(let t=10;t<=100;t+=10)e.push(t);return e})(),Rr=[{name:"anything",query:null},{name:"room.name",query:"roomname"},{name:"owner",query:"owner"},{name:"tag",query:"tag"},{name:"group",query:"group"}];function Ar(e){$n(new a.Cg(e,!1,!0))}class yr{}yr.DEFAULT="default",yr.MOTD="motd",yr.MODERATION="moderation",yr.EVENT="event",yr.NITRO="nitro",yr.SEARCH="search",yr.ALERT="alert";class wr{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yr.DEFAULT,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;this._id=void 0,this._messages=void 0,this._alertType=void 0,this._clickUrl=void 0,this._clickUrlText=void 0,this._title=void 0,this._imageUrl=void 0,wr.ITEM_ID+=1,this._id=wr.ITEM_ID,this._messages=e,this._alertType=t,this._clickUrl=s,this._clickUrlText=n,this._title=r,this._imageUrl=c}get id(){return this._id}get messages(){return this._messages}set alertType(e){this._alertType=e}get alertType(){return this._alertType}get clickUrl(){return this._clickUrl}get clickUrlText(){return this._clickUrlText}get title(){return this._title}get imageUrl(){return this._imageUrl}}wr.ITEM_ID=-1;class kr{}kr.FRIENDOFFLINE="friendoffline",kr.FRIENDONLINE="friendonline",kr.THIRDPARTYFRIENDOFFLINE="thirdpartyfriendoffline",kr.THIRDPARTYFRIENDONLINE="thirdpartyfriendonline",kr.ACHIEVEMENT="achievement",kr.BADGE_RECEIVED="badge_received",kr.INFO="info",kr.RECYCLEROK="recyclerok",kr.RESPECT="respect",kr.CLUB="club",kr.SOUNDMACHINE="soundmachine",kr.PETLEVEL="petlevel",kr.CLUBGIFT="clubgift",kr.BUYFURNI="buyfurni",kr.VIP="vip",kr.ROOMMESSAGESPOSTED="roommessagesposted";class Dr{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:kr.INFO,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this._id=void 0,this._message=void 0,this._notificationType=void 0,this._iconUrl=void 0,this._linkUrl=void 0,Dr.ITEM_ID+=1,this._id=Dr.ITEM_ID,this._message=e,this._notificationType=t,this._iconUrl=s,this._linkUrl=n}get id(){return this._id}get message(){return this._message}get notificationType(){return this._notificationType}get iconUrl(){return this._iconUrl}get linkUrl(){return this._linkUrl}}Dr.ITEM_ID=-1;class Ur{constructor(e,t,s,n,r,c,i){this._id=void 0,this._confirmType=void 0,this._message=void 0,this._onConfirm=void 0,this._onCancel=void 0,this._confirmText=void 0,this._cancelText=void 0,this._title=void 0,Ur.ITEM_ID+=1,this._id=Ur.ITEM_ID,this._confirmType=e,this._message=t,this._onConfirm=s,this._onCancel=n,this._confirmText=r,this._cancelText=c,this._title=i}get id(){return this._id}get confirmType(){return this._confirmType}get message(){return this._message}get onConfirm(){return this._onConfirm}get onCancel(){return this._onCancel}get confirmText(){return this._confirmText}get cancelText(){return this._cancelText}get title(){return this._title}}Ur.ITEM_ID=-1;class Pr{static cleanText(e){return e.replace(/\\r/g,"\r")}static getTimeZeroPadded(e){const t="0"+e;return t.substr(t.length-2,t.length)}static getMainNotificationConfig(){return k("notification",{})}static getNotificationConfig(e){const t=this.getMainNotificationConfig();return t?t[e]:null}static getNotificationPart(e,t,s,n){if(e.has(s))return e.get(s);const r=["notification",t,s].join(".");return C().localization.hasValue(r)||n?nt(r,Array.from(e.keys()),Array.from(e.values())):null}static getNotificationImageUrl(e,t){let s=e.get("image");return s||(s=k("image.library.notifications.url","").replace("%image%",t.replace(/\./g,"_"))),nt(s)}static showNotification(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t||(t=new Map);const s=this.getNotificationConfig("notification."+e);if(s)for(const o in s)t.set(o,s[o]);const n=this.getNotificationPart(t,e,"title",!0),r=this.getNotificationPart(t,e,"message",!0).replace(/\\r/g,"\r"),c=this.getNotificationPart(t,e,"linkTitle",!1),i=this.getNotificationPart(t,e,"linkUrl",!1),a=this.getNotificationImageUrl(t,e);"BUBBLE"===t.get("display")?this.showSingleBubble(nt(r),kr.INFO,a,i):this.simpleAlert(r,e,i,c,n,a),t.get("sound")&&Ns(t.get("sound"))}static showSingleBubble(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.BUBBLES_DISABLED||Vt(new Rt(e,t,s,n))}static showClubGiftNotification(e){e<=0||this.showSingleBubble(e.toString(),kr.CLUBGIFT,null,"catalog/open/"+k("catalog.links")["hc.hc_gifts"])}static handleMOTD(e){e=e.map((e=>this.cleanText(e))),Vt(new vt(e,yr.MOTD,null,null,nt("notifications.motd.title")))}static confirm(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;n&&n.length||(n=nt("generic.confirm")),r&&r.length||(r=nt("generic.cancel")),c&&c.length||(c=nt("notifications.broadcast.title")),Vt(new wt(i,this.cleanText(e),t,s,n,r,c))}static simpleAlert(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;r&&r.length||(r=nt("notifications.broadcast.title")),t&&t.length||(t=yr.DEFAULT),Vt(new vt([this.cleanText(e)],t,s,n,r,c))}static showNitroAlert(){Vt(new vt(null,yr.NITRO))}static showModeratorMessage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.simpleAlert(e,yr.DEFAULT,t,nt("mod.alert.link"),nt("mod.alert.title"))}static handleModeratorCaution(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.showModeratorMessage(e,t)}static handleModeratorMessage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.showModeratorMessage(e,t,!1)}static handleUserBannedMessage(e){this.showModeratorMessage(e)}static handleHotelClosedMessage(e,t,s){this.simpleAlert(nt("opening.hours."+(s?"disconnected":"closed"),["h","m"],[this.getTimeZeroPadded(e),this.getTimeZeroPadded(t)]),yr.DEFAULT,null,null,nt("opening.hours.title"))}static handleHotelMaintenanceMessage(e,t){this.simpleAlert(nt("maintenance.shutdown",["m","d"],[e.toString(),t.toString()]),yr.DEFAULT,null,null,nt("opening.hours.title"))}static handleHotelClosingMessage(e){this.simpleAlert(nt("opening.hours.shutdown",["m"],[e.toString()]),yr.DEFAULT,null,null,nt("opening.hours.title"))}static handleLoginFailedHotelClosedMessage(e,t){this.simpleAlert(nt("opening.hours.disconnected",["h","m"],[e.toString(),t.toString()]),yr.DEFAULT,null,null,nt("opening.hours.title"))}static openUrl(e){e&&e.length&&(e.startsWith("http")?a.Jd.openWebPage(e):y(e))}static showModerationDisclaimer(){if(a.ug.isRunning()){if(this.MODERATION_DISCLAIMER_TIMEOUT)return;this.MODERATION_DISCLAIMER_TIMEOUT=setTimeout((()=>{this.showModerationDisclaimer()}),a.ug.totalRunningTime+this.MODERATION_DISCLAIMER_DELAY_MS)}else{if(this.MODERATION_DISCLAIMER_SHOWN)return;this.showSingleBubble(nt("mod.chatdisclaimer"),kr.INFO),this.MODERATION_DISCLAIMER_SHOWN=!0}}}Pr.MODERATION_DISCLAIMER_SHOWN=!1,Pr.MODERATION_DISCLAIMER_DELAY_MS=5e3,Pr.MODERATION_DISCLAIMER_TIMEOUT=null,Pr.BUBBLES_DISABLED=!1;class Mr{constructor(){this._credits=0,this._activityPoints=new Map,this._clubDays=0,this._clubPeriods=0,this._isVIP=!1,this._pastClubDays=0,this._pastVipDays=0,this._isExpiring=!1,this._minutesUntilExpiration=0,this._minutesSinceLastModified=0,this._lastUpdated=0}static from(e){const t=new Mr;return t._credits=e._credits,t._activityPoints=e._activityPoints,t._clubDays=e._clubDays,t._clubPeriods=e._clubPeriods,t._isVIP=e._isVIP,t._pastClubDays=e._pastClubDays,t._pastVipDays=e._pastVipDays,t._isExpiring=e._isExpiring,t._minutesUntilExpiration=e._minutesUntilExpiration,t._minutesSinceLastModified=e._minutesSinceLastModified,t._lastUpdated=e._lastUpdated,t}get credits(){return this._credits}set credits(e){this._lastUpdated=C().time,this._credits=e}get activityPoints(){return this._activityPoints}set activityPoints(e){this._lastUpdated=C().time,this._activityPoints=e}get clubDays(){return this._clubDays}set clubDays(e){this._lastUpdated=C().time,this._clubDays=e}get clubPeriods(){return this._clubPeriods}set clubPeriods(e){this._lastUpdated=C().time,this._clubPeriods=e}get _Str_13571(){return this._clubDays>0||this._clubPeriods>0}get isVip(){return this._isVIP}set isVip(e){this._isVIP=e}get pastClubDays(){return this._pastClubDays}set pastClubDays(e){this._lastUpdated=C().time,this._pastClubDays=e}get pastVipDays(){return this._pastVipDays}set pastVipDays(e){this._lastUpdated=C().time,this._pastVipDays=e}get isExpiring(){return this._isExpiring}set isExpiring(e){this._isExpiring=e}get minutesUntilExpiration(){var e=(C().time-this._lastUpdated)/6e4,t=this._minutesUntilExpiration-e;return t>0?t:0}set minutesUntilExpiration(e){this._lastUpdated=C().time,this._minutesUntilExpiration=e}get minutesSinceLastModified(){return this._minutesSinceLastModified}set minutesSinceLastModified(e){this._lastUpdated=C().time,this._minutesSinceLastModified=e}get lastUpdated(){return this._lastUpdated}get clubLevel(){return 0===this.clubDays&&0===this.clubPeriods?a.Ed.NO_CLUB:this.isVip?a.Ed.VIP:a.Ed.CLUB}}function Lr(e){$n(new a.Ii(e))}const Fr=e=>{const t=Math.floor(e/2);return e%2?(t+.5).toString():t.toString()};class Hr{}Hr.TOGGLE_FURNI_STATE=0,Hr.RESET=1,Hr.SET_FURNI_STATE=3,Hr.MOVE_FURNI=4,Hr.GIVE_SCORE=6,Hr.CHAT=7,Hr.TELEPORT=8,Hr.JOIN_TEAM=9,Hr.LEAVE_TEAM=10,Hr.CHASE=11,Hr.FLEE=12,Hr.MOVE_AND_ROTATE_FURNI=13,Hr.GIVE_SCORE_TO_PREDEFINED_TEAM=14,Hr.TOGGLE_TO_RANDOM_STATE=15,Hr.MOVE_FURNI_TO=16,Hr.GIVE_REWARD=17,Hr.CALL_ANOTHER_STACK=18,Hr.KICK_FROM_ROOM=19,Hr.MUTE_USER=20,Hr.BOT_TELEPORT=21,Hr.BOT_MOVE=22,Hr.BOT_TALK=23,Hr.BOT_GIVE_HAND_ITEM=24,Hr.BOT_FOLLOW_AVATAR=25,Hr.BOT_CHANGE_FIGURE=26,Hr.BOT_TALK_DIRECT_TO_AVTR=27;class Br{}Br.STATES_MATCH=0,Br.FURNIS_HAVE_AVATARS=1,Br.ACTOR_IS_ON_FURNI=2,Br.TIME_ELAPSED_MORE=3,Br.TIME_ELAPSED_LESS=4,Br.USER_COUNT_IN=5,Br.ACTOR_IS_IN_TEAM=6,Br.HAS_STACKED_FURNIS=7,Br.STUFF_TYPE_MATCHES=8,Br.STUFFS_IN_FORMATION=9,Br.ACTOR_IS_GROUP_MEMBER=10,Br.ACTOR_IS_WEARING_BADGE=11,Br.ACTOR_IS_WEARING_EFFECT=12,Br.NOT_STATES_MATCH=13,Br.FURNI_NOT_HAVE_HABBO=14,Br.NOT_ACTOR_ON_FURNI=15,Br.NOT_USER_COUNT_IN=16,Br.NOT_ACTOR_IN_TEAM=17,Br.NOT_HAS_STACKED_FURNIS=18,Br.NOT_FURNI_IS_OF_TYPE=19,Br.NOT_STUFFS_IN_FORMATION=20,Br.NOT_ACTOR_IN_GROUP=21,Br.NOT_ACTOR_WEARS_BADGE=22,Br.NOT_ACTOR_WEARING_EFFECT=23,Br.DATE_RANGE_ACTIVE=24,Br.ACTOR_HAS_HANDITEM=25;const Gr=e=>`${e.getFullYear()}/${("0"+(e.getMonth()+1)).slice(-2)}/${("0"+e.getDate()).slice(-2)} ${("0"+e.getHours()).slice(-2)}:${("0"+e.getMinutes()).slice(-2)}`;class Wr{}Wr.STUFF_SELECTION_OPTION_NONE=0,Wr.STUFF_SELECTION_OPTION_BY_ID=1,Wr.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE=2,Wr.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT=3;class Vr extends a.Ue{constructor(e,t){super("\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nuniform mat3 projectionMatrix;\nvarying vec2 vTextureCoord;\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec3 lineColor;\nuniform vec3 color;\nvoid main(void) {\n    vec4 currentColor = texture2D(uSampler, vTextureCoord);\n    vec3 colorLine = lineColor * currentColor.a;\n    vec3 colorOverlay = color * currentColor.a;\n\n    if(currentColor.r == 0.0 && currentColor.g == 0.0 && currentColor.b == 0.0 && currentColor.a > 0.0) {\n        gl_FragColor = vec4(colorLine.r, colorLine.g, colorLine.b, currentColor.a);\n    } else if(currentColor.a > 0.0) {\n        gl_FragColor = vec4(colorOverlay.r, colorOverlay.g, colorOverlay.b, currentColor.a);\n    }\n}"),this._lineColor=void 0,this._color=void 0,this.uniforms.lineColor=new Float32Array(3),this.uniforms.color=new Float32Array(3),this.lineColor=e,this.color=t}get lineColor(){return this._lineColor}set lineColor(e){const t=this.uniforms.lineColor;"number"===typeof e?(a.jb.hex2rgb(e,t),this._lineColor=e):(t[0]=e[0],t[1]=e[1],t[2]=e[2],this._lineColor=a.jb.rgb2hex(t))}get color(){return this._color}set color(e){const t=this.uniforms.color;"number"===typeof e?(a.jb.hex2rgb(e,t),this._color=e):(t[0]=e[0],t[1]=e[1],t[2]=e[2],this._color=a.jb.rgb2hex(t))}}class qr{static show(e){qr.applySelectionShader(qr.getRoomObject(e))}static hide(e){qr.clearSelectionShader(qr.getRoomObject(e))}static clearSelectionShaderFromFurni(e){for(const t of e)qr.clearSelectionShader(qr.getRoomObject(t))}static applySelectionShaderToFurni(e){for(const t of e)qr.applySelectionShader(qr.getRoomObject(t))}static getRoomObject(e){const t=L();return t.getRoomObject(t.activeRoomId,e,a.Ig.FLOOR)}static applySelectionShader(e){if(!e)return;const t=e.visualization;if(t)for(const s of t.sprites)1!==s.blendMode&&(s.filters=[qr._selectionShader])}static clearSelectionShader(e){if(!e)return;const t=e.visualization;if(t)for(const s of t.sprites)s.filters=[]}}qr._selectionShader=new Vr([1,1,1],[.6,.6,.6]);const Yr="\t";class zr{}zr.AVATAR_SAYS_SOMETHING=0,zr.AVATAR_WALKS_ON_FURNI=1,zr.AVATAR_WALKS_OFF_FURNI=2,zr.EXECUTE_ONCE=3,zr.TOGGLE_FURNI=4,zr.EXECUTE_PERIODICALLY=6,zr.AVATAR_ENTERS_ROOM=7,zr.GAME_STARTS=8,zr.GAME_ENDS=9,zr.SCORE_ACHIEVED=10,zr.COLLISION=11,zr.EXECUTE_PERIODICALLY_LONG=12,zr.BOT_REACHED_STUFF=13,zr.BOT_REACHED_AVATAR=14;var Kr=s(0);const Qr=e=>{const{ref:t=null,innerRef:s=null,display:n=null,fit:r=!1,grow:i=!1,shrink:a=!1,fullWidth:o=!1,fullHeight:l=!1,overflow:u=null,position:d=null,float:h=null,pointer:j=!1,visible:b=null,textColor:g=null,classNames:O=[],className:m="",style:p={},children:_=null,...E}=e,f=Object(c.useMemo)((()=>{const e=[];return n&&n.length&&e.push("d-"+n),(r||o)&&e.push("w-100"),(r||l)&&e.push("h-100"),i&&e.push("flex-grow-1"),a&&e.push("flex-shrink-0"),u&&e.push("overflow-"+u),d&&e.push("position-"+d),h&&e.push("float-"+h),j&&e.push("cursor-pointer"),null!==b&&e.push(b?"visible":"invisible"),g&&e.push("text-"+g),O.length&&e.push(...O),e}),[n,r,i,a,o,l,u,d,h,j,b,g,O]),x=Object(c.useMemo)((()=>{let e=f.join(" ");return m.length&&(e+=" "+m),e.trim()}),[f,m]),I=Object(c.useMemo)((()=>{let e={};return Object.keys(p).length&&(e={...e,...p}),e}),[p]);return Object(Kr.jsx)("div",{ref:s,className:x,style:I,...E,children:_})},$r=Object(c.createContext)({isCssGrid:!1}),Xr=e=>Object(Kr.jsx)($r.Provider,{value:e.value,children:e.children}),Jr=e=>{const{inline:t=!1,gap:s=2,maxContent:n=!1,columnCount:r=0,center:i=!1,alignSelf:a=null,alignItems:o=null,justifyContent:l=null,fullHeight:u=!0,classNames:d=[],style:h={},...j}=e,b=Object(c.useMemo)((()=>{const e=[];return t?e.push("inline-grid"):e.push("grid"),s?e.push("gap-"+s):0===s&&e.push("gap-0"),n&&e.push("flex-basis-max-content"),a&&e.push("align-self-"+a),o&&e.push("align-items-"+o),l&&e.push("justify-content-"+l),o||l||!i||e.push("align-items-center","justify-content-center"),d.length&&e.push(...d),e}),[t,s,n,a,o,l,i,d]),g=Object(c.useMemo)((()=>{let e={};return r&&(e["--bs-columns"]=r.toString()),Object.keys(h).length&&(e={...e,...h}),e}),[r,h]);return Object(Kr.jsx)(Xr,{value:{isCssGrid:!0},children:Object(Kr.jsx)(Qr,{fullHeight:u,classNames:b,style:g,...j})})},Zr=e=>{const{columnMinWidth:t=40,columnMinHeight:s=40,columnCount:n=0,fullHeight:r=!1,maxContent:i=!0,overflow:a="auto",style:o={},...l}=e,u=Object(c.useMemo)((()=>{let e={};return e["--nitro-grid-column-min-height"]=s+"px",n>1&&(e.gridTemplateColumns=`repeat(auto-fill, minmax(${t}px, 1fr))`),Object.keys(o).length&&(e={...e,...o}),e}),[t,s,n,o]);return Object(Kr.jsx)(Jr,{columnCount:n,fullHeight:r,overflow:a,style:u,...l})},ec=e=>{const{display:t="flex",column:s,reverse:n=!1,gap:r=null,center:i=!1,alignSelf:a=null,alignItems:o=null,justifyContent:l=null,classNames:u=[],...d}=e,h=Object(c.useMemo)((()=>{const e=[];return s?n?e.push("flex-column-reverse"):e.push("flex-column"):n&&e.push("flex-row-reverse"),r&&e.push("gap-"+r),a&&e.push("align-self-"+a),o&&e.push("align-items-"+o),l&&e.push("justify-content-"+l),o||l||!i||e.push("align-items-center","justify-content-center"),u.length&&e.push(...u),e}),[s,n,r,i,a,o,l,u]);return Object(Kr.jsx)(Qr,{display:t,classNames:h,...d})},tc=e=>{const{variant:t="primary",size:s="sm",active:n=!1,disabled:r=!1,classNames:i=[],...a}=e,o=Object(c.useMemo)((()=>{const e=["btn"];return t&&e.push("btn-"+t),s&&e.push("btn-"+s),n&&e.push("active"),r&&e.push("disabled"),i.length&&e.push(...i),e}),[t,s,n,r,i]);return Object(Kr.jsx)(ec,{center:!0,classNames:o,...a})},sc=e=>{const{classNames:t=[],...s}=e,n=Object(c.useMemo)((()=>{const e=["btn-group"];return t.length&&e.push(...t),e}),[t]);return Object(Kr.jsx)(Qr,{classNames:n,...s})},nc=Object(c.createContext)({closers:null,setClosers:null,closeAll:null}),rc=e=>Object(Kr.jsx)(nc.Provider,{...e}),cc=e=>{const{alignItems:t="center",gap:s=1,children:n=null,...r}=e;return Object(Kr.jsx)(ec,{alignItems:t,gap:s,...r,children:n})};var ic=s(8);const ac=e=>{const{headerText:t="",isExpanded:s=!1,gap:n=0,classNames:r=[],children:i=null,...a}=e,[o,l]=Object(c.useState)(!1),{setClosers:u=null,closeAll:d=null}=Object(c.useContext)(nc),h=Object(c.useCallback)((()=>l(!1)),[]),j=Object(c.useMemo)((()=>{const e=["nitro-card-accordion-set"];return o&&e.push("active"),r&&r.length&&e.push(...r),e}),[o,r]);return Object(c.useEffect)((()=>{l(s)}),[s]),Object(c.useEffect)((()=>{const e=h;return u((t=>{const s=[...t];return s.push(e),s})),()=>{u((t=>{const s=[...t],n=s.indexOf(e);return n>=0&&s.splice(n,1),s}))}}),[h,u]),Object(Kr.jsxs)(Nc,{classNames:j,gap:n,...a,children:[Object(Kr.jsxs)(ec,{pointer:!0,justifyContent:"between",className:"nitro-card-accordion-set-header px-2 py-1",onClick:()=>{d(),l((e=>!e))},children:[Object(Kr.jsx)(Zc,{children:t}),Object(Kr.jsx)(ic.a,{icon:o?"caret-up":"caret-down"})]}),o&&Object(Kr.jsx)(Nc,{fullHeight:!0,overflow:"auto",gap:0,className:"nitro-card-accordion-set-content",children:i})]})},oc=e=>{const{...t}=e,[s,n]=Object(c.useState)([]),r=Object(c.useCallback)((()=>{for(const e of s)e()}),[s]);return Object(Kr.jsx)(rc,{value:{closers:s,setClosers:n,closeAll:r},children:Object(Kr.jsx)(Nc,{gap:0,...t})})},lc=e=>{const{overflow:t="auto",classNames:s=[],...n}=e,r=Object(c.useMemo)((()=>{const e=["container-fluid","content-area"];return s.length&&e.push(...s),e}),[s]);return Object(Kr.jsx)(Nc,{classNames:r,overflow:t,...n})},uc=Object(c.createContext)({theme:null}),dc=e=>Object(Kr.jsx)(uc.Provider,{value:e.value,children:e.children}),hc=e=>{const{headerText:t=null,noCloseButton:s=!1,onCloseClick:n=null,justifyContent:r="center",alignItems:i="center",classNames:a=[],children:o=null,...l}=e,u=Object(c.useMemo)((()=>{const e=["drag-handler","container-fluid","nitro-card-header"];return a.length&&e.push(...a),e}),[a]),d=Object(c.useCallback)((e=>{e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()}),[]);return Object(Kr.jsx)(Nc,{center:!0,position:"relative",classNames:u,...l,children:Object(Kr.jsxs)(ec,{fullWidth:!0,center:!0,children:[Object(Kr.jsx)("span",{className:"nitro-card-header-text",children:t}),Object(Kr.jsx)(Qr,{position:"absolute",className:"end-2 nitro-card-header-close",onMouseDownCapture:d,onClick:n,children:Object(Kr.jsx)(ic.a,{icon:"times"})})]})})},jc=e=>{const{justifyContent:t="center",classNames:s=[],...n}=e,r=Object(c.useMemo)((()=>{const e=["container-fluid","bg-muted","p-1"];return s.length&&e.push(...s),e}),[s]);return Object(Kr.jsx)(ec,{justifyContent:t,classNames:r,...n})};var bc=s(22);class gc{}gc.CENTER="DWP_CENTER",gc.TOP_CENTER="DWP_TOP_CENTER",gc.TOP_LEFT="DWP_TOP_LEFT",gc.NOTHING="DWP_NOTHING";const Oc=[],mc=new Map,pc=e=>{const{uniqueKey:t=null,handleSelector:s=".drag-handler",windowPosition:n=gc.CENTER,disableDrag:r=!1,dragStyle:i={},children:o=null,offsetLeft:l=0,offsetTop:u=0}=e,[d,h]=Object(c.useState)(null),[j,b]=Object(c.useState)(null),[g,O]=Object(c.useState)({x:0,y:0}),[m,p]=Object(c.useState)(!1),[_,E]=Object(c.useState)(null),f=Object(c.useRef)(),x=Object(c.useCallback)((()=>{let e=400;for(const t of Oc)e+=1,t.style.zIndex=e.toString()}),[]),I=Object(c.useCallback)((()=>{const e=Oc.indexOf(f.current);if(-1===e)Oc.push(f.current);else{if(e===Oc.length-1)return;e>=0&&(Oc.splice(e,1),Oc.push(f.current))}x()}),[x]),T=Object(c.useCallback)((e=>{I()}),[I]),C=Object(c.useCallback)((e=>{I()}),[I]),S=Object(c.useCallback)(((e,t)=>{O({x:e,y:t}),p(!0)}),[]),N=Object(c.useCallback)((e=>{S(e.clientX,e.clientY)}),[S]),v=Object(c.useCallback)((e=>{const t=e.touches[0];S(t.clientX,t.clientY)}),[S]),R=Object(c.useCallback)((e=>{h({x:e.clientX-g.x,y:e.clientY-g.y})}),[g]),A=Object(c.useCallback)((e=>{const t=e.touches[0];h({x:t.clientX-g.x,y:t.clientY-g.y})}),[g]),y=Object(c.useCallback)((()=>{if(!f.current||!_)return;let e=j.x+d.x,s=j.y+d.y;const n=f.current.offsetLeft+e,r=f.current.offsetTop+s;r<0?s=-f.current.offsetTop:r+_.offsetHeight>=document.body.offsetHeight-0&&(s=document.body.offsetHeight-f.current.offsetHeight-f.current.offsetTop),n+f.current.offsetWidth<0?e=-f.current.offsetLeft:n>=document.body.offsetWidth-0&&(e=document.body.offsetWidth-f.current.offsetWidth-f.current.offsetLeft),h({x:0,y:0}),b({x:e,y:s}),p(!1),null!==t&&mc.set(t,{x:e,y:s})}),[_,d,j,t]),w=Object(c.useCallback)((e=>{y()}),[y]),k=Object(c.useCallback)((e=>{y()}),[y]);return Object(c.useEffect)((()=>{const e=f.current;if(!e)return;if(Oc.push(e),x(),!r){const t=e.querySelector(s);t&&E(t)}let c=0,i=0;switch(n){case gc.TOP_CENTER:e.style.top=50+u+"px",e.style.left=`calc(50vw - ${e.offsetWidth/2+l}px)`;break;case gc.CENTER:e.style.top=`calc(50vh - ${e.offsetHeight/2+u}px)`,e.style.left=`calc(50vw - ${e.offsetWidth/2+l}px)`;break;case gc.TOP_LEFT:e.style.top=50+u+"px",e.style.left=50+l+"px"}if(null!==t){const e=mc.get(t);e&&(c=e.x,i=e.y)}return h({x:0,y:0}),b({x:c,y:i}),()=>{const t=Oc.indexOf(e);t>=0&&Oc.splice(t,1)}}),[s,n,t,r,l,u,x]),Object(c.useEffect)((()=>{if(!j&&!d)return;const e=f.current;e&&(e.style.transform=`translate(${j.x+d.x}px, ${j.y+d.y}px)`,e.style.visibility="visible")}),[j,d]),Object(c.useEffect)((()=>{if(_)return _.addEventListener(a.Ce.MOUSE_DOWN,N),_.addEventListener(a.Th.TOUCH_START,v),()=>{_.removeEventListener(a.Ce.MOUSE_DOWN,N),_.removeEventListener(a.Th.TOUCH_START,v)}}),[_,N,v]),Object(c.useEffect)((()=>{if(m)return document.addEventListener(a.Ce.MOUSE_UP,w),document.addEventListener(a.Th.TOUCH_END,k),document.addEventListener(a.Ce.MOUSE_MOVE,R),document.addEventListener(a.Th.TOUCH_MOVE,A),()=>{document.removeEventListener(a.Ce.MOUSE_UP,w),document.removeEventListener(a.Th.TOUCH_END,k),document.removeEventListener(a.Ce.MOUSE_MOVE,R),document.removeEventListener(a.Th.TOUCH_MOVE,A)}}),[m,w,R,k,A]),Object(bc.createPortal)(Object(Kr.jsx)(Qr,{position:"absolute",innerRef:f,className:"draggable-window",onMouseDownCapture:T,onTouchStartCapture:C,style:i,children:o}),document.getElementById("draggable-windows-container"))},_c=e=>{const{theme:t="primary",uniqueKey:s=null,handleSelector:n=".drag-handler",windowPosition:r=gc.CENTER,disableDrag:i=!1,overflow:a="hidden",position:o="relative",gap:l=0,classNames:u=[],...d}=e,h=Object(c.useMemo)((()=>{const e=["nitro-card","shadow"];return e.push(`theme-${t||"primary"}`),u.length&&e.push(...u),e}),[t,u]);return Object(Kr.jsx)(dc,{value:{theme:t},children:Object(Kr.jsx)(pc,{uniqueKey:s,handleSelector:n,windowPosition:r,disableDrag:i,children:Object(Kr.jsx)(Nc,{overflow:a,position:o,gap:l,classNames:h,...d})})})},Ec=e=>{const{figure:t="",gender:s="M",headOnly:n=!1,direction:r=0,scale:i=1,classNames:o=[],style:l={},...u}=e,[d,h]=Object(c.useState)(null),[j,b]=Object(c.useState)(-1),g=Object(c.useRef)(!1),O=Object(c.useMemo)((()=>{const e=["avatar-image"];return o.length&&e.push(...o),e}),[o]),m=Object(c.useMemo)((()=>{let e={};return d&&d.length&&(e.backgroundImage=`url('${d}')`),1!==i&&(e.transform=`scale(${i})`,i%1||(e.imageRendering="pixelated")),Object.keys(l).length&&(e={...e,...l}),e}),[d,i,l]);return Object(c.useEffect)((()=>{const e=N().createAvatarImage(t,a.q.LARGE,s,{resetFigure:e=>{g.current||b(Math.random())},dispose:()=>{},disposed:!1},null);if(!e)return;let c=a.r.FULL;n&&(c=a.r.HEAD),e.setDirection(c,r);const i=e.getCroppedImage(c);i&&h(i.src),e.dispose()}),[t,s,r,n,j]),Object(c.useEffect)((()=>(g.current=!1,()=>{g.current=!0})),[]),Object(Kr.jsx)(Qr,{classNames:O,style:m,...u})},fc=e=>{const{imageUrl:t=null,fit:s=!0,style:n=null,...r}=e,i=Object(c.useMemo)((()=>{const e={...n};return t&&(e.background=`url(${t}) center no-repeat`),e}),[n,t]);return Object(Kr.jsx)(Qr,{fit:s,style:i,...r})},xc=e=>{const{badgeCode:t=null,isGroup:s=!1,showInfo:n=!1,customTitle:r=null,isGrayscale:i=!1,scale:o=1,classNames:l=[],style:u={},children:d=null,...h}=e,[j,b]=Object(c.useState)(null),g=Object(c.useMemo)((()=>{const e=["badge-image"];return s&&e.push("group-badge"),i&&e.push("grayscale"),l.length&&e.push(...l),e}),[l,s,i]),O=Object(c.useMemo)((()=>{let e={};return j&&(e.backgroundImage=`url('${j.src}')`,e.width=j.width,e.height=j.height,1!==o&&(e.transform=`scale(${o})`,o%1||(e.imageRendering="pixelated"),e.width=j.width*o,e.height=j.height*o)),Object.keys(u).length&&(e={...e,...u}),e}),[j,o,u]);return Object(c.useEffect)((()=>{if(!t||!t.length)return;let e=!1;const n=s=>{if(s.badgeId!==t)return;const r=a.Sh.generateImage(new a.af(s.image));r.onload=()=>b(r),e=!0,ee().events.removeEventListener(a.s.IMAGE_READY,n)};ee().events.addEventListener(a.s.IMAGE_READY,n);const r=s?ee().getGroupBadgeImage(t):ee().getBadgeImage(t);if(r&&!e){const e=a.Sh.generateImage(new a.af(r));e.onload=()=>b(e)}return()=>ee().events.removeEventListener(a.s.IMAGE_READY,n)}),[t,s]),Object(Kr.jsxs)(Qr,{classNames:g,style:O,...h,children:[n&&k("badge.descriptions.enabled",!0)&&Object(Kr.jsxs)(Qr,{className:"badge-information text-black py-1 px-2 small",children:[Object(Kr.jsx)("div",{className:"fw-bold mb-1",children:s?r:et(t)}),Object(Kr.jsx)("div",{children:s?nt("group.badgepopup.body"):Ze(t)})]}),d]})},Ic=e=>{const{type:t="",classNames:s=[],style:n={},...r}=e,i=Object(c.useMemo)((()=>{const e=["nitro-currency-icon"];return s.length&&e.push(...s),e}),[s]),a=Object(c.useMemo)((()=>{let e=k("currency.asset.icon.url","");return e=e.replace("%type%",t.toString()),`url(${e})`}),[t]),o=Object(c.useMemo)((()=>{let e={};return e.backgroundImage=a,Object.keys(n).length&&(e={...e,...n}),e}),[n,a]);return Object(Kr.jsx)(Qr,{classNames:i,style:o,...r})},Tc=e=>{const{productType:t="s",productClassId:s=-1,extraData:n="",...r}=e;return Object(Kr.jsx)(kc,{imageUrl:(()=>{let e=null;switch(t.toLocaleLowerCase()){case er.FLOOR:e=L().getFurnitureFloorIconUrl(s);break;case er.WALL:e=L().getFurnitureWallIconUrl(s,n)}return e})(),className:"furni-image",...r})},Cc=e=>{const{productType:t="s",productClassId:s=-1,direction:n=2,extraData:r="",scale:i=1,style:o={},...l}=e,[u,d]=Object(c.useState)(null),h=Object(c.useMemo)((()=>{var e;let t={};return null!==u&&void 0!==u&&null!==(e=u.src)&&void 0!==e&&e.length&&(t.backgroundImage=`url('${u.src}')`,t.width=u.width,t.height=u.height),1!==i&&(t.transform=`scale(${i})`,i%1||(t.imageRendering="pixelated")),Object.keys(o).length&&(t={...t,...o}),t}),[u,i,o]),j=Object(c.useCallback)((()=>{let e=null;const c={imageReady:(e,t,s)=>{!s&&t&&(s=a.Sh.generateImage(t)),s.onload=()=>d(s)},imageFailed:null};switch(t.toLocaleLowerCase()){case er.FLOOR:e=L().getFurnitureFloorImage(s,new a.Ui(n),64,c,0,r);break;case er.WALL:e=L().getFurnitureWallImage(s,new a.Ui(n),64,c,0,r)}if(e){const t=e.getImage();t.onload=()=>d(t)}}),[t,s,n,r]);return Object(c.useEffect)((()=>{j()}),[j]),u?Object(Kr.jsx)(Qr,{classNames:["furni-image"],style:h,...l}):null},Sc=e=>{const{figure:t=null,userName:s=null,message:n=null,editable:r=!1,onChange:c=null}=e;return Object(Kr.jsxs)(ec,{overflow:"hidden",className:"nitro-gift-card text-black",children:[Object(Kr.jsxs)("div",{className:"d-flex align-items-center justify-content-center gift-face flex-shrink-0",children:[!s&&Object(Kr.jsx)("div",{className:"gift-incognito"}),t&&Object(Kr.jsx)("div",{className:"gift-avatar",children:Object(Kr.jsx)(Ec,{figure:t,direction:2,headOnly:!0})})]}),Object(Kr.jsx)(ec,{overflow:"hidden",className:"w-100 pt-4 pb-4 pe-4 ps-3",children:Object(Kr.jsxs)(Nc,{grow:!0,overflow:"auto",justifyContent:"between",children:[!r&&Object(Kr.jsx)(Zc,{textBreak:!0,className:"gift-message",children:n}),r&&null!==c&&Object(Kr.jsx)("textarea",{className:"gift-message h-100",maxLength:140,value:n,onChange:e=>c(e.target.value),placeholder:nt("catalog.gift_wrapping_new.message_hint")}),s&&Object(Kr.jsx)(Zc,{italics:!0,textEnd:!0,className:"pe-1",children:nt("catalog.gift_wrapping_new.message_from",["name"],[s])})]})})]})},Nc=e=>{const{size:t=0,offset:s=0,column:n=!0,gap:r=2,classNames:i=[],...a}=e,{isCssGrid:o=!1}=Object(c.useContext)($r),l=Object(c.useMemo)((()=>{const e=[];if(t){let s=`col-${t}`;o&&(s=`g-${s}`),e.push(s)}if(s){let t=`offset-${s}`;o&&(t=`g-start-${s}`),e.push(t)}return i.length&&e.push(...i),e}),[t,s,o,i]);return Object(Kr.jsx)(ec,{classNames:l,column:n,gap:r,...a})},vc=e=>{const{count:t=0,position:s="absolute",classNames:n=[],children:r=null,...i}=e,a=Object(c.useMemo)((()=>{const e=["badge","border","border-black","bg-danger","px-1","nitro-item-count"];return n.length&&e.push(...n),e}),[n]);return Object(Kr.jsxs)(Qr,{position:"absolute",classNames:a,...i,children:[t,r]})},Rc=e=>{const{value:t=0}=e,s=t.toString().split("");return Object(Kr.jsx)(Kr.Fragment,{children:s.map(((e,t)=>Object(Kr.jsx)("i",{className:"limited-edition-number n-"+e},t)))})},Ac=e=>{const{uniqueNumber:t=0,uniqueSeries:s=0,classNames:n=[],children:r=null,...i}=e,a=Object(c.useMemo)((()=>{const e=["unique-compact-plate","z-index-1"];return n.length&&e.push(...n),e}),[n]);return Object(Kr.jsxs)(Qr,{classNames:a,...i,children:[Object(Kr.jsx)("div",{children:Object(Kr.jsx)(Rc,{value:t})}),Object(Kr.jsx)("div",{children:Object(Kr.jsx)(Rc,{value:s})}),r]})},yc=e=>{const{uniqueLimitedItemsLeft:t=0,uniqueLimitedSeriesSize:s=0,classNames:n=[],...r}=e,i=Object(c.useMemo)((()=>{const e=["unique-complete-plate"];return n.length&&e.push(...n),e}),[n]);return Object(Kr.jsx)(Qr,{classNames:i,...r,children:Object(Kr.jsxs)(Nc,{className:"plate-container",gap:0,children:[Object(Kr.jsxs)(ec,{justifyContent:"between",alignItems:"center",children:[nt("unique.items.left"),Object(Kr.jsx)("div",{children:Object(Kr.jsx)(Rc,{value:t})})]}),Object(Kr.jsxs)(ec,{justifyContent:"between",alignItems:"center",children:[nt("unique.items.number.sold"),Object(Kr.jsx)("div",{children:Object(Kr.jsx)(Rc,{value:s})})]})]})})},wc=e=>{const{itemImage:t,itemColor:s,itemActive:n=!1,itemCount:r=1,itemCountMinimum:i=1,itemUniqueSoldout:a=!1,itemUniqueNumber:o=-2,itemUnseen:l=!1,itemHighlight:u=!1,disabled:d=!1,center:h=!0,column:j=!0,style:b={},classNames:g=[],position:O="relative",overflow:m="hidden",children:p=null,..._}=e,E=Object(c.useMemo)((()=>{const e=["layout-grid-item","border","border-2","border-muted","rounded"];return n&&e.push("active"),(a||o>0)&&e.push("unique-item"),a&&e.push("sold-out"),l&&e.push("unseen"),u&&e.push("has-highlight"),d&&e.push("disabled"),null===t&&e.push("icon","loading-icon"),g.length&&e.push(...g),e}),[n,a,o,l,u,d,t,g]),f=Object(c.useMemo)((()=>{let e={...b};return t&&(e.backgroundImage=`url(${t})`),s&&(e.backgroundColor=s),Object.keys(b).length&&(e={...e,...b}),e}),[b,t,s]);return Object(Kr.jsxs)(Nc,{center:h,pointer:!0,position:O,overflow:m,column:j,classNames:E,style:f,..._,children:[r>i&&Object(Kr.jsx)(vc,{count:r}),o>0&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(Qr,{fit:!0,className:"unique-bg-override",style:{backgroundImage:`url(${t})`}}),Object(Kr.jsx)("div",{className:"position-absolute bottom-0 unique-item-counter",children:Object(Kr.jsx)(Rc,{value:o})})]}),p]})},kc=e=>{const{imageUrl:t=null,...s}=e;return Object(Kr.jsx)("img",{src:t,alt:"",...s})},Dc=e=>{const{...t}=e;return Object(Kr.jsxs)(Qr,{classNames:["spinner-container"],...t,children:[Object(Kr.jsx)(Qr,{className:"spinner"}),Object(Kr.jsx)(Qr,{className:"spinner"}),Object(Kr.jsx)(Qr,{className:"spinner"})]})},Uc=e=>{const{roomId:t=-1,textureReceiver:s=null,onClose:n=null}=e,r=Object(c.useRef)(),i=Object(c.useCallback)((()=>{if(!r||!r.current)return null;const e=r.current.getBoundingClientRect();return new a.Ye(Math.floor(e.x),Math.floor(e.y),Math.floor(e.width),Math.floor(e.height))}),[]),o=Object(c.useCallback)((()=>{Ns(an.CAMERA_SHUTTER),s(L().createTextureFromRoom(t,1,i()))}),[t,i,s]);return Object(Kr.jsx)(pc,{handleSelector:".nitro-room-thumbnail-camera",children:Object(Kr.jsxs)("div",{className:"nitro-room-thumbnail-camera px-2",children:[Object(Kr.jsx)("div",{ref:r,className:"camera-frame"}),Object(Kr.jsxs)("div",{className:"d-flex align-items-end h-100 pb-2",children:[Object(Kr.jsx)("button",{className:"btn btn-sm btn-danger w-100 mb-1 me-2",onClick:n,children:nt("cancel")}),Object(Kr.jsx)("button",{className:"btn btn-sm btn-success w-100 mb-1",onClick:o,children:nt("navigator.thumbeditor.save")})]})]})})},Pc=e=>{const{title:t="",close:s=null,classNames:n=[],children:r=null,type:i=yr.DEFAULT,...a}=e,o=Object(c.useMemo)((()=>{const e=["nitro-alert"];return e.push("nitro-alert-"+i),n.length&&e.push(...n),e}),[n,i]);return Object(Kr.jsxs)(_c,{classNames:o,theme:"primary-slim",...a,children:[Object(Kr.jsx)(hc,{headerText:t,onCloseClick:s}),Object(Kr.jsx)(lc,{grow:!0,justifyContent:"between",overflow:"hidden",className:"text-black",gap:0,children:r})]})};var Mc=s(24);class Lc{}function Fc(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300;switch(e){case Lc.BOUNCE:switch(t){default:return{};case Mc.b:return{animationName:"bounceIn",animationDuration:`${s}ms`};case Mc.c:return{animationName:"bounceOut",animationDuration:`${s}ms`}}case Lc.SLIDE_LEFT:switch(t){default:return{};case Mc.b:return{animationName:"slideInLeft",animationDuration:`${s}ms`};case Mc.c:return{animationName:"slideOutLeft",animationDuration:`${s}ms`}}case Lc.SLIDE_RIGHT:switch(t){default:return{};case Mc.b:return{animationName:"slideInRight",animationDuration:`${s}ms`};case Mc.c:return{animationName:"slideOutRight",animationDuration:`${s}ms`}}case Lc.FLIP_X:switch(t){default:return{};case Mc.b:return{animationName:"flipInX",animationDuration:`${s}ms`};case Mc.c:return{animationName:"flipOutX",animationDuration:`${s}ms`}}case Lc.FADE_UP:switch(t){default:return{};case Mc.b:return{animationName:"fadeInUp",animationDuration:`${s}ms`};case Mc.c:return{animationName:"fadeOutDown",animationDuration:`${s}ms`}}case Lc.FADE_IN:switch(t){default:return{};case Mc.b:return{animationName:"fadeIn",animationDuration:`${s}ms`};case Mc.c:return{animationName:"fadeOut",animationDuration:`${s}ms`}}case Lc.FADE_DOWN:switch(t){default:return{};case Mc.b:return{animationName:"fadeInDown",animationDuration:`${s}ms`};case Mc.c:return{animationName:"fadeOutUp",animationDuration:`${s}ms`}}case Lc.HEAD_SHAKE:return t===Mc.b?{animationName:"headShake",animationDuration:`${s}ms`}:{}}return null}Lc.BOUNCE="bounce",Lc.SLIDE_LEFT="slideLeft",Lc.SLIDE_RIGHT="slideRight",Lc.FLIP_X="flipX",Lc.FADE_IN="fadeIn",Lc.FADE_DOWN="fadeDown",Lc.FADE_UP="fadeUp",Lc.HEAD_SHAKE="headShake";const Hc=e=>{const{type:t=null,inProp:s=!1,timeout:n=300,className:r=null,children:i=null}=e,[a,o]=Object(c.useState)(!1);return Object(c.useEffect)((()=>{let e=null;return s?o(!0):e=setTimeout((()=>{o(!1),clearTimeout(n)}),n),()=>{e&&clearTimeout(e)}}),[s,n]),Object(Kr.jsx)(Mc.d,{in:s,timeout:n,children:e=>Object(Kr.jsx)("div",{className:(null!==r&&void 0!==r?r:"")+" animate__animated",style:{...Fc(t,e,n)},children:a&&i})})},Bc=e=>{const{fadesOut:t=!0,timeoutMs:s=8e3,close:n=null,overflow:r="hidden",classNames:i=[],...a}=e,[o,l]=Object(c.useState)(!1),u=Object(c.useMemo)((()=>{const e=["nitro-notification-bubble"];return i.length&&e.push(...i),e}),[i]);return Object(c.useEffect)((()=>(l(!0),()=>l(!1))),[]),Object(c.useEffect)((()=>{if(!t)return;const e=setTimeout((()=>{l(!1),setTimeout((()=>n()),300)}),s);return()=>clearTimeout(e)}),[t,s,n]),Object(Kr.jsx)(Hc,{type:Lc.FADE_IN,inProp:o,timeout:300,children:Object(Kr.jsx)(ec,{overflow:r,classNames:u,onClick:n,...a})})},Gc=e=>{const{figure:t="",typeId:s=-1,paletteId:n=-1,petColor:r=16777215,customParts:i=[],posture:o="std",headOnly:l=!1,direction:u=0,scale:d=1,style:h={},...j}=e,[b,g]=Object(c.useState)(null),O=Object(c.useRef)(!1),m=Object(c.useMemo)((()=>{let e={};return b&&b.length&&(e.backgroundImage=`url(${b})`),1!==d&&(e.transform=`scale(${d})`,d%1||(e.imageRendering="pixelated")),Object.keys(h).length&&(e={...e,...h}),e}),[b,d,h]);Object(c.useEffect)((()=>{let e=s,c=n,d=r,h=i,j=l;if(t&&t.length){const s=new a.of(t);e=s.typeId,c=s.paletteId,d=s.color,h=s.customParts}16===e&&(j=!1);const b=L().getRoomObjectPetImage(e,c,d,new a.Ui(45*u),64,{imageReady:(e,t,s)=>{O.current||(s?g(s.src):t&&g(a.Sh.generateImageUrl(t)))},imageFailed:e=>{}},j,0,h,o);if(b){const e=b.getImage();e&&g(e.src)}}),[t,s,n,r,i,o,l,u]),Object(c.useEffect)((()=>(O.current=!1,()=>{O.current=!0})),[]);return Object(Kr.jsx)(Qr,{classNames:["pet-image"],style:m,...j})},Wc=e=>{const{text:t="",progress:s=0,maxProgress:n=100,position:r="relative",justifyContent:i="center",classNames:a=[],children:o=null,...l}=e,u=Object(c.useMemo)((()=>{const e=["nitro-progress-bar","text-white"];return a.length&&e.push(...a),e}),[a]);return Object(Kr.jsxs)(Nc,{position:r,justifyContent:i,classNames:u,...l,children:[t&&t.length>0&&Object(Kr.jsx)(ec,{fit:!0,center:!0,position:"absolute",className:"nitro-progress-bar-text small",children:t}),Object(Kr.jsx)(Qr,{className:"nitro-progress-bar-inner",style:{width:~~(100*(s-0)/(n-0)+0)+"%"}}),o]})},Vc=e=>{const{level:t=0,classNames:s=[],children:n=null,...r}=e,i=Object(c.useMemo)((()=>{const e=["nitro-rarity-level"];return s.length&&e.push(...s),e}),[s]);return Object(Kr.jsxs)(Qr,{classNames:i,...r,children:[Object(Kr.jsx)("div",{children:t}),n]})},qc=e=>{const{roomPreviewer:t=null,height:s=0,children:n=null}=e,[r,i]=Object(c.useState)(null),o=Object(c.useRef)(),l=Object(c.useCallback)((e=>{t&&r&&o.current&&(t.updatePreviewRoomView(),r.canvasUpdated&&(o.current.style.backgroundImage=`url(${a.Sh.generateImageUrl(r.master)})`))}),[t,r,o]),u=Object(c.useCallback)((()=>{if(!o.current||!t)return;let e=document.defaultView.getComputedStyle(o.current,null).backgroundColor;e=a.jb.rgbStringToHex(e),e=e.replace("#","0x"),t.backgroundColor=parseInt(e,16);const n=o.current.parentElement.clientWidth;t.getRoomCanvas(n,s);const r=t.getRenderingCanvas();i(r),r.canvasUpdated=!0,l(-1)}),[o,s,t,l]);return Object(c.useEffect)((()=>{if(!t)return;r||u(),C().ticker.add(l);const e=new ResizeObserver((()=>{if(!t||!o.current)return;const e=o.current.parentElement.offsetWidth;t.modifyRoomCanvas(e,s),l(-1)}));return e.observe(o.current),()=>{e.disconnect(),C().ticker.remove(l)}}),[r,t,o,s,u,l]),Object(Kr.jsxs)("div",{className:"room-preview-container",children:[Object(Kr.jsx)("div",{ref:o,className:"room-preview-image",style:{height:s},onClick:e=>{t&&(e.shiftKey?t.changeRoomObjectDirection():t.changeRoomObjectState())}}),n]})},Yc=e=>{const{roomId:t=-1,customUrl:s=null,shrink:n=!0,overflow:r="hidden",classNames:i=[],children:a=null,...o}=e,l=Object(c.useMemo)((()=>{const e=["room-thumbnail","rounded","border"];return i.length&&e.push(...i),e}),[i]),u=Object(c.useMemo)((()=>s&&s.length?k("image.library.url")+s:k("thumbnails.url").replace("%thumbnail%",t.toString())),[s,t]);return Object(Kr.jsxs)(Qr,{shrink:n,overflow:r,classNames:l,...o,children:[u&&Object(Kr.jsx)("img",{alt:"",src:u}),a]})},zc=e=>{const{color:t="",message:s="",date:n="",senderName:r="",customTitle:c=null,onCloseClick:i=null}=e;return Object(Kr.jsx)(pc,{handleSelector:".drag-handler",children:Object(Kr.jsxs)(Nc,{gap:0,alignItems:"center",className:`nitro-layout-trophy trophy-${t}`,children:[Object(Kr.jsxs)(ec,{center:!0,fullWidth:!0,position:"relative",className:"trophy-header drag-handler",children:[Object(Kr.jsx)(Qr,{position:"absolute",pointer:!0,className:"trophy-close",onClick:i}),Object(Kr.jsx)(Zc,{bold:!0,children:nt("widget.furni.trophy.title")})]}),Object(Kr.jsxs)(Nc,{className:"trophy-content py-1",gap:1,children:[c&&Object(Kr.jsx)(Zc,{bold:!0,children:c}),s]}),Object(Kr.jsxs)(ec,{alignItems:"center",justifyContent:"between",className:"trophy-footer mt-1",children:[Object(Kr.jsx)(Zc,{bold:!0,children:n}),Object(Kr.jsx)(Zc,{bold:!0,children:r})]})]})})},Kc=e=>{const{userId:t=0,userName:s=null,classNames:n=[],pointer:r=!0,children:i=null,...a}=e,o=Object(c.useMemo)((()=>{const e=["nitro-friends-spritesheet","icon-profile-sm"];return n.length&&e.push(...n),e}),[n]);return Object(Kr.jsx)(Qr,{classNames:o,pointer:r,onClick:e=>Lr(t),...a,children:i})},Qc=e=>{const{isActive:t=!1,count:s=0,overflow:n="hidden",position:r="relative",pointer:i=!0,classNames:a=[],children:o=null,...l}=e,u=Object(c.useMemo)((()=>{const e=["nav-item"];return t&&e.push("active"),a.length&&e.push(...a),e}),[t,a]);return Object(Kr.jsxs)(ec,{overflow:n,pointer:i,position:r,classNames:u,...l,children:[Object(Kr.jsx)(ec,{shrink:!0,center:!0,children:o}),s>0&&Object(Kr.jsx)(vc,{count:s})]})},$c=e=>{const{justifyContent:t="center",gap:s=1,classNames:n=[],children:r=null,...i}=e,a=Object(c.useMemo)((()=>{const e=["container-fluid","nitro-card-tabs","pt-1"];return n.length&&e.push(...n),e}),[n]);return Object(Kr.jsx)(ec,{justifyContent:t,gap:s,classNames:a,...i,children:r})},Xc=e=>{const{classNames:t=[],...s}=e,n=Object(c.useMemo)((()=>{const e=["form-group"];return t.length&&e.push(...t),e}),[t]);return Object(Kr.jsx)(ec,{classNames:n,...s})},Jc=e=>{const{variant:t="black",height:s=1,classNames:n=[],style:r={},...i}=e,a=Object(c.useMemo)((()=>{const e=[];return t&&e.push("bg-"+t),n.length&&e.push(...n),e}),[t,n]),o=Object(c.useMemo)((()=>{let e={display:"list-item"};return s>0&&(e.height=s),Object.keys(r).length&&(e={...e,...r}),e}),[s,r]);return Object(Kr.jsx)(Qr,{classNames:a,style:o,...i})},Zc=e=>{const{variant:t="black",fontWeight:s=null,fontSize:n=0,align:r=null,bold:i=!1,underline:a=!1,italics:o=!1,truncate:l=!1,center:u=!1,textEnd:d=!1,small:h=!1,wrap:j=!1,noWrap:b=!1,textBreak:g=!1,...O}=e,m=Object(c.useMemo)((()=>{const e=["d-inline"];return t&&e.push("text-"+t),i&&e.push("fw-bold"),s&&e.push("fw-"+s),n&&e.push("fs-"+n),r&&e.push("text-"+r),a&&e.push("text-decoration-underline"),o&&e.push("fst-italic"),l&&e.push("text-truncate"),u&&e.push("text-center"),d&&e.push("text-end"),h&&e.push("small"),j&&e.push("text-wrap"),b&&e.push("text-nowrap"),g&&e.push("text-break"),e}),[t,s,n,r,i,a,o,l,u,d,h,j,b,g]);return Object(Kr.jsx)(Qr,{classNames:m,...O})},ei=e=>{const{isError:t=!1,message:s="",percent:n=0}=e;return Object(c.useEffect)((()=>{t&&Pr.simpleAlert(s,null,null,null,"Connection Error")}),[t,s]),Object(Kr.jsx)(Nc,{fullHeight:!0,position:"relative",className:"nitro-loading",children:Object(Kr.jsx)(Qr,{fullHeight:!0,className:"container h-100",children:Object(Kr.jsxs)(Nc,{fullHeight:!0,alignItems:"center",justifyContent:"end",children:[Object(Kr.jsx)(Qr,{className:"connecting-duck"}),Object(Kr.jsx)(Nc,{size:6,className:"text-center py-4",children:t&&s&&s.length?Object(Kr.jsx)(Qr,{className:"fs-4 text-shadow nitro-error-loading",children:s}):Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(Zc,{fontSize:4,variant:"white",className:"text-shadow",children:"Chargement en cours..."}),Object(Kr.jsx)(Wc,{progress:n,className:"mt-3 large"})]})})]})})})},ti=e=>{const{achievement:t=null,scale:s=1,...n}=e;return t?Object(Kr.jsx)(xc,{badgeCode:u(t),isGrayscale:!b(t),scale:s,...n}):null},si=e=>{const{achievement:t=null,selectedAchievementId:s=-1,setSelectedAchievementId:n=null,children:r=null,...c}=e;return t?Object(Kr.jsxs)(wc,{itemActive:s===t.achievementId,itemUnseen:t.unseen>0,onClick:e=>n(t.achievementId),...c,children:[Object(Kr.jsx)(ti,{achievement:t}),r]}):null},ni=e=>{const{achievements:t=null,selectedAchievementId:s=-1,setSelectedAchievementId:n=null,children:r=null,...c}=e;return Object(Kr.jsxs)(Zr,{columnCount:6,columnMinWidth:50,columnMinHeight:50,...c,children:[t&&t.length>0&&t.map(((e,t)=>Object(Kr.jsx)(si,{achievement:e,selectedAchievementId:s,setSelectedAchievementId:n},t))),r]})},ri=e=>{const{achievement:t=null,children:s=null,...n}=e;return t?Object(Kr.jsxs)(ec,{shrink:!0,className:"bg-muted rounded p-2 text-black",gap:2,overflow:"hidden",...n,children:[Object(Kr.jsxs)(Nc,{center:!0,gap:1,children:[Object(Kr.jsx)(ti,{className:"nitro-achievements-badge-image",achievement:t,scale:2}),Object(Kr.jsx)(Zc,{fontWeight:"bold",children:nt("achievements.details.level",["level","limit"],[g(t).toString(),t.levelCount.toString()])})]}),Object(Kr.jsxs)(Nc,{fullWidth:!0,justifyContent:"center",overflow:"hidden",children:[Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{fontWeight:"bold",truncate:!0,children:et(u(t))}),Object(Kr.jsx)(Zc,{textBreak:!0,children:Ze(u(t))})]}),(t.levelRewardPoints>0||t.scoreLimit>0)&&Object(Kr.jsxs)(Nc,{gap:1,children:[t.levelRewardPoints>0&&Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)(Zc,{truncate:!0,className:"small",children:nt("achievements.details.reward")}),Object(Kr.jsxs)(ec,{center:!0,className:"fw-bold small",gap:1,children:[t.levelRewardPoints,Object(Kr.jsx)(Ic,{type:t.levelRewardPointType})]})]}),t.scoreLimit>0&&Object(Kr.jsx)(Wc,{text:nt("achievements.details.progress",["progress","limit"],[(t.currentPoints+t.scoreAtStartOfLevel).toString(),(t.scoreLimit+t.scoreAtStartOfLevel).toString()]),progress:t.currentPoints+t.scoreAtStartOfLevel,maxProgress:t.scoreLimit+t.scoreAtStartOfLevel,className:"mb-0"})]})]}),s]}):null},ci=e=>{const{category:t=null,selectedAchievementId:s=-1,setSelectedAchievementId:n=null,setAchievementSeen:r=null}=e,i=Object(c.useMemo)((()=>-1===s?null:t.achievements.find((e=>e.achievementId===s))),[t,s]);return Object(c.useEffect)((()=>{i||t.achievements.length&&n(t.achievements[0].achievementId)}),[i,t,n]),Object(c.useEffect)((()=>{i&&r(t.code,i.achievementId)}),[i,t,r]),t?Object(Kr.jsxs)(Nc,{fullHeight:!0,justifyContent:"between",children:[Object(Kr.jsx)(ni,{achievements:t.achievements,selectedAchievementId:s,setSelectedAchievementId:n}),!!i&&Object(Kr.jsx)(ri,{achievement:i})]}):null},ii=e=>{const{category:t=null,selectedCategoryCode:s=null,setSelectedCategoryCode:n=null,children:r=null,...c}=e;if(!t)return null;const i=h(t),a=o(t),l=d(t,i),u=j(t);return Object(Kr.jsxs)(wc,{itemActive:s===t.code,itemCount:u,itemCountMinimum:0,gap:1,onClick:e=>n(t.code),...c,children:[Object(Kr.jsx)(Zc,{fullWidth:!0,center:!0,small:!0,className:"pt-1",children:nt(`quests.${t.code}.name`)}),Object(Kr.jsx)(fc,{position:"relative",imageUrl:l,children:Object(Kr.jsxs)(Zc,{fullWidth:!0,center:!0,position:"absolute",variant:"white",style:{fontSize:12,bottom:9},children:[i," / ",a]})}),r]})},ai=e=>{const{categories:t=null,selectedCategoryCode:s=null,setSelectedCategoryCode:n=null,children:r=null,...c}=e;return Object(Kr.jsxs)(Zr,{columnCount:3,columnMinWidth:90,columnMinHeight:100,...c,children:[t&&t.length>0&&t.map(((e,t)=>Object(Kr.jsx)(ii,{category:e,selectedCategoryCode:s,setSelectedCategoryCode:n},t))),r]})},oi=e=>{const[t,s]=Object(c.useState)(!1),{achievementCategories:n=[],selectedCategoryCode:r=null,setSelectedCategoryCode:i=null,selectedAchievementId:a=-1,setSelectedAchievementId:o=null,achievementScore:l=0,getProgress:u=0,getMaxProgress:h=0,setAchievementSeen:j=null}=at(),b=Object(c.useMemo)((()=>null===r?null:n.find((e=>e.code===r))),[n,r]);return Object(c.useEffect)((()=>{const e={linkReceived:e=>{const t=e.split("/");if(!(t.length<2))switch(t[1]){case"show":return void s(!0);case"hide":return void s(!1);case"toggle":return void s((e=>!e))}},eventUrlPrefix:"achievements/"};return S(e),()=>M(e)}),[]),t?Object(Kr.jsxs)(_c,{uniqueKey:"achievements",className:"nitro-achievements",theme:"primary-slim",children:[Object(Kr.jsx)(hc,{headerText:nt("inventory.achievements"),onCloseClick:e=>s(!1)}),b&&Object(Kr.jsxs)(jc,{position:"relative",className:"justify-content-center align-items-center cursor-pointer",gap:3,children:[Object(Kr.jsx)(Qr,{onClick:e=>i(null),className:"nitro-achievements-back-arrow"}),Object(Kr.jsxs)(Nc,{grow:!0,gap:0,children:[Object(Kr.jsx)(Zc,{fontSize:4,fontWeight:"bold",className:"text-small",children:nt(`quests.${b.code}.name`)}),Object(Kr.jsx)(Zc,{children:nt("achievements.details.categoryprogress",["progress","limit"],[b.getProgress().toString(),b.getMaxProgress().toString()])})]}),Object(Kr.jsx)(kc,{imageUrl:d(b,null,!0)})]}),Object(Kr.jsxs)(lc,{gap:1,children:[!b&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(ai,{categories:n,selectedCategoryCode:r,setSelectedCategoryCode:i}),Object(Kr.jsxs)(Nc,{grow:!0,justifyContent:"end",gap:1,children:[Object(Kr.jsx)(Zc,{small:!0,center:!0,children:nt("achievements.categories.score",["score"],[l.toString()])}),Object(Kr.jsx)(Wc,{text:nt("achievements.categories.totalprogress",["progress","limit"],[u.toString(),h.toString()]),progress:u,maxProgress:h})]})]}),b&&Object(Kr.jsx)(ci,{category:b,selectedAchievementId:a,setSelectedAchievementId:o,setAchievementSeen:j})]})]}):null};class li{}li.ACTION_SAVE="AEA_ACTION_SAVE",li.ACTION_CLEAR="AEA_ACTION_CLEAR",li.ACTION_RESET="AEA_ACTION_RESET",li.ACTION_RANDOMIZE="AEA_ACTION_RANDOMIZE";class ui{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._partColor=void 0,this._isDisabled=void 0,this._isHC=void 0,this._isSelected=void 0,this._notifier=void 0,this._partColor=e,this._isDisabled=t,this._isHC=this._partColor.clubLevel>0,this._isSelected=!1}dispose(){this._partColor=null}get partColor(){return this._partColor}get color(){return a.jb.int2rgb(this._partColor.rgb)}get isDisabled(){return this._isDisabled}get isHC(){return this._isHC}get isSelected(){return this._isSelected}set isSelected(e){this._isSelected=e,this.notify&&this.notify()}get notify(){return this._notifier}set notify(e){this._notifier=e}}class di{constructor(){this._data=void 0,this._colors=void 0,this._gender="M",this._direction=di.DEFAULT_DIRECTION,this._avatarEffectType=-1,this._notifier=null}loadAvatarData(e,t){this._data=new Map,this._colors=new Map,this._gender=t,this.parseFigureString(e),this.updateView()}parseFigureString(e){if(!e)return;const t=e.split(".");if(t&&t.length)for(const s of t){const e=s.split("-");if(!e.length)continue;const t=e[0],n=parseInt(e[1]),r=[];let c=2;for(;c<e.length;)r.push(parseInt(e[c])),c++;r.length||r.push(0),this.savePartSetId(t,n,!1),this.savePartSetColourId(t,r,!1)}}getPartSetId(e){const t=this._data.get(e);return void 0!==t?t:-1}getColorIds(e){const t=this._colors.get(e);return void 0!==t?t:[bi.avatarSetFirstSelectableColor(e)]}getFigureString(){let e="";const t=[];for(const[n,r]of this._data.entries()){const e=this._colors.get(n);let s=n+"-"+r;if(e&&e.length){let t=0;for(;t<e.length;)s=s+"-"+e[t],t++}t.push(s)}let s=0;for(;s<t.length;)e+=t[s],s<t.length-1&&(e+="."),s++;return e}savePartData(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.savePartSetId(e,t,n),this.savePartSetColourId(e,s,n)}savePartSetId(e,t){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];switch(e){case di.FACE:case di.HAIR:case di.HAT:case di.HEAD_ACCESSORIES:case di.EYE_ACCESSORIES:case di.FACE_ACCESSORIES:case di.SHIRT:case di.JACKET:case di.CHEST_ACCESSORIES:case di.CHEST_PRINTS:case di.TROUSERS:case di.SHOES:case di.TROUSER_ACCESSORIES:t>=0?this._data.set(e,t):this._data.delete(e)}s&&this.updateView()}savePartSetColourId(e,t){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];switch(e){case di.FACE:case di.HAIR:case di.HAT:case di.HEAD_ACCESSORIES:case di.EYE_ACCESSORIES:case di.FACE_ACCESSORIES:case di.SHIRT:case di.JACKET:case di.CHEST_ACCESSORIES:case di.CHEST_PRINTS:case di.TROUSERS:case di.SHOES:case di.TROUSER_ACCESSORIES:this._colors.set(e,t)}s&&this.updateView()}getFigureStringWithFace(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s="";const n=[di.FACE],r=[];for(const i of n){const s=this._colors.get(i);if(!s)continue;let n=this._data.get(i);i===di.FACE&&t&&(n=e);let c=i+"-"+n;if(n>=0){let e=0;for(;e<s.length;)c=c+"-"+s[e],e++}r.push(c)}let c=0;for(;c<r.length;)s+=r[c],c<r.length-1&&(s+="."),c++;return s}updateView(){this.notify&&this.notify()}get gender(){return this._gender}get direction(){return this._direction}set direction(e){this._direction=e,this.updateView()}set avatarEffectType(e){this._avatarEffectType=e}get avatarEffectType(){return this._avatarEffectType}get notify(){return this._notifier}set notify(e){this._notifier=e}}di.DEFAULT_DIRECTION=4,di.MALE="M",di.FEMALE="F",di.UNISEX="U",di.SCALE="h",di.STD="std",di.DEFAULT_FRAME="0",di.FACE="hd",di.HAIR="hr",di.HAT="ha",di.HEAD_ACCESSORIES="he",di.EYE_ACCESSORIES="ea",di.FACE_ACCESSORIES="fa",di.JACKET="cc",di.SHIRT="ch",di.CHEST_ACCESSORIES="ca",di.CHEST_PRINTS="cp",di.TROUSERS="lg",di.SHOES="sh",di.TROUSER_ACCESSORIES="wa",di.SET_TYPES=[di.FACE,di.HAIR,di.HAT,di.HEAD_ACCESSORIES,di.EYE_ACCESSORIES,di.FACE_ACCESSORIES,di.JACKET,di.SHIRT,di.CHEST_ACCESSORIES,di.CHEST_PRINTS,di.TROUSERS,di.SHOES,di.TROUSERS];class hi{constructor(e,t){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this._renderManager=void 0,this._partSet=void 0,this._partColors=void 0,this._useColors=void 0,this._isDisabled=void 0,this._thumbContainer=void 0,this._imageUrl=void 0,this._maxColorIndex=void 0,this._isValidFigure=void 0,this._isHC=void 0,this._isSellable=void 0,this._isClear=void 0,this._isSelected=void 0,this._disposed=void 0,this._isInitalized=void 0,this._notifier=void 0,this._renderManager=N(),this._partSet=e,this._partColors=t,this._useColors=s,this._isDisabled=n,this._thumbContainer=null,this._imageUrl=null,this._maxColorIndex=0,this._isValidFigure=!1,this._isHC=!1,this._isSellable=!1,this._isClear=!1,this._isSelected=!1,this._disposed=!1,this._isInitalized=!1,e){const t=e.parts;for(const e of t)this._maxColorIndex=Math.max(this._maxColorIndex,e.colorLayerIndex)}}init(){this._isInitalized||(this._isInitalized=!0,this.update())}dispose(){this._disposed||(this._renderManager=null,this._partSet=null,this._partColors=null,this._imageUrl=null,this._disposed=!0,this._isInitalized=!1,this._thumbContainer&&(this._thumbContainer.destroy(),this._thumbContainer=null))}update(){this.updateThumbVisualization()}analyzeFigure(){if(!this._renderManager||!this._partSet||!this._partSet.parts||!this._partSet.parts.length)return!1;const e=this._renderManager.createFigureContainer(this.partSet.type+"-"+this.partSet.id);return this._renderManager.isFigureContainerReady(e)?(this._isValidFigure=!0,!0):(this._renderManager.downloadAvatarFigure(e,this),!1)}renderThumb(){if(!this._renderManager||!this._partSet)return null;if(!this._isValidFigure&&!this.analyzeFigure())return null;const e=this._partSet.parts.concat().sort(this.sortByDrawOrder),t=new a.Se;for(const s of e){if(!s)continue;let e=null,n=0,r=!1;for(;!r&&n<hi.THUMB_DIRECTIONS.length;){const t=di.SCALE+"_"+di.STD+"_"+s.type+"_"+s.id+"_"+hi.THUMB_DIRECTIONS[n]+"_"+di.DEFAULT_FRAME;e=this._renderManager.getAssetByName(t),e&&e.texture?r=!0:n++}if(!r)continue;const c=e.offsetX,i=e.offsetY;let o=null;if(this._useColors&&s.colorLayerIndex>0){const e=this._partColors[s.colorLayerIndex-1];e&&(o=e)}const l=new a.af(e.texture);l.position.set(c,i),o&&(l.tint=o.rgb),t.addChild(l)}return t}updateThumbVisualization(){if(!this._isInitalized)return;let e=this._thumbContainer;e||(e=this.renderThumb()),e&&(this._partSet?(this._isHC=this._partSet.clubLevel>0,this._isSellable=this._partSet.isSellable):(this._isHC=!1,this._isSellable=!1),this._isDisabled&&this.setAlpha(e,.2),this._imageUrl=a.Sh.generateImageUrl(e),this.notify&&this.notify())}setAlpha(e,t){return e.filters=[hi.ALPHA_FILTER],e}sortByDrawOrder(e,t){const s=hi.DRAW_ORDER.indexOf(e.type),n=hi.DRAW_ORDER.indexOf(t.type);return s<n?-1:s>n?1:e.index<t.index?-1:e.index>t.index?1:0}resetFigure(e){this.analyzeFigure()&&this.update()}get disposed(){return this._disposed}get id(){return this._partSet?this._partSet.id:-1}get partSet(){return this._partSet}set partColors(e){this._partColors=e,this.update()}get isDisabled(){return this._isDisabled}set thumbContainer(e){this._thumbContainer=e,this.update()}get imageUrl(){return this._imageUrl}get maxColorIndex(){return this._maxColorIndex}get isHC(){return this._isHC}get isSellable(){return this._isSellable}get isClear(){return this._isClear}set isClear(e){this._isClear=e}get isSelected(){return this._isSelected}set isSelected(e){this._isSelected=e,this.notify&&this.notify()}get notify(){return this._notifier}set notify(e){this._notifier=e}}hi.ALPHA_FILTER=new a.Qe(.2),hi.THUMB_DIRECTIONS=[2,6,0,4,3,1],hi.DRAW_ORDER=[a.p.LEFT_HAND_ITEM,a.p.LEFT_HAND,a.p.LEFT_SLEEVE,a.p.LEFT_COAT_SLEEVE,a.p.BODY,a.p.SHOES,a.p.LEGS,a.p.CHEST,a.p.CHEST_ACCESSORY,a.p.COAT_CHEST,a.p.CHEST_PRINT,a.p.WAIST_ACCESSORY,a.p.RIGHT_HAND,a.p.RIGHT_SLEEVE,a.p.RIGHT_COAT_SLEEVE,a.p.HEAD,a.p.FACE,a.p.EYES,a.p.HAIR,a.p.HAIR_BIG,a.p.FACE_ACCESSORY,a.p.EYE_ACCESSORY,a.p.HEAD_ACCESSORY,a.p.HEAD_ACCESSORY_EXTRA,a.p.RIGHT_HAND_ITEM];class ji{constructor(e,t,s){this._name=void 0,this._parts=void 0,this._palettes=void 0,this._selectedPartIndex=-1,this._paletteIndexes=void 0,this._name=e,this._parts=t,this._palettes=s,this._selectedPartIndex=-1}static defaultColorId(e,t){if(!e||!e.length)return-1;let s=0;for(;s<e.length;){const n=e[s];if(n.partColor&&n.partColor.clubLevel<=t)return n.partColor.id;s++}return-1}init(){for(const e of this._parts)e&&e.init()}dispose(){if(this._parts){for(const e of this._parts)e.dispose();this._parts=null}if(this._palettes){for(const e of this._palettes)for(const t of e)t.dispose();this._palettes=null}this._selectedPartIndex=-1,this._paletteIndexes=null}selectPartId(e){if(!this._parts)return;let t=0;for(;t<this._parts.length;){if(this._parts[t].id===e)return void this.selectPartIndex(t);t++}}selectColorIds(e){if(!e||!this._palettes)return;this._paletteIndexes=new Array(e.length);let t=0;for(;t<this._palettes.length;){const s=this.getPalette(t);if(s){let n=0;if(e.length>t)n=e[t];else{const e=s[0];e&&e.partColor&&(n=e.partColor.id)}let r=0;for(;r<s.length;){const e=s[r];e.partColor.id===n?(this._paletteIndexes[t]=r,e.isSelected=!0):e.isSelected=!1,r++}}t++}this.updatePartColors()}selectPartIndex(e){if(!this._parts)return null;if(this._selectedPartIndex>=0&&this._parts.length>this._selectedPartIndex){const e=this._parts[this._selectedPartIndex];e&&(e.isSelected=!1)}if(this._parts.length>e){const t=this._parts[e];if(t)return t.isSelected=!0,this._selectedPartIndex=e,t}return null}selectColorIndex(e,t){const s=this.getPalette(t);if(!s)return null;if(s.length<=e)return null;this.deselectColorIndex(this._paletteIndexes[t],t),this._paletteIndexes[t]=e;const n=s[e];return n?(n.isSelected=!0,this.updatePartColors(),n):null}getCurrentColorIndex(e){return this._paletteIndexes[e]}deselectColorIndex(e,t){const s=this.getPalette(t);if(!s)return;if(s.length<=e)return;const n=s[e];n&&(n.isSelected=!1)}getSelectedColorIds(){if(!this._paletteIndexes||!this._paletteIndexes.length)return null;if(!this._palettes||!this._palettes.length)return null;const e=this._palettes[0];if(!e||!e.length)return null;const t=e[0];if(!t||!t.partColor)return null;const s=t.partColor.id,n=[];let r=0;for(;r<this._paletteIndexes.length;){const e=this._palettes[r];if(e&&!(e.length<=r))if(e.length>this._paletteIndexes[r]){const t=e[this._paletteIndexes[r]];t&&t.partColor?n.push(t.partColor.id):n.push(s)}else n.push(s);r++}const c=this.getCurrentPart();return c?n.slice(0,Math.max(c.maxColorIndex,1)):null}getSelectedColors(){const e=[];let t=0;for(;t<this._paletteIndexes.length;){const s=this.getSelectedColor(t);s?e.push(s.partColor):e.push(null),t++}return e}getSelectedColor(e){const t=this.getPalette(e);return!t||t.length<=this._paletteIndexes[e]?null:t[this._paletteIndexes[e]]}getSelectedColorId(e){const t=this.getSelectedColor(e);return t&&t.partColor?t.partColor.id:0}getPalette(e){return!this._paletteIndexes||!this._palettes||this._palettes.length<=e?null:this._palettes[e]}getCurrentPart(){return this._parts[this._selectedPartIndex]}updatePartColors(){const e=this.getSelectedColors();for(const t of this._parts)t&&(t.partColors=e)}hasClubSelectionsOverLevel(e){let t=!1;const s=this.getSelectedColors();if(s){let n=0;for(;n<s.length;){const r=s[n];r&&r.clubLevel>e&&(t=!0),n++}}const n=this.getCurrentPart();if(n&&n.partSet){const s=n.partSet;s&&s.clubLevel>e&&(t=!0)}return t}hasInvalidSelectedItems(e){const t=this.getCurrentPart();if(!t)return!1;const s=t.partSet;return s&&s.isSellable?e.indexOf(s.id)>-1:void 0}stripClubItemsOverLevel(e){const t=this.getCurrentPart();if(t&&t.partSet){if(t.partSet.clubLevel>e){const e=this.selectPartIndex(0);return e&&!e.partSet&&this.selectPartIndex(1),!0}}return!1}stripClubColorsOverLevel(e){const t=[],s=this.getSelectedColors(),n=this.getPalette(0);let r=!1;const c=ji.defaultColorId(n,e);if(-1===c)return!1;let i=0;for(;i<s.length;){const n=s[i];n?n.clubLevel>e?(t.push(c),r=!0):t.push(n.id):(t.push(c),r=!0),i++}return r&&this.selectColorIds(t),r}get name(){return this._name}get parts(){return this._parts}get selectedPartIndex(){return this._selectedPartIndex}}class bi{static getGender(e){switch(e){case di.MALE:case"m":case"M":e=di.MALE;break;case di.FEMALE:case"f":case"F":e=di.FEMALE;break;default:e=di.MALE}return e}static hasFigureSetId(e){return this.FIGURE_SET_IDS.indexOf(e)>=0}static createCategory(e,t){if(!e||!t||!this.CURRENT_FIGURE)return null;const s=[],n=[];let r=0;for(;r<this.MAX_PALETTES;)n.push([]),r++;const c=R(t);if(!c)return null;const i=v(c.paletteID);if(!i)return null;let a=this.CURRENT_FIGURE.getColorIds(t);a||(a=[]);const o=new Array(a.length),l=this.clubItemsDimmed,u=te();for(const b of i.colors.getValues())if(b.isSelectable&&(l||u>=b.clubLevel)){let e=0;for(;e<this.MAX_PALETTES;){const t=u<b.clubLevel,s=new ui(b,t);n[e].push(s),e++}if(t!==di.FACE){let e=0;for(;e<a.length;)b.id===a[e]&&(o[e]=b),e++}}let d=[];d=l?N().getMandatoryAvatarPartSetIds(this.CURRENT_FIGURE.gender,2):N().getMandatoryAvatarPartSetIds(this.CURRENT_FIGURE.gender,u);if(-1===d.indexOf(t)){const e=new hi(null,null,!1);e.isClear=!0,s.push(e)}const h=t!==di.FACE,j=c.partSets;for(r=j.length-1;r>=0;){const e=j.getWithIndex(r);let t=!1;if((e.gender===di.UNISEX||e.gender===this.CURRENT_FIGURE.gender)&&(t=!0),e.isSelectable&&t&&(l||u>=e.clubLevel)){const t=u<e.clubLevel;let n=!0;e.isSellable&&(n=this.hasFigureSetId(e.id)),n&&s.push(new hi(e,o,h,t))}r--}for(s.sort(this.clubItemsFirst?this.clubSorter:this.noobSorter),r=0;r<this.MAX_PALETTES;)n[r].sort(this.colorSorter),r++;return new ji(t,s,n)}static clubSorter(e,t){const s=e.partSet?e.partSet.clubLevel:9999999999,n=t.partSet?t.partSet.clubLevel:9999999999,r=!!e.partSet&&e.partSet.isSellable,c=!!t.partSet&&t.partSet.isSellable;return r&&!c?1:c&&!r||s>n?-1:s<n?1:e.partSet.id>t.partSet.id?-1:e.partSet.id<t.partSet.id?1:0}static colorSorter(e,t){const s=e.partColor?e.partColor.clubLevel:-1,n=t.partColor?t.partColor.clubLevel:-1;return s<n?-1:s>n?1:e.partColor.index<t.partColor.index?-1:e.partColor.index>t.partColor.index?1:0}static noobSorter(e,t){const s=e.partSet?e.partSet.clubLevel:-1,n=t.partSet?t.partSet.clubLevel:-1,r=!!e.partSet&&e.partSet.isSellable,c=!!t.partSet&&t.partSet.isSellable;return r&&!c?1:c&&!r||s<n?-1:s>n?1:e.partSet.id<t.partSet.id?-1:e.partSet.id>t.partSet.id?1:0}static avatarSetFirstSelectableColor(e){const t=R(e);if(!t)return-1;const s=v(t.paletteID);if(!s)return-1;for(const n of s.colors.getValues())if(n.isSelectable&&!(te()<n.clubLevel))return n.id;return-1}static get clubItemsFirst(){return k("avatareditor.show.clubitems.first",!0)}static get clubItemsDimmed(){return k("avatareditor.show.clubitems.dimmed",!0)}}bi.MAX_PALETTES=2,bi.CURRENT_FIGURE=null,bi.FIGURE_SET_IDS=[],bi.BOUND_FURNITURE_NAMES=[];class gi{constructor(){this._categories=void 0,this._isInitalized=void 0,this._maxPaletteCount=void 0,this._disposed=void 0,this._isInitalized=!1,this._maxPaletteCount=0}dispose(){this._categories=null,this._disposed=!0}get disposed(){return this._disposed}init(){this._categories||(this._categories=new Map)}reset(){if(this._isInitalized=!1,this._categories)for(const e of this._categories.values())e&&e.dispose();this._categories=new Map}addCategory(e){let t=this._categories.get(e);t||(t=bi.createCategory(this,e),t&&(this._categories.set(e,t),this.updateSelectionsFromFigure(e)))}updateSelectionsFromFigure(e){const t=this._categories.get(e);if(!t)return;const s=bi.CURRENT_FIGURE.getPartSetId(e);let n=bi.CURRENT_FIGURE.getColorIds(e);n||(n=[]),t.selectPartId(s),t.selectColorIds(n)}hasClubSelectionsOverLevel(e){if(!this._categories)return!1;for(const t of this._categories.values())if(t&&t.hasClubSelectionsOverLevel(e))return!0;return!1}hasInvalidSelectedItems(e){if(!this._categories)return!1;for(const t of this._categories.values())if(t.hasInvalidSelectedItems(e))return!0;return!1}stripClubItemsOverLevel(e){if(!this._categories)return!1;let t=!1;for(const[s,n]of this._categories.entries()){let r=!1;if(n.stripClubItemsOverLevel(e)&&(r=!0),n.stripClubColorsOverLevel(e)&&(r=!0),r){const e=n.getCurrentPart();e&&bi.CURRENT_FIGURE&&bi.CURRENT_FIGURE.savePartData(s,e.id,n.getSelectedColorIds(),!0),t=!0}}return t}stripInvalidSellableItems(){if(!this._categories)return!1;let e=!1;for(const[t,s]of this._categories.entries()){if(!1){const n=s.getCurrentPart();n&&bi.CURRENT_FIGURE&&bi.CURRENT_FIGURE.savePartData(t,n.id,s.getSelectedColorIds(),!0),e=!0}}return e}selectPart(e,t){const s=this._categories.get(e);if(!s)return;const n=s.selectedPartIndex;s.selectPartIndex(t);const r=s.getCurrentPart();r&&(r.isDisabled?s.selectPartIndex(n):(this._maxPaletteCount=r.maxColorIndex,bi.CURRENT_FIGURE.savePartData(e,r.id,s.getSelectedColorIds(),!0)))}selectColor(e,t,s){const n=this._categories.get(e);if(!n)return;const r=n.getCurrentColorIndex(s);n.selectColorIndex(t,s);n.getSelectedColor(s).isDisabled?n.selectColorIndex(r,s):bi.CURRENT_FIGURE.savePartSetColourId(e,n.getSelectedColorIds(),!0)}getCategoryData(e){return this._isInitalized||this.init(),this._categories?this._categories.get(e):null}get categories(){return this._categories}get canSetGender(){return!1}get maxPaletteCount(){return this._maxPaletteCount||1}set maxPaletteCount(e){this._maxPaletteCount=e}get name(){return null}}class Oi extends gi{constructor(){super(...arguments),this._imageCallBackHandled=!1}init(){super.init(),this.addCategory(di.FACE),this._isInitalized=!0}selectColor(e,t,s){super.selectColor(e,t,s),this.updateSelectionsFromFigure(di.FACE)}updateSelectionsFromFigure(e){if(!this._categories||!bi.CURRENT_FIGURE)return;const t=this._categories.get(e);if(!t)return;const s=bi.CURRENT_FIGURE.getPartSetId(e);let n=bi.CURRENT_FIGURE.getColorIds(e);n||(n=[]),t.selectPartId(s),t.selectColorIds(n);for(const r of t.parts){const e=t=>{const s=bi.CURRENT_FIGURE.getFigureStringWithFace(r.id),n=N().createAvatarImage(s,a.q.LARGE,null,{resetFigure:e,dispose:null,disposed:!1}),c=n.getImageAsSprite(a.r.HEAD);c&&(c.y=10,r.thumbContainer=c,setTimeout((()=>n.dispose()),0))};e(null)}}get canSetGender(){return!0}get name(){return a.m.GENERIC}}function mi(e){const t=e.parts;let s=0;for(const n of t)s=Math.max(s,n.colorLayerIndex);return s}function pi(e,t){return t=t.filter((t=>-1===e.indexOf(t))),[...e,...nn.getRandomElements(t,nn.getRandomNumber(t.length)+1)]}function _i(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(!e)return null;const r=e.partSets.getValues().filter((e=>!e.isSelectable||"U"!==e.gender&&e.gender!==t||e.clubLevel>s||e.isSellable&&-1===n.indexOf(e.id)?null:e));return r&&r.length?nn.getRandomElement(r):null}function Ei(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!e)return[];const n=e.colors.getValues().filter((e=>!e.isSelectable||e.clubLevel>s?null:e));return n&&n.length?nn.getRandomElements(n,mi(t)):null}class fi extends gi{init(){super.init(),this.addCategory(di.HAIR),this.addCategory(di.HAT),this.addCategory(di.HEAD_ACCESSORIES),this.addCategory(di.EYE_ACCESSORIES),this.addCategory(di.FACE_ACCESSORIES),this._isInitalized=!0}get name(){return a.m.HEAD}}class xi extends gi{init(){super.init(),this.addCategory(di.TROUSERS),this.addCategory(di.SHOES),this.addCategory(di.TROUSER_ACCESSORIES),this._isInitalized=!0}get name(){return a.m.LEGS}}class Ii extends gi{init(){super.init(),this.addCategory(di.SHIRT),this.addCategory(di.CHEST_PRINTS),this.addCategory(di.JACKET),this.addCategory(di.CHEST_ACCESSORIES),this._isInitalized=!0}get name(){return a.m.TORSO}}const Ti=e=>{const{icon:t=null,selected:s=!1,classNames:n=[],children:r=null,...i}=e,a=Object(c.useMemo)((()=>{const e=["nitro-avatar-editor-spritesheet"];return t&&t.length&&e.push(t+"-icon"),s&&e.push("selected"),n.length&&e.push(...n),e}),[t,s,n]);return Object(Kr.jsx)(Qr,{classNames:a,...i})},Ci=e=>{const{figureData:t=null}=e,[s,n]=Object(c.useState)(-1),r=Object(c.useCallback)((()=>{n((e=>e+1))}),[]),i=Object(c.useCallback)((e=>{e<a.l.MIN_DIRECTION&&(e=a.l.MAX_DIRECTION+(e+1)),e>a.l.MAX_DIRECTION&&(e-=a.l.MAX_DIRECTION+1),t.direction=e}),[t]);return Object(c.useEffect)((()=>{if(t)return t.notify=r,()=>{t.notify=null}}),[t,r]),Object(Kr.jsxs)(Nc,{className:"figure-preview-container",overflow:"hidden",position:"relative",children:[Object(Kr.jsx)(Ec,{figure:t.getFigureString(),direction:t.direction,scale:2}),Object(Kr.jsx)(Ti,{className:"avatar-spotlight",icon:"spotlight"}),Object(Kr.jsx)(Qr,{className:"avatar-shadow"}),Object(Kr.jsxs)(Qr,{className:"arrow-container",children:[Object(Kr.jsx)(Ti,{pointer:!0,icon:"arrow-left",onClick:e=>i(t.direction+1)}),Object(Kr.jsx)(Ti,{pointer:!0,icon:"arrow-right",onClick:e=>i(t.direction-1)})]})]})},Si=e=>{const{partItem:t=null,children:s=null,...n}=e,[r,i]=Object(c.useState)(-1),a=k("hc.disabled",!1),o=Object(c.useCallback)((()=>{i((e=>e+1))}),[]);return Object(c.useEffect)((()=>(t.notify=o,()=>{t.notify=null})),[t,o]),Object(Kr.jsxs)(wc,{itemImage:t.isClear?void 0:t.imageUrl,itemActive:t.isSelected,...n,children:[!a&&t.isHC&&Object(Kr.jsx)(Ic,{className:"position-absolute end-1 bottom-1",type:"hc"}),t.isClear&&Object(Kr.jsx)(Ti,{icon:"clear"}),t.isSellable&&Object(Kr.jsx)(Ti,{icon:"sellable",position:"absolute",className:"end-1 bottom-1"}),s]})},Ni=e=>{const{model:t=null,category:s=null,setMaxPaletteCount:n=null}=e,r=Object(c.useCallback)((e=>{const r=s.parts.indexOf(e);if(-1===r)return;t.selectPart(s.name,r);const c=s.getCurrentPart();n(c.maxColorIndex||1)}),[t,s,n]);return Object(Kr.jsx)(Zr,{columnCount:3,columnMinHeight:50,children:s.parts.length>0&&s.parts.map(((e,t)=>Object(Kr.jsx)(Si,{partItem:e,onClick:t=>r(e)},t)))})},vi=e=>{const{colorItem:t=null,children:s=null,...n}=e,[r,i]=Object(c.useState)(-1),a=k("hc.disabled",!1),o=Object(c.useCallback)((()=>{i((e=>e+1))}),[]);return Object(c.useEffect)((()=>(t.notify=o,()=>t.notify=null))),Object(Kr.jsxs)(wc,{itemHighlight:!0,itemColor:t.color,itemActive:t.isSelected,className:"clear-bg",...n,children:[!a&&t.isHC&&Object(Kr.jsx)(Ic,{className:"position-absolute end-1 bottom-1",type:"hc"}),s]})},Ri=e=>{const{model:t=null,category:s=null,paletteSet:n=[],paletteIndex:r=-1}=e,i=Object(c.useCallback)((e=>{const c=n.indexOf(e);-1!==c&&t.selectColor(s.name,c,r)}),[t,s,n,r]);return Object(Kr.jsx)(Zr,{gap:1,columnCount:5,columnMinWidth:30,children:n.length>0&&n.map(((e,t)=>Object(Kr.jsx)(vi,{colorItem:e,onClick:t=>i(e)},t)))})},Ai=e=>{const{model:t=null,gender:s=null,setGender:n=null}=e,[r,i]=Object(c.useState)(null),[a,o]=Object(c.useState)(1),l=Object(c.useCallback)((e=>{const s=t.categories.get(e);if(s){s.init(),i(s);for(const e of s.parts)if(e&&e.isSelected){o(e.maxColorIndex||1);break}}}),[t]);return Object(c.useEffect)((()=>{t.init();for(const e of t.categories.keys()){l(e);break}}),[t,l]),t&&r?Object(Kr.jsxs)(Jr,{children:[Object(Kr.jsxs)(Nc,{size:2,children:[t.canSetGender&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(ec,{center:!0,pointer:!0,className:"category-item",onClick:e=>n(di.MALE),children:Object(Kr.jsx)(Ti,{icon:"male",selected:s===di.MALE})}),Object(Kr.jsx)(ec,{center:!0,pointer:!0,className:"category-item",onClick:e=>n(di.FEMALE),children:Object(Kr.jsx)(Ti,{icon:"female",selected:s===di.FEMALE})})]}),!t.canSetGender&&t.categories&&t.categories.size>0&&Array.from(t.categories.keys()).map((e=>{const s=t.categories.get(e);return Object(Kr.jsx)(ec,{center:!0,pointer:!0,className:"category-item",onClick:t=>l(e),children:Object(Kr.jsx)(Ti,{icon:s.name,selected:r===s})},e)}))]}),Object(Kr.jsx)(Nc,{size:5,overflow:"hidden",children:Object(Kr.jsx)(Ni,{model:t,category:r,setMaxPaletteCount:o})}),Object(Kr.jsxs)(Nc,{size:5,overflow:"hidden",children:[a>=1&&Object(Kr.jsx)(Ri,{model:t,category:r,paletteSet:r.getPalette(0),paletteIndex:0}),2===a&&Object(Kr.jsx)(Ri,{model:t,category:r,paletteSet:r.getPalette(1),paletteIndex:1})]})]}):null},yi=e=>{const{figureData:t=null,savedFigures:s=[],setSavedFigures:n=null,loadAvatarInEditor:r=null}=e,i=k("hc.disabled",!1),o=Object(c.useCallback)((e=>{if(e>=s.length||e<0)return;const[t,n]=s[e];r(t.getFigureString(),n)}),[s,r]),l=Object(c.useCallback)((e=>{if(!t||e>=s.length||e<0)return;const r=[...s],c=t.getFigureString(),i=t.gender;r[e]=[N().createFigureContainer(c),i],n(r),$n(new a.Eh(e+1,c,i))}),[t,s,n]),u=Object(c.useMemo)((()=>{if(!s||!s.length)return[];const e=[];return s.forEach(((t,s)=>{let[n,r]=t,c=0;n&&(c=N().getFigureClubLevel(n,r)),e.push(Object(Kr.jsxs)(wc,{position:"relative",overflow:"hidden",className:"nitro-avatar-editor-wardrobe-figure-preview",children:[n&&Object(Kr.jsx)(Ec,{figure:n.getFigureString(),gender:r,direction:2}),Object(Kr.jsx)(Qr,{className:"avatar-shadow"}),!i&&c>0&&Object(Kr.jsx)(Ic,{className:"position-absolute top-1 start-1",type:"hc"}),Object(Kr.jsxs)(ec,{gap:1,className:"button-container",children:[Object(Kr.jsx)(tc,{variant:"link",fullWidth:!0,onClick:e=>l(s),children:nt("avatareditor.wardrobe.save")}),n&&Object(Kr.jsx)(tc,{variant:"link",fullWidth:!0,onClick:e=>o(s),disabled:c>te(),children:nt("generic_usable.button.use")})]})]},s))})),e}),[s,i,l,o]);return Object(Kr.jsx)(Zr,{columnCount:5,columnMinWidth:80,columnMinHeight:140,children:u})},wi=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(null),[i,o]=Object(c.useState)(null),[l,u]=Object(c.useState)(null),[d,h]=Object(c.useState)(null),[j,b]=Object(c.useState)([]),[g,O]=Object(c.useState)([]),[m,p]=Object(c.useState)([]),[_,E]=Object(c.useState)(!1),[f,x]=Object(c.useState)(null),[I,T]=Object(c.useState)(null),[C,v]=Object(c.useState)(!0),[R,A]=Object(c.useState)(!1),y=Object(c.useMemo)((()=>k("avatar.wardrobe.max.slots",10)),[]),w=Object(c.useCallback)((e=>{const t=e.getParser();b(t.figureSetIds),O(t.boundsFurnitureNames)}),[]);it(a.yb,w);const D=Object(c.useCallback)((e=>{const t=e.getParser(),s=[];let n=0;for(;n<y;)s.push([null,null]),n++;for(let[r,[c,i]]of t.looks.entries()){const e=N().createFigureContainer(c);s[r-1]=[e,i]}p(s)}),[y]);it(a.Ti,D);const U=Object(c.useCallback)((e=>{l&&h(l.get(e))}),[l]),P=Object(c.useCallback)((()=>{const e=new Map;e.set(a.m.GENERIC,new Oi),e.set(a.m.HEAD,new fi),e.set(a.m.TORSO,new Ii),e.set(a.m.LEGS,new xi),u(e)}),[]),L=Object(c.useCallback)((()=>{const e=new Map,t=new di,s=new di;t.loadAvatarData("hr-100.hd-180-7.ch-215-66.lg-270-79.sh-305-62.ha-1002-70.wa-2007",di.MALE),s.loadAvatarData("hr-515-33.hd-600-1.ch-635-70.lg-716-66-62.sh-735-68",di.FEMALE),e.set(di.MALE,t),e.set(di.FEMALE,s),r(e),o(e.get(di.MALE))}),[]),F=Object(c.useCallback)((function(e,t){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];t=bi.getGender(t);let r=i;t!==r.gender&&(r=n.get(t)),e!==r.getFigureString()&&r.loadAvatarData(e,t),r!==i&&o(r),s&&(x(i.getFigureString()),T(i.gender))}),[n,i]),H=Object(c.useCallback)((e=>{switch(e){case li.ACTION_CLEAR:return F(i.getFigureStringWithFace(0,!1),i.gender,!1),void P();case li.ACTION_RESET:return F(f,I),void P();case li.ACTION_RANDOMIZE:const e=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];const c=N().structure,i=new a.o(""),o=pi(c.getMandatorySetTypeIds(t,s),di.SET_TYPES);for(const a of r){const t=e.getPartSetId(a),s=e.getColorIds(a);i.updatePart(a,t,s)}for(const a of o){if(i.hasPartType(a))continue;const e=c.figureData.getSetType(a),r=_i(e,t,s,n);if(!r)continue;let o=[];r.isColorable&&(o=Ei(c.figureData.getPalette(e.paletteID),r,s).map((e=>e.id))),i.updatePart(e.type,r.id,o)}return i.getFigureString()}(i,i.gender,te(),j,[di.FACE]);return F(e,i.gender,!1),void P();case li.ACTION_SAVE:return $n(new a.Di(i.gender,i.getFigureString())),void s(!1)}}),[i,f,I,j,F,P]),B=Object(c.useCallback)((e=>{e=bi.getGender(e),o(n.get(e))}),[n]),G=Object(c.useCallback)((e=>{const t=e.split("/");if(!(t.length<2))switch(t[1]){case"show":return void s(!0);case"hide":return void s(!1);case"toggle":return void s((e=>!e))}}),[]);return Object(c.useEffect)((()=>{const e={linkReceived:G,eventUrlPrefix:"avatar-editor/"};return S(e),()=>M(e)}),[G]),Object(c.useEffect)((()=>{p(new Array(y))}),[y]),Object(c.useEffect)((()=>{_&&(h(null),$n(new a.Cc))}),[_]),Object(c.useEffect)((()=>{d&&E(!1)}),[d]),Object(c.useEffect)((()=>{l&&U(a.m.GENERIC)}),[l,U]),Object(c.useEffect)((()=>{if(i)return bi.CURRENT_FIGURE=i,P(),()=>bi.CURRENT_FIGURE=null}),[i,P]),Object(c.useEffect)((()=>(bi.FIGURE_SET_IDS=j,bi.BOUND_FURNITURE_NAMES=g,P(),()=>{bi.FIGURE_SET_IDS=null,bi.BOUND_FURNITURE_NAMES=null})),[j,g,P]),Object(c.useEffect)((()=>{if(t)return n?void 0:(L(),void A(!0))}),[t,n,L]),Object(c.useEffect)((()=>{t&&R&&C&&(F(ee().figure,ee().gender),v(!1))}),[t,R,C,F]),Object(c.useEffect)((()=>{if(!t)return()=>{v(!0)}}),[t]),t&&i?Object(Kr.jsxs)(_c,{uniqueKey:"avatar-editor",className:"nitro-avatar-editor",children:[Object(Kr.jsx)(hc,{headerText:nt("avatareditor.title"),onCloseClick:e=>s(!1)}),Object(Kr.jsxs)($c,{children:[l&&l.size>0&&Array.from(l.keys()).map((e=>{const t=d&&d.name===e;return Object(Kr.jsx)(Qc,{isActive:t,onClick:t=>U(e),children:nt(`avatareditor.category.${e}`)},e)})),Object(Kr.jsx)(Qc,{isActive:_,onClick:e=>E(!0),children:nt("avatareditor.category.wardrobe")})]}),Object(Kr.jsx)(lc,{children:Object(Kr.jsxs)(Jr,{children:[Object(Kr.jsxs)(Nc,{size:9,overflow:"hidden",children:[d&&!_&&Object(Kr.jsx)(Ai,{model:d,gender:i.gender,setGender:B}),_&&Object(Kr.jsx)(yi,{figureData:i,savedFigures:m,setSavedFigures:p,loadAvatarInEditor:F})]}),Object(Kr.jsxs)(Nc,{size:3,overflow:"hidden",children:[Object(Kr.jsx)(Ci,{figureData:i}),Object(Kr.jsxs)(Nc,{grow:!0,gap:1,children:[Object(Kr.jsxs)(sc,{children:[Object(Kr.jsx)(tc,{variant:"secondary",onClick:e=>H(li.ACTION_RESET),children:Object(Kr.jsx)(ic.a,{icon:"undo"})}),Object(Kr.jsx)(tc,{variant:"secondary",onClick:e=>H(li.ACTION_CLEAR),children:Object(Kr.jsx)(ic.a,{icon:"trash"})}),Object(Kr.jsx)(tc,{variant:"secondary",onClick:e=>H(li.ACTION_RANDOMIZE),children:Object(Kr.jsx)(ic.a,{icon:"dice"})})]}),Object(Kr.jsx)(tc,{className:"w-100",variant:"success",onClick:e=>H(li.ACTION_SAVE),children:nt("avatareditor.save")})]})]})]})})]}):null},ki=Object(c.createContext)({cameraRoll:null,setCameraRoll:null,selectedPictureIndex:null,setSelectedPictureIndex:null}),Di=e=>Object(Kr.jsx)(ki.Provider,{value:e.value,children:e.children});class Ui{constructor(e,t){this.texture=e,this.imageUrl=t}}const Pi=e=>{const{onClose:t=null,onEdit:s=null,onDelete:n=null}=e,{cameraRoll:r=null,setCameraRoll:i=null,selectedPictureIndex:o=-1,setSelectedPictureIndex:l=null}=Object(c.useContext)(ki),u=Object(c.useRef)(),d=o>-1?r[o]:null,h=Object(c.useCallback)((()=>{if(!u||!u.current)return null;const e=u.current.getBoundingClientRect();return new a.Ye(Math.floor(e.x),Math.floor(e.y),Math.floor(e.width),Math.floor(e.height))}),[]),j=Object(c.useCallback)((()=>{if(o>-1)return void l(-1);const e=L().createTextureFromRoom(ie().roomId,1,h()),t=[...r];t.length>=5&&(Pr.simpleAlert(nt("camera.full.body")),t.pop()),Ns(an.CAMERA_SHUTTER),t.push(new Ui(e,a.Sh.generateImageUrl(e))),i(t)}),[r,o,h,i,l]);return Object(Kr.jsx)(pc,{uniqueKey:"nitro-camera-capture",children:Object(Kr.jsxs)(Nc,{center:!0,className:"nitro-camera-capture",gap:0,children:[d&&Object(Kr.jsx)("img",{alt:"",className:"camera-area",src:d.imageUrl}),Object(Kr.jsxs)("div",{className:"camera-canvas drag-handler",children:[Object(Kr.jsx)("div",{className:"position-absolute header-close",onClick:t,children:Object(Kr.jsx)(ic.a,{icon:"times"})}),!d&&Object(Kr.jsx)("div",{ref:u,className:"camera-area camera-view-finder"}),d&&Object(Kr.jsx)("div",{className:"camera-area camera-frame",children:Object(Kr.jsxs)("div",{className:"camera-frame-preview-actions w-100 position-absolute bottom-0 py-2 text-center",children:[Object(Kr.jsx)("button",{className:"btn btn-success me-3",title:nt("camera.editor.button.tooltip"),onClick:s,children:nt("camera.editor.button.text")}),Object(Kr.jsx)("button",{className:"btn btn-danger",onClick:n,children:nt("camera.delete.button.text")})]})}),Object(Kr.jsx)("div",{className:"d-flex justify-content-center",children:Object(Kr.jsx)("div",{className:"camera-button",title:nt("camera.take.photo.button.tooltip"),onClick:j})})]}),r.length>0&&Object(Kr.jsx)(ec,{gap:2,justifyContent:"center",className:"camera-roll d-flex justify-content-center py-2",children:r.map(((e,t)=>Object(Kr.jsx)("img",{alt:"",src:e.imageUrl,onClick:e=>l(t)},t)))})]})})},Mi=e=>{const{base64Url:t=null,onCloseClick:s=null,onCancelClick:n=null,price:r=null}=e,[i,o]=Object(c.useState)(null),[l,u]=Object(c.useState)(null),[d,h]=Object(c.useState)(0),[j,b]=Object(c.useState)(!1),[g,O]=Object(c.useState)(!1),[m,p]=Object(c.useState)(0),_=Object(c.useMemo)((()=>k("camera.publish.disabled",!1)),[]),E=Object(c.useCallback)((e=>{h((e=>e+1)),O(!1)}),[]);it(a.N,E);const f=Object(c.useCallback)((e=>{const t=e.getParser();u(t.extraDataId),p(t.secondsToWait),b(t.ok),O(!1)}),[]);it(a.M,f);const x=Object(c.useCallback)((e=>{const t=e.getParser();o(k("camera.url")+"/"+t.url)}),[]);it(a.O,x);const I=function(e){switch(e){case"close":return void s();case"buy":if(g)return;return O(!0),void $n(new a.Gf(""));case"publish":if(g)return;return O(!0),void $n(new a.Af);case"cancel":return void n()}};return Object(c.useEffect)((()=>{t&&L().saveBase64AsScreenshot(t)}),[t]),r?Object(Kr.jsxs)(_c,{className:"nitro-camera-checkout",theme:"primary-slim",children:[Object(Kr.jsx)(hc,{headerText:nt("camera.confirm_phase.title"),onCloseClick:e=>I("close")}),Object(Kr.jsxs)(lc,{children:[Object(Kr.jsxs)(ec,{center:!0,children:[i&&i.length&&Object(Kr.jsx)(kc,{className:"picture-preview border",imageUrl:i}),(!i||!i.length)&&Object(Kr.jsx)(ec,{center:!0,className:"picture-preview border",children:Object(Kr.jsx)(Zc,{bold:!0,children:nt("camera.loading")})})]}),Object(Kr.jsxs)(ec,{justifyContent:"between",alignItems:"center",className:"bg-muted rounded p-2",children:[Object(Kr.jsxs)(Nc,{size:_?10:6,gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("camera.purchase.header")}),(r.credits>0||r.duckets>0)&&Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)(Zc,{children:nt("catalog.purchase.confirmation.dialog.cost")}),r.credits>0&&Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:r.credits}),Object(Kr.jsx)(Ic,{type:-1})]}),r.duckets>0&&Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:r.duckets}),Object(Kr.jsx)(Ic,{type:5})]})]}),d>0&&Object(Kr.jsxs)(Zc,{children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("camera.purchase.count.info")})," ",d,Object(Kr.jsx)("u",{className:"ms-1 cursor-pointer",onClick:()=>y("inventory/open"),children:nt("camera.open.inventory")})]})]}),Object(Kr.jsx)(ec,{alignItems:"center",children:Object(Kr.jsx)(tc,{variant:"success",disabled:g,onClick:e=>I("buy"),children:nt(d?"camera.buy.another.button.text":"buy")})})]}),!_&&Object(Kr.jsxs)(ec,{justifyContent:"between",alignItems:"center",className:"bg-muted rounded p-2",children:[Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt(j?"camera.publish.successful":"camera.publish.explanation")}),Object(Kr.jsx)(Zc,{children:nt(j?"camera.publish.success.short.info":"camera.publish.detailed.explanation")}),j&&Object(Kr.jsx)("a",{href:l,rel:"noreferrer",target:"_blank",children:nt("camera.link.to.published")}),!j&&r.publishDucketPrice>0&&Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)(Zc,{children:nt("catalog.purchase.confirmation.dialog.cost")}),Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:r.publishDucketPrice}),Object(Kr.jsx)(Ic,{type:5})]})]}),m>0&&Object(Kr.jsx)("div",{className:"mt-1 text-center fw-bold",children:nt("camera.publish.wait",["minutes"],[Math.ceil(m/60).toString()])})]}),!j&&Object(Kr.jsx)(ec,{className:"d-flex align-items-end",children:Object(Kr.jsx)(tc,{variant:"success",disabled:g||m>0,onClick:e=>I("publish"),children:nt("camera.publish.button.text")})})]}),Object(Kr.jsx)(Zc,{center:!0,children:nt("camera.warning.disclaimer")}),Object(Kr.jsx)(ec,{justifyContent:"end",children:Object(Kr.jsx)(tc,{onClick:e=>I("cancel"),children:nt("generic.cancel")})})]})]}):null};var Li=s(16);class Fi{}Fi.COLORMATRIX="colormatrix",Fi.COMPOSITE="composite";class Hi{constructor(e,t){this.effectName=e,this.thumbnailUrl=t}}const Bi=e=>{const{effect:t=null,thumbnailUrl:s=null,isActive:n=!1,isLocked:r=!1,selectEffect:c=null,removeEffect:i=null}=e;return Object(Kr.jsxs)(wc,{title:nt(r?`camera.effect.required.level ${t.minLevel}`:`camera.effect.name.${t.name}`),itemActive:n,onClick:e=>!n&&c(),children:[n&&Object(Kr.jsx)(tc,{variant:"danger",className:"rounded-circle remove-effect",onClick:i,children:Object(Kr.jsx)(ic.a,{icon:"times"})}),!r&&s&&s.length>0&&Object(Kr.jsx)("div",{className:"effect-thumbnail-image border",children:Object(Kr.jsx)("img",{alt:"",src:s})}),r&&Object(Kr.jsxs)(Zc,{center:!0,bold:!0,children:[Object(Kr.jsx)("div",{children:Object(Kr.jsx)(ic.a,{icon:"lock"})}),t.minLevel]})]})},Gi=e=>{const{myLevel:t=0,selectedEffects:s=[],effects:n=[],thumbnails:r=[],processAction:c=null}=e;return Object(Kr.jsx)(Jr,{columnCount:3,overflow:"auto",children:n&&n.length>0&&n.map(((e,n)=>{const i=r.find((t=>t.effectName===e.name)),a=s.findIndex((t=>t.effect.name===e.name))>-1;return Object(Kr.jsx)(Bi,{effect:e,thumbnailUrl:i&&i.thumbnailUrl||null,isActive:a,isLocked:e.minLevel>t,selectEffect:()=>c("select_effect",e.name),removeEffect:()=>c("remove_effect",e.name)},n)}))})},Wi=[Fi.COLORMATRIX,Fi.COMPOSITE],Vi=e=>{const{picture:t=null,availableEffects:s=null,myLevel:n=1,onClose:r=null,onCancel:i=null,onCheckout:o=null}=e,[l,u]=Object(c.useState)(Wi[0]),[d,h]=Object(c.useState)(null),[j,b]=Object(c.useState)([]),[g,O]=Object(c.useState)([]),[m,p]=Object(c.useState)(!1),_=Object(c.useMemo)((()=>s.filter((e=>e.colorMatrix))),[s]),E=Object(c.useMemo)((()=>s.filter((e=>e.texture))),[s]),f=Object(c.useCallback)((()=>l===Fi.COLORMATRIX?_:E),[l,_,E]),x=Object(c.useCallback)((e=>e&&e.length&&j&&j.length?j.findIndex((t=>t.effect.name===e)):-1),[j]),I=Object(c.useMemo)((()=>x(d)),[d,x]),T=Object(c.useMemo)((()=>d&&j[I]||null),[d,I,j]),C=Object(c.useCallback)((e=>{const t=I;-1!==t&&b((s=>{const n=[...s],r=n[t];return n[I]=new a.ag(r.effect,e),n}))}),[I,b]),S=Object(c.useMemo)((()=>A().applyEffects(t.texture,j,m).src),[t,j,m]),N=Object(c.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(e){case"close":return void r();case"cancel":return void i();case"checkout":return void o(S);case"change_tab":return void u(String(t));case"select_effect":{if(x(t)>=0)return;const e=s.find((e=>e.name===t));if(!e)return;return b((t=>[...t,new a.ag(e,1)])),void h(e.name)}case"remove_effect":{let e=x(t);if(-1===e)return;return b((t=>{const s=[...t];return s.splice(e,1),s})),void(d===t&&h(null))}case"clear_effects":return h(null),void b([]);case"download":{const e=new Image;e.src=S;return void window.open("").document.write(e.outerHTML)}case"zoom":return void p(!m)}}),[m,s,d,S,x,i,o,r,p,b]);return Object(c.useEffect)((()=>{const e=[];for(const n of s)e.push(new Hi(n.name,A().applyEffects(t.texture,[new a.ag(n,1)],!1).src));O(e)}),[t,s]),Object(Kr.jsxs)(_c,{className:"nitro-camera-editor",children:[Object(Kr.jsx)(hc,{headerText:nt("camera.editor.button.text"),onCloseClick:e=>N("close")}),Object(Kr.jsx)($c,{children:Wi.map((e=>Object(Kr.jsx)(Qc,{isActive:l===e,onClick:t=>N("change_tab",e),children:Object(Kr.jsx)("i",{className:"icon icon-camera-"+e})},e)))}),Object(Kr.jsx)(lc,{children:Object(Kr.jsxs)(Jr,{children:[Object(Kr.jsx)(Nc,{size:5,overflow:"hidden",children:Object(Kr.jsx)(Gi,{myLevel:n,selectedEffects:j,effects:f(),thumbnails:g,processAction:N})}),Object(Kr.jsxs)(Nc,{size:7,justifyContent:"between",overflow:"hidden",children:[Object(Kr.jsxs)(Nc,{center:!0,children:[Object(Kr.jsx)(kc,{imageUrl:S,className:"picture-preview"}),d&&Object(Kr.jsxs)(Nc,{center:!0,fullWidth:!0,gap:1,children:[Object(Kr.jsx)(Zc,{children:nt("camera.effect.name."+d)}),Object(Kr.jsx)(Li.a,{className:"nitro-slider",min:0,max:1,step:.01,value:T.alpha,onChange:e=>C(e),renderThumb:(e,t)=>Object(Kr.jsx)("div",{...e,children:t.valueNow})})]})]}),Object(Kr.jsxs)(ec,{justifyContent:"between",children:[Object(Kr.jsxs)(sc,{children:[Object(Kr.jsx)(tc,{onClick:e=>N("clear_effects"),children:Object(Kr.jsx)(ic.a,{icon:"trash"})}),Object(Kr.jsx)(tc,{onClick:e=>N("download"),children:Object(Kr.jsx)(ic.a,{icon:"save"})}),Object(Kr.jsx)(tc,{onClick:e=>N("zoom"),children:Object(Kr.jsx)(ic.a,{icon:m?"search-minus":"search-plus"})})]}),Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)(tc,{onClick:e=>N("cancel"),children:nt("generic.cancel")}),Object(Kr.jsx)(tc,{onClick:e=>N("checkout"),children:nt("camera.preview.button.text")})]})]})]})]})})]})},qi=e=>{const[t,s]=Object(c.useState)(0),[n,r]=Object(c.useState)([]),[i,o]=Object(c.useState)([]),[l,u]=Object(c.useState)(-1),[d,h]=Object(c.useState)(10),[j,b]=Object(c.useState)(null),[g,O]=Object(c.useState)(null),m=Object(c.useCallback)((e=>{r(Array.from(A().effects.values()))}),[]);var p,_;p=a.Zf.INITIALIZED,_=m,Pt(p,C().cameraManager.events,_);const E=Object(c.useCallback)((e=>{const t=e.getParser();O({credits:t.creditPrice,duckets:t.ducketPrice,publishDucketPrice:t.publishDucketPrice})}),[]);it(a.Od,E);const f=Object(c.useCallback)((e=>{s(0)}),[]);Gt(a.Yg.ENDED,f),Object(c.useEffect)((()=>{if(!A().isLoaded)return A().init(),void $n(new a.Tf)}),[]);const x=Object(c.useCallback)((e=>{switch(e){case"close":return void s(0);case"edit":return void s(2);case"delete":return void o((e=>{const t=[...e];return t.splice(l,1),t}));case"editor_cancel":return void s(1)}}),[l]),I=Object(c.useCallback)((e=>{b(e),s(3)}),[]),T=Object(c.useCallback)((e=>{const t=e.split("/");if(!(t.length<2))switch(t[1]){case"show":return void s(1);case"hide":return void s(0);case"toggle":return void s((e=>e?0:1))}}),[]);return Object(c.useEffect)((()=>{const e={linkReceived:T,eventUrlPrefix:"camera/"};return S(e),()=>M(e)}),[T]),0===t?null:Object(Kr.jsxs)(Di,{value:{cameraRoll:i,setCameraRoll:o,selectedPictureIndex:l,setSelectedPictureIndex:u},children:[1===t&&Object(Kr.jsx)(Pi,{onClose:()=>x("close"),onEdit:()=>x("edit"),onDelete:()=>x("delete")}),2===t&&Object(Kr.jsx)(Vi,{picture:i[l],myLevel:d,onClose:()=>x("close"),onCancel:()=>x("editor_cancel"),onCheckout:I,availableEffects:n}),3===t&&Object(Kr.jsx)(Mi,{base64Url:j,onCloseClick:()=>x("close"),onCancelClick:()=>x("editor_cancel"),price:g})]})},Yi=e=>{const{itemId:t=-1,state:s=null,product:n=null,active:r=!1,onClick:c=null}=e;return Object(Kr.jsxs)(Nc,{fit:!0,center:!0,pointer:!0,className:"campaign-spritesheet campaign-day-generic-bg rounded calendar-item "+(r?"active":""),onClick:()=>c(t),children:[s===m.STATE_UNLOCKED&&Object(Kr.jsx)(ec,{center:!0,className:"campaign-spritesheet unlocked-bg",children:Object(Kr.jsx)(ec,{center:!0,className:"campaign-spritesheet campaign-opened",children:n&&Object(Kr.jsx)(kc,{imageUrl:n.customImage?k("image.library.url")+n.customImage:(e=>{let t=ee().getFloorItemDataByName(e),s=null;return t?s=L().getFurnitureFloorIconUrl(t.id):(t=ee().getWallItemDataByName(e),t&&(s=L().getFurnitureWallIconUrl(t.id))),s})(n.productName)})})}),s!==m.STATE_UNLOCKED&&Object(Kr.jsxs)(ec,{center:!0,className:"campaign-spritesheet locked-bg",children:[s===m.STATE_LOCKED_AVAILABLE&&Object(Kr.jsx)(Qr,{className:"campaign-spritesheet available"}),(s===m.STATE_LOCKED_EXPIRED||s===m.STATE_LOCKED_FUTURE)&&Object(Kr.jsx)(Qr,{className:"campaign-spritesheet unavailable"})]})]})},zi=e=>{const{close:t=null,campaignName:s=null,currentDay:n=null,numDays:r=null,missedDays:i=null,openedDays:a=null,openPackage:o=null,receivedProducts:l=null}=e,[u,d]=Object(c.useState)(n),[h,j]=Object(c.useState)(Math.max(0,u-1)),b=e=>a.includes(e)?m.STATE_UNLOCKED:e>n?m.STATE_LOCKED_FUTURE:i.includes(e)?m.STATE_LOCKED_EXPIRED:m.STATE_LOCKED_AVAILABLE,g=e=>{if(u!==e)d(e);else{b(e)===m.STATE_LOCKED_AVAILABLE&&o(e,!1)}};return Object(Kr.jsxs)(_c,{className:"nitro-campaign-calendar",theme:"primary-slim",children:[Object(Kr.jsx)(hc,{headerText:nt(`campaign.calendar.${s}.title`),onCloseClick:t}),Object(Kr.jsxs)(lc,{children:[Object(Kr.jsxs)(Jr,{fullHeight:!1,justifyContent:"between",alignItems:"center",children:[Object(Kr.jsx)(Nc,{size:1}),Object(Kr.jsx)(Nc,{size:10,children:Object(Kr.jsxs)(ec,{justifyContent:"between",alignItems:"center",gap:1,children:[Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{fontSize:3,children:nt("campaign.calendar.heading.day",["number"],[(u+1).toString()])}),Object(Kr.jsx)(Zc,{children:(e=>{switch(b(e)){case m.STATE_UNLOCKED:return nt("campaign.calendar.info.unlocked");case m.STATE_LOCKED_FUTURE:return nt("campaign.calendar.info.future");case m.STATE_LOCKED_EXPIRED:return nt("campaign.calendar.info.expired");default:return nt("campaign.calendar.info.available.desktop")}})(u)})]}),Object(Kr.jsx)("div",{children:ee().isModerator&&Object(Kr.jsx)(tc,{variant:"danger",onClick:()=>{const e=u;b(e)!==m.STATE_UNLOCKED&&o(e,!0)},children:"Force open"})})]})}),Object(Kr.jsx)(Nc,{size:1})]}),Object(Kr.jsxs)(ec,{fullHeight:!0,gap:2,children:[Object(Kr.jsx)(ec,{center:!0,children:Object(Kr.jsx)(Qr,{pointer:!0,className:"campaign-spritesheet prev",onClick:()=>{const e=u-1;e<0||(d(e),h>e&&j(h-1))}})}),Object(Kr.jsx)(Nc,{center:!0,fullWidth:!0,children:Object(Kr.jsx)(Jr,{fit:!0,columnCount:5,gap:1,children:[...Array(5)].map(((e,t)=>{const s=h+t;return Object(Kr.jsx)(Nc,{overflow:"hidden",children:Object(Kr.jsx)(Yi,{itemId:s,state:b(s),active:u===s,product:l.has(s)?l.get(s):null,onClick:g})},t)}))})}),Object(Kr.jsx)(ec,{center:!0,children:Object(Kr.jsx)(Qr,{pointer:!0,className:"campaign-spritesheet next",onClick:()=>{const e=u+1;e!==r&&(d(e),h+5<e+1&&j(h+1))}})})]})]})]})},Ki=e=>{const[t,s]=Object(c.useState)(null),[n,r]=Object(c.useState)(-1),[i,o]=Object(c.useState)(new Map),[l,u]=Object(c.useState)(!1),d=Object(c.useCallback)((e=>{const t=e.getParser();t&&s(t.calendarData)}),[]);it(a.P,d);const h=Object(c.useCallback)((e=>{const t=e.getParser();if(!t)return;const c=n;t.doorOpened&&(s((e=>{const t=e.clone();return t.openedDays.push(n),t})),o((e=>{const s=new Map(e);return s.set(c,new O(t.productName,t.customImage,t.furnitureClassName)),s}))),r(-1)}),[n]);it(a.Q,h);const j=Object(c.useCallback)((function(e){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t&&(r(e),$n(s?new a.hf(t.campaignName,e):new a.if(t.campaignName,e)))}),[t]),b=Object(c.useCallback)((()=>{u(!1)}),[]),g=Object(c.useCallback)((e=>{const t=e.split("/");if(!(t.length<2)&&"calendar"===t[1])u(!0)}),[]);return Object(c.useEffect)((()=>{const e={linkReceived:g,eventUrlPrefix:"openView/"};return S(e),()=>{M(e)}}),[g]),Object(Kr.jsx)(Kr.Fragment,{children:t&&l&&Object(Kr.jsx)(zi,{close:b,campaignName:t.campaignName,currentDay:t.currentDay,numDays:t.campaignDays,openedDays:t.openedDays,missedDays:t.missedDays,openPackage:j,receivedProducts:i})})};var Qi=s(23),$i=s.n(Qi);const Xi=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(0),[i,o]=Object(c.useState)(0),[l,u]=Object(c.useState)(""),[d,h]=Object(c.useState)(""),[j,b]=Object(c.useState)(!0),[g,O]=Object(c.useState)(""),[m,p]=Object(c.useState)([]),[_,E]=Object(c.useState)(0),[f,x]=Object(c.useState)(0),[I,T]=Object(c.useState)(0),[C,S]=Object(c.useState)(0),[N,v]=Object(c.useState)(0),[R,A]=Object(c.useState)(!1),{catalogOptions:y=null}=Jt(),{giftConfiguration:w=null}=y,k=Object(c.useCallback)((()=>{s(!1),r(0),o(0),u(""),h(""),b(!0),O(""),E(0),x(0),m.length&&T(m[0].id)}),[m]),D=Object(c.useCallback)((e=>{switch(e.type){case ht.PURCHASE_SUCCESS:return void k();case lt.INIT_GIFT:const t=e;return k(),r(t.pageId),o(t.offerId),u(t.extraData),void s(!0)}}),[k]);qt(ht.PURCHASE_SUCCESS,D),qt(lt.INIT_GIFT,D);const U=Object(c.useMemo)((()=>!w||w.defaultStuffTypes.findIndex((e=>e===w.boxTypes[_]))>-1),[w,_]),P=Object(c.useMemo)((()=>w?(1e3*w.boxTypes[_]+w.ribbonTypes[f]).toString():""),[w,_,f]),M=Object(c.useMemo)((()=>{if(!w)return!1;const e=w.boxTypes[_];return!(8===e||e>=3&&e<=6)}),[w,_]),L=Object(c.useCallback)((e=>{switch(e){case"prev_box":return void E((e=>0===e?C:e-1));case"next_box":return void E((e=>e===C?0:e+1));case"prev_ribbon":return void x((e=>0===e?N:e-1));case"next_ribbon":return void x((e=>e===N?0:e+1));case"buy":return d&&0!==d.length?void $n(new a.Cf(n,i,l,d,g,I,_,f,j)):void A(!0)}}),[l,C,N,g,i,n,d,_,I,f,j]),F=Object(c.useCallback)((()=>{A(!0)}),[]);if(it(a.Ec,F),Object(c.useEffect)((()=>{A(!1)}),[d]),Object(c.useEffect)((()=>{if(!w)return;const e=[];for(const t of w.stuffTypes){const s=ee().getFloorItemData(t);s&&(s.colors&&s.colors.length>0&&e.push({id:t,color:`#${s.colors[0].toString(16)}`}))}S(w.boxTypes.length-1),v(w.ribbonTypes.length-1),e.length&&(T(e[0].id),p(e))}),[w]),!w||!w.isEnabled||!t)return null;const H="catalog.gift_wrapping_new.box."+(U?"default":_),B=`catalog.gift_wrapping_new.ribbon.${f}`,G="catalog.gift_wrapping_new."+(U?"freeprice":"price");return Object(Kr.jsxs)(_c,{uniqueKey:"catalog-gift",className:"nitro-catalog-gift",theme:"primary-slim",children:[Object(Kr.jsx)(hc,{headerText:nt("catalog.gift_wrapping.title"),onCloseClick:k}),Object(Kr.jsxs)(lc,{className:"text-black",children:[Object(Kr.jsxs)(Xc,{column:!0,children:[Object(Kr.jsx)(Zc,{children:nt("catalog.gift_wrapping.receiver")}),Object(Kr.jsx)("input",{type:"text",className:"form-control form-control-sm"+$i()({" is-invalid":R}),value:d,onChange:e=>h(e.target.value)}),R&&Object(Kr.jsx)(Qr,{className:"invalid-feedback",children:nt("catalog.gift_wrapping.receiver_not_found.title")})]}),Object(Kr.jsx)(Sc,{figure:ee().figure,userName:ee().userName,message:g,editable:!0,onChange:e=>O(e)}),Object(Kr.jsxs)(Qr,{className:"form-check",children:[Object(Kr.jsx)("input",{className:"form-check-input",type:"checkbox",name:"showMyFace",checked:j,onChange:e=>b((e=>!e))}),Object(Kr.jsx)("label",{className:"form-check-label",children:nt("catalog.gift_wrapping.show_face.title")})]}),Object(Kr.jsxs)(ec,{alignItems:"center",gap:2,children:[I&&Object(Kr.jsx)(Qr,{className:"gift-preview",children:Object(Kr.jsx)(Cc,{productType:er.FLOOR,productClassId:I,extraData:P})}),Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsxs)(ec,{gap:2,children:[Object(Kr.jsxs)(sc,{children:[Object(Kr.jsx)(tc,{variant:"primary",onClick:()=>L("prev_box"),children:Object(Kr.jsx)(ic.a,{icon:"chevron-left"})}),Object(Kr.jsx)(tc,{variant:"primary",onClick:()=>L("next_box"),children:Object(Kr.jsx)(ic.a,{icon:"chevron-right"})})]}),Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{fontWeight:"bold",children:nt(H)}),Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[nt(G,["price"],[w.price.toString()]),Object(Kr.jsx)(Ic,{type:-1})]})]})]}),Object(Kr.jsxs)(ec,{alignItems:"center",gap:2,children:[Object(Kr.jsxs)(sc,{children:[Object(Kr.jsx)(tc,{variant:"primary",onClick:()=>L("prev_ribbon"),children:Object(Kr.jsx)(ic.a,{icon:"chevron-left"})}),Object(Kr.jsx)(tc,{variant:"primary",onClick:()=>L("next_ribbon"),children:Object(Kr.jsx)(ic.a,{icon:"chevron-right"})})]}),Object(Kr.jsx)(Zc,{fontWeight:"bold",children:nt(B)})]})]})]}),Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{fontWeight:"bold",children:nt("catalog.gift_wrapping.pick_color")}),Object(Kr.jsx)(ec,{gap:1,children:m.map((e=>Object(Kr.jsx)(tc,{className:"gift-color-btn",active:e.id===I,disabled:!M,style:{backgroundColor:e.color},onClick:()=>T(e.id)},e.id)))})]}),Object(Kr.jsxs)(ec,{justifyContent:"between",alignItems:"center",children:[Object(Kr.jsx)(tc,{variant:"link",onClick:k,className:"text-black",children:nt("cancel")}),Object(Kr.jsx)(tc,{variant:"success",onClick:()=>L("buy"),children:nt("catalog.gift_wrapping.give_gift")})]})]})]})},Ji=e=>{const[t,s]=Object(c.useState)(""),[n,r]=Object(c.useState)(!1),{currentType:i=null,rootNode:a=null,offersToNodes:o=null,searchResult:l=null,setSearchResult:u=null,setCurrentPage:d=null}=Jt(),h=e=>{e&&e.length?(s(e),r(!0)):(s(""),l&&u(null))},j=Object(c.useCallback)((e=>{if(r(!1),!(e=e.toLocaleLowerCase().replace(" ",""))||!e.length)return;const t=ee().getAllFurnitureData({loadFurnitureData:null});if(!t||!t.length)return;const s=[],n=[];for(const r of t){if(i===T.BUILDER&&!r.availableForBuildersClub)continue;if(i===T.NORMAL&&r.excludeDynamic)continue;const t=[r.className,r.name,r.description].join(" ").replace(/ /gi,"").toLowerCase();if(i===T.BUILDER&&-1===r.purchaseOfferId&&-1===r.rentOfferId)""!==r.furniLine&&n.indexOf(r.furniLine)<0&&t.indexOf(e)>=0&&n.push(r.furniLine);else{if([...Jn(o,r.purchaseOfferId),...Jn(o,r.rentOfferId)].length&&(t.indexOf(e)>=0&&s.push(r),250===s.length))break}}const c=[];for(const r of s)c.push(new nr(r));let l=[];Zn(e,n,a,l),d(new E(-1,"default_3x3",new cr([],[]),c,!1,1)),u(new or(e,c,l.filter((e=>e.isVisible))))}),[o,i,a,d,u]);return Object(c.useEffect)((()=>{if(!n)return;const e=setTimeout((()=>j(t)),300);return()=>clearTimeout(e)}),[t,n,j]),Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)(ec,{fullWidth:!0,alignItems:"center",position:"relative",children:Object(Kr.jsx)("input",{type:"text",className:"form-control form-control-sm",placeholder:nt("generic.search"),value:t,onChange:e=>h(e.target.value),onKeyDown:e=>("Enter"===e.code||"NumpadEnter"===e.code)&&j(t)})}),(!t||!t.length)&&Object(Kr.jsx)(tc,{variant:"primary",className:"catalog-search-button",children:Object(Kr.jsx)(ic.a,{icon:"search"})}),t&&!!t.length&&Object(Kr.jsx)(tc,{variant:"primary",className:"catalog-search-button",onClick:e=>h(""),children:Object(Kr.jsx)(ic.a,{icon:"times"})})]})},Zi=e=>{const{icon:t=0}=e,s=Object(c.useMemo)((()=>k("catalog.asset.icon.url").replace("%name%",t.toString())),[t]);return Object(Kr.jsx)(kc,{imageUrl:s,style:{width:20,height:20}})},ea=e=>{const{node:t=null}=e;return Object(Kr.jsx)(Kr.Fragment,{children:t&&t.children.length>0&&t.children.map(((e,t)=>e.isVisible?Object(Kr.jsx)(ta,{node:e},t):null))})},ta=e=>{const{node:t=null}=e,{activateNode:s=null}=Jt();return Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsxs)(wc,{gap:1,column:!1,itemActive:t.isActive,onClick:e=>s(t),className:t.depth>2&&"subcategory-"+(t.depth-2),children:[Object(Kr.jsx)(Zi,{icon:t.iconId}),Object(Kr.jsx)(Zc,{grow:!0,truncate:!0,children:t.localization}),t.isBranch&&Object(Kr.jsx)(ic.a,{icon:t.isOpen?"caret-up":"caret-down"})]}),t.isOpen&&t.isBranch&&Object(Kr.jsx)(ea,{node:t})]})},sa=e=>{const{node:t=null}=e,{searchResult:s=null}=Jt();return Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(Ji,{}),Object(Kr.jsx)(Nc,{fullHeight:!0,className:"nitro-catalog-navigation-grid-container rounded p-1",overflow:"hidden",children:Object(Kr.jsxs)(Zr,{gap:1,columnCount:1,children:[s&&s.filteredNodes.length>0&&s.filteredNodes.map(((e,t)=>Object(Kr.jsx)(ta,{node:e},t))),!s&&Object(Kr.jsx)(ea,{node:t})]})})]})},na=e=>{const{columnCount:t=5,...s}=e,[n,r]=Object(c.useState)(!1),[i,o]=Object(c.useState)(null),{currentOffer:l=null,setPurchaseOptions:u=null}=Jt(),{badgeCodes:d=[],activate:h=null,deactivate:j=null}=as(),b=Object(c.useMemo)((()=>{if(!i)return null;const e=new a.Qh;return e.setValue(["0",i,"",""]),e}),[i]);return Object(c.useEffect)((()=>{l&&u((e=>{const t={...e};return t.extraParamRequired=!0,t.extraData=b&&b.getValue(1)||null,t.previewStuffData=b,t}))}),[l,b,u]),Object(c.useEffect)((()=>{if(!n)return;const e=h();return()=>j(e)}),[n,h,j]),Object(c.useEffect)((()=>(r(!0),()=>r(!1))),[]),Object(Kr.jsx)(Zr,{columnCount:t,...s,children:d&&d.length>0&&d.map(((e,t)=>Object(Kr.jsx)(wc,{itemActive:i===e,onClick:t=>o(e),children:Object(Kr.jsx)(xc,{badgeCode:e})},t)))})},ra=e=>{const{currentPage:t=null,setCurrentOffer:s=null}=Jt();return Object(c.useEffect)((()=>{t&&t.offers.length&&s(t.offers[0])}),[t,s]),null},ca=e=>{const{offer:t=null,selectOffer:s=null,itemActive:n=!1,...r}=e,[i,o]=Object(c.useState)(!1),{requestOfferToMover:l=null}=Jt(),{isVisible:u=!1}=hs(),d=Object(c.useMemo)((()=>t.pricingModel===sr.PRICING_MODEL_BUNDLE?null:t.product.getIconUrl(t)),[t]),h=e=>{switch(e.type){case a.Ce.MOUSE_DOWN:return s(t),void o(!0);case a.Ce.MOUSE_UP:return void o(!1);case a.Ce.ROLL_OUT:if(!i||!n||!u)return;return void l(t)}},j=t.product;return j?Object(Kr.jsx)(wc,{itemImage:d,itemCount:t.pricingModel===sr.PRICING_MODEL_MULTI?j.productCount:1,itemUniqueSoldout:j.uniqueLimitedItemSeriesSize&&!j.uniqueLimitedItemsLeft,itemUniqueNumber:j.uniqueLimitedItemSeriesSize,itemActive:n,onMouseDown:h,onMouseUp:h,onMouseOut:h,...r,children:t.product.productType===er.ROBOT&&Object(Kr.jsx)(Ec,{figure:t.product.extraParam,headOnly:!0,direction:3})}):null},ia=e=>{const{columnCount:t=5,children:s=null,...n}=e,{currentOffer:r=null,setCurrentOffer:c=null,currentPage:i=null,setPurchaseOptions:a=null}=Jt();if(!i)return null;const o=e=>{e.activate(),e.isLazy||(c(e),e.product&&e.product.productType===er.WALL&&a((t=>{const s={...t};return s.extraData=e.product.extraParam||null,s})))};return Object(Kr.jsxs)(Zr,{columnCount:t,...n,children:[i.offers&&i.offers.length>0&&i.offers.map(((e,t)=>Object(Kr.jsx)(ca,{itemActive:r&&r.offerId===e.offerId,offer:e,selectOffer:o},t))),s]})},aa=e=>{const{children:t=null,...s}=e,{currentOffer:n=null}=Jt();return n&&n.pricingModel===sr.PRICING_MODEL_SINGLE&&n.product.isUniqueLimitedItem?Object(Kr.jsxs)(Qr,{...s,children:[Object(Kr.jsx)(yc,{className:"mx-auto",uniqueLimitedItemsLeft:n.product.uniqueLimitedItemsLeft,uniqueLimitedSeriesSize:n.product.uniqueLimitedItemSeriesSize}),t]}):null},oa=e=>{const{noGiftOption:t=!1,purchaseCallback:s=null}=e,[n,r]=Object(c.useState)(!1),[i,o]=Object(c.useState)(I.NONE),[l,u]=Yt(rt.CATALOG_SKIP_PURCHASE_CONFIRMATION,!1),{currentOffer:d=null,currentPage:h=null,purchaseOptions:j=null,setPurchaseOptions:b=null}=Jt(),{getCurrencyAmount:g=null}=fs(),O=Object(c.useCallback)((e=>{switch(e.type){case ht.PURCHASE_SUCCESS:return void o(I.NONE);case jt.PURCHASE_FAILED:case bt.NOT_ALLOWED:return void o(I.FAILED);case Ot.SOLD_OUT:return void o(I.SOLD_OUT)}}),[]);qt(ht.PURCHASE_SUCCESS,O),qt(jt.PURCHASE_FAILED,O),qt(bt.NOT_ALLOWED,O),qt(Ot.SOLD_OUT,O);const m=Object(c.useMemo)((()=>{if(!d)return!1;if(j.extraParamRequired&&(!j.extraData||!j.extraData.length))return!1;if(d.pricingModel===sr.PRICING_MODEL_SINGLE){const e=d.product;if(e&&e.isUniqueLimitedItem)return!e.uniqueLimitedItemsLeft}return!1}),[d,j]),p=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!d)return;if(te()<d.clubLevel)return void y("habboUI/open/hccenter");if(e)return void Vt(new ut(d.page.pageId,d.offerId,j.extraData));if(o(I.PURCHASE),s)return void s();let t=d.page.pageId;$n(new a.Df(t,d.offerId,j.extraData,j.quantity))};if(Object(c.useEffect)((()=>{if(d)return()=>{o(I.NONE),b({quantity:1,extraData:null,extraParamRequired:!1,previewStuffData:null})}}),[d,b]),Object(c.useEffect)((()=>{let e=null;return i!==I.CONFIRM&&i!==I.FAILED||(e=setTimeout((()=>o(I.NONE)),3e3)),()=>{e&&clearTimeout(e)}}),[i]),!d)return null;const _=()=>{const e=d.priceInCredits*j.quantity,t=d.priceInActivityPoints*j.quantity;if(te()<d.clubLevel)return Object(Kr.jsx)(tc,{variant:"danger",disabled:!0,children:nt("catalog.alert.hc.required")});if(m)return Object(Kr.jsx)(tc,{variant:"danger",disabled:!0,children:nt("catalog.alert.limited_edition_sold_out.title")});if(e>g(-1))return Object(Kr.jsx)(tc,{variant:"danger",disabled:!0,children:nt("catalog.alert.notenough.title")});if(t>g(d.activityPointType))return Object(Kr.jsx)(tc,{variant:"danger",disabled:!0,children:nt("catalog.alert.notenough.activitypoints.title."+d.activityPointType)});switch(i){case I.CONFIRM:return Object(Kr.jsx)(tc,{variant:"warning",onClick:e=>p(),children:nt("catalog.marketplace.confirm_title")});case I.PURCHASE:return Object(Kr.jsx)(tc,{disabled:!0,children:Object(Kr.jsx)(Dc,{})});case I.FAILED:return Object(Kr.jsx)(tc,{variant:"danger",children:nt("generic.failed")});case I.SOLD_OUT:return Object(Kr.jsx)(tc,{variant:"danger",children:nt("generic.failed")+" - "+nt("catalog.alert.limited_edition_sold_out.title")});case I.NONE:default:return Object(Kr.jsx)(tc,{disabled:j.extraParamRequired&&(!j.extraData||!j.extraData.length),onClick:e=>o(I.CONFIRM),children:nt("catalog.purchase_confirmation."+(d.isRentOffer?"rent":"buy"))})}};return Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(_,{}),!t&&!d.isRentOffer&&Object(Kr.jsx)(tc,{disabled:j.quantity>1||!d.giftable||m||j.extraParamRequired&&(!j.extraData||!j.extraData.length),onClick:e=>p(!0),children:nt("catalog.purchase_confirmation.gift")})]})},la=e=>{const{offer:t=null}=e,{purchaseOptions:s=null}=Jt(),{quantity:n=1}=s;return t?Object(Kr.jsxs)(Qr,{className:"bg-muted rounded px-2 py-1",children:[t.priceInCredits>0&&Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:t.priceInCredits*n}),Object(Kr.jsx)(Ic,{type:-1})]}),t.priceInActivityPoints>0&&Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:t.priceInActivityPoints*n}),Object(Kr.jsx)(Ic,{type:t.activityPointType})]})]}):null},ua=e=>{const{gap:t=1,...s}=e,{currentOffer:n=null}=Jt();return Object(Kr.jsx)(Nc,{gap:t,...s,children:Object(Kr.jsx)(la,{offer:n})})},da=e=>{const{currentOffer:t=null,roomPreviewer:s=null,purchaseOptions:n=null}=Jt(),{previewStuffData:r=null}=n;return Object(c.useEffect)((()=>{if(!t||t.pricingModel===sr.PRICING_MODEL_BUNDLE||!s)return;const e=t.product;if(e)switch(e.productType){case er.FLOOR:if(!e.furnitureData)return;if(e.furnitureData.specialType===Rs.FIGURE_PURCHASABLE_SET){const t=ee().getFloorItemData(e.furnitureData.id).customParams.split(",").map((e=>parseInt(e))),n=[];for(const e of t)N().isValidFigureSetForGender(e,ee().gender)&&n.push(e);const r=N().getFigureStringWithFigureIds(ee().figure,ee().gender,n);s.addAvatarIntoRoom(r,e.productClassId)}else s.addFurnitureIntoRoom(e.productClassId,new a.Ui(90),r,e.extraParam);return;case er.WALL:if(!e.furnitureData)return;switch(e.furnitureData.specialType){case Rs.FLOOR:return s.reset(!1),void s.updateObjectRoom(e.extraParam);case Rs.WALL_PAPER:return s.reset(!1),void s.updateObjectRoom(null,e.extraParam);case Rs.LANDSCAPE:{s.reset(!1),s.updateObjectRoom(null,null,e.extraParam);const t=ee().getWallItemDataByName("ads_twi_windw");return void(t&&s.addWallItemIntoRoom(t.id,new a.Ui(90),t.customParams))}default:return s.updateObjectRoom("default","default","default"),void s.addWallItemIntoRoom(e.productClassId,new a.Ui(90),e.extraParam)}case er.ROBOT:return void s.addAvatarIntoRoom(e.extraParam,0);case er.EFFECT:return void s.addAvatarIntoRoom(ee().figure,e.productClassId)}}),[t,r,s]),t?t.pricingModel===sr.PRICING_MODEL_BUNDLE?Object(Kr.jsx)(Nc,{fit:!0,overflow:"hidden",className:"bg-muted p-2 rounded",children:Object(Kr.jsx)(Zr,{fullWidth:!0,columnCount:4,className:"nitro-catalog-layout-bundle-grid",children:t.products.length>0&&t.products.map(((e,s)=>Object(Kr.jsx)(wc,{itemImage:e.getIconUrl(t),itemCount:e.productCount},s)))})}):Object(Kr.jsx)(qc,{roomPreviewer:s,height:140}):null},ha=e=>{const{page:t=null}=e,{currentOffer:s=null}=Jt();return Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(ra,{}),Object(Kr.jsxs)(Jr,{children:[Object(Kr.jsxs)(Nc,{size:7,overflow:"hidden",children:[Object(Kr.jsx)(ia,{shrink:!0}),Object(Kr.jsxs)(Nc,{gap:1,overflow:"hidden",children:[Object(Kr.jsx)(Zc,{truncate:!0,shrink:!0,fontWeight:"bold",children:nt("catalog_selectbadge")}),Object(Kr.jsx)(na,{})]})]}),Object(Kr.jsxs)(Nc,{center:!s,size:5,overflow:"hidden",children:[!s&&Object(Kr.jsxs)(Kr.Fragment,{children:[!!t.localization.getImage(1)&&Object(Kr.jsx)("img",{alt:"",src:t.localization.getImage(1)}),Object(Kr.jsx)(Zc,{center:!0,dangerouslySetInnerHTML:{__html:t.localization.getText(0)}})]}),s&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsxs)(Qr,{position:"relative",overflow:"hidden",children:[Object(Kr.jsx)(da,{}),Object(Kr.jsx)(aa,{fullWidth:!0,position:"absolute",className:"top-1"})]}),Object(Kr.jsxs)(Nc,{grow:!0,gap:1,children:[Object(Kr.jsx)(Zc,{grow:!0,truncate:!0,children:s.localizationName}),Object(Kr.jsx)(ec,{justifyContent:"end",children:Object(Kr.jsx)(ua,{alignItems:"end"})}),Object(Kr.jsx)(oa,{})]})]})]})]})]})},ja=e=>{const{...t}=e,{currentOffer:s=null}=Jt();return s&&s.badgeCode&&s.badgeCode.length?Object(Kr.jsx)(xc,{badgeCode:s.badgeCode,...t}):null},ba=e=>{const{currentOffer:t=null,purchaseOptions:s=null,setPurchaseOptions:n=null}=Jt(),{quantity:r=1}=s,c=e=>{isNaN(e)&&(e=1),e=Math.max(e,1),(e=Math.min(e,100))!==r&&n((t=>{const s={...t};return s.quantity=e,s}))};return t&&t.bundlePurchaseAllowed?Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(Zc,{children:nt("catalog.bundlewidget.spinner.select.amount")}),Object(Kr.jsxs)(ec,{alignItems:"center",justifyContent:"center",gap:1,className:"bg-muted rounded px-2 py-1",children:[Object(Kr.jsx)(ic.a,{icon:"caret-left",className:"text-black cursor-pointer",onClick:e=>c(r-1)}),Object(Kr.jsx)("input",{type:"number",className:"form-control form-control-sm quantity-input",value:r,onChange:e=>c(e.target.valueAsNumber)}),Object(Kr.jsx)(ic.a,{icon:"caret-right",className:"text-black cursor-pointer",onClick:e=>c(r+1)})]})]}):null},ga=e=>{const{page:t=null}=e,{currentOffer:s=null}=Jt();return Object(Kr.jsxs)(Jr,{children:[Object(Kr.jsx)(Nc,{size:7,overflow:"hidden",children:Object(Kr.jsx)(ia,{})}),Object(Kr.jsxs)(Nc,{center:!s,size:5,overflow:"hidden",children:[!s&&Object(Kr.jsxs)(Kr.Fragment,{children:[!!t.localization.getImage(1)&&Object(Kr.jsx)("img",{alt:"",src:t.localization.getImage(1)}),Object(Kr.jsx)(Zc,{center:!0,dangerouslySetInnerHTML:{__html:t.localization.getText(0)}})]}),s&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsxs)(Qr,{position:"relative",overflow:"hidden",children:[Object(Kr.jsx)(da,{}),Object(Kr.jsx)(aa,{fullWidth:!0,position:"absolute",className:"top-1"}),Object(Kr.jsx)(ja,{position:"absolute",className:"bg-muted nitro-catalog-badge bottom-1 end-1"})]}),Object(Kr.jsxs)(Nc,{grow:!0,gap:1,children:[Object(Kr.jsx)(Zc,{grow:!0,truncate:!0,children:s.localizationName}),Object(Kr.jsxs)(ec,{justifyContent:"between",children:[Object(Kr.jsx)(Nc,{gap:1,children:Object(Kr.jsx)(ba,{})}),Object(Kr.jsx)(ua,{justifyContent:"end",alignItems:"end"})]}),Object(Kr.jsx)(oa,{})]})]})]})]})},Oa=e=>{const{...t}=e,{currentOffer:s=null,purchaseOptions:n=null}=Jt(),{previewStuffData:r=null}=n,i=Object(c.useMemo)((()=>{if(!s||!r)return null;const e=r.getValue(2);return e&&e.length?e:null}),[s,r]);return i?Object(Kr.jsx)(xc,{badgeCode:i,isGroup:!0,...t}):null},ma=e=>{const[t,s]=Object(c.useState)(0),{currentOffer:n=null,catalogOptions:r=null,setPurchaseOptions:i=null}=Jt(),{groups:o=null}=r,l=Object(c.useMemo)((()=>{if(!o||!o.length)return null;const e=o[t];if(!e)return null;const s=new a.Qh;return s.setValue(["0",e.groupId.toString(),e.badgeCode,e.colorA,e.colorB]),s}),[t,o]);if(Object(c.useEffect)((()=>{n&&i((e=>{const t={...e};return t.extraParamRequired=!0,t.extraData=l&&l.getValue(1)||null,t.previewStuffData=l,t}))}),[n,l,i]),Object(c.useEffect)((()=>{$n(new a.U)}),[]),!o||!o.length)return Object(Kr.jsxs)(Qr,{className:"bg-muted rounded p-1 text-black text-center",children:[nt("catalog.guild_selector.members_only"),Object(Kr.jsx)(tc,{className:"mt-1",children:nt("catalog.guild_selector.find_groups")})]});const u=o[t];return Object(Kr.jsxs)(ec,{gap:1,children:[!!u&&Object(Kr.jsxs)(ec,{overflow:"hidden",className:"rounded border",children:[Object(Kr.jsx)(Qr,{fullHeight:!0,style:{width:"20px",backgroundColor:"#"+u.colorA}}),Object(Kr.jsx)(Qr,{fullHeight:!0,style:{width:"20px",backgroundColor:"#"+u.colorB}})]}),Object(Kr.jsx)("select",{className:"form-select form-select-sm",value:t,onChange:e=>s(parseInt(e.target.value)),children:o.map(((e,t)=>Object(Kr.jsx)("option",{value:t,children:e.groupName},t)))})]})},pa=e=>{const{page:t=null}=e,{currentOffer:s=null}=Jt();return Object(Kr.jsxs)(Jr,{children:[Object(Kr.jsx)(Nc,{size:7,overflow:"hidden",children:Object(Kr.jsx)(ia,{})}),Object(Kr.jsxs)(Nc,{center:!s,size:5,overflow:"hidden",children:[!s&&Object(Kr.jsxs)(Kr.Fragment,{children:[!!t.localization.getImage(1)&&Object(Kr.jsx)("img",{alt:"",src:t.localization.getImage(1)}),Object(Kr.jsx)(Zc,{center:!0,dangerouslySetInnerHTML:{__html:t.localization.getText(0)}})]}),s&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsxs)(Qr,{position:"relative",overflow:"hidden",children:[Object(Kr.jsx)(da,{}),Object(Kr.jsx)(Oa,{position:"absolute",className:"bottom-1 end-1"})]}),Object(Kr.jsxs)(Nc,{grow:!0,gap:1,children:[Object(Kr.jsx)(Zc,{truncate:!0,children:s.localizationName}),Object(Kr.jsx)(Qr,{grow:!0,children:Object(Kr.jsx)(ma,{})}),Object(Kr.jsx)(ec,{justifyContent:"end",children:Object(Kr.jsx)(ua,{alignItems:"end"})}),Object(Kr.jsx)(oa,{})]})]})]})]})},_a=e=>{const{page:t=null}=e,[s,n]=Object(c.useState)(0),{currentOffer:r=null,setCurrentOffer:i=null,catalogOptions:o=null}=Jt(),{groups:l=null}=o;return Object(c.useEffect)((()=>{$n(new a.U)}),[t]),Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(ra,{}),Object(Kr.jsxs)(Jr,{children:[Object(Kr.jsx)(Nc,{className:"bg-muted rounded p-2 text-black",size:7,overflow:"hidden",children:Object(Kr.jsx)(Qr,{className:"overflow-auto",dangerouslySetInnerHTML:{__html:t.localization.getText(1)}})}),Object(Kr.jsx)(Nc,{size:5,overflow:"hidden",gap:1,children:!!r&&Object(Kr.jsx)(Kr.Fragment,{children:Object(Kr.jsxs)(Nc,{grow:!0,gap:1,children:[Object(Kr.jsx)(Zc,{truncate:!0,children:r.localizationName}),Object(Kr.jsx)(Qr,{grow:!0,children:Object(Kr.jsx)(ma,{})}),Object(Kr.jsx)(ec,{justifyContent:"end",children:Object(Kr.jsx)(ua,{alignItems:"end"})}),Object(Kr.jsx)(oa,{noGiftOption:!0})]})})})]})]})},Ea=e=>{const{page:t=null}=e;return Object(Kr.jsxs)(Jr,{children:[Object(Kr.jsxs)(Nc,{size:7,overflow:"hidden",className:"bg-muted rounded p-2 text-black",children:[Object(Kr.jsx)(Qr,{dangerouslySetInnerHTML:{__html:t.localization.getText(2)}}),Object(Kr.jsx)(Qr,{overflow:"auto",dangerouslySetInnerHTML:{__html:t.localization.getText(0)}}),Object(Kr.jsx)(Qr,{dangerouslySetInnerHTML:{__html:t.localization.getText(1)}})]}),Object(Kr.jsxs)(Nc,{center:!0,size:5,overflow:"hidden",children:[Object(Kr.jsx)(kc,{imageUrl:t.localization.getImage(1)}),Object(Kr.jsx)(tc,{onClick:()=>y("groups/create"),children:nt("catalog.start.guild.purchase.button")})]})]})},fa=e=>{const{page:t=null}=e;return Object(Kr.jsx)("div",{className:"h-100 nitro-catalog-layout-info-loyalty text-black d-flex flex-row",children:Object(Kr.jsx)("div",{className:"overflow-auto h-100 d-flex flex-column info-loyalty-content",children:Object(Kr.jsx)("div",{dangerouslySetInnerHTML:{__html:t.localization.getText(0)}})})})},xa=e=>{const{page:t=null}=e,s=t.localization.getImage(1);return Object(Kr.jsxs)(Nc,{grow:!0,className:"bg-muted rounded text-black p-2",overflow:"hidden",children:[Object(Kr.jsxs)(ec,{alignItems:"center",gap:2,children:[s&&Object(Kr.jsx)("img",{alt:"",src:s}),Object(Kr.jsx)(Qr,{className:"fs-5",dangerouslySetInnerHTML:{__html:t.localization.getText(1)}})]}),Object(Kr.jsx)(Nc,{grow:!0,alignItems:"center",overflow:"auto",children:Object(Kr.jsx)(Qr,{dangerouslySetInnerHTML:{__html:t.localization.getText(2)}})}),Object(Kr.jsx)(ec,{alignItems:"center",children:Object(Kr.jsx)(Qr,{className:"fw-bold",dangerouslySetInnerHTML:{__html:t.localization.getText(3)}})})]})},Ia=e=>Object(Kr.jsx)(xa,{...e}),Ta=e=>{const{columnCount:t=5,children:s=null,...n}=e,{currentOffer:r=null}=Jt();return r?Object(Kr.jsxs)(Zr,{columnCount:5,...n,children:[r.products&&r.products.length>0&&r.products.map(((e,t)=>Object(Kr.jsx)(wc,{itemImage:e.getIconUrl(),itemCount:e.productCount},t))),s]}):null},Ca=e=>{const{gap:t=1,...s}=e,{currentOffer:n=null}=Jt();return Object(Kr.jsx)(ec,{gap:t,alignItems:"center",classNames:["bg-muted","price-widget"],...s,children:Object(Kr.jsx)(la,{offer:n})})},Sa=e=>{const{page:t=null}=e;return Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(ra,{}),Object(Kr.jsxs)(Jr,{children:[Object(Kr.jsxs)(Nc,{size:7,overflow:"hidden",children:[!!t.localization.getText(2)&&Object(Kr.jsx)(Zc,{dangerouslySetInnerHTML:{__html:t.localization.getText(2)}}),Object(Kr.jsx)(Nc,{grow:!0,overflow:"hidden",className:"bg-muted p-2 rounded",children:Object(Kr.jsx)(Ta,{fullWidth:!0,className:"nitro-catalog-layout-bundle-grid"})})]}),Object(Kr.jsxs)(Nc,{size:5,overflow:"hidden",gap:1,children:[!!t.localization.getText(1)&&Object(Kr.jsx)(Zc,{center:!0,small:!0,overflow:"auto",children:t.localization.getText(1)}),Object(Kr.jsxs)(Nc,{grow:!0,position:"relative",overflow:"hidden",gap:0,children:[!!t.localization.getImage(1)&&Object(Kr.jsx)("img",{alt:"",className:"flex-grow-1",src:t.localization.getImage(1)}),Object(Kr.jsx)(ja,{position:"absolute",className:"bg-muted nitro-catalog-badge bottom-0 start-0"}),Object(Kr.jsx)(Ca,{position:"absolute",className:"bottom-0 end-0"})]}),Object(Kr.jsx)(Nc,{gap:1,children:Object(Kr.jsx)(oa,{})})]})]})]})},Na=e=>{const{page:t=null}=e;return Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(ra,{}),Object(Kr.jsxs)(Jr,{children:[Object(Kr.jsxs)(Nc,{size:7,overflow:"hidden",children:[!!t.localization.getText(2)&&Object(Kr.jsx)(Zc,{dangerouslySetInnerHTML:{__html:t.localization.getText(2)}}),Object(Kr.jsx)(Nc,{grow:!0,overflow:"hidden",className:"bg-muted p-2 rounded",children:Object(Kr.jsx)(Ta,{fullWidth:!0,className:"nitro-catalog-layout-bundle-grid"})})]}),Object(Kr.jsxs)(Nc,{size:5,overflow:"hidden",gap:1,children:[!!t.localization.getText(1)&&Object(Kr.jsx)(Zc,{center:!0,small:!0,overflow:"auto",children:t.localization.getText(1)}),Object(Kr.jsxs)(Nc,{grow:!0,position:"relative",overflow:"hidden",gap:0,children:[!!t.localization.getImage(1)&&Object(Kr.jsx)("img",{alt:"",className:"flex-grow-1",src:t.localization.getImage(1)}),Object(Kr.jsx)(ja,{position:"absolute",className:"bg-muted nitro-catalog-badge bottom-0 start-0"}),Object(Kr.jsx)(Ca,{position:"absolute",className:"bottom-0 end-0"})]}),Object(Kr.jsx)(Nc,{gap:1,children:Object(Kr.jsx)(oa,{})})]})]})]})},va=["floors","walls","views"],Ra=e=>{const{columnCount:t=5,children:s=null,...n}=e,[r,i]=Object(c.useState)(null),[a,o]=Object(c.useState)(-1),[l,u]=Object(c.useState)(null),{currentPage:d=null,currentOffer:h=null,setCurrentOffer:j=null,setPurchaseOptions:b=null}=Jt();if(Object(c.useEffect)((()=>{if(!d)return;const e=[[],[],[]];for(const t of d.offers){if(t.pricingModel!==sr.PRICING_MODEL_SINGLE&&t.pricingModel!==sr.PRICING_MODEL_MULTI)continue;const s=t.product;if(!s||s.productType!==er.WALL&&s.productType!==er.FLOOR||!s.furnitureData)continue;switch(s.furnitureData.className){case"floor":e[0].push(t);break;case"wallpaper":e[1].push(t);break;case"landscape":e[2].push(t)}}i(e),o(0),u([e[0][0],e[1][0],e[2][0]])}),[d]),Object(c.useEffect)((()=>{-1!==a&&l&&j(l[a])}),[a,l,j]),Object(c.useEffect)((()=>{-1!==a&&l&&h&&b((e=>{const t={...e};return t.extraData=l[a].product.extraParam,t.extraParamRequired=!0,t}))}),[h,a,l,b]),!r||-1===a)return null;const g=r[a];return Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(sc,{children:va.map(((e,t)=>Object(Kr.jsx)(tc,{active:a===t,onClick:e=>o(t),children:nt(`catalog.spaces.tab.${e}`)},t)))}),Object(Kr.jsxs)(Zr,{columnCount:t,...n,children:[g&&g.length>0&&g.map(((e,t)=>Object(Kr.jsx)(ca,{itemActive:h&&h===e,offer:e,selectOffer:e=>(e=>{e&&u((t=>{const s=[...t];return s[a]=e,s}))})(e)},t))),s]})]})},Aa=e=>{const{page:t=null}=e,{currentOffer:s=null,roomPreviewer:n=null}=Jt();return Object(c.useEffect)((()=>{n.updatePreviewObjectBoundingRectangle(new a.Xe)}),[n]),Object(Kr.jsxs)(Jr,{children:[Object(Kr.jsx)(Nc,{size:7,overflow:"hidden",children:Object(Kr.jsx)(Ra,{})}),Object(Kr.jsxs)(Nc,{center:!s,size:5,overflow:"hidden",children:[!s&&Object(Kr.jsxs)(Kr.Fragment,{children:[!!t.localization.getImage(1)&&Object(Kr.jsx)("img",{alt:"",src:t.localization.getImage(1)}),Object(Kr.jsx)(Zc,{center:!0,dangerouslySetInnerHTML:{__html:t.localization.getText(0)}})]}),s&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(Qr,{position:"relative",overflow:"hidden",children:Object(Kr.jsx)(da,{})}),Object(Kr.jsxs)(Nc,{grow:!0,gap:1,children:[Object(Kr.jsx)(Zc,{grow:!0,truncate:!0,children:s.localizationName}),Object(Kr.jsx)(ec,{justifyContent:"end",children:Object(Kr.jsx)(ua,{alignItems:"end"})}),Object(Kr.jsx)(oa,{})]})]})]})]})},ya=e=>{const{page:t=null}=e,[s,n]=Object(c.useState)(""),{currentOffer:r=null,setPurchaseOptions:i=null}=Jt();return Object(c.useEffect)((()=>{r&&i((e=>{const t={...e};return t.extraData=s,t}))}),[r,s,i]),Object(Kr.jsxs)(Jr,{children:[Object(Kr.jsxs)(Nc,{size:7,overflow:"hidden",children:[Object(Kr.jsx)(ia,{}),Object(Kr.jsx)("textarea",{className:"flex-grow-1 form-control w-100",defaultValue:s||"",onChange:e=>n(e.target.value)})]}),Object(Kr.jsxs)(Nc,{center:!r,size:5,overflow:"hidden",children:[!r&&Object(Kr.jsxs)(Kr.Fragment,{children:[!!t.localization.getImage(1)&&Object(Kr.jsx)("img",{alt:"",src:t.localization.getImage(1)}),Object(Kr.jsx)(Zc,{center:!0,dangerouslySetInnerHTML:{__html:t.localization.getText(0)}})]}),r&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(da,{}),Object(Kr.jsxs)(Nc,{grow:!0,gap:1,children:[Object(Kr.jsx)(Zc,{grow:!0,truncate:!0,children:r.localizationName}),Object(Kr.jsx)(ec,{justifyContent:"end",children:Object(Kr.jsx)(ua,{alignItems:"end"})}),Object(Kr.jsx)(oa,{})]})]})]})]})},wa=e=>{const[t,s]=Object(c.useState)(null),[n,r]=Object(c.useState)(I.NONE),{currentPage:i=null,catalogOptions:o=null}=Jt(),{purse:l=null,getCurrencyAmount:u=null}=fs(),{clubOffers:d=null}=o,h=Object(c.useCallback)((e=>{switch(e.type){case ht.PURCHASE_SUCCESS:return void r(I.NONE);case jt.PURCHASE_FAILED:return void r(I.FAILED)}}),[]);qt(ht.PURCHASE_SUCCESS,h),qt(jt.PURCHASE_FAILED,h);const j=Object(c.useCallback)((e=>{let t="";return e.months>0&&(t=nt("catalog.vip.item.header.months",["num_months"],[e.months.toString()])),e.extraDays>0&&(""!==t&&(t+=" "),t+=" "+nt("catalog.vip.item.header.days",["num_days"],[e.extraDays.toString()])),t}),[]),b=Object(c.useCallback)((()=>{if(!l)return"";const e=l.clubDays>0||l.clubPeriods>0?"extension.":"subscription.",s=0===t.months?"days":"months",n=0===t.months?t.extraDays:t.months;return nt("catalog.vip.buy.confirm."+e+s).replace("%NUM_"+s.toUpperCase()+"%",n.toString())}),[t,l]),g=Object(c.useCallback)((()=>{let e=nt("catalog.vip.buy.confirm.end_date");return e=e.replace("%month%",t.month.toString()),e=e.replace("%day%",t.day.toString()),e=e.replace("%year%",t.year.toString()),e}),[t]),O=Object(c.useMemo)((()=>{const e=l.clubDays;return nt("catalog.vip.extend.info",["days"],[(31*l.clubPeriods+e).toString()])}),[l]),m=Object(c.useCallback)((()=>{t&&(r(I.PURCHASE),$n(new a.Df(i.pageId,t.offerId,null,1)))}),[t,i]),p=Object(c.useCallback)((e=>{r(I.NONE),s(e)}),[]),_=Object(c.useCallback)((()=>{if(!t)return null;if(t.priceCredits>u(-1))return Object(Kr.jsx)(tc,{fullWidth:!0,variant:"danger",children:nt("catalog.alert.notenough.title")});if(t.priceActivityPoints>u(t.priceActivityPointsType))return Object(Kr.jsx)(tc,{fullWidth:!0,variant:"danger",children:nt("catalog.alert.notenough.activitypoints.title."+t.priceActivityPointsType)});switch(n){case I.CONFIRM:return Object(Kr.jsx)(tc,{fullWidth:!0,variant:"warning",onClick:m,children:nt("catalog.marketplace.confirm_title")});case I.PURCHASE:return Object(Kr.jsx)(tc,{fullWidth:!0,variant:"primary",disabled:!0,children:Object(Kr.jsx)(Dc,{})});case I.FAILED:return Object(Kr.jsx)(tc,{fullWidth:!0,variant:"danger",disabled:!0,children:nt("generic.failed")});case I.NONE:default:return Object(Kr.jsx)(tc,{fullWidth:!0,variant:"success",onClick:()=>r(I.CONFIRM),children:nt("buy")})}}),[t,n,m,u]);return Object(c.useEffect)((()=>{d||$n(new a.jc(1))}),[d]),Object(Kr.jsxs)(Jr,{children:[Object(Kr.jsxs)(Nc,{fullHeight:!0,size:7,overflow:"hidden",justifyContent:"between",children:[Object(Kr.jsx)(Zr,{columnCount:1,className:"nitro-catalog-layout-vip-buy-grid",children:d&&d.length>0&&d.map(((e,s)=>Object(Kr.jsxs)(wc,{column:!1,center:!1,alignItems:"center",justifyContent:"between",itemActive:t===e,className:"p-1",onClick:()=>p(e),children:[Object(Kr.jsx)("i",{className:"icon-hc-banner"}),Object(Kr.jsxs)(Nc,{justifyContent:"end",gap:0,children:[Object(Kr.jsx)(Zc,{textEnd:!0,children:j(e)}),Object(Kr.jsxs)(ec,{justifyContent:"end",gap:1,children:[e.priceCredits>0&&Object(Kr.jsxs)(ec,{alignItems:"center",justifyContent:"end",gap:1,children:[Object(Kr.jsx)(Zc,{children:e.priceCredits}),Object(Kr.jsx)(Ic,{type:-1})]}),e.priceActivityPoints>0&&Object(Kr.jsxs)(ec,{alignItems:"center",justifyContent:"end",gap:1,children:[Object(Kr.jsx)(Zc,{children:e.priceActivityPoints}),Object(Kr.jsx)(Ic,{type:e.priceActivityPointsType})]})]})]})]},s)))}),Object(Kr.jsx)(Zc,{center:!0,dangerouslySetInnerHTML:{__html:nt("catalog.vip.buy.hccenter")}})]}),Object(Kr.jsxs)(Nc,{size:5,overflow:"hidden",children:[Object(Kr.jsxs)(Nc,{fullHeight:!0,center:!0,overflow:"hidden",children:[i.localization.getImage(1)&&Object(Kr.jsx)("img",{alt:"",src:i.localization.getImage(1)}),Object(Kr.jsx)(Zc,{center:!0,overflow:"auto",dangerouslySetInnerHTML:{__html:O}})]}),t&&Object(Kr.jsxs)(Nc,{fullWidth:!0,grow:!0,justifyContent:"end",children:[Object(Kr.jsxs)(ec,{alignItems:"end",children:[Object(Kr.jsxs)(Nc,{grow:!0,gap:0,children:[Object(Kr.jsx)(Zc,{fontWeight:"bold",children:b()}),Object(Kr.jsx)(Zc,{children:g()})]}),Object(Kr.jsxs)(Nc,{gap:1,children:[t.priceCredits>0&&Object(Kr.jsxs)(ec,{alignItems:"center",justifyContent:"end",gap:1,children:[Object(Kr.jsx)(Zc,{children:t.priceCredits}),Object(Kr.jsx)(Ic,{type:-1})]}),t.priceActivityPoints>0&&Object(Kr.jsxs)(ec,{alignItems:"center",justifyContent:"end",gap:1,children:[Object(Kr.jsx)(Zc,{children:t.priceActivityPoints}),Object(Kr.jsx)(Ic,{type:t.priceActivityPointsType})]})]})]}),_()]})]})]})},ka=e=>{const{text:t=null}=e,[s,n]=Object(c.useState)(""),[r,i]=Object(c.useState)(!1),o=Object(c.useCallback)((e=>{const t=e.getParser();let s=nt("catalog.alert.voucherredeem.ok.description");t.productName&&(s=nt("catalog.alert.voucherredeem.ok.description.furni",["productName","productDescription"],[t.productName,t.productDescription])),Pr.simpleAlert(s,null,null,null,nt("catalog.alert.voucherredeem.ok.title")),i(!1),n("")}),[]);it(a.Wi,o);const l=Object(c.useCallback)((e=>{const t=e.getParser();Pr.simpleAlert(nt(`catalog.alert.voucherredeem.error.description.${t.errorCode}`),null,null,null,nt("catalog.alert.voucherredeem.error.title")),i(!1)}),[]);return it(a.Vi,l),Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)("input",{type:"text",className:"form-control form-control-sm",placeholder:t,value:s,onChange:e=>n(e.target.value)}),Object(Kr.jsx)(tc,{variant:"primary",onClick:()=>{s&&s.length&&!r&&($n(new a.Kf(s)),i(!0))},disabled:r,children:Object(Kr.jsx)(ic.a,{icon:"tag"})})]})},Da=e=>{const{item:t=null,position:s="relative",pointer:n=!0,overflow:r="hidden",fullHeight:i=!0,classNames:a=[],children:o=null,...l}=e,u=Object(c.useMemo)((()=>{const e=["nitro-front-page-item"];return a.length&&e.push(...a),e}),[a]);if(!t)return null;const d=k("image.library.url")+t.itemPromoImage;return Object(Kr.jsxs)(fc,{imageUrl:d,classNames:u,position:s,fullHeight:i,pointer:n,overflow:r,...l,children:[Object(Kr.jsx)(Zc,{position:"absolute",variant:"white",className:"bg-dark rounded p-2 m-2 bottom-0",children:t.itemName}),o]})},Ua=e=>{const{page:t=null,hideNavigation:s=null}=e,{frontPageItems:n=[]}=Jt(),r=Object(c.useCallback)((e=>{switch(e.type){case a.Lb.ITEM_CATALOGUE_PAGE:return void y(`catalog/open/${e.catalogPageLocation}`);case a.Lb.ITEM_PRODUCT_OFFER:return void y(`catalog/open/${e.productOfferId}`)}}),[]);return Object(c.useEffect)((()=>{s()}),[t,s]),Object(Kr.jsxs)(Jr,{children:[Object(Kr.jsx)(Nc,{size:4,children:n[0]&&Object(Kr.jsx)(Da,{item:n[0],onClick:e=>r(n[0])})}),Object(Kr.jsxs)(Nc,{size:8,children:[n[1]&&Object(Kr.jsx)(Da,{item:n[1],onClick:e=>r(n[1])}),n[2]&&Object(Kr.jsx)(Da,{item:n[2],onClick:e=>r(n[2])}),n[3]&&Object(Kr.jsx)(Da,{item:n[3],onClick:e=>r(n[3])}),Object(Kr.jsx)(ka,{text:t.localization.getText(1)})]})]})};class Pa{constructor(e,t,s,n,r,c,i,a){let o=arguments.length>8&&void 0!==arguments[8]?arguments[8]:-1;this._offerId=void 0,this._furniId=void 0,this._furniType=void 0,this._extraData=void 0,this._stuffData=void 0,this._price=void 0,this._averagePrice=void 0,this._imageCallback=void 0,this._status=void 0,this._timeLeftMinutes=-1,this._offerCount=void 0,this._image=void 0,this._offerId=e,this._furniId=t,this._furniType=s,this._extraData=n,this._stuffData=r,this._price=c,this._status=i,this._averagePrice=a,this._offerCount=o}get offerId(){return this._offerId}set offerId(e){this._offerId=e}get furniId(){return this._furniId}get furniType(){return this._furniType}get extraData(){return this._extraData}get stuffData(){return this._stuffData}get price(){return this._price}set price(e){this._price=e}get averagePrice(){return this._averagePrice}get image(){return this._image}set image(e){this._image=e}get imageCallback(){return this._imageCallback}set imageCallback(e){this._imageCallback=e}get status(){return this._status}get timeLeftMinutes(){return this._timeLeftMinutes}set timeLeftMinutes(e){this._timeLeftMinutes=e}get offerCount(){return this._offerCount}set offerCount(e){this._offerCount=e}get isUniqueLimitedItem(){return this.stuffData&&this.stuffData.uniqueSeries>0}}Pa.TYPE_FLOOR=1,Pa.TYPE_WALL=2;class Ma{}Ma.ONGOING=1,Ma.ONGOING_OWN=1,Ma.SOLD=2,Ma.EXPIRED=3;const La=2,Fa=e=>{const{offerData:t=null,type:s=La,onClick:n=null}=e,r=Object(c.useMemo)((()=>t?nt((2===t.furniType?"wallItem":"roomItem")+`.name.${t.furniId}`):""),[t]),i=Object(c.useCallback)((()=>{if(!t)return"";if(t.status===Ma.SOLD)return nt("catalog.marketplace.offer.sold");if(t.timeLeftMinutes<=0)return nt("catalog.marketplace.offer.expired");const e=Math.max(1,t.timeLeftMinutes),s=Math.floor(e/60);let n=e-60*s+" "+nt("catalog.marketplace.offer.minutes");return s>0&&(n=s+" "+nt("catalog.marketplace.offer.hours")+" "+n),nt("catalog.marketplace.offer.time_left",["time"],[n])}),[t]);return Object(Kr.jsxs)(wc,{shrink:!0,center:!1,column:!1,alignItems:"center",className:"p-1",children:[Object(Kr.jsx)(Tc,{productType:t.furniType===Pa.TYPE_FLOOR?er.FLOOR:er.WALL,productClassId:t.furniId,extraData:t.extraData,style:{width:50,height:50}}),Object(Kr.jsxs)(Nc,{grow:!0,gap:0,children:[Object(Kr.jsx)(Zc,{fontWeight:"bold",children:r}),1===s&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(Zc,{children:nt("catalog.marketplace.offer.price_own_item",["price"],[t.price.toString()])}),Object(Kr.jsx)(Zc,{children:i()})]}),s===La&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(Zc,{children:nt("catalog.marketplace.offer.price_public_item",["price","average"],[t.price.toString(),t.averagePrice.toString()])}),Object(Kr.jsx)(Zc,{children:nt("catalog.marketplace.offer_count",["count"],[t.offerCount.toString()])})]})]}),Object(Kr.jsxs)(Nc,{gap:1,children:[1===s&&t.status!==Ma.SOLD&&Object(Kr.jsx)(tc,{variant:"secondary",onClick:()=>n(t),children:nt("catalog.marketplace.offer.pick")}),s===La&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(tc,{variant:"secondary",onClick:()=>n(t),children:nt("buy")}),Object(Kr.jsx)(tc,{variant:"secondary",disabled:!0,children:nt("catalog.marketplace.view_more")})]})]})]})},Ha=e=>{const[t,s]=Object(c.useState)(0),[n,r]=Object(c.useState)([]),i=Object(c.useCallback)((e=>{const t=e.getParser();if(!t)return;const n=t.offers.map((e=>{const t=new Pa(e.offerId,e.furniId,e.furniType,e.extraData,e.stuffData,e.price,e.status,e.averagePrice,e.offerCount);return t.timeLeftMinutes=e.timeLeftMinutes,t}));s(t.creditsWaiting),r(n)}),[]);it(a.je,i);const o=Object(c.useCallback)((e=>{const t=e.getParser();t&&(t.success?r((e=>e.filter((e=>e.offerId!==t.offerId)))):Pr.simpleAlert(nt("catalog.marketplace.cancel_failed"),yr.DEFAULT,null,null,nt("catalog.marketplace.operation_failed.topic")))}),[]);it(a.ge,o);const l=Object(c.useMemo)((()=>n.filter((e=>e.status===Ma.SOLD))),[n]),u=Object(c.useCallback)((()=>{r((e=>{const t=l.map((e=>e.offerId));return e.filter((e=>-1===t.indexOf(e.offerId)))})),$n(new a.Jf)}),[l]),d=e=>{$n(new a.S(e.offerId))};return Object(c.useEffect)((()=>{$n(new a.qc)}),[]),Object(Kr.jsxs)(Nc,{overflow:"hidden",children:[t<=0&&Object(Kr.jsx)(Zc,{center:!0,className:"bg-muted rounded p-1",children:nt("catalog.marketplace.redeem.no_sold_items")}),t>0&&Object(Kr.jsxs)(Nc,{center:!0,gap:1,className:"bg-muted rounded p-2",children:[Object(Kr.jsx)(Zc,{children:nt("catalog.marketplace.redeem.get_credits",["count","credits"],[l.length.toString(),t.toString()])}),Object(Kr.jsx)(tc,{className:"mt-1",onClick:u,children:nt("catalog.marketplace.offer.redeem")})]}),Object(Kr.jsxs)(Nc,{gap:1,overflow:"hidden",children:[Object(Kr.jsx)(Zc,{truncate:!0,shrink:!0,fontWeight:"bold",children:nt("catalog.marketplace.items_found",["count"],[n.length.toString()])}),Object(Kr.jsx)(Nc,{overflow:"auto",className:"nitro-catalog-layout-marketplace-grid",children:n.length>0&&n.map((e=>Object(Kr.jsx)(Fa,{offerData:e,type:1,onClick:d},e.offerId)))})]})]})};class Ba{}Ba.BY_ACTIVITY=1,Ba.BY_VALUE=2,Ba.ADVANCED=3;const Ga=e=>{const{searchType:t=null,sortTypes:s=null,onSearch:n=null}=e,[r,i]=Object(c.useState)(s?s[0]:3),[a,o]=Object(c.useState)(""),[l,u]=Object(c.useState)(0),[d,h]=Object(c.useState)(0),j=Object(c.useCallback)((e=>{i(e),t!==Ba.BY_ACTIVITY&&t!==Ba.BY_VALUE||n({minPrice:-1,maxPrice:-1,query:"",type:e})}),[n,t]),b=Object(c.useCallback)((()=>{n({minPrice:l>0?l:-1,maxPrice:d>0?d:-1,type:r,query:a})}),[d,l,n,a,r]);return Object(c.useEffect)((()=>{if(!s||!s.length)return;const e=s[0];i(e),t!==Ba.BY_ACTIVITY&&Ba.BY_VALUE!==t||n({minPrice:-1,maxPrice:-1,query:"",type:e})}),[n,t,s]),Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)(Zc,{className:"col-3",children:nt("catalog.marketplace.sort_order")}),Object(Kr.jsx)("select",{className:"form-select form-select-sm",value:r,onChange:e=>j(parseInt(e.target.value)),children:s.map((e=>Object(Kr.jsx)("option",{value:e,children:nt(`catalog.marketplace.sort.${e}`)},e)))})]}),t===Ba.ADVANCED&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)(Zc,{className:"col-3",children:nt("catalog.marketplace.search_name")}),Object(Kr.jsx)("input",{className:"form-control form-control-sm",type:"text",value:a,onChange:e=>o(e.target.value)})]}),Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)(Zc,{className:"col-3",children:nt("catalog.marketplace.search_price")}),Object(Kr.jsxs)(ec,{fullWidth:!0,gap:1,children:[Object(Kr.jsx)("input",{className:"form-control form-control-sm",type:"number",min:0,value:l,onChange:e=>u(e.target.valueAsNumber)}),Object(Kr.jsx)("input",{className:"form-control form-control-sm",type:"number",min:0,value:d,onChange:e=>h(e.target.valueAsNumber)})]})]}),Object(Kr.jsx)(tc,{variant:"secondary",className:"mx-auto",onClick:b,children:nt("generic.search")})]})]})},Wa=[1,2],Va=[3,4,5,6],qa=[1,2,3,4,5,6],Ya=e=>{const[t,s]=Object(c.useState)(Ba.BY_ACTIVITY),[n,r]=Object(c.useState)(0),[i,o]=Object(c.useState)(new Map),[l,u]=Object(c.useState)({minPrice:-1,maxPrice:-1,query:"",type:3}),{getCurrencyAmount:d=null}=fs(),h=Object(c.useCallback)((e=>{u(e),$n(new a.pc(e.minPrice,e.maxPrice,e.query,e.type))}),[]),j=Object(c.useMemo)((()=>{switch(t){case Ba.BY_ACTIVITY:return Va;case Ba.BY_VALUE:return Wa;case Ba.ADVANCED:return qa}return[]}),[t]),b=Object(c.useCallback)((e=>{if(e.price>d(-1))return void Pr.simpleAlert(nt("catalog.alert.notenough.credits.description"),yr.DEFAULT,null,null,nt("catalog.alert.notenough.title"));const t=e.offerId;Pr.confirm(nt("catalog.marketplace.confirm_header"),(()=>{$n(new a.J(t))}),null,null,null,nt("catalog.marketplace.confirm_title"))}),[d]),g=Object(c.useCallback)((e=>{const t=e.getParser();if(!t)return;const s=new Map;t.offers.forEach((e=>{const t=new Pa(e.offerId,e.furniId,e.furniType,e.extraData,e.stuffData,e.price,e.status,e.averagePrice,e.offerCount);t.timeLeftMinutes=e.timeLeftMinutes,s.set(e.offerId,t)})),r(t.totalItemsFound),o(s)}),[]),O=Object(c.useCallback)((e=>{const t=e.getParser();if(t)switch(t.result){case 1:h(l);break;case 2:o((e=>{const s=new Map(e);return s.delete(t.requestedOfferId),s})),Pr.simpleAlert(nt("catalog.marketplace.not_available_header"),yr.DEFAULT,null,null,nt("catalog.marketplace.not_available_title"));break;case 3:o((e=>{const s=new Map(e),n=s.get(t.requestedOfferId);return n&&(n.offerId=t.offerId,n.price=t.newPrice,n.offerCount--,s.set(n.offerId,n)),s.delete(t.requestedOfferId),s})),Pr.confirm(nt("catalog.marketplace.confirm_higher_header")+"\n"+nt("catalog.marketplace.confirm_price",["price"],[t.newPrice.toString()]),(()=>{$n(new a.J(t.offerId))}),null,null,null,nt("catalog.marketplace.confirm_higher_title"));break;case 4:Pr.simpleAlert(nt("catalog.alert.notenough.credits.description"),yr.DEFAULT,null,null,nt("catalog.alert.notenough.title"))}}),[l,h]);return it(a.ee,g),it(a.fe,O),Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsxs)(sc,{children:[Object(Kr.jsx)(tc,{active:t===Ba.BY_ACTIVITY,onClick:()=>s(Ba.BY_ACTIVITY),children:nt("catalog.marketplace.search_by_activity")}),Object(Kr.jsx)(tc,{active:t===Ba.BY_VALUE,onClick:()=>s(Ba.BY_VALUE),children:nt("catalog.marketplace.search_by_value")}),Object(Kr.jsx)(tc,{active:t===Ba.ADVANCED,onClick:()=>s(Ba.ADVANCED),children:nt("catalog.marketplace.search_advanced")})]}),Object(Kr.jsx)(Ga,{sortTypes:j,searchType:t,onSearch:h}),Object(Kr.jsxs)(Nc,{gap:1,overflow:"hidden",children:[Object(Kr.jsx)(Zc,{truncate:!0,shrink:!0,fontWeight:"bold",children:nt("catalog.marketplace.items_found",["count"],[i.size.toString()])}),Object(Kr.jsx)(Nc,{className:"nitro-catalog-layout-marketplace-grid",overflow:"auto",children:Array.from(i.values()).map(((e,t)=>Object(Kr.jsx)(Fa,{offerData:e,type:La,onClick:b},t)))})]})]})},za=e=>{const{page:t=null}=e,[s,n]=Object(c.useState)(-1),[r,i]=Object(c.useState)([]),[o,l]=Object(c.useState)(-1),[u,d]=Object(c.useState)([]),[h,j]=Object(c.useState)(-1),[b,g]=Object(c.useState)(!1),[O,m]=Object(c.useState)(""),[p,_]=Object(c.useState)(!0),[E,f]=Object(c.useState)(-1),{currentOffer:x=null,setCurrentOffer:I=null,setPurchaseOptions:T=null,catalogOptions:C=null,roomPreviewer:S=null}=Jt(),{petPalettes:N=null}=C,v=Object(c.useMemo)((()=>u.length&&-1!==h?u[h][0]:16777215),[u,h]),R=Object(c.useMemo)((()=>-1!==s&&r.length&&-1!==o?nt(`pet.breed.${s}.${r[o].breedId}`):""),[s,r,o]),A=Object(c.useMemo)((()=>{if(!r.length||-1===o)return"";const e=r[o].paletteId;let t=16777215;if(s<=7){if(-1===h)return"";t=u[h][0]}let n=t.toString(16).toUpperCase();for(;n.length<6;)n="0"+n;return`${e}\n${n}`}),[r,o,s,u,h]),y=Object(c.useMemo)((()=>{let e="";switch(E){case 1:e="catalog.alert.petname.long";break;case 2:e="catalog.alert.petname.short";break;case 3:e="catalog.alert.petname.chars";break;case 4:e="catalog.alert.petname.bobba"}return e&&e.length?nt(e):""}),[E]),w=Object(c.useCallback)((()=>{-1!==E?0!==E||$n(new a.Df(t.pageId,x.offerId,`${O}\n${A}`,1)):$n(new a.i(O,1))}),[t,x,O,A,E]),k=Object(c.useCallback)((e=>{const t=e.getParser();f(t.result),0===t.result?w():Vt(new jt(-1))}),[w]);return it(a.j,k),Object(c.useEffect)((()=>{if(!t||!t.offers.length)return;const e=t.offers[0];I(e),n(function(e){if(!e.length)return 0;let t=e.length-1;for(;t>=0&&!isNaN(parseInt(e.charAt(t)));)t--;return t>0?parseInt(e.substring(t+1)):-1}(e.localizationId)),g(!1)}),[t,I]),Object(c.useEffect)((()=>{if(!x)return;const e=x.product.productData;if(e){if(N)for(const t of N){if(t.breed!==e.type)continue;const s=[];for(const e of t.palettes)e.sellable&&s.push(e);return l(s.length?0:-1),void i(s)}l(-1),i([]),$n(new a.Ac(e.type))}}),[x,N]),Object(c.useEffect)((()=>{if(-1===s)return;const e=function(e,t){switch(e){case 0:case 1:return[[16743226],[16750435],[16764339],[16094464],[16498012],[16704690],[15586304],[16115545],[16513201],[8694111],[11585939],[14413767],[6664599],[9553845],[12971486],[8358322],[10002885],[13292268],[10780600],[12623573],[14403561],[12418717],[14327229],[15517403],[14515069],[15764368],[16366271],[11250603],[13948116],[16777215],[14256481],[14656129],[15848130],[14005087],[14337152],[15918540],[15118118],[15531929],[9764857],[11258085]];case 2:return[[16579283],[15378351],[8830016],[15257125],[9340985],[8949607],[6198292],[8703620],[9889626],[8972045],[12161285],[13162269],[8620113],[12616503],[8628101],[13827840],[9764857]];case 3:case 5:return[[16777215],[15658734],[14540253]];case 4:return[[16777215],[16053490],[15464440],[16248792],[15396319],[15007487]];case 6:return[[16777215],[15658734],[14540253],[16767177],[16770205],[16751331]];case 7:return[[13421772],[11447982],[16751331],[10149119],[16763290],[16743786]];default:{const s=[];for(const n of t){const t=L().getPetColorResult(e,n.paletteId);t&&(t.primaryColor===t.secondaryColor?s.push([t.primaryColor]):s.push([t.primaryColor,t.secondaryColor]))}return s}}}(s,r);j(e.length?0:-1),d(e)}),[s,r]),Object(c.useEffect)((()=>{if(!S)return;if(S.reset(!1),-1===s||!r.length||-1===o)return;let e=`${s} ${r[o].paletteId}`;s<=7&&(e+=` ${v.toString(16)}`),S.addPetIntoRoom(e)}),[S,s,r,o,v]),Object(c.useEffect)((()=>{f(-1)}),[O]),x?Object(Kr.jsxs)(Jr,{children:[Object(Kr.jsx)(Nc,{size:7,overflow:"hidden",children:Object(Kr.jsxs)(Zr,{columnCount:5,children:[!b&&r.length>0&&r.map(((e,t)=>Object(Kr.jsx)(wc,{itemActive:o===t,onClick:e=>l(t),children:Object(Kr.jsx)(Gc,{typeId:s,paletteId:e.paletteId,direction:2,headOnly:!0})},t))),b&&u.length>0&&u.map(((e,t)=>Object(Kr.jsx)(wc,{itemHighlight:!0,itemActive:h===t,itemColor:a.jb.int2rgb(e[0]),className:"clear-bg",onClick:e=>j(t)},t)))]})}),Object(Kr.jsxs)(Nc,{center:!x,size:5,overflow:"hidden",children:[!x&&Object(Kr.jsxs)(Kr.Fragment,{children:[!!t.localization.getImage(1)&&Object(Kr.jsx)("img",{alt:"",src:t.localization.getImage(1)}),Object(Kr.jsx)(Zc,{center:!0,dangerouslySetInnerHTML:{__html:t.localization.getText(0)}})]}),x&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsxs)(Qr,{position:"relative",overflow:"hidden",children:[Object(Kr.jsx)(da,{}),Object(Kr.jsx)(ja,{position:"absolute",className:"bg-muted nitro-catalog-badge bottom-1 end-1"}),s>-1&&s<=7&&Object(Kr.jsx)(tc,{position:"absolute",className:"bottom-1 start-1",onClick:e=>g(!b),children:Object(Kr.jsx)(ic.a,{icon:"fill-drip"})})]}),Object(Kr.jsxs)(Nc,{grow:!0,gap:1,children:[Object(Kr.jsx)(Zc,{truncate:!0,children:R}),Object(Kr.jsxs)(Nc,{grow:!0,gap:1,children:[Object(Kr.jsx)("input",{type:"text",className:"form-control form-control-sm w-100",placeholder:nt("widgets.petpackage.name.title"),value:O,onChange:e=>m(e.target.value)}),E>0&&Object(Kr.jsx)(Qr,{className:"invalid-feedback d-block m-0",children:y})]}),Object(Kr.jsx)(ec,{justifyContent:"end",children:Object(Kr.jsx)(ua,{justifyContent:"end",alignItems:"end"})}),Object(Kr.jsx)(oa,{purchaseCallback:w})]})]})]})]}):null},Ka=e=>{const{offer:t=null,isAvailable:s=!1,onSelect:n=null}=e,r=Object(c.useCallback)((()=>{if(!t||!t.products.length)return"";const e=t.products[0];return sn.getProductImageUrl(e.productType,e.furniClassId,e.extraParam)}),[t]),i=Object(c.useCallback)((()=>{if(!t||!t.products.length)return"";const e=t.products[0];return nt(2===sn.getProductCategory(e.productType,e.furniClassId)?"wallItem.name."+e.furniClassId:"roomItem.name."+e.furniClassId)}),[t]);Object(c.useCallback)((()=>{if(!t||!t.products.length)return"";const e=t.products[0];return nt(2===sn.getProductCategory(e.productType,e.furniClassId)?"wallItem.desc."+e.furniClassId:"roomItem.desc."+e.furniClassId)}),[t]);return Object(Kr.jsxs)(wc,{center:!1,column:!1,alignItems:"center",className:"p-1",children:[Object(Kr.jsx)(kc,{imageUrl:r()}),Object(Kr.jsx)(Zc,{grow:!0,fontWeight:"bold",children:i()}),Object(Kr.jsx)(tc,{variant:"secondary",onClick:()=>n(t.localizationId),disabled:!s,children:nt("catalog.club_gift.select")})]})},Qa=e=>{const{purse:t=null}=fs(),{catalogOptions:s=null,setCatalogOptions:n=null}=Jt(),{clubGifts:r=null}=s,i=Object(c.useCallback)((()=>r?r.giftsAvailable>0?nt("catalog.club_gift.available",["amount"],[r.giftsAvailable.toString()]):r.daysUntilNextGift>0?nt("catalog.club_gift.days_until_next",["days"],[r.daysUntilNextGift.toString()]):t.isVip?nt("catalog.club_gift.not_available"):nt("catalog.club_gift.no_club"):""),[r,t]),o=Object(c.useCallback)((e=>{Pr.confirm(nt("catalog.club_gift.confirm"),(()=>{$n(new a.Ih(e)),n((e=>(e.clubGifts.giftsAvailable--,{...e})))}),null)}),[n]);return Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(Zc,{truncate:!0,shrink:!0,fontWeight:"bold",children:i()}),Object(Kr.jsx)(Zr,{columnCount:1,className:"nitro-catalog-layout-vip-gifts-grid",children:r.offers.length>0&&r.offers.map((e=>Object(Kr.jsx)(Ka,{offer:e,isAvailable:r.getOfferExtraData(e.offerId).isSelectable&&r.giftsAvailable>0,onSelect:o},e.offerId)))})]})},$a=(e,t)=>{if(!e)return null;const s={page:e,hideNavigation:t};switch(e.layoutCode){case"frontpage_featured":return null;case"frontpage4":return Object(Kr.jsx)(Ua,{...s});case"pets":return Object(Kr.jsx)(za,{...s});case"pets2":return Object(Kr.jsx)(Ia,{...s});case"pets3":return Object(Kr.jsx)(xa,{...s});case"vip_buy":return Object(Kr.jsx)(wa,{...s});case"guild_frontpage":return Object(Kr.jsx)(Ea,{...s});case"guild_forum":return Object(Kr.jsx)(_a,{...s});case"guild_custom_furni":return Object(Kr.jsx)(pa,{...s});case"club_gifts":return Object(Kr.jsx)(Qa,{...s});case"marketplace_own_items":return Object(Kr.jsx)(Ha,{...s});case"marketplace":return Object(Kr.jsx)(Ya,{...s});case"single_bundle":return Object(Kr.jsx)(Na,{...s});case"room_bundle":return Object(Kr.jsx)(Sa,{...s});case"spaces_new":return Object(Kr.jsx)(Aa,{...s});case"trophies":return Object(Kr.jsx)(ya,{...s});case"info_loyalty":return Object(Kr.jsx)(fa,{...s});case"badge_display":return Object(Kr.jsx)(ha,{...s});default:return Object(Kr.jsx)(ga,{...s})}},Xa=e=>{const[t,s]=Object(c.useState)(null),[n,r]=Object(c.useState)(0),{catalogOptions:i=null,setCatalogOptions:o=null}=Jt(),{marketplaceConfiguration:l=null}=i,u=Object(c.useCallback)((e=>{const t=e.getParser();o((e=>{const s={...e};return s.marketplaceConfiguration=t,s}))}),[o]);it(a.he,u);const d=Object(c.useCallback)((e=>{s(e.item)}),[]);if(qt(dt.POST_MARKETPLACE,d),Object(c.useEffect)((()=>{t&&!l&&$n(new a.oc)}),[t,l]),Object(c.useEffect)((()=>{if(t)return()=>r(0)}),[t]),!l||!t)return null;const h=t?nt(t.isWallItem?"wallItem.name."+t.type:"roomItem.name."+t.type):"",j=t?nt(t.isWallItem?"wallItem.desc."+t.type:"roomItem.desc."+t.type):"";return Object(Kr.jsxs)(_c,{className:"nitro-catalog-layout-marketplace-post-offer",theme:"primary-slim",children:[Object(Kr.jsx)(hc,{headerText:nt("inventory.marketplace.make_offer.title"),onCloseClick:e=>s(null)}),Object(Kr.jsx)(lc,{overflow:"hidden",children:Object(Kr.jsxs)(Jr,{fullHeight:!0,children:[Object(Kr.jsx)(Nc,{center:!0,className:"bg-muted rounded p-2",size:4,overflow:"hidden",children:Object(Kr.jsx)(Cc,{productType:t.isWallItem?er.WALL:er.FLOOR,productClassId:t.type,extraData:t.extra.toString()})}),Object(Kr.jsxs)(Nc,{size:8,justifyContent:"between",overflow:"hidden",children:[Object(Kr.jsxs)(Nc,{grow:!0,gap:1,children:[Object(Kr.jsx)(Zc,{fontWeight:"bold",children:h}),Object(Kr.jsx)(Zc,{truncate:!0,shrink:!0,children:j})]}),Object(Kr.jsxs)(Nc,{overflow:"auto",children:[Object(Kr.jsx)(Zc,{italics:!0,children:nt("inventory.marketplace.make_offer.expiration_info",["time"],[l.offerTime.toString()])}),Object(Kr.jsxs)("div",{className:"input-group has-validation",children:[Object(Kr.jsx)("input",{className:"form-control form-control-sm",type:"number",min:0,value:n,onChange:e=>r(parseInt(e.target.value)),placeholder:nt("inventory.marketplace.make_offer.price_request")}),(n<l.minimumPrice||isNaN(n))&&Object(Kr.jsx)(Qr,{className:"invalid-feedback d-block",children:nt("inventory.marketplace.make_offer.min_price",["minprice"],[l.minimumPrice.toString()])}),n>l.maximumPrice&&!isNaN(n)&&Object(Kr.jsx)(Qr,{className:"invalid-feedback d-block",children:nt("inventory.marketplace.make_offer.max_price",["maxprice"],[l.maximumPrice.toString()])}),!(n<l.minimumPrice||n>l.maximumPrice||isNaN(n))&&Object(Kr.jsx)(Qr,{className:"invalid-feedback d-block",children:nt("inventory.marketplace.make_offer.final_price",["commission","finalprice"],[l.commission.toString(),(n+l.commission).toString()])})]}),Object(Kr.jsx)(tc,{disabled:n<l.minimumPrice||n>l.maximumPrice||isNaN(n),onClick:()=>{!t||n<=l.minimumPrice||Pr.confirm(nt("inventory.marketplace.confirm_offer.info",["furniname","price"],[h,n.toString()]),(()=>{$n(new a.de(n,t.isWallItem?2:1,t.id)),s(null)}),(()=>{s(null)}),null,null,nt("inventory.marketplace.confirm_offer.title"))},children:nt("inventory.marketplace.make_offer.post")})]})]})]})})]})},Ja=e=>{const{isVisible:t=!1,setIsVisible:s=null,rootNode:n=null,currentPage:r=null,navigationHidden:i=!1,setNavigationHidden:a=null,activeNodes:o=[],searchResult:l=null,setSearchResult:u=null,openPageByName:d=null,openPageByOfferId:h=null,activateNode:j=null}=Jt();return Object(c.useEffect)((()=>{const e={linkReceived:e=>{const t=e.split("/");if(!(t.length<2))switch(t[1]){case"show":return void s(!0);case"hide":return void s(!1);case"toggle":return void s((e=>!e));case"open":if(t.length>2)if(4===t.length){if("offerId"===t[2])return void h(parseInt(t[3]))}else d(t[2]);else s(!0);return}},eventUrlPrefix:"catalog/"};return S(e),()=>M(e)}),[s,h,d]),Object(Kr.jsxs)(Kr.Fragment,{children:[t&&Object(Kr.jsxs)(_c,{uniqueKey:"catalog",className:"nitro-catalog",children:[Object(Kr.jsx)(hc,{headerText:nt("catalog.title"),onCloseClick:e=>s(!1)}),Object(Kr.jsx)($c,{children:n&&n.children.length>0&&n.children.map((e=>e.isVisible?Object(Kr.jsx)(Qc,{isActive:e.isActive,onClick:t=>{l&&u(null),j(e)},children:e.localization},e.pageId):null))}),Object(Kr.jsx)(lc,{children:Object(Kr.jsxs)(Jr,{children:[!i&&Object(Kr.jsx)(Nc,{size:3,overflow:"hidden",children:o&&o.length>0&&Object(Kr.jsx)(sa,{node:o[0]})}),Object(Kr.jsx)(Nc,{size:i?12:9,overflow:"hidden",children:$a(r,(()=>a(!0)))})]})})]}),Object(Kr.jsx)(Xi,{}),Object(Kr.jsx)(Xa,{})]})};var Za=s(28);const eo=Object(c.createContext)({chatHistoryState:null,roomHistoryState:null}),to=e=>Object(Kr.jsx)(eo.Provider,{value:e.value,children:e.children});class so{}so.TYPE_CHAT=1,so.TYPE_ROOM_INFO=2;const no=()=>{const e=new Date;return`${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`},ro=e=>{const{chatHistoryState:t=null,roomHistoryState:s=null}=Object(c.useContext)(eo),[n,r]=Object(c.useState)(!1),i=Object(c.useCallback)((e=>{e.id=t.chats.length,t.chats.push(e),t.chats.length>1e3&&t.chats.shift(),t.notify()}),[t]),o=Object(c.useCallback)((e=>{s.roomHistory.push(e),s.roomHistory.length>10&&s.roomHistory.shift(),s.notify()}),[s]),l=Object(c.useCallback)((e=>{const t=ie();if(!t)return;const s=t.userDataManager.getUserDataByIndex(e.objectId);if(!s)return;const n=no(),r={id:-1,entityId:s.webID,name:s.name,look:s.figure,entityType:s.type,message:e.message,timestamp:n,type:so.TYPE_CHAT,roomId:t.roomId};i(r)}),[i]);Gt(a.Tg.CHAT_EVENT,l);const u=Object(c.useCallback)((e=>{switch(e.type){case a.Yg.STARTED:r(!0);case a.Yg.ENDED:}}),[]);Gt(a.Yg.ENDED,u),Gt(a.Yg.STARTED,u);const d=Object(c.useCallback)((e=>{const t=e.getParser();if(!t)return;const s=ie();if(s&&s.roomId===t.data.roomId&&n){const e={id:-1,entityId:t.data.roomId,name:t.data.roomName,timestamp:no(),type:so.TYPE_ROOM_INFO,roomId:t.data.roomId};i(e);const s={id:t.data.roomId,name:t.data.roomName};o(s),r(!1)}}),[i,o,n]);return it(a.nc,d),null};class co{constructor(){this._chats=void 0,this._notifier=void 0,this._chats=[]}notify(){this._notifier&&this._notifier()}get chats(){return this._chats}get notifier(){return this._notifier}set notifier(e){this._notifier=e}}let io=null;const ao=()=>io;class oo{constructor(){this._roomHistory=void 0,this._notifier=void 0,this._roomHistory=[]}get roomHistory(){return this._roomHistory}get notifier(){return this._notifier}set notifier(e){this._notifier=e}notify(){this._notifier&&this._notifier()}}const lo=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(-1),[i,a]=Object(c.useState)(-1),[o,l]=Object(c.useState)(new co),[u,d]=Object(c.useState)(new oo),h=Object(c.useRef)(null),j=Object(c.useMemo)((()=>new Za.c({defaultHeight:25,fixedWidth:!0})),[]),b=e=>{const t=o.chats[e.index];e.index;return Object(Kr.jsx)(Za.b,{cache:j,columnIndex:0,parent:e.parent,rowIndex:e.index,children:Object(Kr.jsxs)(ec,{style:e.style,className:"p-1",gap:1,children:[Object(Kr.jsx)(Zc,{variant:"muted",children:t.timestamp}),t.type===so.TYPE_CHAT&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(Zc,{pointer:!0,noWrap:!0,dangerouslySetInnerHTML:{__html:t.name+":"}}),Object(Kr.jsx)(Zc,{textBreak:!0,wrap:!0,grow:!0,children:t.message})]}),t.type===so.TYPE_ROOM_INFO&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)("i",{className:"icon icon-small-room"}),Object(Kr.jsx)(Zc,{textBreak:!0,wrap:!0,grow:!0,children:t.name})]})]},e.key)},e.key)},g=Object(c.useCallback)((e=>{const t=e.split("/");if(!(t.length<2))switch(t[1]){case"show":return void s(!0);case"hide":return void s(!1);case"toggle":return void s((e=>!e))}}),[]);return Object(c.useEffect)((()=>{const e={linkReceived:g,eventUrlPrefix:"chat-history/"};return S(e),()=>M(e)}),[g]),Object(c.useEffect)((()=>{const e=new co,t=new oo;return io=e,e.notifier=()=>r((e=>e+1)),t.notifier=()=>a((e=>e+1)),l(e),d(t),()=>{e.notifier=null,t.notifier=null}}),[]),Object(c.useEffect)((()=>{h&&h.current&&t&&h.current.scrollToRow(-1)}),[t]),Object(Kr.jsxs)(to,{value:{chatHistoryState:o,roomHistoryState:u},children:[Object(Kr.jsx)(ro,{}),t&&Object(Kr.jsxs)(_c,{uniqueKey:"chat-history",className:"nitro-chat-history",theme:"primary-slim",children:[Object(Kr.jsx)(hc,{headerText:nt("room.chathistory.button.text"),onCloseClick:e=>s(!1)}),Object(Kr.jsx)(lc,{children:Object(Kr.jsx)(Za.a,{defaultWidth:300,defaultHeight:200,onResize:e=>j.clearAll(),children:e=>{let{height:t,width:s}=e;return Object(Kr.jsx)(Za.d,{ref:h,width:s,height:t,rowCount:o.chats.length,rowHeight:j.rowHeight,className:"chat-history-list",rowRenderer:b,deferredMeasurementCache:j})}})})]})]})},uo=32,ho=64,jo="x0123456789abcdefghijklmnopq";class bo{}bo.DOOR=0,bo.UP=1,bo.DOWN=2,bo.SET=3,bo.UNSET=4;const go={x:"101010",0:"0065ff",1:"0091ff",2:"00bcff",3:"00e8ff",4:"00ffea",5:"00ffbf",6:"00ff93",7:"00ff68",8:"00ff3d",9:"19ff00",a:"44ff00",b:"70ff00",c:"9bff00",d:"f2ff00",e:"ffe000",f:"ffb500",g:"ff8900",h:"ff5e00",i:"ff3200",j:"ff0700",k:"ff0023",l:"ff007a",m:"ff00a5",n:"ff00d1",o:"ff00fc",p:"d600ff",q:"aa00ff"};class Oo{constructor(){this._currentAction=void 0,this._currentHeight=void 0,this._currentAction=bo.SET,this._currentHeight=jo[1]}get currentAction(){return this._currentAction}set currentAction(e){this._currentAction=e}get currentHeight(){return this._currentHeight}set currentHeight(e){this._currentHeight=e}clear(){this._currentAction=bo.SET,this._currentHeight=jo[1]}}class mo{constructor(e,t){this._height=void 0,this._isBlocked=void 0,this._height=e,this._isBlocked=t}get height(){return this._height}set height(e){this._height=e}get isBlocked(){return this._isBlocked}set isBlocked(e){this._isBlocked=e}}const po=(e,t)=>{let s=e*uo/2-t*uo/2;return s+=1024,[s,e*uo/4+t*uo/4]},_o=(e,t)=>{const s=e-1024;return[(s/16+t/8)/2,(t/8-s/16)/2]},Eo=e=>{switch(e=parseInt(e.toString())){case 0:return-2;case 1:return-1;case 3:return 1;default:return 0}},fo=e=>{switch(e){case.25:return 0;case.5:return 1;case 2:return 3;default:return 2}};class xo extends a.xf{constructor(){super({width:2068,height:1124,backgroundColor:0,antialias:!0,autoDensity:!0,resolution:1,sharedLoader:!0,sharedTicker:!0}),this._tilemap=void 0,this._width=void 0,this._height=void 0,this._isHolding=void 0,this._doorLocation=void 0,this._lastUsedTile=void 0,this._tilemapRenderer=void 0,this._actionSettings=void 0,this._isInitialized=void 0,this._assetCollection=void 0,this._tilemap=[],this._doorLocation=new a.Xe(0,0),this._width=0,this._height=0,this._isHolding=!1,this._lastUsedTile=new a.Xe(-1,-1),this._actionSettings=new Oo}initialize(){if(this._isInitialized)return;const e=lr().asset.getCollection("floor_editor");e&&(this._assetCollection=e,this._tilemapRenderer=new a.cf(e.baseTexture),this.registerEventListeners(),this.stage.addChild(this._tilemapRenderer),this._isInitialized=!0)}registerEventListeners(){const e=new a.Xe;this._tilemapRenderer.containsPoint=t=>(this._tilemapRenderer.worldTransform.applyInverse(t,e),this.tileHitDetection(e,!1)),this._tilemapRenderer.on("pointerup",(()=>{this._isHolding=!1})),this._tilemapRenderer.on("pointerout",(()=>{this._isHolding=!1})),this._tilemapRenderer.on("pointerdown",(e=>{if(!(e.data.originalEvent instanceof PointerEvent)&&!(e.data.originalEvent instanceof TouchEvent))return;const t=e.data.originalEvent;if(t instanceof MouseEvent&&2===t.button)return;const s=e.data.global;this.tileHitDetection(s,!0)})),this._tilemapRenderer.on("click",(e=>{if(!(e.data.originalEvent instanceof PointerEvent))return;if(2===e.data.originalEvent.button)return;const t=e.data.global;this.tileHitDetection(t,!0,!0)}))}tileHitDetection(e,t){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=this._tilemapRenderer.pointsBuf,r=a.jf,c=n.length;t&&(this._isHolding=!0);for(let i=0;i<c;i+=r){const t=i+r,c=n.slice(i,t),a=uo,o=16,l=Math.floor(e.x),u=Math.floor(e.y),d=c[2],h=c[3],j=d+a/2,b=h+o/2;if(Math.abs(l-j)/(.5*a)+Math.abs(u-b)/(.5*o)<=1){if(this._isHolding){const[e,t]=_o(d,h);s?this.onClick(e,t):this._lastUsedTile.x===e&&this._lastUsedTile.y===t||(this._lastUsedTile.x=e,this._lastUsedTile.y=t,this.onClick(e,t))}return!0}}return!1}onClick(e,t){const s=this._tilemap[t][e],n=jo.indexOf(s.height);let r=0;switch(this._actionSettings.currentAction){case bo.DOOR:return void("x"!==s.height&&(this._doorLocation.x=e,this._doorLocation.y=t,this.renderTiles()));case bo.UP:if("x"===s.height)return;r=n+1;break;case bo.DOWN:if("x"===s.height||n<=1)return;r=n-1;break;case bo.SET:r=jo.indexOf(this._actionSettings.currentHeight);break;case bo.UNSET:r=0}if(-1===r)return;if(n===r)return;r>0&&(e+1>this._width&&(this._width=e+1),t+1>this._height&&(this._height=t+1));const c=jo[r];c&&(s.isBlocked||(this._tilemap[t][e].height=c,this.renderTiles()))}renderTiles(){this.tilemapRenderer.clear();for(let e=0;e<this._tilemap.length;e++)for(let t=0;t<this.tilemap[e].length;t++){const s=this.tilemap[e][t];let n=s.height;this._doorLocation.x===t&&this._doorLocation.y===e&&(n=xo.TILE_DOOR),s.isBlocked&&(n=xo.TILE_BLOCKED);const[r,c]=po(t,e);this._tilemapRenderer.tile(this._assetCollection.getTexture(`floor_editor_${n}`),r,c)}}setTilemap(e,t){this._tilemap=[];const s=e.split("\r");let n=0,r=s.length;for(let c=0;c<r;c++){const e=s[c];0!==e.length?e.length>n&&(n=e.length):(s.splice(c,1),r=s.length,c--)}for(let c=0;c<r;c++){this._tilemap[c]=[];const e=s[c];for(let s=0;s<n;s++){const n=t[c]&&t[c][s]||!1,r=e[s];this._tilemap[c][s]=new mo("x"!==r&&"X"!==r&&r?r:"x",n)}for(let t=n;t<ho;t++)this.tilemap[c][t]=new mo("x",!1)}for(let c=r;c<ho;c++){this.tilemap[c]||(this.tilemap[c]=[]);for(let e=0;e<ho;e++)this.tilemap[c][e]=new mo("x",!1)}this._width=n,this._height=r}getCurrentTilemapString(){if("x"===this._tilemap[this._height-1][this._width-1].height){this._width=-1,this._height=-1;for(let e=63;e>=0;e--)if(this._tilemap[e])for(let t=63;t>=0;t--){if(!this._tilemap[e][t])continue;"x"!==this._tilemap[e][t].height&&(t+1>this._width&&(this._width=t+1),e+1>this._height&&(this._height=e+1))}}const e=[];for(let t=0;t<this._height;t++){const s=[];for(let e=0;e<this._width;e++){const n=this._tilemap[t][e];s[e]=n.height}e[t]=s.join("")}return e.join("\r")}clear(){this._tilemapRenderer.interactive=!1,this._tilemap=[],this._doorLocation.set(-1,-1),this._width=0,this._height=0,this._isHolding=!1,this._lastUsedTile.set(-1,-1),this._actionSettings.clear(),this._tilemapRenderer.clear()}get tilemapRenderer(){return this._tilemapRenderer}get tilemap(){return this._tilemap}get doorLocation(){return this._doorLocation}set doorLocation(e){this._doorLocation=e}get actionSettings(){return this._actionSettings}static get instance(){return xo._INSTANCE||(xo._INSTANCE=new xo),xo._INSTANCE}}xo._INSTANCE=null,xo.TILE_BLOCKED="r_blocked",xo.TILE_DOOR="r_door";const Io=Object(c.createContext)({originalFloorplanSettings:null,setOriginalFloorplanSettings:null,visualizationSettings:null,setVisualizationSettings:null}),To=e=>Object(Kr.jsx)(Io.Provider,{...e}),Co=()=>Object(c.useContext)(Io),So=e=>{const{gap:t=1,children:s=null,...n}=e,[r,i]=Object(c.useState)(!1),[o,l]=Object(c.useState)(!1),{originalFloorplanSettings:u=null,setOriginalFloorplanSettings:d=null,setVisualizationSettings:h=null}=Co(),j=Object(c.useRef)(null),b=Object(c.useCallback)((e=>{const t=e.getParser();d((e=>{const s={...e};return s.reservedTiles=t.blockedTilesMap,xo.instance.setTilemap(s.tilemap,s.reservedTiles),s})),i(!0),j.current.scrollTo(xo.instance.view.width/3,0)}),[d]);it(a.Pg,b);const g=Object(c.useCallback)((e=>{const t=e.getParser();d((e=>{const s={...e};return s.entryPoint=[t.x,t.y],s.entryPointDir=t.direction,s})),h((e=>{const s={...e};return s.entryPointDir=t.direction,s})),xo.instance.doorLocation=new a.Xe(t.x,t.y),l(!0)}),[d,h]);it(a.yg,g);const O=e=>{const t=j.current;if(t)switch(e){case"up":t.scrollBy({top:-10});break;case"down":t.scrollBy({top:10});break;case"left":t.scrollBy({left:-10});break;case"right":t.scrollBy({left:10})}};return Object(c.useEffect)((()=>()=>{xo.instance.clear(),h((e=>({wallHeight:u.wallHeight,thicknessWall:u.thicknessWall,thicknessFloor:u.thicknessFloor,entryPointDir:e.entryPointDir})))}),[u.thicknessFloor,u.thicknessWall,u.wallHeight,h]),Object(c.useEffect)((()=>{o&&r&&xo.instance.renderTiles()}),[o,r]),Object(c.useEffect)((()=>{$n(new a.yc),$n(new a.tc),xo.instance.tilemapRenderer.interactive=!0,j.current&&j.current.appendChild(xo.instance.renderer.view)}),[]),Object(Kr.jsxs)(Nc,{gap:t,...n,children:[Object(Kr.jsxs)(Jr,{overflow:"hidden",gap:1,children:[Object(Kr.jsx)(Nc,{center:!0,size:1,children:Object(Kr.jsx)(tc,{className:"d-md-none",onClick:e=>O("left"),children:Object(Kr.jsx)(ic.a,{icon:"arrow-left"})})}),Object(Kr.jsxs)(Nc,{overflow:"hidden",size:10,gap:1,children:[Object(Kr.jsx)(ec,{justifyContent:"center",className:"d-md-none",children:Object(Kr.jsx)(tc,{shrink:!0,onClick:e=>O("up"),children:Object(Kr.jsx)(ic.a,{icon:"arrow-up"})})}),Object(Kr.jsx)(Qr,{overflow:"auto",innerRef:j}),Object(Kr.jsx)(ec,{justifyContent:"center",className:"d-md-none",children:Object(Kr.jsx)(tc,{shrink:!0,onClick:e=>O("down"),children:Object(Kr.jsx)(ic.a,{icon:"arrow-down"})})})]}),Object(Kr.jsx)(Nc,{center:!0,size:1,children:Object(Kr.jsx)(tc,{className:"d-md-none",onClick:e=>O("right"),children:Object(Kr.jsx)(ic.a,{icon:"arrow-right"})})})]}),s]})},No=e=>e.replace(/\r\n|\r|\n/g,"\n").toLowerCase(),vo=e=>{const{onCloseClick:t=null}=e,[s,n]=Object(c.useState)(""),{originalFloorplanSettings:r=null}=Co();return Cs((()=>{n(No(r.tilemap))})),Object(Kr.jsxs)(_c,{theme:"primary-slim",className:"floorplan-import-export",children:[Object(Kr.jsx)(hc,{headerText:nt("floor.plan.editor.import.export"),onCloseClick:t}),Object(Kr.jsxs)(lc,{children:[Object(Kr.jsx)("textarea",{className:"h-100",value:s,onChange:e=>n(e.target.value)}),Object(Kr.jsxs)(ec,{justifyContent:"between",children:[Object(Kr.jsx)(tc,{onClick:e=>n(No(r.tilemap)),children:nt("floor.plan.editor.revert.to.last.received.map")}),Object(Kr.jsx)(tc,{onClick:()=>{$n(new a.ui(s.split("\n").join("\r"),r.entryPoint[0],r.entryPoint[1],r.entryPointDir,Eo(r.thicknessWall),Eo(r.thicknessFloor),r.wallHeight-1))},children:nt("floor.plan.editor.save")})]})]})]})},Ro=e=>{const{visualizationSettings:t=null,setVisualizationSettings:s=null}=Co(),[n,r]=Object(c.useState)(bo.SET),[i,a]=Object(c.useState)(0),o=e=>{r(e),xo.instance.actionSettings.currentAction=e},l=e=>{(isNaN(e)||e<=0)&&(e=0),e>16&&(e=16),s((t=>{const s={...t};return s.wallHeight=e,s}))};return Object(Kr.jsxs)(Nc,{children:[Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsxs)(Nc,{size:5,gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("floor.plan.editor.draw.mode")}),Object(Kr.jsxs)(ec,{gap:3,children:[Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)(wc,{itemActive:n===bo.SET,onClick:e=>o(bo.SET),children:Object(Kr.jsx)("i",{className:"icon icon-set-tile"})}),Object(Kr.jsx)(wc,{itemActive:n===bo.UNSET,onClick:e=>o(bo.UNSET),children:Object(Kr.jsx)("i",{className:"icon icon-unset-tile"})})]}),Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)(wc,{itemActive:n===bo.UP,onClick:e=>o(bo.UP),children:Object(Kr.jsx)("i",{className:"icon icon-increase-height"})}),Object(Kr.jsx)(wc,{itemActive:n===bo.DOWN,onClick:e=>o(bo.DOWN),children:Object(Kr.jsx)("i",{className:"icon icon-decrease-height"})})]}),Object(Kr.jsx)(wc,{itemActive:n===bo.DOOR,onClick:e=>o(bo.DOOR),children:Object(Kr.jsx)("i",{className:"icon icon-set-door"})})]})]}),Object(Kr.jsxs)(Nc,{alignItems:"center",size:4,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("floor.plan.editor.enter.direction")}),Object(Kr.jsx)("i",{className:`icon icon-door-direction-${t.entryPointDir} cursor-pointer`,onClick:()=>{s((e=>{const t={...e};return t.entryPointDir<7?++t.entryPointDir:t.entryPointDir=0,t}))}})]}),Object(Kr.jsxs)(Nc,{size:3,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("floor.editor.wall.height")}),Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)(ic.a,{icon:"caret-left",className:"cursor-pointer",onClick:()=>{let e=t.wallHeight-1;e<=0&&(e=0),l(e)}}),Object(Kr.jsx)("input",{type:"number",className:"form-control form-control-sm quantity-input",value:t.wallHeight,onChange:e=>l(e.target.valueAsNumber)}),Object(Kr.jsx)(ic.a,{icon:"caret-right",className:"cursor-pointer",onClick:()=>{let e=t.wallHeight+1;e>16&&(e=16),l(e)}})]})]})]}),Object(Kr.jsxs)(ec,{gap:2,children:[Object(Kr.jsxs)(Nc,{size:6,children:[Object(Kr.jsxs)(Zc,{bold:!0,children:[nt("floor.plan.editor.tile.height"),": ",i]}),Object(Kr.jsx)(Li.a,{className:"nitro-slider",min:0,max:26,step:1,value:i,onChange:e=>{return t=e,(isNaN(t)||t<=0)&&(t=0),t>26&&(t=26),a(t),void(xo.instance.actionSettings.currentHeight=t.toString(36));var t},renderThumb:(e,t)=>{let{style:s,...n}=e;return Object(Kr.jsx)("div",{style:{backgroundColor:`#${go[t.valueNow.toString(33)]}`,...s},...n,children:t.valueNow})}})]}),Object(Kr.jsxs)(Nc,{size:6,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("floor.plan.editor.room.options")}),Object(Kr.jsxs)(ec,{className:"align-items-center",gap:1,children:[Object(Kr.jsxs)("select",{className:"form-control form-control-sm",value:t.thicknessWall,onChange:e=>{return t=parseInt(e.target.value),void s((e=>{const s={...e};return s.thicknessWall=t,s}));var t},children:[Object(Kr.jsx)("option",{value:0,children:nt("navigator.roomsettings.wall_thickness.thinnest")}),Object(Kr.jsx)("option",{value:1,children:nt("navigator.roomsettings.wall_thickness.thin")}),Object(Kr.jsx)("option",{value:2,children:nt("navigator.roomsettings.wall_thickness.normal")}),Object(Kr.jsx)("option",{value:3,children:nt("navigator.roomsettings.wall_thickness.thick")})]}),Object(Kr.jsxs)("select",{className:"form-control form-control-sm",value:t.thicknessFloor,onChange:e=>{return t=parseInt(e.target.value),void s((e=>{const s={...e};return s.thicknessFloor=t,s}));var t},children:[Object(Kr.jsx)("option",{value:0,children:nt("navigator.roomsettings.floor_thickness.thinnest")}),Object(Kr.jsx)("option",{value:1,children:nt("navigator.roomsettings.floor_thickness.thin")}),Object(Kr.jsx)("option",{value:2,children:nt("navigator.roomsettings.floor_thickness.normal")}),Object(Kr.jsx)("option",{value:3,children:nt("navigator.roomsettings.floor_thickness.thick")})]})]})]})]})]})},Ao=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(!1),[i,o]=Object(c.useState)({tilemap:"",reservedTiles:[],entryPoint:[0,0],entryPointDir:2,wallHeight:-1,thicknessWall:1,thicknessFloor:1}),[l,u]=Object(c.useState)({entryPointDir:2,wallHeight:-1,thicknessWall:1,thicknessFloor:1}),d=Object(c.useCallback)((e=>{s(!1)}),[]);Bt(a.og.DISPOSED,d);const h=Object(c.useCallback)((e=>{const t=e.getParser();o((e=>{const s={...e};return s.tilemap=t.model,s.wallHeight=t.wallHeight+1,s})),u((e=>{const s={...e};return s.wallHeight=t.wallHeight+1,s}))}),[]);it(a.Eb,h);const j=Object(c.useCallback)((e=>{const t=e.getParser();o((e=>{const s={...e};return s.thicknessFloor=fo(t.thicknessFloor),s.thicknessWall=fo(t.thicknessWall),s})),u((e=>{const s={...e};return s.thicknessFloor=fo(t.thicknessFloor),s.thicknessWall=fo(t.thicknessWall),s}))}),[]);return it(a.xh,j),Object(c.useEffect)((()=>{const e={linkReceived:e=>{const t=e.split("/");if(!(t.length<2))switch(t[1]){case"show":return void s(!0);case"hide":return void s(!1);case"toggle":return void s((e=>!e))}},eventUrlPrefix:"floor-editor/"};return S(e),()=>M(e)}),[]),Object(c.useEffect)((()=>{xo.instance.initialize()}),[]),Object(Kr.jsxs)(To,{value:{originalFloorplanSettings:i,setOriginalFloorplanSettings:o,visualizationSettings:l,setVisualizationSettings:u},children:[t&&Object(Kr.jsxs)(_c,{uniqueKey:"floorpan-editor",className:"nitro-floorplan-editor",theme:"primary-slim",children:[Object(Kr.jsx)(hc,{headerText:nt("floor.plan.editor.title"),onCloseClick:()=>s(!1)}),Object(Kr.jsxs)(lc,{overflow:"hidden",children:[Object(Kr.jsx)(Ro,{}),Object(Kr.jsx)(So,{overflow:"hidden"}),Object(Kr.jsxs)(ec,{justifyContent:"between",children:[Object(Kr.jsx)(tc,{onClick:()=>{u({wallHeight:i.wallHeight,thicknessWall:i.thicknessWall,thicknessFloor:i.thicknessFloor,entryPointDir:i.entryPointDir}),xo.instance.doorLocation=new a.Xe(i.entryPoint[0],i.entryPoint[1]),xo.instance.setTilemap(i.tilemap,i.reservedTiles),xo.instance.renderTiles()},children:nt("floor.plan.editor.reload")}),Object(Kr.jsxs)(sc,{children:[Object(Kr.jsx)(tc,{disabled:!0,children:nt("floor.plan.editor.preview")}),Object(Kr.jsx)(tc,{onClick:e=>r(!0),children:nt("floor.plan.editor.import.export")}),Object(Kr.jsx)(tc,{onClick:()=>{$n(new a.ui(xo.instance.getCurrentTilemapString(),xo.instance.doorLocation.x,xo.instance.doorLocation.y,l.entryPointDir,Eo(l.thicknessWall),Eo(l.thicknessFloor),l.wallHeight-1))},children:nt("floor.plan.editor.save")})]})]})]})]}),n&&Object(Kr.jsx)(vo,{onCloseClick:()=>r(!1)})]})},yo=e=>{const{friend:t=null}=e,[s,n]=Object(c.useState)(!1),{followFriend:r=null}=es(),i=Object(c.useRef)();return Object(c.useEffect)((()=>{const e=e=>{const t=i.current;t&&(e.target===t||t.contains(e.target)||n(!1))};return document.addEventListener(a.Ce.MOUSE_CLICK,e),()=>document.removeEventListener(a.Ce.MOUSE_CLICK,e)}),[]),t?Object(Kr.jsxs)("div",{ref:i,className:"btn friend-bar-item "+(s?"friend-bar-item-active":""),onClick:e=>n((e=>!e)),children:[Object(Kr.jsxs)("div",{className:"friend-bar-item-head position-absolute "+(t.id>0?"avatar":"group"),children:[t.id>0&&Object(Kr.jsx)(Ec,{headOnly:!0,figure:t.figure,direction:2}),t.id<=0&&Object(Kr.jsx)(xc,{isGroup:!0,badgeCode:t.figure})]}),s?Object(Kr.jsxs)("div",{className:"d-flex justify-content-between mt-n1",children:[Object(Kr.jsx)(Qr,{className:"nitro-friends-spritesheet icon-friendbar-chat cursor-pointer",onClick:e=>_r(t.id)}),t.followingAllowed&&Object(Kr.jsx)(Qr,{className:"nitro-friends-spritesheet icon-friendbar-visit cursor-pointer",onClick:e=>r(t)}),Object(Kr.jsx)(Qr,{className:"nitro-friends-spritesheet icon-profile cursor-pointer",onClick:e=>Lr(t.id)})]}):Object(Kr.jsx)("div",{className:"text-truncate",children:t.name})]}):Object(Kr.jsxs)("div",{ref:i,className:"btn friend-bar-item friend-bar-search",children:[Object(Kr.jsx)("div",{className:"friend-bar-item-head position-absolute"}),Object(Kr.jsx)("div",{className:"text-truncate",children:nt("friend.bar.find.title")})]})},wo=e=>{const{onlineFriends:t=null}=e,[s,n]=Object(c.useState)(0),r=Object(c.useRef)();return Object(Kr.jsxs)(ec,{innerRef:r,alignItems:"center",className:"friend-bar",children:[Object(Kr.jsx)(tc,{className:"friend-bar-button",disabled:s<=0,onClick:e=>n(s-1),children:Object(Kr.jsx)(ic.a,{icon:"chevron-left"})}),Array.from(Array(3),((e,n)=>Object(Kr.jsx)(yo,{friend:t[s+n]||null},n))),Object(Kr.jsx)(tc,{className:"friend-bar-button",disabled:!(t.length>3&&s+3<=t.length-1),onClick:e=>n(s+1),children:Object(Kr.jsx)(ic.a,{icon:"chevron-right"})})]})},ko=e=>{const{friend:t=null,selected:s=!1,selectFriend:n=null}=e,[r,i]=Object(c.useState)(!1),{followFriend:a=null,updateRelationship:o=null}=es(),l=(e,s)=>{e.stopPropagation(),o(t,s),i(!1)};return t?Object(Kr.jsxs)(cc,{justifyContent:"between",className:`px-2 py-1 ${s&&"bg-primary text-white"}`,onClick:e=>n(t.id),children:[Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)(Qr,{onClick:e=>e.stopPropagation(),children:Object(Kr.jsx)(Kc,{userId:t.id})}),Object(Kr.jsx)("div",{children:t.name})]}),Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[!r&&Object(Kr.jsxs)(Kr.Fragment,{children:[t.followingAllowed&&Object(Kr.jsx)(Qr,{pointer:!0,onClick:e=>{e.stopPropagation(),a(t)},className:"nitro-friends-spritesheet icon-follow",title:nt("friendlist.tip.follow")}),t.online&&Object(Kr.jsx)(Qr,{pointer:!0,className:"nitro-friends-spritesheet icon-chat",onClick:e=>{e.stopPropagation(),_r(t.id)},title:nt("friendlist.tip.im")}),t.id>0&&Object(Kr.jsx)(Qr,{className:`nitro-friends-spritesheet icon-${(()=>{if(!t)return"none";switch(t.relationshipStatus){case Bn.RELATIONSHIP_HEART:return"heart";case Bn.RELATIONSHIP_SMILE:return"smile";case Bn.RELATIONSHIP_BOBBA:return"bobba";default:return"none"}})()} cursor-pointer`,onClick:e=>{e.stopPropagation(),i(!0)},title:nt("infostand.link.relationship")})]}),r&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(Qr,{pointer:!0,className:"nitro-friends-spritesheet icon-heart",onClick:e=>l(e,Bn.RELATIONSHIP_HEART)}),Object(Kr.jsx)(Qr,{pointer:!0,className:"nitro-friends-spritesheet icon-smile",onClick:e=>l(e,Bn.RELATIONSHIP_SMILE)}),Object(Kr.jsx)(Qr,{pointer:!0,className:"nitro-friends-spritesheet icon-bobba",onClick:e=>l(e,Bn.RELATIONSHIP_BOBBA)}),Object(Kr.jsx)(Qr,{pointer:!0,className:"nitro-friends-spritesheet icon-none",onClick:e=>l(e,Bn.RELATIONSHIP_NONE)})]})]})]}):null},Do=e=>{const{list:t=null,selectedFriendsIds:s=null,selectFriend:n=null}=e;return t&&t.length?Object(Kr.jsx)(Kr.Fragment,{children:t.map(((e,t)=>Object(Kr.jsx)(ko,{friend:e,selected:s&&s.indexOf(e.id)>=0,selectFriend:n},t)))}):null},Uo=e=>{const{request:t=null}=e,{requestResponse:s=null}=es();return t?Object(Kr.jsxs)(cc,{justifyContent:"between",className:"px-2 py-1",children:[Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)(Kc,{userId:t.id}),Object(Kr.jsx)("div",{children:t.name})]}),Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)(Qr,{className:"nitro-friends-spritesheet icon-accept cursor-pointer",onClick:e=>s(t.id,!0)}),Object(Kr.jsx)(Qr,{className:"nitro-friends-spritesheet icon-deny cursor-pointer",onClick:e=>s(t.id,!1)})]})]}):null},Po=e=>{const{children:t=null,...s}=e,{requests:n=[],requestResponse:r=null}=es();return n.length?Object(Kr.jsxs)(ac,{...s,children:[Object(Kr.jsxs)(Nc,{fullHeight:!0,justifyContent:"between",gap:1,children:[Object(Kr.jsx)(Nc,{gap:0,children:n.map(((e,t)=>Object(Kr.jsx)(Uo,{request:e},t)))}),Object(Kr.jsx)(ec,{justifyContent:"center",className:"px-2 py-1",children:Object(Kr.jsx)(tc,{onClick:e=>r(-1,!1),children:nt("friendlist.requests.dismissall")})})]}),t]}):null},Mo=e=>{const{selectedFriendsIds:t=null,removeFriendsText:s=null,removeSelectedFriends:n=null,onCloseClick:r=null}=e;return Object(Kr.jsxs)(_c,{className:"nitro-friends-remove-confirmation",theme:"primary-slim",children:[Object(Kr.jsx)(hc,{headerText:nt("friendlist.removefriendconfirm.title"),onCloseClick:r}),Object(Kr.jsxs)(lc,{className:"text-black",children:[Object(Kr.jsx)("div",{children:s}),Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)(tc,{fullWidth:!0,variant:"danger",disabled:0===t.length,onClick:n,children:nt("generic.ok")}),Object(Kr.jsx)(tc,{fullWidth:!0,onClick:r,children:nt("generic.cancel")})]})]})]})},Lo=e=>{const{selectedFriendsIds:t=null,onCloseClick:s=null,sendRoomInvite:n=null}=e,[r,i]=Object(c.useState)("");return Object(Kr.jsxs)(_c,{className:"nitro-friends-room-invite",uniqueKey:"nitro-friends-room-invite",theme:"primary-slim",children:[Object(Kr.jsx)(hc,{headerText:nt("friendlist.invite.title"),onCloseClick:s}),Object(Kr.jsxs)(lc,{className:"text-black",children:[nt("friendlist.invite.summary",["count"],[t.length.toString()]),Object(Kr.jsx)("textarea",{className:"form-control",value:r,onChange:e=>i(e.target.value)}),Object(Kr.jsx)(Zc,{center:!0,className:"bg-muted rounded p-1",children:nt("friendlist.invite.note")}),Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)(tc,{fullWidth:!0,variant:"success",disabled:0===r.length||0===t.length,onClick:()=>n(r),children:nt("friendlist.invite.send")}),Object(Kr.jsx)(tc,{fullWidth:!0,onClick:s,children:nt("generic.cancel")})]})]})]})},Fo=e=>{const{...t}=e,[s,n]=Object(c.useState)(""),[r,i]=Object(c.useState)(null),[o,l]=Object(c.useState)(null),{canRequestFriend:u=null,requestFriend:d=null}=es(),h=Object(c.useCallback)((e=>{const t=e.getParser();i(t.friends),l(t.others)}),[]);return it(a.Id,h),Object(c.useEffect)((()=>{if(!s||!s.length)return;const e=setTimeout((()=>{s&&s.length&&$n(new a.Hd(s))}),500);return()=>clearTimeout(e)}),[s]),Object(Kr.jsxs)(ac,{...t,children:[Object(Kr.jsx)("input",{type:"text",className:"search-input form-control form-control-sm w-100 rounded-0",placeholder:nt("generic.search"),value:s,maxLength:50,onChange:e=>n(e.target.value)}),Object(Kr.jsxs)(Nc,{children:[r&&Object(Kr.jsxs)(Kr.Fragment,{children:[0===r.length&&Object(Kr.jsx)(Zc,{bold:!0,small:!0,className:"px-2 py-1",children:nt("friendlist.search.nofriendsfound")}),r.length>0&&Object(Kr.jsxs)(Nc,{gap:0,children:[Object(Kr.jsx)(Zc,{bold:!0,small:!0,className:"px-2 py-1",children:nt("friendlist.search.friendscaption",["cnt"],[r.length.toString()])}),Object(Kr.jsx)("hr",{className:"mx-2 mt-0 mb-1 text-black"}),Object(Kr.jsx)(Nc,{gap:0,children:r.map((e=>Object(Kr.jsxs)(cc,{justifyContent:"between",className:"px-2 py-1",children:[Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)(Kc,{userId:e.avatarId}),Object(Kr.jsx)("div",{children:e.avatarName})]}),Object(Kr.jsx)(ec,{alignItems:"center",gap:1,children:e.isAvatarOnline&&Object(Kr.jsx)(Qr,{className:"nitro-friends-spritesheet icon-chat cursor-pointer",onClick:t=>_r(e.avatarId),title:nt("friendlist.tip.im")})})]},e.avatarId)))})]})]}),o&&Object(Kr.jsxs)(Kr.Fragment,{children:[0===o.length&&Object(Kr.jsx)(Zc,{bold:!0,small:!0,className:"px-2 py-1",children:nt("friendlist.search.noothersfound")}),o.length>0&&Object(Kr.jsxs)(Nc,{gap:0,children:[Object(Kr.jsx)(Zc,{bold:!0,small:!0,className:"px-2 py-1",children:nt("friendlist.search.otherscaption",["cnt"],[o.length.toString()])}),Object(Kr.jsx)("hr",{className:"mx-2 mt-0 mb-1 text-black"}),Object(Kr.jsx)(Nc,{gap:0,children:o.map((e=>Object(Kr.jsxs)(cc,{justifyContent:"between",className:"px-2 py-1",children:[Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)(Kc,{userId:e.avatarId}),Object(Kr.jsx)("div",{children:e.avatarName})]}),Object(Kr.jsx)(ec,{alignItems:"center",gap:1,children:u(e.avatarId)&&Object(Kr.jsx)(Qr,{className:"nitro-friends-spritesheet icon-add cursor-pointer",onClick:t=>d(e.avatarId,e.avatarName),title:nt("friendlist.tip.addfriend")})})]},e.avatarId)))})]})]})]})]})},Ho=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)([]),[i,o]=Object(c.useState)(!1),[l,u]=Object(c.useState)(!1),{onlineFriends:d=[],offlineFriends:h=[],requests:j=[],requestFriend:b=null}=es(),g=Object(c.useMemo)((()=>{if(!n||!n.length)return"";const e=[];for(const t of n){let s=d.find((e=>e.id===t));s||(s=h.find((e=>e.id===t))),s&&e.push(s.name)}return nt("friendlist.removefriendconfirm.userlist",["user_names"],[e.join(", ")])}),[h,d,n]),O=Object(c.useCallback)((e=>{e<0||r((t=>{const s=[...t],n=s.indexOf(e);return n>-1?s.splice(n,1):s.push(e),s}))}),[r]);return Object(c.useEffect)((()=>{const e={linkReceived:e=>{const t=e.split("/");if(!(t.length<2))switch(t[1]){case"show":return void s(!0);case"hide":return void s(!1);case"toggle":return void s((e=>!e));case"request":if(t.length<4)return;b(parseInt(t[2]),t[3])}},eventUrlPrefix:"friends/"};return S(e),()=>M(e)}),[b]),t?Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsxs)(_c,{className:"nitro-friends",uniqueKey:"nitro-friends",theme:"primary-slim",children:[Object(Kr.jsx)(hc,{headerText:nt("friendlist.friends"),onCloseClick:e=>s(!1)}),Object(Kr.jsxs)(lc,{overflow:"hidden",gap:1,className:"text-black p-0",children:[Object(Kr.jsxs)(oc,{fullHeight:!0,overflow:"hidden",children:[Object(Kr.jsx)(ac,{headerText:nt("friendlist.friends")+` (${d.length})`,isExpanded:!0,children:Object(Kr.jsx)(Do,{list:d,selectedFriendsIds:n,selectFriend:O})}),Object(Kr.jsx)(ac,{headerText:nt("friendlist.friends.offlinecaption")+` (${h.length})`,children:Object(Kr.jsx)(Do,{list:h,selectedFriendsIds:n,selectFriend:O})}),Object(Kr.jsx)(Po,{headerText:nt("friendlist.tab.friendrequests")+` (${j.length})`,isExpanded:!0}),Object(Kr.jsx)(Fo,{headerText:nt("people.search.title")})]}),n&&n.length>0&&Object(Kr.jsxs)(ec,{gap:1,className:"p-1",children:[Object(Kr.jsx)(tc,{fullWidth:!0,onClick:()=>o(!0),children:nt("friendlist.tip.invite")}),Object(Kr.jsx)(tc,{fullWidth:!0,variant:"danger",onClick:e=>u(!0),children:nt("generic.delete")})]})]})]}),i&&Object(Kr.jsx)(Lo,{selectedFriendsIds:n,onCloseClick:()=>o(!1),sendRoomInvite:e=>{0!==n.length&&e&&0!==e.length&&($n(new a.Lh(e,n)),o(!1))}}),l&&Object(Kr.jsx)(Mo,{selectedFriendsIds:n,removeFriendsText:g,onCloseClick:()=>u(!1),removeSelectedFriends:()=>{0!==n.length&&(r((e=>($n(new a.Pf(...e)),[]))),u(!1))}})]}):null},Bo=e=>{const{thread:t=null,group:s=null}=e,n=Object(c.useMemo)((()=>s.type===hr.GROUP_CHAT&&dr(s.chats[0].extraData)),[s]),r=Object(c.useMemo)((()=>!(!t||!s)&&(s.type===hr.PRIVATE_CHAT&&s.userId===ee().userId||!(!n||!s.chats.length||n.userId!==ee().userId))),[t,s,n]);return t&&s?s.userId?Object(Kr.jsxs)(ec,{fullWidth:!0,justifyContent:r?"end":"start",gap:2,children:[Object(Kr.jsxs)(Qr,{shrink:!0,className:"message-avatar",children:[s.type===hr.PRIVATE_CHAT&&!r&&Object(Kr.jsx)(Ec,{figure:t.participant.figure,direction:2}),n&&!r&&Object(Kr.jsx)(Ec,{figure:n.figure,direction:2})]}),Object(Kr.jsxs)(Qr,{className:"bg-light text-black border-radius mb-2 rounded py-1 px-2 messages-group-"+(r?"right":"left"),children:[Object(Kr.jsxs)(Qr,{className:"fw-bold",children:[r&&ee().userName,!r&&(n?n.username:t.participant.name)]}),s.chats.map(((e,t)=>Object(Kr.jsx)(Qr,{className:"text-break",children:e.message},t)))]}),r&&Object(Kr.jsx)(Qr,{shrink:!0,className:"message-avatar",children:Object(Kr.jsx)(Ec,{figure:ee().figure,direction:4})})]}):Object(Kr.jsx)(Kr.Fragment,{children:s.chats.map(((e,t)=>Object(Kr.jsx)(ec,{fullWidth:!0,gap:2,justifyContent:"start",children:Object(Kr.jsxs)(Qr,{className:"w-100 text-break",children:[e.type===Or.SECURITY_NOTIFICATION&&Object(Kr.jsxs)(ec,{gap:2,alignItems:"center",className:"bg-light rounded mb-2 px-2 py-1 small text-muted",children:[Object(Kr.jsx)(Qr,{className:"nitro-friends-spritesheet icon-warning flex-shrink-0"}),Object(Kr.jsx)(Qr,{children:e.message})]}),e.type===Or.ROOM_INVITE&&Object(Kr.jsxs)(ec,{gap:2,alignItems:"center",className:"bg-light rounded mb-2 px-2 py-1 small text-black",children:[Object(Kr.jsx)(Qr,{className:"messenger-notification-icon flex-shrink-0"}),Object(Kr.jsxs)(Qr,{children:[nt("messenger.invitation")+" ",e.message]})]})]})},t)))}):null},Go=e=>{const{thread:t=null}=e;return t.setRead(),Object(Kr.jsx)(Kr.Fragment,{children:t.groups.length>0&&t.groups.map(((e,s)=>Object(Kr.jsx)(Bo,{thread:t,group:e},s)))})},Wo=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(-1),[i,o]=Object(c.useState)(""),{visibleThreads:l=[],activeThread:u=null,getMessageThread:d=null,sendMessage:h=null,setActiveThreadId:j=null,closeThread:b=null}=ss(),g=Object(c.useRef)(),O=()=>u&&u.participant&&Lr(u.participant.id),m=()=>{u&&i.length&&(h(u,i),o(""))};return Object(c.useEffect)((()=>{const e={linkReceived:e=>{const t=e.split("/");if(2===t.length){if("open"===t[1])return void s(!0);{const e=d(parseInt(t[1]));if(!e)return;j(e.threadId),s(!0)}}},eventUrlPrefix:"friends-messenger/"};return S(e),()=>M(e)}),[d,j]),Object(c.useEffect)((()=>{t&&u&&(g.current.scrollTop=g.current.scrollHeight)}),[t,u]),Object(c.useEffect)((()=>{!t||u?!t&&u&&(r(u.threadId),j(-1)):n>0?j(n):l.length>0&&j(l[0].threadId)}),[t,u,n,l,j]),t?Object(Kr.jsxs)(_c,{className:"nitro-friends-messenger",uniqueKey:"nitro-friends-messenger",theme:"primary-slim",children:[Object(Kr.jsx)(hc,{headerText:nt("messenger.window.title",["OPEN_CHAT_COUNT"],[l.length.toString()]),onCloseClick:e=>s(!1)}),Object(Kr.jsx)(lc,{children:Object(Kr.jsxs)(Jr,{overflow:"hidden",children:[Object(Kr.jsx)(Nc,{size:4,children:Object(Kr.jsx)(Nc,{fullHeight:!0,overflow:"auto",children:l&&l.length>0&&l.map((e=>Object(Kr.jsxs)(wc,{itemActive:u===e,onClick:t=>j(e.threadId),children:[e.unread&&Object(Kr.jsx)(vc,{count:e.unreadCount}),Object(Kr.jsxs)(ec,{fullWidth:!0,alignItems:"center",gap:1,children:[Object(Kr.jsxs)(ec,{alignItems:"center",className:"friend-head px-1",children:[e.participant.id>0&&Object(Kr.jsx)(Ec,{figure:e.participant.figure,headOnly:!0,direction:3}),e.participant.id<=0&&Object(Kr.jsx)(xc,{isGroup:!0,badgeCode:e.participant.figure})]}),Object(Kr.jsx)(Zc,{truncate:!0,grow:!0,children:e.participant.name})]})]},e.threadId)))})}),Object(Kr.jsx)(Nc,{size:8,overflow:"hidden",children:u&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsxs)(ec,{alignItems:"center",justifyContent:"between",gap:1,children:[Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)(tc,{onClick:()=>u&&u.participant&&$n(new a.Fb(u.participant.id)),children:Object(Kr.jsx)(Qr,{className:"nitro-friends-spritesheet icon-follow"})}),Object(Kr.jsx)(tc,{onClick:O,children:Object(Kr.jsx)(Qr,{className:"nitro-friends-spritesheet icon-profile-sm"})}),Object(Kr.jsx)(tc,{variant:"danger",onClick:O,children:nt("messenger.window.button.report")})]}),Object(Kr.jsx)(Zc,{truncate:!0,bold:!0,center:!0,fontSize:6,children:nt("messenger.window.separator",["FRIEND_NAME"],[u.participant.name])}),Object(Kr.jsx)(tc,{onClick:e=>b(u.threadId),children:Object(Kr.jsx)(ic.a,{icon:"times"})})]}),Object(Kr.jsx)(Nc,{fit:!0,className:"bg-muted p-2 rounded chat-messages",children:Object(Kr.jsx)(Nc,{innerRef:g,overflow:"auto",children:Object(Kr.jsx)(Go,{thread:u})})}),Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)("input",{type:"text",className:"form-control form-control-sm",maxLength:255,placeholder:nt("messenger.window.input.default",["FRIEND_NAME"],[u.participant.name]),value:i,onChange:e=>o(e.target.value),onKeyDown:e=>{"Enter"===e.key&&m()}}),Object(Kr.jsx)(tc,{variant:"success",onClick:m,children:nt("widgets.chatinput.say")})]})]})})]})})]}):null},Vo=e=>{const{settings:t=null,onlineFriends:s=[]}=es();return t?Object(Kr.jsxs)(Kr.Fragment,{children:[Object(bc.createPortal)(Object(Kr.jsx)(wo,{onlineFriends:s}),document.getElementById("toolbar-friend-bar-container")),Object(Kr.jsx)(Ho,{}),Object(Kr.jsx)(Wo,{})]}):null},qo=(e,t)=>e.id<t.id?-1:e.id>t.id?1:0,Yo=Object(c.createContext)({groupCustomize:null,setGroupCustomize:null}),zo=e=>Object(Kr.jsx)(Yo.Provider,{value:e.value,children:e.children}),Ko=()=>Object(c.useContext)(Yo);class Qo{constructor(e,t,s,n){this.type=void 0,this.key=void 0,this.color=void 0,this.position=void 0,this.type=e,this.key=t||0,this.color=s||0,this.position=n||4}get code(){return 0===this.key?null:Qo.getCode(this.type,this.key,this.color,this.position)}static getCode(e,t,s,n){return e+(t<10?"0":"")+t+(s<10?"0":"")+s+n}}Qo.BASE="b",Qo.SYMBOL="s";const $o=[0,1,2,3,4,5,6,7,8],Xo=e=>{const{badgeParts:t=[],setBadgeParts:s=null}=e,[n,r]=Object(c.useState)(-1),{groupCustomize:i=null}=Ko(),a=(e,n,c)=>{const i=[...t];i[e][n]=c,s(i),"key"===n&&r(-1)};return t&&t.length?Object(Kr.jsxs)(Kr.Fragment,{children:[n<0&&t&&t.length>0&&t.map(((e,s)=>Object(Kr.jsxs)(ec,{alignItems:"center",justifyContent:"between",gap:2,className:"bg-muted rounded-box px-2 py-1",children:[Object(Kr.jsxs)(ec,{pointer:!0,center:!0,className:"bg-muted rounded-box p-1",onClick:e=>r(s),children:[t[s].code&&t[s].code.length>0&&Object(Kr.jsx)(xc,{badgeCode:t[s].code,isGroup:!0}),(!t[s].code||!t[s].code.length)&&Object(Kr.jsx)(ec,{center:!0,className:"badge-image group-badge",children:Object(Kr.jsx)(ic.a,{icon:"plus"})})]}),e.type!==Qo.BASE&&Object(Kr.jsx)(Jr,{gap:1,columnCount:3,children:$o.map(((e,n)=>Object(Kr.jsx)(Qr,{pointer:!0,className:"group-badge-position-swatch "+(t[s].position===e?"active":""),onClick:t=>a(s,"position",e)},n)))}),Object(Kr.jsx)(Jr,{gap:1,columnCount:8,children:i.badgePartColors.length>0&&i.badgePartColors.map(((e,n)=>Object(Kr.jsx)(Qr,{pointer:!0,className:"group-badge-color-swatch "+(t[s].color===n+1?"active":""),style:{backgroundColor:"#"+e.color},onClick:e=>a(s,"color",n+1)},n)))})]},s))),n>=0&&Object(Kr.jsxs)(Jr,{gap:1,columnCount:5,children:[t[n].type===Qo.SYMBOL&&Object(Kr.jsx)(Nc,{pointer:!0,center:!0,className:"bg-muted rounded-box p-1",onClick:e=>a(n,"key",0),children:Object(Kr.jsx)(ec,{center:!0,className:"badge-image group-badge",children:Object(Kr.jsx)(ic.a,{icon:"times"})})}),(t[n].type===Qo.BASE?i.badgeBases:i.badgeSymbols).map(((e,s)=>Object(Kr.jsx)(Nc,{pointer:!0,center:!0,className:"bg-muted rounded-box p-1",onClick:t=>a(n,"key",e.id),children:Object(Kr.jsx)(xc,{badgeCode:Qo.getCode(t[n].type,e.id,t[n].color,4),isGroup:!0})},s)))]})]}):null},Jo=e=>{const{groupData:t=null,setGroupData:s=null,setCloseAction:n=null,skipDefault:r=null}=e,[i,o]=Object(c.useState)(null),{groupCustomize:l=null}=Ko(),u=Object(c.useCallback)((()=>{if(!t||!i||!i.length)return!1;if(t.groupBadgeParts===i)return!0;if(t.groupId<=0)return s((e=>{const t={...e};return t.groupBadgeParts=i,t})),!0;const e=[];return i.forEach((t=>{t.code&&(e.push(t.key),e.push(t.color),e.push(t.position))})),$n(new a.dd(t.groupId,e)),!0}),[t,i,s]);return Object(c.useEffect)((()=>{if(t.groupBadgeParts)return;const e=[new Qo(Qo.BASE,l.badgeBases[0].id,l.badgePartColors[0].id),new Qo(Qo.SYMBOL,0,l.badgePartColors[0].id),new Qo(Qo.SYMBOL,0,l.badgePartColors[0].id),new Qo(Qo.SYMBOL,0,l.badgePartColors[0].id),new Qo(Qo.SYMBOL,0,l.badgePartColors[0].id)];s((t=>({...t,groupBadgeParts:e})))}),[t.groupBadgeParts,l,s]),Object(c.useEffect)((()=>{t.groupId<=0?o(t.groupBadgeParts?[...t.groupBadgeParts]:null):o(t.groupBadgeParts)}),[t]),Object(c.useEffect)((()=>(n({action:u}),()=>n(null))),[n,u]),Object(Kr.jsxs)(Jr,{overflow:"hidden",gap:2,children:[Object(Kr.jsx)(Nc,{size:2,children:Object(Kr.jsx)(ec,{center:!0,className:"rounded-box p-1",children:Object(Kr.jsx)(xc,{badgeCode:(()=>{if(!i||!i.length)return"";let e="";return i.forEach((t=>t.code&&(e+=t.code))),e})(),isGroup:!0})})}),Object(Kr.jsx)(Nc,{size:10,overflow:"auto",children:Object(Kr.jsx)(Xo,{badgeParts:i,setBadgeParts:o})})]})},Zo=e=>{const{groupData:t=null,setGroupData:s=null,setCloseAction:n=null}=e,[r,i]=Object(c.useState)(null),{groupCustomize:o=null}=Ko(),l=e=>0===e?o.groupColorsA.find((t=>t.id===r[e])).color:o.groupColorsB.find((t=>t.id===r[e])).color,u=(e,t)=>{i((s=>{const n=[...s];return n[e]=t,n}))},d=Object(c.useCallback)((()=>!!(t&&r&&r.length)&&(t.groupColors===r||(t.groupId<=0?(s((e=>{const t={...e};return t.groupColors=[...r],t})),!0):($n(new a.ed(t.groupId,r[0],r[1])),!0)))),[t,r,s]);return Object(c.useEffect)((()=>{if(!o.groupColorsA||!o.groupColorsB||t.groupColors)return;const e=[o.groupColorsA[0].id,o.groupColorsB[0].id];s((t=>({...t,groupColors:e})))}),[o,t.groupColors,s]),Object(c.useEffect)((()=>{t.groupId<=0?i(t.groupColors?[...t.groupColors]:null):i(t.groupColors)}),[t]),Object(c.useEffect)((()=>(n({action:d}),()=>n(null))),[n,d]),r?Object(Kr.jsxs)(Jr,{overflow:"hidden",children:[Object(Kr.jsxs)(Nc,{size:2,gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("group.edit.color.guild.color")}),t.groupColors&&t.groupColors.length>0&&Object(Kr.jsxs)(ec,{overflow:"hidden",className:"rounded border",children:[Object(Kr.jsx)(Qr,{className:"group-color-swatch",style:{backgroundColor:"#"+l(0)}}),Object(Kr.jsx)(Qr,{className:"group-color-swatch",style:{backgroundColor:"#"+l(1)}})]})]}),Object(Kr.jsxs)(Nc,{size:5,gap:1,overflow:"hidden",children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("group.edit.color.primary.color")}),Object(Kr.jsx)(Zr,{gap:1,columnCount:7,columnMinWidth:16,columnMinHeight:16,children:t.groupColors&&o.groupColorsA&&o.groupColorsA.map(((e,s)=>Object(Kr.jsx)("div",{className:"group-badge-color-swatch cursor-pointer"+$i()({" active":t.groupColors[0]===e.id}),style:{backgroundColor:"#"+e.color},onClick:()=>u(0,e.id)},s)))})]}),Object(Kr.jsxs)(Nc,{size:5,gap:1,overflow:"hidden",children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("group.edit.color.secondary.color")}),Object(Kr.jsx)(Zr,{gap:1,columnCount:7,columnMinWidth:16,columnMinHeight:16,children:t.groupColors&&o.groupColorsB&&o.groupColorsB.map(((e,s)=>Object(Kr.jsx)("div",{className:"group-badge-color-swatch cursor-pointer"+$i()({" active":t.groupColors[1]===e.id}),style:{backgroundColor:"#"+e.color},onClick:()=>u(1,e.id)},s)))})]})]}):null},el=e=>{const{groupData:t=null,setGroupData:s=null,purchaseCost:n=0}=e,{groupCustomize:r=null}=Ko(),c=e=>0===e?r.groupColorsA.find((s=>s.id===t.groupColors[e])).color:r.groupColorsB.find((s=>s.id===t.groupColors[e])).color;return t?Object(Kr.jsxs)(Jr,{overflow:"hidden",gap:3,children:[Object(Kr.jsxs)(Nc,{size:3,children:[Object(Kr.jsxs)(Nc,{center:!0,className:"rounded-box p-1",gap:2,children:[Object(Kr.jsx)(Zc,{bold:!0,center:!0,children:nt("group.create.confirm.guildbadge")}),Object(Kr.jsx)(xc,{badgeCode:(()=>{if(!t||!t.groupBadgeParts||!t.groupBadgeParts.length)return"";let e="";return t.groupBadgeParts.forEach((t=>t.code&&(e+=t.code))),e})(),isGroup:!0})]}),Object(Kr.jsxs)(Nc,{center:!0,className:"rounded-box p-1",gap:2,children:[Object(Kr.jsx)(Zc,{bold:!0,center:!0,children:nt("group.edit.color.guild.color")}),Object(Kr.jsxs)(ec,{overflow:"hidden",className:"rounded border",children:[Object(Kr.jsx)(Qr,{className:"group-color-swatch",style:{backgroundColor:"#"+c(0)}}),Object(Kr.jsx)(Qr,{className:"group-color-swatch",style:{backgroundColor:"#"+c(1)}})]})]})]}),Object(Kr.jsxs)(Nc,{size:9,justifyContent:"between",children:[Object(Kr.jsxs)(Nc,{children:[Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:t.groupName}),Object(Kr.jsx)(Zc,{children:t.groupDescription})]}),Object(Kr.jsx)(Zc,{overflow:"auto",children:nt("group.create.confirm.info")})]}),Object(Kr.jsx)(Zc,{center:!0,variant:"white",className:"bg-primary rounded-box p-1",children:nt("group.create.confirm.buyinfo",["amount"],[n.toString()])})]})]}):null},tl=e=>{const{groupData:t=null,setGroupData:s=null,setCloseAction:n=null,close:r=null,isCreator:i=!1,availableRooms:o=[]}=e,[l,u]=Object(c.useState)(""),[d,h]=Object(c.useState)(""),[j,b]=Object(c.useState)(-1),g=Object(c.useCallback)((()=>!!(t&&l&&l.length)&&(l===t.groupName&&d===t.groupDescription||(t.groupId<=0?!(j<=0)&&(s((e=>{const t={...e};return t.groupName=l,t.groupDescription=d,t.groupHomeroomId=j,t})),!0):($n(new a.fd(t.groupId,l,d||"")),!0)))),[t,l,d,j,s]);return Object(c.useEffect)((()=>{u(t.groupName||""),h(t.groupDescription||""),b(t.groupHomeroomId)}),[t]),Object(c.useEffect)((()=>(n({action:g}),()=>n(null))),[n,g]),t?Object(Kr.jsxs)(Nc,{justifyContent:"between",overflow:"auto",children:[Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)(Zc,{center:!0,className:"col-3",children:nt("group.edit.name")}),Object(Kr.jsx)("input",{type:"text",className:"form-control form-control-sm",value:l,maxLength:29,onChange:e=>u(e.target.value)})]}),Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)(Zc,{center:!0,className:"col-3",children:nt("group.edit.desc")}),Object(Kr.jsx)("textarea",{className:"form-control form-control-sm",value:d,maxLength:254,onChange:e=>h(e.target.value)})]}),i&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)(Zc,{center:!0,className:"col-3",children:nt("group.edit.base")}),Object(Kr.jsx)(Nc,{fullWidth:!0,gap:1,children:Object(Kr.jsxs)("select",{className:"form-select form-select-sm",value:j,onChange:e=>b(parseInt(e.target.value)),children:[Object(Kr.jsx)("option",{value:-1,disabled:!0,children:nt("group.edit.base.select.room")}),o&&o.map(((e,t)=>Object(Kr.jsx)("option",{value:e.id,children:e.name},t)))]})})]}),Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)(Qr,{className:"col-3",children:"\xa0"}),Object(Kr.jsx)(Zc,{small:!0,children:nt("group.edit.base.warning")})]})]})]}),!i&&Object(Kr.jsx)(tc,{variant:"danger",onClick:()=>{!t||t.groupId<=0||Pr.confirm(nt("group.deleteconfirm.desc"),(()=>{$n(new a.Qc(t.groupId)),r&&r()}),null,null,null,nt("group.deleteconfirm.title"))},children:nt("group.delete")}),i&&Object(Kr.jsx)(Zc,{underline:!0,center:!0,fullWidth:!0,pointer:!0,onClick:e=>y("navigator/create"),children:nt("group.createroom")})]}):null},sl=[1,2,3,4],nl=e=>{const{onClose:t=null}=e,[s,n]=Object(c.useState)(1),[r,i]=Object(c.useState)(null),[o,l]=Object(c.useState)(null),[u,d]=Object(c.useState)(null),[h,j]=Object(c.useState)(0),b=Object(c.useCallback)((e=>{const t=e.getParser(),s=[];t.availableRooms.forEach(((e,t)=>s.push({id:t,name:e}))),d(s),j(t.groupCost)}),[]);return it(a.Nc,b),Object(c.useEffect)((()=>{n(1),l({groupId:-1,groupName:null,groupDescription:null,groupHomeroomId:-1,groupState:1,groupCanMembersDecorate:!0,groupColors:null,groupBadgeParts:null}),$n(new a.Mc)}),[l]),o?Object(Kr.jsxs)(_c,{className:"nitro-group-creator",theme:"primary-slim",children:[Object(Kr.jsx)(hc,{headerText:nt("group.create.title"),onCloseClick:()=>{i(null),l(null),t&&t()}}),Object(Kr.jsxs)(lc,{children:[Object(Kr.jsx)(ec,{center:!0,className:"creator-tabs",children:sl.map(((e,t)=>Object(Kr.jsx)(ec,{center:!0,className:`tab tab-${1===e?"blue-flat":4===e?"yellow":"blue-arrow"} ${s===e?"active":""}`,children:Object(Kr.jsx)(Zc,{variant:"white",children:nt(`group.create.steplabel.${e}`)})},t)))}),Object(Kr.jsxs)(Nc,{overflow:"hidden",children:[Object(Kr.jsxs)(ec,{alignItems:"center",gap:2,children:[Object(Kr.jsx)(Qr,{className:`nitro-group-tab-image tab-${s}`}),Object(Kr.jsxs)(Nc,{grow:!0,gap:0,children:[Object(Kr.jsx)(Zc,{bold:!0,fontSize:4,children:nt(`group.create.stepcaption.${s}`)}),Object(Kr.jsx)(Zc,{children:nt(`group.create.stepdesc.${s}`)})]})]}),Object(Kr.jsxs)(Nc,{overflow:"hidden",children:[1===s&&Object(Kr.jsx)(tl,{groupData:o,setGroupData:l,setCloseAction:i,close:null,isCreator:!0,availableRooms:u}),2===s&&Object(Kr.jsx)(Jo,{groupData:o,setGroupData:l,setCloseAction:i}),3===s&&Object(Kr.jsx)(Zo,{groupData:o,setGroupData:l,setCloseAction:i}),4===s&&Object(Kr.jsx)(el,{groupData:o,setGroupData:l,purchaseCost:h})]}),Object(Kr.jsxs)(ec,{justifyContent:"between",children:[Object(Kr.jsx)(tc,{variant:"link",className:"text-black",onClick:()=>{r&&r.action&&!r.action()||(1!==s?n((e=>e-1)):t())},children:nt(1===s?"generic.cancel":"group.create.previousstep")}),Object(Kr.jsx)(tc,{disabled:4===s&&!oe(),variant:4===s?oe()?"success":"danger":"primary",onClick:()=>{r&&r.action&&!r.action()||(4!==s?n((e=>4===e?e:e+1)):(()=>{if(!o)return;const e=[];o.groupBadgeParts.forEach((t=>{t.code&&(e.push(t.key),e.push(t.color),e.push(t.position))})),$n(new a.Lc(o.groupName,o.groupDescription,o.groupHomeroomId,o.groupColors[0],o.groupColors[1],e))})())},children:nt(4===s?oe()?"group.create.confirm.buy":"group.create.confirm.viprequired":"group.create.nextstep")})]})]})]})]}):null};class rl{}rl.NOT_MEMBER=0,rl.MEMBER=1,rl.REQUEST_PENDING=2;class cl{}cl.REGULAR=0,cl.EXCLUSIVE=1,cl.PRIVATE=2;const il=["regular","exclusive","private"],al=e=>{const{groupInformation:t=null,onClose:s=null,overflow:n="hidden",...r}=e,i=t&&t.ownerName===ee().userName,o=Object(c.useCallback)((e=>{switch(e){case"members":xr(t.id);break;case"members_pending":xr(t.id,2);break;case"manage":fr(t.id);break;case"homeroom":Ar(t.roomId);break;case"furniture":y("catalog/open/"+f.GUILD_CUSTOM_FURNI);break;case"popular_groups":y("navigator/search/groups")}}),[t]);return t?Object(Kr.jsxs)(Jr,{overflow:n,...r,children:[Object(Kr.jsxs)(Nc,{center:!0,size:3,overflow:"hidden",children:[Object(Kr.jsx)(ec,{alignItems:"center",overflow:"hidden",className:"group-badge",children:Object(Kr.jsx)(xc,{badgeCode:t.badge,isGroup:!0,scale:1.5})}),Object(Kr.jsxs)(Nc,{alignItems:"center",gap:1,children:[Object(Kr.jsx)(Zc,{small:!0,underline:!0,pointer:!0,onClick:()=>o("members"),children:nt("group.membercount",["totalMembers"],[t.membersCount.toString()])}),t.pendingRequestsCount>0&&Object(Kr.jsx)(Zc,{small:!0,underline:!0,pointer:!0,onClick:()=>o("members_pending"),children:nt("group.pendingmembercount",["amount"],[t.pendingRequestsCount.toString()])}),t.isOwner&&Object(Kr.jsx)(Zc,{small:!0,underline:!0,pointer:!0,onClick:()=>o("manage"),children:nt("group.manage")})]}),t.membershipType===rl.NOT_MEMBER||t.membershipType===rl.REQUEST_PENDING?null:i?Object(Kr.jsx)("i",{className:"icon icon-group-owner",title:nt("group.youareowner")}):t.isAdmin?Object(Kr.jsx)("i",{className:"icon icon-group-admin",title:nt("group.youareadmin")}):Object(Kr.jsx)("i",{className:"icon icon-group-member",title:nt("group.youaremember")})]}),Object(Kr.jsxs)(Nc,{size:9,justifyContent:"between",overflow:"auto",children:[Object(Kr.jsxs)(Nc,{overflow:"hidden",children:[Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsxs)(ec,{alignItems:"center",gap:2,children:[Object(Kr.jsx)(Zc,{bold:!0,children:t.title}),Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)("i",{className:"icon icon-group-type-"+t.type,title:nt(`group.edit.settings.type.${il[t.type]}.help`)}),t.canMembersDecorate&&Object(Kr.jsx)("i",{className:"icon icon-group-decorate",title:nt("group.memberscandecorate")})]})]}),Object(Kr.jsx)(Zc,{small:!0,children:nt("group.created",["date","owner"],[t.createdAt,t.ownerName])})]}),Object(Kr.jsx)(Zc,{small:!0,overflow:"auto",className:"group-description",children:t.description})]}),Object(Kr.jsxs)(Nc,{children:[Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{small:!0,underline:!0,pointer:!0,onClick:()=>o("homeroom"),children:nt("group.linktobase")}),Object(Kr.jsx)(Zc,{small:!0,underline:!0,pointer:!0,onClick:()=>o("furniture"),children:nt("group.buyfurni")}),Object(Kr.jsx)(Zc,{small:!0,underline:!0,pointer:!0,onClick:()=>o("popular_groups"),children:nt("group.showgroups")})]}),t.type!==cl.PRIVATE&&Object(Kr.jsx)(tc,{disabled:t.membershipType===rl.REQUEST_PENDING||i,onClick:()=>{t.type===cl.PRIVATE&&t.membershipType===rl.NOT_MEMBER||(t.membershipType!==rl.MEMBER?t&&Ir(t.id):Pr.confirm(nt("group.leaveconfirm.desc"),(()=>{$n(new a.cd(t.id,ee().userId)),s&&s()}),null))},children:nt(i?"group.youareowner":t.type===cl.PRIVATE?"":t.membershipType===rl.MEMBER?"group.leave":t.membershipType===rl.NOT_MEMBER&&t.type===cl.REGULAR?"group.join":t.membershipType===rl.REQUEST_PENDING?"group.membershippending":t.membershipType===rl.NOT_MEMBER&&t.type===cl.EXCLUSIVE?"group.requestmembership":void 0)})]})]})]}):null},ol=e=>{const[t,s]=Object(c.useState)(null),n=Object(c.useCallback)((e=>{const n=e.getParser();(t&&t.id===n.id||n.flag)&&s(n)}),[t]);return it(a.Uc,n),t?Object(Kr.jsxs)(_c,{className:"nitro-group-information-standalone",theme:"primary-slim",children:[Object(Kr.jsx)(hc,{headerText:nt("group.window.title"),onCloseClick:e=>s(null)}),Object(Kr.jsx)(lc,{children:Object(Kr.jsx)(al,{groupInformation:t,onClose:()=>s(null)})})]}):null},ll=["regular","exclusive","private"],ul=e=>{const{groupData:t=null,setGroupData:s=null,setCloseAction:n=null}=e,[r,i]=Object(c.useState)(t.groupState),[o,l]=Object(c.useState)(t.groupCanMembersDecorate),u=Object(c.useCallback)((()=>!!t&&(r===t.groupState&&o===t.groupCanMembersDecorate||(t.groupId<=0?(s((e=>{const t={...e};return t.groupState=r,t.groupCanMembersDecorate=o,t})),!0):($n(new a.gd(t.groupId,r,o?0:1)),!0)))),[t,r,o,s]);return Object(c.useEffect)((()=>{i(t.groupState),l(t.groupCanMembersDecorate)}),[t]),Object(c.useEffect)((()=>(n({action:u}),()=>n(null))),[n,u]),Object(Kr.jsxs)(Nc,{overflow:"auto",children:[Object(Kr.jsx)(Nc,{children:ll.map(((e,t)=>Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)("input",{className:"form-check-input",type:"radio",name:"groupState",checked:r===t,onChange:e=>i(t)}),Object(Kr.jsxs)(Nc,{gap:0,children:[Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)("i",{className:`icon icon-group-type-${t}`}),Object(Kr.jsx)(Zc,{bold:!0,children:nt(`group.edit.settings.type.${e}.label`)})]}),Object(Kr.jsx)(Zc,{children:nt(`group.edit.settings.type.${e}.help`)})]})]},t)))}),Object(Kr.jsx)(Jc,{}),Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)("input",{className:"form-check-input",type:"checkbox",checked:o,onChange:e=>l((e=>!e))}),Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("group.edit.settings.rights.caption")}),Object(Kr.jsx)(Zc,{children:nt("group.edit.settings.rights.members.help")})]})]})]})},dl=[1,2,3,5],hl=e=>{const[t,s]=Object(c.useState)(1),[n,r]=Object(c.useState)(null),[i,o]=Object(c.useState)(null),l=()=>{r((e=>(e&&e.action&&e.action(),null))),o(null)},u=Object(c.useCallback)((e=>{const t=e.getParser();i&&i.groupId===t.id&&o((e=>{const s={...e};return s.groupName=t.title,s.groupDescription=t.description,s.groupState=t.type,s.groupCanMembersDecorate=t.canMembersDecorate,s}))}),[i]);it(a.Uc,u);const d=Object(c.useCallback)((e=>{const t=e.getParser(),s=[];t.badgeParts.forEach(((e,t)=>{s.push(new a.Ic(e.isBase?a.Ic.BASE:a.Ic.SYMBOL,e.key,e.color,e.position))})),o({groupId:t.id,groupName:t.title,groupDescription:t.description,groupHomeroomId:t.roomId,groupState:t.state,groupCanMembersDecorate:t.canMembersDecorate,groupColors:[t.colorA,t.colorB],groupBadgeParts:s})}),[o]);return it(a.id,d),!i||i.groupId<=0?null:Object(Kr.jsxs)(_c,{className:"nitro-group-manager",children:[Object(Kr.jsx)(hc,{headerText:nt("group.window.title"),onCloseClick:l}),Object(Kr.jsx)($c,{children:dl.map((e=>Object(Kr.jsx)(Qc,{isActive:t===e,onClick:()=>(e=>{n&&n.action&&n.action(),s(e)})(e),children:nt(`group.edit.tab.${e}`)},e)))}),Object(Kr.jsxs)(lc,{children:[Object(Kr.jsxs)(ec,{alignItems:"center",gap:2,children:[Object(Kr.jsx)(Qr,{className:`nitro-group-tab-image tab-${t}`}),Object(Kr.jsxs)(Nc,{grow:!0,gap:0,children:[Object(Kr.jsx)(Zc,{bold:!0,fontSize:4,children:nt(`group.edit.tabcaption.${t}`)}),Object(Kr.jsx)(Zc,{children:nt(`group.edit.tabdesc.${t}`)})]})]}),Object(Kr.jsxs)(Nc,{grow:!0,overflow:"hidden",children:[1===t&&Object(Kr.jsx)(tl,{groupData:i,setGroupData:o,setCloseAction:r,close:l}),2===t&&Object(Kr.jsx)(Jo,{groupData:i,setGroupData:o,setCloseAction:r,skipDefault:!0}),3===t&&Object(Kr.jsx)(Zo,{groupData:i,setGroupData:o,setCloseAction:r}),5===t&&Object(Kr.jsx)(ul,{groupData:i,setGroupData:o,setCloseAction:r})]})]})]})},jl=e=>{const[t,s]=Object(c.useState)(-1),[n,r]=Object(c.useState)(-1),[i,o]=Object(c.useState)(null),[l,u]=Object(c.useState)(-1),[d,h]=Object(c.useState)(0),[j,b]=Object(c.useState)(""),[g,O]=Object(c.useState)(null),m=e=>{if(e.rank===a.bd.OWNER)return"group.members.owner";if(i.admin){if(e.rank===a.bd.ADMIN)return"group.members.removerights";if(e.rank===a.bd.MEMBER)return"group.members.giverights"}return""},p=Object(c.useCallback)((()=>{-1!==t&&-1!==n&&-1!==l&&$n(new a.Wc(t,l,j,n))}),[t,n,l,j]),_=Object(c.useCallback)((e=>{const t=e.getParser();o(t),r(t.level),h(Math.ceil(t.totalMembersCount/t.pageSize))}),[]);it(a.Xc,_);const E=Object(c.useCallback)((e=>{const t=e.getParser();Pr.confirm(nt(t.furnitureCount>0?"group.kickconfirm.desc":"group.kickconfirm_nofurni.desc",["user","amount"],[g,t.furnitureCount.toString()]),(()=>{$n(new a.cd(i.groupId,t.userId)),p()}),null),O(null)}),[i,g,p]);it(a.Oc,E);const f=Object(c.useCallback)((e=>{const t=e.split("/");if(t.length<2)return;const n=parseInt(t[1])||-1,c=parseInt(t[2])||3;s(n),r(c)}),[]);return Object(c.useEffect)((()=>{const e={linkReceived:f,eventUrlPrefix:"group-members/"};return S(e),()=>M(e)}),[f]),Object(c.useEffect)((()=>{u(0)}),[t,n,j]),Object(c.useEffect)((()=>{-1!==t&&-1!==n&&-1!==l&&$n(new a.Wc(t,l,j,n))}),[t,n,l,j]),Object(c.useEffect)((()=>{-1!==t&&(r(-1),o(null),h(0),b(""),O(null))}),[t]),-1!==t&&i?Object(Kr.jsxs)(_c,{className:"nitro-group-members",theme:"primary-slim",children:[Object(Kr.jsx)(hc,{headerText:nt("group.members.title",["groupName"],[i?i.groupTitle:""]),onCloseClick:e=>s(-1)}),Object(Kr.jsxs)(lc,{overflow:"hidden",children:[Object(Kr.jsxs)(ec,{gap:2,children:[Object(Kr.jsx)(ec,{center:!0,className:"group-badge",children:Object(Kr.jsx)(xc,{badgeCode:i.badge,isGroup:!0,className:"mx-auto d-block"})}),Object(Kr.jsxs)(Nc,{fullWidth:!0,gap:1,children:[Object(Kr.jsx)("input",{type:"text",className:"form-control form-control-sm w-100",placeholder:nt("group.members.searchinfo"),value:j,onChange:e=>b(e.target.value)}),Object(Kr.jsxs)("select",{className:"form-select form-select-sm w-100",value:n,onChange:e=>r(parseInt(e.target.value)),children:[Object(Kr.jsx)("option",{value:"0",children:nt("group.members.search.all")}),Object(Kr.jsx)("option",{value:"1",children:nt("group.members.search.admins")}),Object(Kr.jsx)("option",{value:"2",children:nt("group.members.search.pending")})]})]})]}),Object(Kr.jsx)(Jr,{columnCount:2,overflow:"auto",className:"nitro-group-members-list-grid",children:i.result.map(((e,t)=>Object(Kr.jsxs)(ec,{gap:2,alignItems:"center",overflow:"hidden",className:"member-list-item bg-white p-2",children:[Object(Kr.jsx)("div",{className:"avatar-head cursor-pointer",onClick:()=>Lr(e.id),children:Object(Kr.jsx)(Ec,{figure:e.figure,headOnly:!0,direction:2})}),Object(Kr.jsxs)(Nc,{grow:!0,gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,small:!0,pointer:!0,onClick:t=>Lr(e.id),children:e.name}),e.rank!==a.bd.REQUESTED&&Object(Kr.jsx)(Zc,{small:!0,italics:!0,variant:"muted",children:nt("group.members.since",["date"],[e.joinedAt])})]}),Object(Kr.jsxs)(Nc,{gap:1,children:[e.rank!==a.bd.REQUESTED&&Object(Kr.jsx)(ec,{center:!0,children:Object(Kr.jsx)(Qr,{pointer:i.admin,className:"icon icon-group-small-"+(e.rank===a.bd.OWNER?"owner":e.rank===a.bd.ADMIN?"admin":i.admin&&e.rank===a.bd.MEMBER?"not-admin":""),title:nt(m(e)),onClick:t=>(e=>{i.admin&&e.rank!==a.bd.OWNER&&(e.rank!==a.bd.ADMIN?$n(new a.Gc(i.groupId,e.id)):$n(new a.Hc(i.groupId,e.id)),p())})(e)})}),i.admin&&e.rank===a.bd.REQUESTED&&Object(Kr.jsx)(ec,{alignItems:"center",children:Object(Kr.jsx)(Qr,{pointer:!0,className:"nitro-friends-spritesheet icon-accept",title:nt("group.members.accept"),onClick:t=>(e=>{i.admin&&e.rank===a.bd.REQUESTED&&($n(new a.Yc(i.groupId,e.id)),p())})(e)})}),i.admin&&e.rank!==a.bd.OWNER&&e.id!==ee().userId&&Object(Kr.jsx)(ec,{alignItems:"center",children:Object(Kr.jsx)(Qr,{pointer:!0,className:"nitro-friends-spritesheet icon-deny",title:nt(e.rank===a.bd.REQUESTED?"group.members.reject":"group.members.kick"),onClick:t=>(e=>{if(i.admin){if(e.rank===a.bd.REQUESTED)return $n(new a.Zc(i.groupId,e.id)),void p();O(e.name),$n(new a.Pc(i.groupId,e.id))}})(e)})})]})]},t)))}),Object(Kr.jsxs)(ec,{gap:1,justifyContent:"between",alignItems:"center",children:[Object(Kr.jsx)(tc,{disabled:0===i.pageIndex,onClick:e=>u((e=>e-1)),children:Object(Kr.jsx)(ic.a,{icon:"chevron-left"})}),Object(Kr.jsx)(Zc,{small:!0,children:nt("group.members.pageinfo",["amount","page","totalPages"],[i.totalMembersCount.toString(),(i.pageIndex+1).toString(),d.toString()])}),Object(Kr.jsx)(tc,{disabled:i.pageIndex===d-1,onClick:e=>u((e=>e+1)),children:Object(Kr.jsx)(ic.a,{icon:"chevron-right"})})]})]})]}):null},bl=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(null),i=Object(c.useCallback)((e=>{const t=e.getParser();s(!1),Ar(t.roomId)}),[]);it(a.ad,i);const o=Object(c.useCallback)((e=>{const t=e.getParser(),s={badgeBases:[],badgeSymbols:[],badgePartColors:[],groupColorsA:[],groupColorsB:[]};t.bases.forEach(((e,t)=>s.badgeBases.push({id:t,images:e}))),t.symbols.forEach(((e,t)=>s.badgeSymbols.push({id:t,images:e}))),t.partColors.forEach(((e,t)=>s.badgePartColors.push({id:t,color:e}))),t.colorsA.forEach(((e,t)=>s.groupColorsA.push({id:t,color:e}))),t.colorsB.forEach(((e,t)=>s.groupColorsB.push({id:t,color:e}))),s.badgeBases.sort(qo),s.badgeSymbols.sort(qo),s.badgePartColors.sort(qo),s.groupColorsA.sort(qo),s.groupColorsB.sort(qo),r(s)}),[r]);it(a.Kc,o);const l=Object(c.useCallback)((e=>{const t=e.split("/");if(!(t.length<2))switch(t[1]){case"create":return void s(!0);case"manage":if(!t[2])return;return s(!1),void $n(new a.hd(Number(t[2])))}}),[]);return Object(c.useEffect)((()=>{const e={linkReceived:l,eventUrlPrefix:"groups/"};return S(e),()=>M(e)}),[l]),Object(c.useEffect)((()=>{$n(new a.Jc)}),[]),Object(Kr.jsxs)(zo,{value:{groupCustomize:n,setGroupCustomize:r},children:[t&&Object(Kr.jsx)(nl,{onClose:()=>s(!1)}),!t&&Object(Kr.jsx)(hl,{}),Object(Kr.jsx)(jl,{}),Object(Kr.jsx)(ol,{})]})};class gl{}gl.NONE="NONE",gl.ERROR="ERROR",gl.REJECTED="REJECTED",gl.USER_CREATE="USER_CREATE",gl.USER_PENDING="USER_PENDING",gl.USER_ONGOING="USER_ONGOING",gl.USER_FEEDBACK="USER_FEEDBACK",gl.USER_THANKS="USER_THANKS",gl.USER_GUIDE_DISCONNECTED="USER_GUIDE_DISCONNECTED",gl.GUIDE_TOOL_MENU="GUIDE_TOOL_MENU",gl.GUIDE_ACCEPT="GUIDE_ACCEPT",gl.GUIDE_ONGOING="GUIDE_ONGOING",gl.GUIDE_CLOSED="GUIDE_CLOSED",gl.GUARDIAN_CHAT_REVIEW_ACCEPT="GUARDIAN_CHAT_REVIEW_ACCEPT",gl.GUARDIAN_CHAT_REVIEW_WAIT_FOR_VOTERS="GUARDIAN_CHAT_REVIEW_WAIT_FOR_VOTERS",gl.GUARDIAN_CHAT_REVIEW_VOTE="GUARDIAN_CHAT_REVIEW_VOTE",gl.GUARDIAN_CHAT_REVIEW_WAIT_FOR_RESULTS="GUARDIAN_CHAT_REVIEW_WAIT_FOR_RESULTS",gl.GUARDIAN_CHAT_REVIEW_RESULTS="GUARDIAN_CHAT_REVIEW_RESULTS";class Ol{constructor(e,t){this._message=void 0,this._roomId=void 0,this._message=e,this._roomId=t}get message(){return this._message}get roomId(){return this._roomId}}class ml{constructor(e){this._userId=void 0,this._messages=void 0,this._userId=e,this._messages=[]}addChat(e){this._messages.push(e)}get userId(){return this._userId}get messages(){return this._messages}}const pl=e=>{const{helpRequestDescription:t=null,helpRequestAverageTime:s=0}=e,n=e=>$n(new a.rd(e));return Object(Kr.jsxs)(Nc,{children:[Object(Kr.jsxs)(Nc,{gap:0,className:"bg-muted p-2 rounded",children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("guide.help.request.guide.accept.request.title")}),Object(Kr.jsx)(Zc,{variant:"muted",children:nt("guide.help.request.type.1")}),Object(Kr.jsx)(Zc,{wrap:!0,textBreak:!0,children:t})]}),Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(tc,{variant:"success",onClick:e=>n(!0),children:nt("guide.help.request.guide.accept.accept.button")}),Object(Kr.jsx)(tc,{variant:"danger",onClick:e=>n(!1),children:nt("guide.help.request.guide.accept.skip.link")})]})]})},_l=e=>{const{isOnDuty:t=!1,isHandlingGuideRequests:s=!1,setIsHandlingGuideRequests:n=null,isHandlingHelpRequests:r=!1,setIsHandlingHelpRequests:c=null,isHandlingBullyReports:i=!1,setIsHandlingBullyReports:a=null,guidesOnDuty:o=0,helpersOnDuty:l=0,guardiansOnDuty:u=0,processAction:d=null}=e;return Object(Kr.jsxs)(Nc,{children:[Object(Kr.jsxs)(ec,{alignItems:"center",gap:2,className:"bg-muted p-2 rounded",children:[Object(Kr.jsx)(Qr,{className:"duty-switch"+(t?"":" off"),onClick:e=>d("toggle_duty")}),Object(Kr.jsxs)(Nc,{gap:0,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("guide.help.guide.tool.yourstatus")}),Object(Kr.jsx)(Zc,{children:nt("guide.help.guide.tool.duty."+(t?"on":"off"))})]})]}),Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("guide.help.guide.tool.tickettypeselection.caption")}),Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)("input",{className:"form-check-input",disabled:t,type:"checkbox",checked:s,onChange:e=>n(e.target.checked)}),Object(Kr.jsx)(Zc,{children:nt("guide.help.guide.tool.tickettypeselection.guiderequests")})]}),Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)("input",{className:"form-check-input",disabled:t,type:"checkbox",checked:r,onChange:e=>c(e.target.checked)}),Object(Kr.jsx)(Zc,{children:nt("guide.help.guide.tool.tickettypeselection.onlyhelprequests")})]}),Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)("input",{className:"form-check-input",disabled:t,type:"checkbox",checked:i,onChange:e=>a(e.target.checked)}),Object(Kr.jsx)(Zc,{children:nt("guide.help.guide.tool.tickettypeselection.bullyreports")})]})]}),Object(Kr.jsx)("hr",{className:"bg-dark m-0"}),Object(Kr.jsxs)(ec,{center:!0,gap:2,children:[Object(Kr.jsx)(Qr,{className:"info-icon"}),Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Qr,{dangerouslySetInnerHTML:{__html:nt("guide.help.guide.tool.guidesonduty",["amount"],[o.toString()])}}),Object(Kr.jsx)(Qr,{dangerouslySetInnerHTML:{__html:nt("guide.help.guide.tool.helpersonduty",["amount"],[l.toString()])}}),Object(Kr.jsx)(Qr,{dangerouslySetInnerHTML:{__html:nt("guide.help.guide.tool.guardiansonduty",["amount"],[u.toString()])}})]})]}),Object(Kr.jsx)("hr",{className:"bg-dark m-0"}),Object(Kr.jsxs)(ec,{justifyContent:"between",gap:2,children:[Object(Kr.jsx)(tc,{disabled:!0,onClick:e=>d("forum_link"),children:nt("guide.help.guide.tool.forum.link")}),Object(Kr.jsx)(tc,{disabled:!0,children:nt("guide.help.guide.tool.skill.link")})]})]})},El=e=>{const{isGuide:t=!1,userId:s=0,userName:n=null,userFigure:r=null,isTyping:i=!1,messageGroups:o=[]}=e,[l,u]=Object(c.useState)(""),d=Object(c.useCallback)((()=>{$n(new a.qd)}),[]),h=Object(c.useCallback)((()=>{$n(new a.sd)}),[]),j=Object(c.useCallback)((()=>{$n(new a.Ad)}),[]),b=Object(c.useCallback)((e=>{Ar(e.getParser().requesterRoomId)}),[]);it(a.zd,b);const g=Object(c.useCallback)((()=>{l&&l.length&&($n(new a.ud(l)),u(""))}),[l]),O=Object(c.useCallback)((e=>{"Enter"===e.key&&g()}),[g]),m=Object(c.useCallback)((e=>e===ee().userId),[]);return Object(Kr.jsxs)(Nc,{fullHeight:!0,children:[Object(Kr.jsxs)(ec,{alignItems:"center",justifyContent:"between",gap:1,className:"bg-muted p-2 rounded",children:[t&&Object(Kr.jsxs)(sc,{children:[Object(Kr.jsx)(tc,{onClick:d,children:nt("guide.help.request.guide.ongoing.visit.button")}),Object(Kr.jsx)(tc,{disabled:!0,onClick:h,children:nt("guide.help.request.guide.ongoing.invite.button")})]}),!t&&Object(Kr.jsxs)(Nc,{gap:0,children:[Object(Kr.jsx)(Zc,{bold:!0,children:n}),Object(Kr.jsx)(Zc,{children:nt("guide.help.request.user.ongoing.guide.desc")})]}),Object(Kr.jsx)(tc,{variant:"danger",disabled:!0,children:nt("guide.help.common.report.link")})]}),Object(Kr.jsx)(Nc,{overflow:"hidden",gap:1,className:"bg-muted rounded chat-messages p-2",children:Object(Kr.jsx)(Nc,{overflow:"auto",children:o.map(((e,t)=>Object(Kr.jsxs)(ec,{fullWidth:!0,justifyContent:m(e.userId)?"end":"start",gap:2,children:[Object(Kr.jsx)(Qr,{shrink:!0,className:"message-avatar",children:!m(e.userId)&&Object(Kr.jsx)(Ec,{figure:r,direction:2})}),Object(Kr.jsxs)(Qr,{className:"bg-light text-black border-radius mb-2 rounded py-1 px-2 messages-group-"+(m(e.userId)?"right":"left"),children:[Object(Kr.jsxs)(Zc,{bold:!0,children:[m(e.userId)&&ee().userName,!m(e.userId)&&n]}),e.messages.map(((e,t)=>Object(Kr.jsx)(Qr,{className:"text-break",children:e.message},t)))]}),m(e.userId)&&Object(Kr.jsx)(Qr,{className:"message-avatar flex-shrink-0",children:Object(Kr.jsx)(Ec,{figure:ee().figure,direction:4})})]},t)))})}),Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)("input",{type:"text",className:"form-control form-control-sm",placeholder:nt("guide.help.request.guide.ongoing.input.empty",["name"],[n]),value:l,onChange:e=>u(e.target.value),onKeyDown:O}),Object(Kr.jsx)(tc,{variant:"success",onClick:g,children:nt("widgets.chatinput.say")})]}),i&&Object(Kr.jsx)(Zc,{variant:"muted",children:nt("guide.help.common.typing")})]}),Object(Kr.jsx)(tc,{fullWidth:!0,variant:"success",onClick:j,children:nt("guide.help.request."+(t?"guide":"user")+".ongoing.close.link")})]})},fl=e=>{const{userRequest:t="",setUserRequest:s=null}=e,[n,r]=Object(c.useState)(!1);return Object(Kr.jsxs)(Nc,{children:[Object(Kr.jsx)(Zc,{children:nt("guide.help.request.user.create.help")}),Object(Kr.jsx)("textarea",{className:"request-message",maxLength:140,value:t,onChange:e=>s(e.target.value),placeholder:nt("guide.help.request.user.create.input.help")}),Object(Kr.jsx)(tc,{fullWidth:!0,variant:"success",disabled:t.length<15||n,onClick:()=>{r(!0),$n(new a.md(1,t))},children:nt("guide.help.request.user.create.input.button")})]})},xl=e=>{const{userName:t=null}=e,s=Object(c.useCallback)((e=>{$n(new a.pd(e))}),[]);return Object(Kr.jsxs)(Nc,{children:[Object(Kr.jsxs)(ec,{justifyContent:"between",gap:1,className:"bg-muted p-2 rounded",children:[Object(Kr.jsxs)(Nc,{gap:0,children:[Object(Kr.jsx)(Zc,{bold:!0,children:t}),Object(Kr.jsx)(Zc,{children:nt("guide.help.request.user.feedback.guide.desc")})]}),Object(Kr.jsx)(tc,{variant:"danger",disabled:!0,children:nt("guide.help.common.report.link")})]}),Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("guide.help.request.user.feedback.closed.title")}),Object(Kr.jsx)(Zc,{children:nt("guide.help.request.user.feedback.closed.desc")})]}),t&&t.length>0&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)("hr",{className:"bg-dark m-0 mt-auto"}),Object(Kr.jsxs)(Nc,{children:[Object(Kr.jsx)(Zc,{center:!0,bold:!0,children:nt("guide.help.request.user.feedback.question")}),Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)(tc,{fullWidth:!0,variant:"success",onClick:e=>s(!0),children:nt("guide.help.request.user.feedback.positive.button")}),Object(Kr.jsx)(tc,{fullWidth:!0,variant:"danger",onClick:e=>s(!1),children:nt("guide.help.request.user.feedback.negative.button")})]})]})]})]})},Il=e=>{const{helpRequestDescription:t=null,helpRequestAverageTime:s=0}=e;return Object(Kr.jsxs)(Nc,{children:[Object(Kr.jsxs)(Nc,{gap:0,className:"bg-muted rounded p-2",children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("guide.help.request.guide.accept.request.title")}),Object(Kr.jsx)(Zc,{variant:"muted",children:nt("guide.help.request.type.1")}),Object(Kr.jsx)(Zc,{wrap:!0,textBreak:!0,children:t})]}),Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("guide.help.request.user.pending.info.title")}),Object(Kr.jsx)(Zc,{children:nt("guide.help.request.user.pending.info.message")}),Object(Kr.jsx)(Zc,{children:nt("guide.help.request.user.pending.info.waiting",["waitingtime"],[s.toString()])})]}),Object(Kr.jsx)(tc,{variant:"danger",onClick:()=>$n(new a.yd),children:nt("guide.help.request.user.pending.cancel.button")})]})},Tl=e=>Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("guide.help.request.user.thanks.info.title")}),Object(Kr.jsx)(Zc,{children:nt("guide.help.request.user.thanks.info.desc")})]}),Cl=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(nt("guide.help.guide.tool.title")),[i,o]=Object(c.useState)(!1),[l,u]=Object(c.useState)(gl.GUIDE_TOOL_MENU),[d,h]=Object(c.useState)(!1),[j,b]=Object(c.useState)(!1),[g,O]=Object(c.useState)(!1),[m,p]=Object(c.useState)(!1),[_,E]=Object(c.useState)(0),[f,x]=Object(c.useState)(0),[I,T]=Object(c.useState)(0),[C,N]=Object(c.useState)(""),[v,R]=Object(c.useState)(null),[A,y]=Object(c.useState)(0),[w,D]=Object(c.useState)(0),[U,P]=Object(c.useState)(null),[L,F]=Object(c.useState)(null),[H,B]=Object(c.useState)(!1),[G,W]=Object(c.useState)([]),V=Object(c.useCallback)(((e,t)=>{switch(e){case gl.GUIDE_TOOL_MENU:r(nt("guide.help.guide.tool.title")),o(!1);break;case gl.GUIDE_ACCEPT:r(nt("guide.help.request.guide.accept.title")),o(!0);break;case gl.GUIDE_ONGOING:r(nt("guide.help.request.guide.ongoing.title",["name"],[t])),o(!0);break;case gl.USER_CREATE:r(nt("guide.help.request.user.create.title")),o(!1);break;case gl.USER_PENDING:r(nt("guide.help.request.user.pending.title")),o(!0);break;case gl.USER_ONGOING:r(nt("guide.help.request.user.ongoing.title",["name"],[t])),o(!0);break;case gl.USER_FEEDBACK:r(nt("guide.help.request.user.feedback.title")),o(!0);break;case gl.USER_THANKS:r(nt("guide.help.request.user.thanks.title")),o(!1)}u(e),s(!0)}),[]),q=Object(c.useCallback)((e=>{switch(e.type){case pt.SHOW_GUIDE_TOOL:return void s(!0);case pt.HIDE_GUIDE_TOOL:return void s(!1);case pt.TOGGLE_GUIDE_TOOL:return void s((e=>!e));case pt.CREATE_HELP_REQUEST:return void V(gl.USER_CREATE)}}),[V]);qt(pt.SHOW_GUIDE_TOOL,q),qt(pt.HIDE_GUIDE_TOOL,q),qt(pt.TOGGLE_GUIDE_TOOL,q),qt(pt.CREATE_HELP_REQUEST,q);const Y=Object(c.useCallback)((e=>{!e.getParser().isAllowed(a.lf.USE_GUIDE_TOOL)&&d&&(h(!1),$n(new a.wd(!1,!1,!1,!1)))}),[d,h]);it(a.kf,Y);const z=Object(c.useCallback)((e=>{const t=e.getParser();h(t.onDuty),x(t.guidesOnDuty),E(t.helpersOnDuty),T(t.guardiansOnDuty)}),[h,E,x,T]);it(a.kd,z);const K=Object(c.useCallback)((e=>{const t=e.getParser();R(t.helpRequestDescription),y(t.roleSpecificWaitTime),t.asGuide&&d&&V(gl.GUIDE_ACCEPT),t.asGuide||V(gl.USER_PENDING)}),[d,V]);it(a.ld,K);const Q=Object(c.useCallback)((e=>{const t=e.getParser();d?(D(t.requesterUserId),P(t.requesterName),F(t.requesterFigure),V(gl.GUIDE_ONGOING,t.requesterName)):(D(t.guideUserId),P(t.guideName),F(t.guideFigure),V(gl.USER_ONGOING,t.guideName))}),[d,V]);it(a.Bd,Q);const $=Object(c.useCallback)((e=>{const t=e.getParser();B(t.isTyping)}),[]);it(a.xd,$);const X=Object(c.useCallback)((e=>{const t=e.getParser(),s=[...G];let n=s[s.length-1];n&&n.userId===t.senderId||(n=new ml(t.senderId),s.push(n)),n.addChat(new Ol(t.chatMessage)),W(s)}),[G]);it(a.vd,X);const J=Object(c.useCallback)((e=>{const t=e.getParser(),s=[...G];let n=s[s.length-1];const r=d?ee().userId:w;n&&n.userId===r||(n=new ml(r),s.push(n)),n.addChat(new Ol(t.roomName,t.roomId)),W(s)}),[d,G,w]);it(a.td,J);const Z=Object(c.useCallback)((e=>{d?(D(0),P(null),F(null),B(!1),W([]),V(gl.GUIDE_TOOL_MENU)):V(gl.USER_FEEDBACK)}),[d,V]);it(a.od,Z);const te=Object(c.useCallback)((e=>{D(0),P(null),F(null),B(!1),W([]),V(d?gl.GUIDE_TOOL_MENU:gl.USER_THANKS)}),[d,V]);it(a.nd,te);const se=Object(c.useCallback)((e=>{const t=e.split("/");t.length<2||t[1]}),[]);Object(c.useEffect)((()=>{const e={linkReceived:se,eventUrlPrefix:"help/"};return S(e),()=>M(e)}),[se]);const ne=Object(c.useCallback)((e=>{switch(e){case"close":return s(!1),N(""),void u(gl.GUIDE_TOOL_MENU);case"toggle_duty":return j||g||m?void h((e=>($n(new a.wd(!e,!e&&g,!e&&m,!e&&j)),!e))):void Vt(new vt([nt("guide.help.guide.tool.noqueueselected.message")],null,null,null,nt("guide.help.guide.tool.noqueueselected.caption"),null));case"forum_link":const e=k("group.homepage.url","").replace("%groupid%",k("guide.help.alpha.groupid","0"));return void window.open(e)}}),[j,g,m]);return t?Object(Kr.jsxs)(_c,{className:"nitro-guide-tool",theme:"primary-slim",children:[Object(Kr.jsx)(hc,{headerText:n,onCloseClick:e=>ne("close"),noCloseButton:i}),Object(Kr.jsxs)(lc,{className:"text-black",children:[l===gl.GUIDE_TOOL_MENU&&Object(Kr.jsx)(_l,{isOnDuty:d,isHandlingGuideRequests:g,setIsHandlingGuideRequests:O,isHandlingHelpRequests:m,setIsHandlingHelpRequests:p,isHandlingBullyReports:j,setIsHandlingBullyReports:b,guidesOnDuty:f,helpersOnDuty:_,guardiansOnDuty:I,processAction:ne}),l===gl.GUIDE_ACCEPT&&Object(Kr.jsx)(pl,{helpRequestDescription:v,helpRequestAverageTime:A}),[gl.GUIDE_ONGOING,gl.USER_ONGOING].includes(l)&&Object(Kr.jsx)(El,{isGuide:d,userId:w,userName:U,userFigure:L,isTyping:H,messageGroups:G}),l===gl.USER_CREATE&&Object(Kr.jsx)(fl,{userRequest:C,setUserRequest:N}),l===gl.USER_PENDING&&Object(Kr.jsx)(Il,{helpRequestDescription:v,helpRequestAverageTime:A}),l===gl.USER_FEEDBACK&&Object(Kr.jsx)(xl,{userName:U}),l===gl.USER_THANKS&&Object(Kr.jsx)(Tl,{})]})]}):null};var Sl=s(91),Nl=s(144);const vl=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(null),[i,o]=Object(c.useState)(0),[l,u]=Object(c.useState)(null),{userFigure:d=null}=Ts(),{purse:h=null,clubStatus:j=null}=fs(),{badgeCodes:b=[],activate:g=null,deactivate:O=null}=as(),m=()=>nt("hccenter.special.sum",["credits"],[(n.creditRewardForStreakBonus+n.creditRewardForMonthlySpent).toString()]),p=Object(c.useCallback)((e=>{const t=e.getParser();o(t.giftsAvailable)}),[]);it(a.gb,p);const _=Object(c.useCallback)((e=>{const t=e.getParser();r(t.data)}),[]);if(it(a.Gh,_),Object(c.useEffect)((()=>{const e={linkReceived:e=>{const t=e.split("/");if(!(t.length<2))if("open"!==t[1]);else if(t.length>2&&"hccenter"===t[2])s(!0)},eventUrlPrefix:"habboUI/"};return S(e),()=>M(e)}),[]),Object(c.useEffect)((()=>{u((e=>{let t=null;return Cr.forEach((s=>e.indexOf(s)>-1&&(t=s))),t||"HC1"})(b))}),[b]),Object(c.useEffect)((()=>{if(!t)return;const e=g();return()=>O(e)}),[t,g,O]),Object(c.useEffect)((()=>{$n(new a.ic),$n(new a.Fh)}),[]),!t)return null;const E=Object(Kr.jsx)(Sl.a,{id:"popover-basic",className:"rounded",children:Object(Kr.jsxs)(Sl.a.Body,{className:"text-black py-2 px-3",children:[Object(Kr.jsx)("h5",{children:nt("hccenter.breakdown.title")}),Object(Kr.jsx)("div",{children:nt("hccenter.breakdown.creditsspent",["credits"],[n.totalCreditsSpent.toString()])}),Object(Kr.jsx)("div",{children:nt("hccenter.breakdown.paydayfactor.percent",["percent"],[(100*n.kickbackPercentage).toString()])}),Object(Kr.jsx)("div",{children:nt("hccenter.breakdown.streakbonus",["credits"],[n.creditRewardForStreakBonus.toString()])}),Object(Kr.jsx)("hr",{className:"w-100 text-black my-1"}),Object(Kr.jsx)("div",{children:nt("hccenter.breakdown.total",["credits","actual"],[m(),(100*(n.kickbackPercentage*n.totalCreditsSpent+n.creditRewardForStreakBonus)/100).toString()])}),Object(Kr.jsx)("div",{className:"btn btn-link text-primary p-0",onClick:()=>y("habbopages/"+k("hc.center")["payday.habbopage"]),children:nt("hccenter.special.infolink")})]})});return Object(Kr.jsxs)(_c,{theme:"primary-slim",className:"nitro-hc-center",children:[Object(Kr.jsx)(hc,{headerText:nt("generic.hccenter"),onCloseClick:()=>s(!1)}),Object(Kr.jsxs)(ec,{position:"relative",className:"bg-muted p-2 rounded mt-2",children:[Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)("div",{className:"hc-logo"}),Object(Kr.jsx)(ec,{children:Object(Kr.jsx)(tc,{variant:"success",onClick:e=>y("catalog/open/"+k("catalog.links")["hc.buy_hc"]),children:nt(j===Tr.ACTIVE?"hccenter.btn.extend":"hccenter.btn.buy")})})]}),Object(Kr.jsx)(Qr,{position:"absolute",className:"end-0 p-4 top-0 habbo-avatar",children:Object(Kr.jsx)(Ec,{figure:d,direction:4,scale:2})})]}),Object(Kr.jsxs)(lc,{children:[Object(Kr.jsxs)(ec,{gap:2,children:[Object(Kr.jsx)(xc,{badgeCode:l,className:"align-self-center flex-shrink-0 me-1"}),Object(Kr.jsxs)(Nc,{size:5,className:"streak-info",gap:0,children:[Object(Kr.jsx)(Zc,{children:nt("hccenter.status."+j)}),Object(Kr.jsx)(Zc,{dangerouslySetInnerHTML:{__html:(()=>{switch(j){case Tr.ACTIVE:return nt(`hccenter.status.${j}.info`,["timeleft","joindate","streakduration"],[h.clubDays<=0?nt("purse.clubdays.zero.amount.text"):h.minutesUntilExpiration>-1&&h.minutesUntilExpiration<1440?a.Kb.shortFormat(60*h.minutesUntilExpiration):a.Kb.shortFormat(86400*(31*h.clubPeriods+h.clubDays)),n.firstSubscriptionDate,a.Kb.shortFormat(86400*n.currentHcStreak)]);case Tr.EXPIRED:return nt(`hccenter.status.${j}.info`,["joindate"],[n.firstSubscriptionDate]);default:return nt(`hccenter.status.${j}.info`)}})()}})]})]}),k("hc.center")["payday.info"]&&Object(Kr.jsxs)(ec,{alignItems:"center",children:[Object(Kr.jsxs)(Nc,{className:"rounded-start bg-primary p-2 payday-special mb-1",children:[Object(Kr.jsx)("h4",{className:"mb-1",children:nt("hccenter.special.title")}),Object(Kr.jsx)("div",{children:nt("hccenter.special.info")}),Object(Kr.jsx)("div",{className:"btn btn-link text-white p-0 mt-auto align-self-baseline",onClick:()=>y("habbopages/"+k("hc.center")["payday.habbopage"]),children:nt("hccenter.special.infolink")})]}),Object(Kr.jsxs)("div",{className:"payday flex-shrink-0 p-2",children:[Object(Kr.jsx)("h5",{className:"mb-2 ms-2",children:nt("hccenter.special.time.title")}),Object(Kr.jsxs)("div",{className:"d-flex flex-row mb-2",children:[Object(Kr.jsx)("div",{className:"clock me-2"}),Object(Kr.jsx)("h6",{className:"mb-0 align-self-center",children:n.timeUntilPayday<60?nt("hccenter.special.time.soon"):a.Kb.shortFormat(60*n.timeUntilPayday)})]}),j===Tr.ACTIVE&&Object(Kr.jsxs)("div",{className:"pe-3",children:[Object(Kr.jsx)("h5",{className:"ms-2 mb-1 bolder",children:nt("hccenter.special.amount.title")}),Object(Kr.jsxs)("div",{className:"d-flex flex-column",children:[Object(Kr.jsx)("div",{className:"w-100 text-center ms-4n",children:m()}),Object(Kr.jsx)(Nl.a,{trigger:["hover","focus"],placement:"left",overlay:E,children:Object(Kr.jsx)("div",{className:"btn btn-link align-self-end text-primary",children:nt("hccenter.breakdown.infolink")})})]})]})]})]}),k("hc.center")["gift.info"]&&Object(Kr.jsxs)("div",{className:"rounded bg-success p-2 d-flex flex-row mb-0",children:[Object(Kr.jsxs)("div",{children:[Object(Kr.jsx)("h4",{className:"mb-1",children:nt("hccenter.gift.title")}),Object(Kr.jsx)("div",{dangerouslySetInnerHTML:{__html:i>0?nt("hccenter.unclaimedgifts",["unclaimedgifts"],[i.toString()]):nt("hccenter.gift.info")}})]}),Object(Kr.jsx)("button",{className:"btn btn-primary btn-lg align-self-center ms-auto",onClick:()=>y("catalog/open/"+k("catalog.links")["hc.hc_gifts"]),children:nt(j===Tr.ACTIVE?"hccenter.btn.gifts.redeem":"hccenter.btn.gifts.view")})]}),k("hc.center")["benefits.info"]&&Object(Kr.jsxs)("div",{className:"benefits text-black py-2",children:[Object(Kr.jsx)("h5",{className:"mb-1 text-primary",children:nt("hccenter.general.title")}),Object(Kr.jsx)("div",{className:"mb-2",dangerouslySetInnerHTML:{__html:nt("hccenter.general.info")}}),Object(Kr.jsx)("button",{className:"btn btn-link p-0 text-primary",onClick:()=>y("habbopages/"+k("hc.center")["benefits.habbopage"]),children:nt("hccenter.general.infolink")})]})]})]})},Rl=Object(c.createContext)({helpReportState:null,setHelpReportState:null}),Al=e=>Object(Kr.jsx)(Rl.Provider,{value:e.value,children:e.children}),yl=()=>Object(c.useContext)(Rl);class wl{}wl.TOO_MANY_PENDING_CALLS_CODE=1,wl.HAS_ABUSIVE_CALL_CODE=2;const kl=e=>{const t=Object(c.useCallback)((e=>{const t=e.getParser();let s=t.messageText;switch(t.resultType){case wl.TOO_MANY_PENDING_CALLS_CODE:$n(new a.uc),Pr.simpleAlert(nt("help.cfh.error.pending"),yr.MODERATION,null,null,nt("help.cfh.error.title"));break;case wl.HAS_ABUSIVE_CALL_CODE:Pr.simpleAlert(nt("help.cfh.error.abusive"),yr.MODERATION,null,null,nt("help.cfh.error.title"));break;default:0===s.trim().length&&(s=nt("help.cfh.sent.text")),Pr.simpleAlert(s,yr.MODERATION,null,null,nt("help.cfh.sent.title"))}}),[]);it(a.L,t);const s=Object(c.useCallback)((e=>{const t=e.getParser(),s=0===t.messageText.length?nt("help.cfh.closed."+(1===(n=t.closeReason)?"useless":2===n?"abusive":"resolved")):t.messageText;var n;Pr.simpleAlert(s,yr.MODERATION,null,null,nt("mod.alert.title"))}),[]);return it(a.Pd,s),null},Dl=e=>{const[t,s]=Object(c.useState)(""),{helpReportState:n=null,setHelpReportState:r=null}=yl(),{reportedChats:i,cfhTopic:o,reportedUserId:l}=n;return Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{fontSize:4,children:nt("help.emergency.chat_report.subtitle")}),Object(Kr.jsx)(Zc,{children:nt("help.cfh.input.text")})]}),Object(Kr.jsx)("textarea",{className:"form-control h-100",value:t,onChange:e=>s(e.target.value)}),Object(Kr.jsx)(tc,{variant:"success",disabled:t.length<15,onClick:()=>{if(t.length<15)return;const e=i[0].roomId,s=[];i.forEach((e=>{s.push(e.entityId),s.push(e.message)})),$n(new a.K(t,o,l,e,s)),y("help/hide")},children:nt("help.bully.submit")})]})},Ul=e=>{const{helpReportState:t=null,setHelpReportState:s=null}=yl(),n=Object(c.useCallback)((()=>{const e=Object.assign({},t);e.currentStep=1,s(e)}),[t,s]),r=Object(c.useCallback)((()=>{$n(new a.hc(!1))}),[]),i=Object(c.useCallback)((()=>{Vt(new pt(pt.CREATE_HELP_REQUEST))}),[]);return Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{fontSize:3,children:nt("help.main.frame.title")}),Object(Kr.jsx)(Zc,{children:nt("help.main.self.description")})]}),Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(tc,{onClick:n,children:nt("help.main.bully.subtitle")}),Object(Kr.jsx)(tc,{onClick:i,children:nt("help.main.help.title")}),Object(Kr.jsx)(tc,{disabled:!0,children:nt("help.main.self.tips.title")}),Object(Kr.jsx)(tc,{variant:"link",className:"text-black",onClick:r,children:nt("help.main.my.sanction.status")})]})]})},Pl=e=>{const{username:t="",onAction:s=null}=e,[n,r]=Object(c.useState)(!1),i=Object(c.useCallback)((e=>{const t=e.getParser();t&&t.webId===ee().userId&&s("close")}),[s]);it(a.Gi,i);const o=Object(c.useCallback)((()=>{n||(r(!0),$n(new a.cb(t)))}),[n,t]);return Object(Kr.jsxs)("div",{className:"d-flex flex-column gap-4 h-100",children:[Object(Kr.jsx)("div",{className:"bg-muted rounded p-2 text-center",children:nt("tutorial.name_change.info.confirm")}),Object(Kr.jsxs)("div",{className:"d-flex flex-column align-items-center gap-1 h-100",children:[Object(Kr.jsx)("div",{children:nt("tutorial.name_change.confirm")}),Object(Kr.jsx)("div",{className:"fw-bold",children:t})]}),Object(Kr.jsxs)("div",{className:"d-flex gap-2",children:[Object(Kr.jsx)("button",{className:"btn btn-success w-100",disabled:n,onClick:o,children:nt("generic.ok")}),Object(Kr.jsx)("button",{className:"btn btn-primary w-100",onClick:()=>s("close"),children:nt("cancel")})]})]})},Ml=e=>{const{onAction:t=null}=e;return Object(Kr.jsxs)("div",{className:"d-flex flex-column gap-4 h-100",children:[Object(Kr.jsx)("div",{className:"bg-muted rounded p-2 text-center",children:nt("tutorial.name_change.info.main")}),Object(Kr.jsx)("div",{className:"fw-bold d-flex align-items-center justify-content-center h-100 w-100",children:nt("tutorial.name_change.current",["name"],[ee().userName])}),Object(Kr.jsxs)("div",{className:"d-flex gap-2",children:[Object(Kr.jsx)("button",{className:"btn btn-success w-100",onClick:()=>t("start"),children:nt("tutorial.name_change.change")}),Object(Kr.jsx)("button",{className:"btn btn-primary w-100",onClick:()=>t("confirmation",ee().userName),children:nt("tutorial.name_change.keep")})]})]})},Ll=e=>{const{onAction:t=null}=e,[s,n]=Object(c.useState)(""),[r,i]=Object(c.useState)(!1),[o,l]=Object(c.useState)(!1),[u,d]=Object(c.useState)(null),[h,j]=Object(c.useState)([]),b=Object(c.useCallback)((e=>{l(!1);const t=e.getParser();if(t)switch(t.resultCode){case 0:i(!0);break;case 2:d("short");break;case 3:d("long");break;case 4:d("invalid");break;case 5:j(t.nameSuggestions),d("taken");break;case 6:d("change_not_allowed")}}),[]);it(a.eb,b);const g=Object(c.useCallback)((()=>{""!==s&&(i(!1),j([]),d(null),l(!0),$n(new a.db(s)))}),[s]),O=Object(c.useCallback)((e=>{i(!1),j([]),d(null),n(e)}),[]);return Object(Kr.jsxs)("div",{className:"d-flex flex-column gap-3 h-100",children:[Object(Kr.jsx)("div",{children:nt("tutorial.name_change.info.select")}),Object(Kr.jsxs)("div",{className:"d-flex gap-2",children:[Object(Kr.jsx)("input",{type:"text",className:"form-control form-control-sm",value:s,onChange:e=>O(e.target.value)}),Object(Kr.jsx)("button",{className:"btn btn-primary",disabled:""===s||o,onClick:g,children:nt("tutorial.name_change.check")})]}),!u&&!r&&Object(Kr.jsx)("div",{className:"bg-muted rounded p-2 text-center",children:nt("help.tutorial.name.info")}),u&&Object(Kr.jsx)("div",{className:"bg-danger rounded p-2 text-center text-white",children:nt(`help.tutorial.name.${u}`,["name"],[s])}),r&&Object(Kr.jsx)("div",{className:"bg-success rounded p-2 text-center text-white",children:nt("help.tutorial.name.available",["name"],[s])}),h&&Object(Kr.jsx)("div",{className:"d-flex flex-column gap-2",children:h.map(((e,t)=>Object(Kr.jsx)("div",{className:"col bg-muted rounded p-1 cursor-pointer",onClick:()=>O(e),children:e},t)))}),Object(Kr.jsxs)("div",{className:"d-flex gap-2",children:[Object(Kr.jsx)("button",{className:"btn btn-success w-100",disabled:!r,onClick:()=>t("confirmation",s),children:nt("tutorial.name_change.pick")}),Object(Kr.jsx)("button",{className:"btn btn-primary w-100",onClick:()=>t("close"),children:nt("cancel")})]})]})},Fl="INIT",Hl="INPUT",Bl="CONFIRMATION",Gl=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(Fl),[i,a]=Object(c.useState)(""),o=Object(c.useCallback)((e=>{r(Fl),s(!0)}),[]);qt(Et.INIT,o);const l=Object(c.useCallback)(((e,t)=>{switch(e){case"start":r(Hl);break;case"confirmation":a(t),r(Bl);break;case"close":a(""),s(!1)}}),[]),u=Object(c.useMemo)((()=>{switch(n){case Fl:return"tutorial.name_change.title.main";case Hl:return"tutorial.name_change.title.select";case Bl:return"tutorial.name_change.title.confirm"}}),[n]);return t?Object(Kr.jsxs)(_c,{className:"nitro-change-username",theme:"primary-slim",children:[Object(Kr.jsx)(hc,{headerText:nt(u),onCloseClick:()=>l("close")}),Object(Kr.jsxs)(lc,{className:"text-black",children:[n===Fl&&Object(Kr.jsx)(Ml,{onAction:l}),n===Hl&&Object(Kr.jsx)(Ll,{onAction:l}),n===Bl&&Object(Kr.jsx)(Pl,{username:i,onAction:l})]})]}):null},Wl=e=>{const[t,s]=Object(c.useState)(null),n=Object(c.useCallback)((e=>{const t=e.getParser();t&&s(t)}),[]);it(a.Ch,n);const r=Object(c.useCallback)(((e,t,s)=>{let n=`help.sanction.${e}`;switch(t){case"ALERT":n+=".alert";break;case"MUTE":n+=".mute";break;case"BAN_PERMANENT":n+=".permban";break;default:if(n+=".ban",s>24)return n+=".days",nt(n,["days"],[(s/24).toString()])}return nt(n,["hours"],[s.toString()])}),[]);return t?Object(Kr.jsxs)(_c,{className:"nitro-help",theme:"primary-slim",children:[Object(Kr.jsx)(hc,{headerText:nt("help.sanction.info.title"),onCloseClick:()=>s(null)}),Object(Kr.jsx)(lc,{className:"text-black",children:Object(Kr.jsxs)(Jr,{children:[Object(Kr.jsx)(Nc,{center:!0,size:5,overflow:"hidden",children:Object(Kr.jsx)(Qr,{className:"index-image"})}),Object(Kr.jsxs)(Nc,{justifyContent:"between",size:7,overflow:"hidden",children:["cfh.reason.EMPTY"===t.sanctionReason?Object(Kr.jsx)("div",{className:"col-12 fw-bold",children:nt("help.sanction.current.none")}):Object(Kr.jsxs)(Kr.Fragment,{children:[(t.probationHoursLeft>0||t.isSanctionActive)&&Object(Kr.jsx)("div",{className:"col-12 fw-bold",children:nt("help.sanction.probation.reminder")}),Object(Kr.jsxs)("div",{className:"col-12 fw-bold "+(t.isSanctionNew?"text-danger":""),children:[nt("help.sanction.last.sanction")," ",r("current",t.sanctionName,t.sanctionLengthHours)]}),Object(Kr.jsxs)("div",{className:"col-12",children:[nt("generic.start.time")," ",t.sanctionCreationTime]}),Object(Kr.jsxs)("div",{className:"col-12",children:[nt("generic.reason")," ",t.sanctionReason]}),Object(Kr.jsxs)("div",{className:"col-12",children:[nt("help.sanction.probation.days.left")," ",Math.trunc(t.probationHoursLeft/24)+1]})]}),t.hasCustomMute&&!t.isSanctionActive&&Object(Kr.jsx)("div",{className:"col-12 fw-bold",children:nt("help.sanction.custom.mute")}),t.tradeLockExpiryTime&&t.tradeLockExpiryTime.length>0&&Object(Kr.jsxs)("div",{className:"col-12 fw-bold",children:[nt("trade.locked.until")," ",t.tradeLockExpiryTime]}),Object(Kr.jsx)("div",{className:"col-12",children:r("next",t.nextSanctionName,t.nextSanctionLengthHours)}),Object(Kr.jsx)(tc,{variant:"success",onClick:e=>s(null),children:nt("habbo.way.ok.button")})]})]})})]}):null},Vl=e=>{const[t,s]=Object(c.useState)(new Map),{helpReportState:n=null,setHelpReportState:r=null}=yl(),{reportedUserId:i=-1}=n,o=Object(c.useMemo)((()=>ao().chats.filter((e=>e.type===so.TYPE_CHAT&&e.entityId===i&&e.entityType===a.Mg.USER))),[i]);return Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{fontSize:4,children:nt("help.emergency.chat_report.subtitle")}),Object(Kr.jsx)(Zc,{children:nt("help.emergency.chat_report.description")})]}),Object(Kr.jsxs)(Nc,{gap:1,overflow:"hidden",children:[!o.length&&Object(Kr.jsx)(Zc,{children:nt("help.cfh.error.no_user_data")}),o.length>0&&Object(Kr.jsx)(Zr,{gap:1,columnCount:1,columnMinHeight:25,overflow:"auto",children:o.map(((e,n)=>Object(Kr.jsx)(wc,{onClick:n=>(e=>{const n=new Map(t);n.has(e.id)?n.delete(e.id):n.set(e.id,e),s(n)})(e),itemActive:t.has(e.id),children:Object(Kr.jsx)(Zc,{children:e.message})},e.id)))})]}),Object(Kr.jsxs)(ec,{gap:2,justifyContent:"between",children:[Object(Kr.jsx)(tc,{variant:"secondary",onClick:()=>{r((e=>{const t=e.currentStep-1;return{...e,currentStep:t}}))},children:nt("generic.back")}),Object(Kr.jsx)(tc,{disabled:t.size<=0,onClick:()=>{!t||t.size<=0||r((e=>({...e,reportedChats:Array.from(t.values()),currentStep:3})))},children:nt("help.emergency.main.submit.button")})]})]})},ql=e=>{const[t,s]=Object(c.useState)(-1),{helpReportState:n=null,setHelpReportState:r=null}=yl(),i=Object(c.useMemo)((()=>{const e=new Map;return ao().chats.forEach((t=>{t.type===so.TYPE_CHAT&&t.entityType===a.Mg.USER&&t.entityId!==ee().userId&&(e.has(t.entityId)||e.set(t.entityId,{id:t.entityId,username:t.name}))})),Array.from(e.values())}),[]);return Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{fontSize:4,children:nt("help.emergency.main.step.two.title")}),i.length>0&&Object(Kr.jsx)(Zc,{children:nt("report.user.pick.user")})]}),Object(Kr.jsxs)(Nc,{gap:1,overflow:"hidden",children:[!i.length&&Object(Kr.jsx)(Zc,{children:nt("report.user.error.nolist")}),i.length>0&&Object(Kr.jsx)(Zr,{columnCount:1,columnMinHeight:25,gap:1,children:i.map(((e,n)=>Object(Kr.jsx)(wc,{onClick:n=>{return r=e.id,void s(t===r?-1:r);var r},itemActive:t===e.id,children:Object(Kr.jsx)("span",{dangerouslySetInnerHTML:{__html:e.username}})},e.id)))})]}),Object(Kr.jsxs)(ec,{gap:2,justifyContent:"between",children:[Object(Kr.jsx)(tc,{variant:"secondary",onClick:()=>{r((e=>{const t=e.currentStep-1;return{...e,currentStep:t}}))},children:nt("generic.back")}),Object(Kr.jsx)(tc,{disabled:t<=0,onClick:()=>{t<=0||r((e=>({...e,reportedUserId:t,currentStep:2})))},children:nt("help.emergency.main.submit.button")})]})]})};let Yl=[];const zl=e=>{const{setHelpReportState:t=null}=yl(),[s,n]=Object(c.useState)(-1),[r,i]=Object(c.useState)(-1),a=Object(c.useMemo)((()=>Yl),[]);return Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{fontSize:4,children:nt("help.emergency.chat_report.subtitle")}),Object(Kr.jsx)(Zc,{children:nt("help.cfh.pick.topic")})]}),Object(Kr.jsxs)(Nc,{gap:1,overflow:"auto",children:[s<0&&a.map(((e,t)=>Object(Kr.jsx)(tc,{variant:"danger",onClick:e=>n(t),children:nt(`help.cfh.reason.${e.name}`)},t))),s>=0&&a[s].topics.map(((e,t)=>Object(Kr.jsx)(tc,{variant:"danger",onClick:e=>i(t),active:r===t,children:nt(`help.cfh.topic.${e.id}`)},t)))]}),Object(Kr.jsxs)(ec,{gap:2,justifyContent:"between",children:[Object(Kr.jsx)(tc,{variant:"secondary",onClick:()=>{t((e=>{const t=e.currentStep-1;return{...e,currentStep:t}}))},children:nt("generic.back")}),Object(Kr.jsx)(tc,{disabled:r<0,onClick:()=>{s<0||r<0||t((e=>({...e,cfhCategory:s,cfhTopic:a[s].topics[r].id,currentStep:4})))},children:nt("help.emergency.main.submit.button")})]})]})},Kl=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)({reportedUserId:-1,reportedChats:[],cfhCategory:-1,cfhTopic:-1,roomId:-1,message:"",currentStep:0}),i=Object(c.useCallback)((e=>{const t=e.split("/");if(!(t.length<2))switch(t[1]){case"show":return void s(!0);case"hide":return void s(!1);case"toggle":return void s((e=>!e))}}),[]),a=Object(c.useCallback)((e=>{r({reportedUserId:e.reportedUserId,reportedChats:[],cfhCategory:-1,cfhTopic:-1,roomId:-1,message:"",currentStep:2}),s(!0)}),[]);qt(ft.REPORT_USER,a),Object(c.useEffect)((()=>{const e={linkReceived:i,eventUrlPrefix:"help/"};return S(e),()=>M(e)}),[i]),Object(c.useEffect)((()=>{t&&r({reportedUserId:-1,reportedChats:[],cfhCategory:-1,cfhTopic:-1,roomId:-1,message:"",currentStep:0})}),[t]);const o=Object(c.useCallback)((()=>{switch(n.currentStep){case 0:return Object(Kr.jsx)(Ul,{});case 1:return Object(Kr.jsx)(ql,{});case 2:return Object(Kr.jsx)(Vl,{});case 3:return Object(Kr.jsx)(zl,{});case 4:return Object(Kr.jsx)(Dl,{})}return null}),[n.currentStep]);return Object(Kr.jsxs)(Al,{value:{helpReportState:n,setHelpReportState:r},children:[Object(Kr.jsx)(kl,{}),t&&Object(Kr.jsxs)(_c,{className:"nitro-help",theme:"primary-slim",children:[Object(Kr.jsx)(hc,{headerText:nt("help.button.cfh"),onCloseClick:e=>s(!1)}),Object(Kr.jsx)(lc,{className:"text-black",children:Object(Kr.jsxs)(Jr,{children:[Object(Kr.jsx)(Nc,{center:!0,size:5,overflow:"hidden",children:Object(Kr.jsx)(Qr,{className:"index-image"})}),Object(Kr.jsx)(Nc,{justifyContent:"between",size:7,overflow:"hidden",children:Object(Kr.jsx)(o,{})})]})})]}),Object(Kr.jsx)(Wl,{}),Object(Kr.jsx)(Gl,{})]})},Ql=e=>{const[t,s]=Object(c.useState)(null),[n,r]=Object(c.useState)(null),[i,o]=Object(c.useState)(null),[l,u]=Object(c.useState)(null),d=Object(c.useCallback)((e=>{const t=e.getParser();s(t.productType),r(t.productClassId),o(t.totalCoinsForBonus),u(t.coinsStillRequiredToBuy)}),[]);return it(a.x,d),Object(c.useEffect)((()=>{$n(new a.cc)}),[]),t?Object(Kr.jsxs)("div",{className:"bonus-rare widget d-flex",children:[t,Object(Kr.jsxs)("div",{className:"bg-light-dark rounded overflow-hidden position-relative bonus-bar-container",children:[Object(Kr.jsx)("div",{className:"d-flex justify-content-center align-items-center w-100 h-100 position-absolute small top-0",children:i-l+"/"+i}),Object(Kr.jsx)("div",{className:"small bg-info rounded position-absolute top-0 h-100",style:{width:(i-l)/i*100+"%"}})]})]}):null},$l=e=>{const{data:t=null,level:s=0}=e;return Object(Kr.jsxs)("div",{className:"hof-user-container",children:[Object(Kr.jsxs)("div",{className:"hof-tooltip",children:[Object(Kr.jsxs)("div",{className:"hof-header",children:[s,". ",t.userName," ",Object(Kr.jsx)(Kc,{userId:t.userId})]}),Object(Kr.jsx)("div",{className:"small text-center text-white",children:nt("landing.view.competition.hof.points",["points"],[tt(t.currentScore).toString()])})]}),Object(Kr.jsx)(Ec,{figure:t.figure,direction:2})]})},Xl=e=>{const{slot:t=-1,conf:s=null}=e,[n,r]=Object(c.useState)(null),i=Object(c.useCallback)((e=>{const t=e.getParser();r(t.data)}),[]);return it(a.kb,i),Object(c.useEffect)((()=>{const e=s?s.campaign:"";$n(new a.kc(e))}),[s]),n?Object(Kr.jsx)("div",{className:"hall-of-fame d-flex",children:n.hof&&n.hof.length>0&&n.hof.map(((e,t)=>Object(Kr.jsx)($l,{data:e,level:t+1},t)))}):null},Jl=e=>{const[t,s]=Object(c.useState)(null),[n,r]=Object(c.useState)(0),i=Object(c.useCallback)((e=>{const t=e.getParser();s(t.articles)}),[]);return it(a.zf,i),Object(c.useEffect)((()=>{$n(new a.wc)}),[]),t?Object(Kr.jsxs)("div",{className:"promo-articles widget mb-2",children:[Object(Kr.jsxs)("div",{className:"d-flex flex-row align-items-center w-100 mb-1",children:[Object(Kr.jsx)("small",{className:"flex-shrink-0 pe-1",children:nt("landing.view.promo.article.header")}),Object(Kr.jsx)("hr",{className:"w-100 my-0"})]}),Object(Kr.jsx)("div",{className:"d-flex flex-row mb-1",children:t&&t.length>0&&t.map(((e,s)=>Object(Kr.jsx)("div",{className:"promo-articles-bullet cursor-pointer "+(e===t[n]?"promo-articles-bullet-active":""),onClick:e=>r(s)},e.id)))}),t&&t[n]&&Object(Kr.jsxs)("div",{className:"promo-article d-flex flex-row row mx-0",children:[Object(Kr.jsx)("div",{className:"promo-article-image",style:{backgroundImage:`url(${t[n].imageUrl})`}}),Object(Kr.jsxs)("div",{className:"col-3 d-flex flex-column h-100",children:[Object(Kr.jsx)("h3",{className:"my-0",children:t[n].title}),Object(Kr.jsx)("b",{children:t[n].bodyText}),Object(Kr.jsx)("button",{className:"btn btn-sm mt-auto btn-gainsboro",onClick:e=>Pr.openUrl(t[n].linkContent),children:t[n].buttonText})]})]})]}):null},Zl=e=>{const{conf:t=null}=e,s=Object(c.useCallback)((e=>{const s=t[e];return s?"image"===e?ur().interpolate(s):s:null}),[t]);return Object(Kr.jsxs)("div",{className:"widgetcontainer widget d-flex flex-row overflow-hidden",children:[Object(Kr.jsx)("div",{className:"widgetcontainer-image flex-shrink-0",style:{backgroundImage:`url(${s("image")})`}}),Object(Kr.jsxs)("div",{className:"d-flex flex-column align-self-center",children:[Object(Kr.jsx)("h3",{className:"my-0",children:nt(`landing.view.${s("texts")}.header`)}),Object(Kr.jsx)("i",{children:nt(`landing.view.${s("texts")}.body`)}),Object(Kr.jsx)("button",{className:"btn btn-sm btn-gainsboro align-self-start px-3 mt-auto",onClick:e=>Pr.openUrl(s("btnLink")),children:nt(`landing.view.${s("texts")}.button`)})]})]})},eu=e=>{switch(e.widgetType){case"promoarticle":return Object(Kr.jsx)(Jl,{});case"achievementcompetition_hall_of_fame":return Object(Kr.jsx)(Xl,{slot:e.slot,conf:e.widgetConf});case"bonusrare":return Object(Kr.jsx)(Ql,{});case"widgetcontainer":return Object(Kr.jsx)(Zl,{conf:e.widgetConf});default:return null}},tu=e=>{const{widgetType:t=null,widgetSlot:s=0,widgetConf:n=null,className:r="",...c}=e;return Object(Kr.jsx)("div",{className:`widget-slot slot-${s} ${r||""}`,...c,children:Object(Kr.jsx)(eu,{widgetType:t,slot:s,widgetConf:n})})},su=e=>{const[t,s]=Object(c.useState)(!0),{userFigure:n=null}=Ts(),r=Object(c.useCallback)((e=>{switch(e.type){case a.Yg.CREATED:return void s(!1);case a.Yg.ENDED:return void s(e.openLandingView)}}),[]);if(Gt(a.Yg.CREATED,r),Gt(a.Yg.ENDED,r),!t)return null;const i=k("hotelview").images["background.colour"],o=ur().interpolate(k("hotelview").images.background),l=ur().interpolate(k("hotelview").images.sun),u=ur().interpolate(k("hotelview").images.drape),d=ur().interpolate(k("hotelview").images.left),h=ur().interpolate(k("hotelview").images["right.repeat"]),j=ur().interpolate(k("hotelview").images.right);return Object(Kr.jsxs)("div",{className:"nitro-hotel-view",style:i&&i?{background:i}:{},children:[Object(Kr.jsx)("div",{className:"container py-3 overflow-hidden landing-widgets",children:Object(Kr.jsxs)("div",{className:"row h-100",children:[Object(Kr.jsxs)("div",{className:"col-9 h-100 d-flex flex-column",children:[Object(Kr.jsx)(tu,{widgetSlot:1,widgetType:k("hotelview").widgets["slot.1.widget"],widgetConf:k("hotelview").widgets["slot.1.conf"],className:"col-6"}),Object(Kr.jsxs)("div",{className:"col-12 row mx-0",children:[Object(Kr.jsx)(tu,{widgetSlot:2,widgetType:k("hotelview").widgets["slot.2.widget"],widgetConf:k("hotelview").widgets["slot.2.conf"],className:"col-7"}),Object(Kr.jsx)(tu,{widgetSlot:3,widgetType:k("hotelview").widgets["slot.3.widget"],widgetConf:k("hotelview").widgets["slot.3.conf"],className:"col-5"}),Object(Kr.jsx)(tu,{widgetSlot:4,widgetType:k("hotelview").widgets["slot.4.widget"],widgetConf:k("hotelview").widgets["slot.4.conf"],className:"col-7"}),Object(Kr.jsx)(tu,{widgetSlot:5,widgetType:k("hotelview").widgets["slot.5.widget"],widgetConf:k("hotelview").widgets["slot.5.conf"],className:"col-5"})]}),Object(Kr.jsx)(tu,{widgetSlot:6,widgetType:k("hotelview").widgets["slot.6.widget"],widgetConf:k("hotelview").widgets["slot.6.conf"],className:"mt-auto"})]}),Object(Kr.jsx)("div",{className:"col-3 h-100",children:Object(Kr.jsx)(tu,{widgetSlot:7,widgetType:k("hotelview").widgets["slot.7.widget"],widgetConf:k("hotelview").widgets["slot.7.conf"]})})]})}),Object(Kr.jsx)("div",{className:"background position-absolute",style:o&&o.length?{backgroundImage:`url(${o})`}:{}}),Object(Kr.jsx)("div",{className:"sun position-absolute",style:l&&l.length?{backgroundImage:`url(${l})`}:{}}),Object(Kr.jsx)("div",{className:"drape position-absolute",style:u&&u.length?{backgroundImage:`url(${u})`}:{}}),Object(Kr.jsx)("div",{className:"left position-absolute",style:d&&d.length?{backgroundImage:`url(${d})`}:{}}),Object(Kr.jsx)("div",{className:"right-repeat position-absolute",style:h&&h.length?{backgroundImage:`url(${h})`}:{}}),Object(Kr.jsx)("div",{className:"right position-absolute",style:j&&j.length?{backgroundImage:`url(${j})`}:{}}),k("hotelview")["show.avatar"]&&Object(Kr.jsx)("div",{className:"avatar-image",children:Object(Kr.jsx)(Ec,{figure:n,direction:2})})]})},nu=e=>{const{badgeCode:t=null,children:s=null,...n}=e,{selectedBadgeCode:r=null,setSelectedBadgeCode:c=null,getBadgeId:i=null}=as(),{isUnseen:a=null}=cs(),o=a(qs.BADGE,i(t));return Object(Kr.jsxs)(wc,{itemActive:r===t,itemUnseen:o,onMouseDown:e=>c(t),...n,children:[Object(Kr.jsx)(xc,{badgeCode:t}),s]})},ru=e=>{const[t,s]=Object(c.useState)(!1),{badgeCodes:n=[],activeBadgeCodes:r=[],selectedBadgeCode:i=null,isWearingBadge:a=null,canWearBadges:o=null,toggleBadge:l=null,getBadgeId:u=null,activate:d=null,deactivate:h=null}=as(),{isUnseen:j=null,removeUnseen:b=null}=cs();return Object(c.useEffect)((()=>{i&&j(qs.BADGE,u(i))&&b(qs.BADGE,u(i))}),[i,j,b,u]),Object(c.useEffect)((()=>{if(!t)return;const e=d();return()=>h(e)}),[t,d,h]),Object(c.useEffect)((()=>(s(!0),()=>s(!1))),[]),Object(Kr.jsxs)(Jr,{children:[Object(Kr.jsx)(Nc,{size:7,overflow:"hidden",children:Object(Kr.jsx)(Zr,{columnCount:4,children:n&&n.length>0&&n.map(((e,t)=>r.indexOf(e)>=0?null:Object(Kr.jsx)(nu,{badgeCode:e},t)))})}),Object(Kr.jsxs)(Nc,{className:"justify-content-between",size:5,overflow:"auto",children:[Object(Kr.jsxs)(Nc,{overflow:"hidden",gap:2,children:[Object(Kr.jsx)(Zc,{children:nt("inventory.badges.activebadges")}),Object(Kr.jsx)(Zr,{columnCount:3,children:r&&r.length>0&&r.map(((e,t)=>Object(Kr.jsx)(nu,{badgeCode:e},t)))})]}),!!i&&Object(Kr.jsxs)(Nc,{grow:!0,justifyContent:"end",gap:2,children:[Object(Kr.jsxs)(ec,{alignItems:"center",gap:2,children:[Object(Kr.jsx)(xc,{shrink:!0,badgeCode:i}),Object(Kr.jsx)(Zc,{children:et(i)})]}),Object(Kr.jsx)(tc,{variant:a(i)?"danger":"success",disabled:!a(i)&&!o(),onClick:e=>l(i),children:nt(a(i)?"inventory.badges.clearbadge":"inventory.badges.wearbadge")})]})]})]})},cu=e=>{const{title:t="",desc:s="",children:n=null,...r}=e;return Object(Kr.jsxs)(Jr,{...r,children:[Object(Kr.jsx)(Nc,{center:!0,size:5,overflow:"hidden",children:Object(Kr.jsx)("div",{className:"empty-image"})}),Object(Kr.jsxs)(Nc,{justifyContent:"center",size:7,overflow:"hidden",children:[Object(Kr.jsx)(Zc,{fontWeight:"bold",fontSize:5,overflow:"unset",truncate:!0,children:t}),Object(Kr.jsx)(Zc,{overflow:"auto",children:s})]}),n]})},iu=e=>{const{botItem:t=null,children:s=null,...n}=e,[r,i]=Object(c.useState)(!1),{selectedBot:o=null,setSelectedBot:l=null}=ls(),{isUnseen:u=null}=cs(),d=u(qs.BOT,t.botData.id),h=e=>{switch(e.type){case a.Ce.MOUSE_DOWN:return l(t),void i(!0);case a.Ce.MOUSE_UP:return void i(!1);case a.Ce.ROLL_OUT:if(!r||o!==t)return;return void Vs(t)}};return Object(Kr.jsxs)(wc,{itemActive:o===t,itemUnseen:d,onMouseDown:h,onMouseUp:h,onMouseOut:h,...n,children:[Object(Kr.jsx)(Ec,{figure:t.botData.figure,direction:3,headOnly:!0}),s]})},au=e=>{const{roomSession:t=null,roomPreviewer:s=null}=e,[n,r]=Object(c.useState)(!1),{botItems:i=[],selectedBot:o=null,activate:l=null,deactivate:u=null}=ls(),{isUnseen:d=null,removeUnseen:h=null}=cs();return Object(c.useEffect)((()=>{if(!o||!s)return;const e=o.botData,t=L();let n=t.getRoomInstanceVariable(t.activeRoomId,a.Og.ROOM_WALL_TYPE),r=t.getRoomInstanceVariable(t.activeRoomId,a.Og.ROOM_FLOOR_TYPE),c=t.getRoomInstanceVariable(t.activeRoomId,a.Og.ROOM_LANDSCAPE_TYPE);n=n&&n.length?n:"101",r=r&&r.length?r:"101",c=c&&c.length?c:"1.1",s.reset(!1),s.updateRoomWallsAndFloorVisibility(!0,!0),s.updateObjectRoom(r,n,c),s.addAvatarIntoRoom(e.figure,0)}),[s,o]),Object(c.useEffect)((()=>{o&&d(qs.BOT,o.botData.id)&&h(qs.BOT,o.botData.id)}),[o,d,h]),Object(c.useEffect)((()=>{if(!n)return;const e=l();return()=>u(e)}),[n,l,u]),Object(c.useEffect)((()=>(r(!0),()=>r(!1))),[]),i&&i.length?Object(Kr.jsxs)(Jr,{children:[Object(Kr.jsx)(Nc,{size:7,overflow:"hidden",children:Object(Kr.jsx)(Zr,{columnCount:5,children:i&&i.length>0&&i.map((e=>Object(Kr.jsx)(iu,{botItem:e},e.botData.id)))})}),Object(Kr.jsxs)(Nc,{size:5,overflow:"auto",children:[Object(Kr.jsx)(Nc,{overflow:"hidden",position:"relative",children:Object(Kr.jsx)(qc,{roomPreviewer:s,height:140})}),o&&Object(Kr.jsxs)(Nc,{grow:!0,justifyContent:"between",gap:2,children:[Object(Kr.jsx)(Zc,{grow:!0,truncate:!0,children:o.botData.name}),!!t&&Object(Kr.jsx)(tc,{variant:"success",onClick:e=>Vs(o),children:nt("inventory.furni.placetoroom")})]})]})]}):Object(Kr.jsx)(cu,{title:nt("inventory.empty.bots.title"),desc:nt("inventory.empty.bots.desc")})},ou=e=>{const{groupItem:t=null,...s}=e,[n,r]=Object(c.useState)(!1),{selectedItem:i=null,setSelectedItem:o=null}=hs(),l=e=>{switch(e.type){case a.Ce.MOUSE_DOWN:return o(t),void r(!0);case a.Ce.MOUSE_UP:return void r(!1);case a.Ce.ROLL_OUT:if(!n||t!==i)return;return void Ws(t)}},u=t.getUnlockedCount();return Object(Kr.jsx)(wc,{className:u?"":"opacity-0-5 ",itemImage:t.iconUrl,itemCount:t.getUnlockedCount(),itemActive:t===i,itemUniqueNumber:t.stuffData.uniqueNumber,itemUnseen:t.hasUnseenItems,onMouseDown:l,onMouseUp:l,onMouseOut:l,classNames:["nitro-inventory-el"],...s})},lu=e=>{const{groupItems:t=[],setGroupItems:s=null}=e,[n,r]=Object(c.useState)("");return Object(c.useEffect)((()=>{let e=[...t];if(n&&n.length){const s=n.toLocaleLowerCase();e=t.filter((e=>s&&s.length&&e.name.toLocaleLowerCase().includes(s)?e:null))}s(e)}),[t,s,n]),Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)("input",{type:"text",className:"form-control form-control-sm",placeholder:nt("generic.search"),value:n,onChange:e=>r(e.target.value)}),Object(Kr.jsx)(tc,{variant:"primary",children:Object(Kr.jsx)(ic.a,{icon:"search"})})]})},uu=e=>{const{roomSession:t=null,roomPreviewer:s=null}=e,[n,r]=Object(c.useState)(!1),[i,o]=Object(c.useState)([]),{groupItems:l=[],selectedItem:u=null,activate:d=null,deactivate:h=null}=hs(),{resetItems:j=null}=cs();return Object(c.useEffect)((()=>{if(!u||!s)return;const e=u.getLastItem();if(!e)return;const t=L();let n=t.getRoomInstanceVariable(t.activeRoomId,a.Og.ROOM_WALL_TYPE),r=t.getRoomInstanceVariable(t.activeRoomId,a.Og.ROOM_FLOOR_TYPE),c=t.getRoomInstanceVariable(t.activeRoomId,a.Og.ROOM_LANDSCAPE_TYPE);if(n=n&&n.length?n:"101",r=r&&r.length?r:"101",c=c&&c.length?c:"1.1",s.reset(!1),s.updateObjectRoom(r,n,c),s.updateRoomWallsAndFloorVisibility(!0,!0),e.category===Rs.WALL_PAPER||e.category===Rs.FLOOR||e.category===Rs.LANDSCAPE){if(r=e.category===Rs.FLOOR?u.stuffData.getLegacyString():r,n=e.category===Rs.WALL_PAPER?u.stuffData.getLegacyString():n,c=e.category===Rs.LANDSCAPE?u.stuffData.getLegacyString():c,s.updateObjectRoom(r,n,c),e.category===Rs.LANDSCAPE){const e=ee().getWallItemDataByName("noob_window_double");e&&s.addWallItemIntoRoom(e.id,new a.Ui(90,0,0),e.customParams)}}else u.isWallItem?s.addWallItemIntoRoom(u.type,new a.Ui(90),e.stuffData.getLegacyString()):s.addFurnitureIntoRoom(u.type,new a.Ui(90),u.stuffData,e.extra.toString())}),[s,u]),Object(c.useEffect)((()=>{u&&u.hasUnseenItems&&(j(qs.FURNI,u.items.map((e=>e.id))),u.hasUnseenItems=!1)}),[u,j]),Object(c.useEffect)((()=>{if(!n)return;const e=d();return()=>h(e)}),[n,d,h]),Object(c.useEffect)((()=>(r(!0),()=>r(!1))),[]),l&&l.length?Object(Kr.jsxs)(Jr,{children:[Object(Kr.jsxs)(Nc,{size:7,overflow:"hidden",children:[Object(Kr.jsx)(lu,{groupItems:l,setGroupItems:o}),Object(Kr.jsx)(Zr,{columnCount:5,children:i&&i.length>0&&i.map(((e,t)=>Object(Kr.jsx)(ou,{groupItem:e},t)))})]}),Object(Kr.jsxs)(Nc,{size:5,overflow:"auto",children:[Object(Kr.jsxs)(Nc,{overflow:"hidden",position:"relative",children:[Object(Kr.jsx)(qc,{roomPreviewer:s,height:140}),u&&u.stuffData.isUnique&&Object(Kr.jsx)(Ac,{className:"top-2 end-2",position:"absolute",uniqueNumber:u.stuffData.uniqueNumber,uniqueSeries:u.stuffData.uniqueSeries}),u&&u.stuffData.rarityLevel>-1&&Object(Kr.jsx)(Vc,{className:"top-2 end-2",position:"absolute",level:u.stuffData.rarityLevel})]}),u&&Object(Kr.jsxs)(Nc,{grow:!0,justifyContent:"between",gap:2,children:[Object(Kr.jsx)(Zc,{grow:!0,truncate:!0,children:u.name}),Object(Kr.jsxs)(Nc,{gap:1,children:[!!t&&Object(Kr.jsx)(tc,{variant:"success",onClick:e=>Ws(u),children:nt("inventory.furni.placetoroom")}),u&&u.isSellable&&Object(Kr.jsx)(tc,{onClick:e=>(e=>{const t=e.getLastItem();return!!t&&!!t.sellable&&void Vt(new dt(t))})(u),children:nt("inventory.marketplace.sell")})]})]})]})]}):Object(Kr.jsx)(cu,{title:nt("inventory.empty.title"),desc:nt("inventory.empty.desc")})},du=e=>{const{cancelTrade:t=null}=e,[s,n]=Object(c.useState)(null),[r,i]=Object(c.useState)(null),[o,l]=Object(c.useState)(null),[u,d]=Object(c.useState)(null),[h,j]=Object(c.useState)(3),{ownUser:b=null,otherUser:g=null,groupItems:O=[],tradeState:m=$s.TRADING_STATE_READY,progressTrade:p=null,removeItem:_=null,setTradeState:E=null}=ms(),f=(e,t,s,n,r)=>{if(!b||b.accepts||!b.userItems)return!1;if(b.userItems.length<9)return!0;if(!n)return!1;let c=t.toString();return c=s===Rs.POSTER?c+"poster"+r.getLegacyString():s===Rs.GUILD_FURNI?((e,t)=>{let s=e.toString();if(!(t instanceof a.Qh))return s;let n=1;for(;n<5;)s=s+","+t.getValue(n),n++;return s})(t,r):(e?"I":"S")+c,!!b.userItems.getValue(c)},x=e=>{const t=e?"lock":"unlock",s=e?"success":"danger";return Object(Kr.jsx)(ic.a,{icon:t,className:"text-"+s})};return Object(c.useEffect)((()=>{if(m!==$s.TRADING_STATE_COUNTDOWN)return;j(3);const e=setInterval((()=>{j((t=>{const s=t-1;return 0===s&&clearInterval(e),s}))}),1e3);return()=>clearInterval(e)}),[m,E]),Object(c.useEffect)((()=>{0===h&&E($s.TRADING_STATE_CONFIRMING)}),[h,E]),m!==$s.TRADING_STATE_READY&&b&&g?Object(Kr.jsxs)(Jr,{children:[Object(Kr.jsxs)(Nc,{size:4,overflow:"hidden",children:[Object(Kr.jsx)(lu,{groupItems:O,setGroupItems:d}),Object(Kr.jsxs)(ec,{column:!0,fullHeight:!0,justifyContent:"between",overflow:"hidden",gap:2,children:[Object(Kr.jsx)(Zr,{columnCount:3,children:u&&u.length>0&&u.map(((e,t)=>{const r=e.getUnlockedCount();return Object(Kr.jsx)(wc,{className:r?"":"opacity-0-5 ",itemImage:e.iconUrl,itemCount:r,itemActive:s===e,itemUniqueNumber:e.stuffData.uniqueNumber,onClick:t=>r&&n(e),children:r>0&&s===e&&Object(Kr.jsx)(tc,{position:"absolute",variant:"success",className:"trade-button bottom-1 end-1",onClick:e=>(e=>{if(!s)return;const t=s.getTradeItems(e);if(!t||!t.length)return;let n=null;const r=[];for(const s of t)r.push(s.id),n||(n=s);if(b.userItems.length+r.length<=1500)if(!n.isGroupable&&r.length)$n(new a.di(r.pop()));else{const e=[];for(const t of r)f(n.isWallItem,n.type,n.category,n.isGroupable,n.stuffData)&&e.push(t);e.length&&(1===e.length?$n(new a.di(e.pop())):$n(new a.ei(...e)))}else Pr.simpleAlert(nt("trading.items.too_many_items.desc"),yr.DEFAULT,null,null,nt("trading.items.too_many_items.title"))})(1),children:Object(Kr.jsx)(ic.a,{icon:"chevron-right"})})},t)}))}),Object(Kr.jsx)(Qr,{fullWidth:!0,className:"badge bg-muted",children:s?s.name:nt("catalog_selectproduct")})]})]}),Object(Kr.jsxs)(Nc,{size:8,overflow:"hidden",children:[Object(Kr.jsxs)(Jr,{overflow:"hidden",children:[Object(Kr.jsxs)(Nc,{size:6,overflow:"hidden",children:[Object(Kr.jsxs)(ec,{justifyContent:"between",alignItems:"center",children:[Object(Kr.jsxs)(Zc,{children:[nt("inventory.trading.you")," ",nt("inventory.trading.areoffering"),":"]}),x(b.accepts)]}),Object(Kr.jsx)(Zr,{columnCount:3,children:Array.from(Array(9),((e,t)=>{const s=b.userItems.getWithIndex(t)||null;return s?Object(Kr.jsx)(wc,{itemActive:r===s,itemImage:s.iconUrl,itemCount:s.getTotalCount(),itemUniqueNumber:s.stuffData.uniqueNumber,onClick:e=>i(s),classNames:["nitro-inventory-el"],children:r===s&&Object(Kr.jsx)(tc,{position:"absolute",variant:"danger",className:"trade-button bottom-1 start-1",onClick:e=>_(s),children:Object(Kr.jsx)(ic.a,{icon:"chevron-left"})})},t):Object(Kr.jsx)(wc,{classNames:["nitro-inventory-el"]},t)}))}),Object(Kr.jsx)(Qr,{fullWidth:!0,className:"badge bg-muted",children:r?r.name:nt("catalog_selectproduct")})]}),Object(Kr.jsxs)(Nc,{size:6,overflow:"hidden",children:[Object(Kr.jsxs)(ec,{justifyContent:"between",alignItems:"center",children:[Object(Kr.jsxs)(Zc,{children:[g.userName," ",nt("inventory.trading.isoffering"),":"]}),x(g.accepts)]}),Object(Kr.jsx)(Zr,{columnCount:3,children:Array.from(Array(9),((e,t)=>{const s=g.userItems.getWithIndex(t)||null;return s?Object(Kr.jsx)(wc,{itemActive:o===s,itemImage:s.iconUrl,itemCount:s.getTotalCount(),itemUniqueNumber:s.stuffData.uniqueNumber,onClick:e=>l(s),classNames:["nitro-inventory-el"]},t):Object(Kr.jsx)(wc,{classNames:["nitro-inventory-el"]},t)}))}),Object(Kr.jsx)(Qr,{fullWidth:!0,className:"badge bg-muted w-100",children:o?o.name:nt("catalog_selectproduct")})]})]}),Object(Kr.jsxs)(ec,{grow:!0,justifyContent:"between",children:[Object(Kr.jsx)(tc,{variant:"danger",onClick:t,children:nt("generic.cancel")}),m===$s.TRADING_STATE_READY&&Object(Kr.jsx)(tc,{variant:"secondary",disabled:!b.itemCount&&!g.itemCount,onClick:p,children:nt("inventory.trading.accept")}),m===$s.TRADING_STATE_RUNNING&&Object(Kr.jsx)(tc,{variant:"secondary",disabled:!b.itemCount&&!g.itemCount,onClick:p,children:nt(b.accepts?"inventory.trading.modify":"inventory.trading.accept")}),m===$s.TRADING_STATE_COUNTDOWN&&Object(Kr.jsx)(tc,{variant:"secondary",disabled:!0,children:nt("inventory.trading.countdown",["counter"],[h.toString()])}),m===$s.TRADING_STATE_CONFIRMING&&Object(Kr.jsx)(tc,{variant:"secondary",onClick:p,children:nt("inventory.trading.button.restore")}),m===$s.TRADING_STATE_CONFIRMED&&Object(Kr.jsx)(tc,{variant:"secondary",children:nt("inventory.trading.info.waiting")})]})]})]}):null},hu=e=>{const{petItem:t=null,children:s=null,...n}=e,[r,i]=Object(c.useState)(!1),{selectedPet:o=null,setSelectedPet:l=null}=gs(),{isUnseen:u}=cs(),d=u(qs.PET,t.petData.id),h=e=>{switch(e.type){case a.Ce.MOUSE_DOWN:return l(t),void i(!0);case a.Ce.MOUSE_UP:return void i(!1);case a.Ce.ROLL_OUT:if(!r||t!==o)return;return void Gs(t)}};return Object(Kr.jsxs)(wc,{itemActive:t===o,itemUnseen:d,onMouseDown:h,onMouseUp:h,onMouseOut:h,...n,children:[Object(Kr.jsx)(Gc,{figure:t.petData.figureData.figuredata,direction:3,headOnly:!0}),s]})},ju=e=>{const{roomSession:t=null,roomPreviewer:s=null}=e,[n,r]=Object(c.useState)(!1),{petItems:i=null,selectedPet:o=null,activate:l=null,deactivate:u=null}=gs(),{isUnseen:d=null,removeUnseen:h=null}=cs();return Object(c.useEffect)((()=>{if(!o||!s)return;const e=o.petData,t=L();let n=t.getRoomInstanceVariable(t.activeRoomId,a.Og.ROOM_WALL_TYPE),r=t.getRoomInstanceVariable(t.activeRoomId,a.Og.ROOM_FLOOR_TYPE),c=t.getRoomInstanceVariable(t.activeRoomId,a.Og.ROOM_LANDSCAPE_TYPE);n=n&&n.length?n:"101",r=r&&r.length?r:"101",c=c&&c.length?c:"1.1",s.reset(!1),s.updateRoomWallsAndFloorVisibility(!0,!0),s.updateObjectRoom(r,n,c),s.addPetIntoRoom(e.figureString)}),[s,o]),Object(c.useEffect)((()=>{o&&d(qs.PET,o.petData.id)&&h(qs.PET,o.petData.id)}),[o,d,h]),Object(c.useEffect)((()=>{if(!n)return;const e=l();return()=>u(e)}),[n,l,u]),Object(c.useEffect)((()=>(r(!0),()=>r(!1))),[]),i&&i.length?Object(Kr.jsxs)(Jr,{children:[Object(Kr.jsx)(Nc,{size:7,overflow:"hidden",children:Object(Kr.jsx)(Zr,{columnCount:5,children:i&&i.length>0&&i.map((e=>Object(Kr.jsx)(hu,{petItem:e},e.petData.id)))})}),Object(Kr.jsxs)(Nc,{size:5,overflow:"auto",children:[Object(Kr.jsx)(Nc,{overflow:"hidden",position:"relative",children:Object(Kr.jsx)(qc,{roomPreviewer:s,height:140})}),o&&o.petData&&Object(Kr.jsxs)(Nc,{grow:!0,justifyContent:"between",gap:2,children:[Object(Kr.jsx)(Zc,{grow:!0,truncate:!0,children:o.petData.name}),!!t&&Object(Kr.jsx)(tc,{variant:"success",onClick:e=>Gs(o),children:nt("inventory.furni.placetoroom")})]})]})]}):Object(Kr.jsx)(cu,{title:nt("inventory.empty.pets.title"),desc:nt("inventory.empty.pets.desc")})},bu="inventory.furni",gu="inventory.bots",Ou="inventory.furni.tab.pets",mu="inventory.badges",pu=[bu,gu,Ou,mu],_u=[qs.FURNI,qs.BOT,qs.PET,qs.BADGE],Eu=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(pu[0]),[i,o]=Object(c.useState)(null),[l,u]=Object(c.useState)(null),{isTrading:d=!1,stopTrading:h=null}=ms(),{getCount:j=null,resetCategory:b=null}=cs(),g=()=>{d&&h(),s(!1)},O=Object(c.useCallback)((e=>{Ps&&(Ls(!1),e.placedInRoom||s(!0))}),[]);Bt(a.pg.PLACED,O);const m=Object(c.useCallback)((e=>{switch(e.type){case a.Yg.CREATED:return void o(e.session);case a.Yg.ENDED:return o(null),void s(!1)}}),[]);Gt(a.Yg.CREATED,m),Gt(a.Yg.ENDED,m);const p=Object(c.useCallback)((e=>{const t=e.getParser();for(const s of t.data)U().setBadgePointLimit(s.badgeId,s.limit)}),[]);return it(a.t,p),Object(c.useEffect)((()=>{const e={linkReceived:e=>{const t=e.split("/");if(!(t.length<2))switch(t[1]){case"show":return void s(!0);case"hide":return void s(!1);case"toggle":return void s((e=>!e))}},eventUrlPrefix:"inventory/"};return S(e),()=>M(e)}),[]),Object(c.useEffect)((()=>(u(new a.Qg(L(),++a.Qg.PREVIEW_COUNTER)),()=>{u((e=>(e.dispose(),null)))})),[]),Object(c.useEffect)((()=>{!t&&d&&s(!0)}),[t,d]),t?Object(Kr.jsxs)(_c,{uniqueKey:"inventory",className:"nitro-inventory",theme:d?"primary-slim":"",children:[Object(Kr.jsx)(hc,{headerText:nt("inventory.title"),onCloseClick:g}),!d&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)($c,{children:pu.map(((e,t)=>Object(Kr.jsx)(Qc,{isActive:n===e,onClick:t=>r(e),count:j(_u[t]),children:nt(e)},t)))}),Object(Kr.jsxs)(lc,{children:[n===bu&&Object(Kr.jsx)(uu,{roomSession:i,roomPreviewer:l}),n===gu&&Object(Kr.jsx)(au,{roomSession:i,roomPreviewer:l}),n===Ou&&Object(Kr.jsx)(ju,{roomSession:i,roomPreviewer:l}),n===mu&&Object(Kr.jsx)(ru,{})]})]}),d&&Object(Kr.jsx)(lc,{children:Object(Kr.jsx)(du,{cancelTrade:g})})]}):null},fu=Object(c.createContext)({modToolsState:null,dispatchModToolsState:null}),xu=e=>Object(Kr.jsx)(fu.Provider,{value:e.value,children:e.children}),Iu=()=>Object(c.useContext)(fu);class Tu{}Tu.SET_INIT_DATA="MTA_SET_INIT_DATA",Tu.SET_CURRENT_ROOM_ID="MTA_SET_CURRENT_ROOM_ID",Tu.SET_OPEN_ROOMS="MTA_SET_OPEN_ROOMS",Tu.SET_OPEN_USERINFO="MTA_SET_OPEN_USERINFO",Tu.SET_OPEN_ROOM_CHATLOGS="MTA_SET_OPEN_CHATLOGS",Tu.SET_OPEN_USER_CHATLOGS="MTA_SET_OPEN_USER_CHATLOGS",Tu.SET_TICKETS="MTA_SET_TICKETS",Tu.SET_CFH_CATEGORIES="MTA_SET_CFH_CATEGORIES",Tu.RESET_STATE="MTA_RESET_STATE";const Cu={settings:null,currentRoomId:null,openRooms:null,openRoomChatlogs:null,openUserChatlogs:null,openUserInfo:null,tickets:null,cfhCategories:null},Su=(e,t)=>{switch(t.type){case Tu.SET_INIT_DATA:{const s=t.payload.settings||e.settings||null;return{...e,settings:s}}case Tu.SET_CURRENT_ROOM_ID:{const s=t.payload.currentRoomId||e.currentRoomId||null;return{...e,currentRoomId:s}}case Tu.SET_OPEN_ROOMS:{const s=t.payload.openRooms||e.openRooms||null;return{...e,openRooms:s}}case Tu.SET_OPEN_USERINFO:{const s=t.payload.openUserInfo||e.openUserInfo||null;return{...e,openUserInfo:s}}case Tu.SET_OPEN_ROOM_CHATLOGS:{const s=t.payload.openRoomChatlogs||e.openRoomChatlogs||null;return{...e,openRoomChatlogs:s}}case Tu.SET_OPEN_USER_CHATLOGS:{const s=t.payload.openUserChatlogs||e.openUserChatlogs||null;return{...e,openUserChatlogs:s}}case Tu.SET_TICKETS:{const s=t.payload.tickets||e.tickets||null;return{...e,tickets:s}}case Tu.SET_CFH_CATEGORIES:{const s=t.payload.cfhCategories||e.cfhCategories||null;return{...e,cfhCategories:s}}case Tu.RESET_STATE:return{...Cu};default:return e}},Nu=e=>{const{modToolsState:t=null,dispatchModToolsState:s=null}=Iu(),{openRooms:n=null,openRoomChatlogs:r=null,openUserChatlogs:i=null,openUserInfo:o=null,tickets:l=null}=t,u=Object(c.useCallback)((e=>{const t=e.getParser();if(!t)return;const n=t.data;s({type:Tu.SET_INIT_DATA,payload:{settings:n}}),s({type:Tu.SET_TICKETS,payload:{tickets:n.issues}})}),[s]),d=Object(c.useCallback)((e=>{const t=e.getParser();if(!t)return;const n=l?Array.from(l):[],r=n.findIndex((e=>e.issueId===t.issueData.issueId));r>-1?n[r]=t.issueData:(n.push(t.issueData),Ns(an.MODTOOLS_NEW_TICKET)),s({type:Tu.SET_TICKETS,payload:{tickets:n}})}),[s,l]),h=Object(c.useCallback)((e=>{e.getParser()}),[]),j=Object(c.useCallback)((e=>{e.getParser()&&Pr.simpleAlert("Failed to pick issue",yr.DEFAULT,null,null,"Error")}),[]),b=Object(c.useCallback)((e=>{const t=e.getParser();if(!t)return;const n=l?Array.from(l):[],r=n.findIndex((e=>e.issueId===t.issueId));-1!==r&&(n.splice(r,1),s({type:Tu.SET_TICKETS,payload:{tickets:n}}))}),[s,l]),g=Object(c.useCallback)((e=>{const t=e.getParser();t&&(t.success?Pr.simpleAlert("Moderation action was successfull",yr.MODERATION,null,null,"Success"):Pr.simpleAlert("There was a problem applying tht moderation action",yr.MODERATION,null,null,"Error"))}),[]),O=Object(c.useCallback)((e=>{const t=e.getParser();if(!t)return;const n=t.callForHelpCategories;s({type:Tu.SET_CFH_CATEGORIES,payload:{cfhCategories:n}}),(e=>{Yl=e})(n)}),[s]),m=Object(c.useCallback)((e=>{e.getParser()}),[]);it(a.we,u),it(a.Rd,d),it(a.ze,h),it(a.Td,j),it(a.Qd,b),it(a.ue,g),it(a.bb,O),it(a.ab,m);const p=Object(c.useCallback)((e=>{switch(e.type){case a.og.INITIALIZED:return void s({type:Tu.SET_CURRENT_ROOM_ID,payload:{currentRoomId:e.roomId}});case a.og.DISPOSED:return void s({type:Tu.SET_CURRENT_ROOM_ID,payload:{currentRoomId:null}})}}),[s]);Bt(a.og.INITIALIZED,p),Bt(a.og.DISPOSED,p);const _=Object(c.useCallback)((e=>{switch(e.type){case It.OPEN_ROOM_INFO:{const t=e;if(n&&n.includes(t.roomId))return;const r=n||[];return void s({type:Tu.SET_OPEN_ROOMS,payload:{openRooms:[...r,t.roomId]}})}case It.OPEN_ROOM_CHATLOG:{const t=e;if(r&&r.includes(t.roomId))return;const n=r||[];return void s({type:Tu.SET_OPEN_ROOM_CHATLOGS,payload:{openRoomChatlogs:[...n,t.roomId]}})}case It.OPEN_USER_INFO:{const t=e;if(o&&o.includes(t.userId))return;const n=o||[];return void s({type:Tu.SET_OPEN_USERINFO,payload:{openUserInfo:[...n,t.userId]}})}case It.OPEN_USER_CHATLOG:{const t=e;if(i&&i.includes(t.userId))return;const n=i||[];return void s({type:Tu.SET_OPEN_USER_CHATLOGS,payload:{openUserChatlogs:[...n,t.userId]}})}}}),[n,s,r,o,i]);return qt(It.OPEN_ROOM_INFO,_),qt(It.OPEN_ROOM_CHATLOG,_),qt(It.OPEN_USER_INFO,_),qt(It.OPEN_USER_CHATLOG,_),null},vu=e=>{const{records:t=null}=e,s=e=>{let s=t[0].chatlog[e.index];return Object(Kr.jsx)(Za.b,{cache:a,columnIndex:0,parent:e.parent,rowIndex:e.index,children:Object(Kr.jsxs)(Jr,{fullHeight:!1,style:e.style,gap:1,alignItems:"center",className:"log-entry py-1 border-bottom",children:[Object(Kr.jsx)(Zc,{className:"g-col-2",children:s.timestamp}),Object(Kr.jsx)(Zc,{className:"g-col-3",bold:!0,underline:!0,pointer:!0,onClick:e=>Vt(new Nt(s.userId)),children:s.userName}),Object(Kr.jsx)(Zc,{textBreak:!0,wrap:!0,className:"g-col-7",children:s.message})]},e.key)},e.key)},n=e=>{let s=null,n=null,r=!1,c=0;for(let i=0;i<t.length;i++){if(n=t[i],c++,c+=n.chatlog.length,e.index>c-1)continue;if(e.index+1===c-n.chatlog.length){r=!0;break}const a=e.index-(c-n.chatlog.length);s=n.chatlog[a];break}return Object(Kr.jsxs)(Za.b,{cache:a,columnIndex:0,parent:e.parent,rowIndex:e.index,children:[r&&n&&Object(Kr.jsx)(i,{roomId:n.roomId,roomName:n.roomName,uniqueKey:e.key,style:e.style}),!r&&Object(Kr.jsxs)(Jr,{fullHeight:!1,style:e.style,gap:1,alignItems:"center",className:"log-entry py-1 border-bottom",children:[Object(Kr.jsx)(Zc,{className:"g-col-2",children:s.timestamp}),Object(Kr.jsx)(Zc,{className:"g-col-3",bold:!0,underline:!0,pointer:!0,onClick:e=>Vt(new Nt(s.userId)),children:s.userName}),Object(Kr.jsx)(Zc,{textBreak:!0,wrap:!0,className:"g-col-7",children:s.message})]},e.key)]},e.key)},r=Object(c.useCallback)((()=>{let e=0;for(let s=0;s<t.length;s++)e++,e+=t[s].chatlog.length;return e}),[t]),i=e=>Object(Kr.jsxs)(ec,{gap:2,alignItems:"center",justifyContent:"between",className:"room-info bg-muted rounded py-1 px-2 w-100",style:e.style,children:[Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:"Room name:"}),Object(Kr.jsx)(Zc,{children:e.roomName})]}),Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)(tc,{onClick:t=>Ar(e.roomId),children:"Visit Room"}),Object(Kr.jsx)(tc,{onClick:t=>Vt(new Ct(e.roomId)),children:"Room Tools"})]})]},e.uniqueKey),a=new Za.c({defaultHeight:25,fixedWidth:!0});return Object(Kr.jsxs)(Kr.Fragment,{children:[t&&1===t.length&&Object(Kr.jsx)(i,{roomId:t[0].roomId,roomName:t[0].roomName,uniqueKey:null,style:{}}),Object(Kr.jsxs)(Nc,{fit:!0,gap:0,overflow:"hidden",children:[Object(Kr.jsx)(Nc,{gap:2,children:Object(Kr.jsxs)(Jr,{gap:1,className:"text-black fw-bold border-bottom pb-1",children:[Object(Kr.jsx)(Qr,{className:"g-col-2",children:"Time"}),Object(Kr.jsx)(Qr,{className:"g-col-3",children:"User"}),Object(Kr.jsx)(Qr,{className:"g-col-7",children:"Message"})]})}),t&&t.length>0&&Object(Kr.jsx)(Nc,{className:"log-container striped-children",overflow:"auto",gap:0,children:Object(Kr.jsx)(Za.a,{defaultWidth:400,defaultHeight:200,children:e=>{let{height:c,width:i}=e;return a.clearAll(),Object(Kr.jsx)(Za.d,{width:i,height:c,rowCount:t.length>1?r():t[0].chatlog.length,rowHeight:a.rowHeight,className:"log-entry-container",rowRenderer:t.length>1?n:s,deferredMeasurementCache:a})}})})]})]})},Ru=e=>{const{roomId:t=null,onCloseClick:s=null}=e,[n,r]=Object(c.useState)(null),i=Object(c.useCallback)((e=>{const s=e.getParser();s&&s.data.roomId===t&&r(s.data)}),[t]);return it(a.dg,i),Object(c.useEffect)((()=>{$n(new a.xc(t))}),[t]),n?Object(Kr.jsxs)(_c,{className:"nitro-mod-tools-chatlog",theme:"primary-slim",windowPosition:gc.TOP_LEFT,children:[Object(Kr.jsx)(hc,{headerText:`Room Chatlog ${n.roomName}`,onCloseClick:s}),Object(Kr.jsx)(lc,{className:"text-black h-100",children:n&&Object(Kr.jsx)(vu,{records:[n]})})]}):null},Au=e=>{const{roomId:t=null,onCloseClick:s=null}=e,[n,r]=Object(c.useState)(!1),[i,o]=Object(c.useState)(null),[l,u]=Object(c.useState)(null),[d,h]=Object(c.useState)(null),[j,b]=Object(c.useState)(null),[g,O]=Object(c.useState)(!1),[m,p]=Object(c.useState)(0),[_,E]=Object(c.useState)(!1),[f,x]=Object(c.useState)(!1),[I,T]=Object(c.useState)(!1),[C,S]=Object(c.useState)(""),N=Object(c.useCallback)((e=>{const s=e.getParser();s&&s.data.flatId===t&&(o(s.data.flatId),u(s.data.room.name),h(s.data.ownerId),b(s.data.ownerName),O(s.data.ownerInRoom),p(s.data.userCount))}),[t]);it(a.ye,N);const v=Object(c.useCallback)(((e,s)=>{if(e)switch(e){case"alert_only":if(0===C.trim().length)return;return $n(new a.te(a.te.ACTION_ALERT,C,"")),void $n(new a.se(t,f?1:0,I?1:0,_?1:0));case"send_message":if(0===C.trim().length)return;return $n(new a.te(a.te.ACTION_MESSAGE,C,"")),void $n(new a.se(t,f?1:0,I?1:0,_?1:0))}}),[I,_,f,C,t]);return Object(c.useEffect)((()=>{n||($n(new a.rc(t)),r(!0))}),[t,n,r]),Object(Kr.jsxs)(_c,{className:"nitro-mod-tools-room",theme:"primary-slim",windowPosition:gc.TOP_LEFT,children:[Object(Kr.jsx)(hc,{headerText:"Room Info"+(l?": "+l:""),onCloseClick:e=>s()}),Object(Kr.jsxs)(lc,{className:"text-black",children:[Object(Kr.jsxs)(ec,{gap:2,children:[Object(Kr.jsxs)(Nc,{justifyContent:"center",grow:!0,gap:1,children:[Object(Kr.jsxs)(ec,{alignItems:"center",gap:2,children:[Object(Kr.jsx)(Zc,{bold:!0,align:"end",className:"col-7",children:"Room Owner:"}),Object(Kr.jsx)(Zc,{underline:!0,pointer:!0,truncate:!0,children:j})]}),Object(Kr.jsxs)(ec,{alignItems:"center",gap:2,children:[Object(Kr.jsx)(Zc,{bold:!0,align:"end",className:"col-7",children:"Users in room:"}),Object(Kr.jsx)(Zc,{children:m})]}),Object(Kr.jsxs)(ec,{alignItems:"center",gap:2,children:[Object(Kr.jsx)(Zc,{bold:!0,align:"end",className:"col-7",children:"Owner in room:"}),Object(Kr.jsx)(Zc,{children:g?"Yes":"No"})]})]}),Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(tc,{onClick:e=>Ar(t),children:"Visit Room"}),Object(Kr.jsx)(tc,{onClick:e=>Vt(new Tt(t)),children:"Chatlog"})]})]}),Object(Kr.jsxs)(Nc,{className:"bg-muted rounded p-2",gap:1,children:[Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)("input",{className:"form-check-input",type:"checkbox",checked:_,onChange:e=>E(e.target.checked)}),Object(Kr.jsx)(Zc,{small:!0,children:"Kick everyone out"})]}),Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)("input",{className:"form-check-input",type:"checkbox",checked:f,onChange:e=>x(e.target.checked)}),Object(Kr.jsx)(Zc,{small:!0,children:"Enable the doorbell"})]}),Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)("input",{className:"form-check-input",type:"checkbox",checked:I,onChange:e=>T(e.target.checked)}),Object(Kr.jsx)(Zc,{small:!0,children:"Change room name"})]})]}),Object(Kr.jsx)("textarea",{className:"form-control",placeholder:"Type a mandatory message to the users in this text box...",value:C,onChange:e=>S(e.target.value)}),Object(Kr.jsxs)(ec,{justifyContent:"between",children:[Object(Kr.jsx)(tc,{variant:"danger",onClick:e=>v("send_message"),children:"Send Caution"}),Object(Kr.jsx)(tc,{onClick:e=>v("alert_only"),children:"Send Alert only"})]})]})]})},yu=e=>{switch(e){case 1:case 2:return"Normal";case 3:return"Automatic";case 4:return"Automatic IM";case 5:return"Guide System";case 6:return"IM";case 7:return"Room";case 8:return"Panic";case 9:return"Guardian";case 10:return"Automatic Helper";case 11:return"Discussion";case 12:return"Selfie";case 14:return"Photo";case 15:return"Ambassador";default:return"Unknown"}},wu=e=>{const{onCloseClick:t=null,issueId:s=null}=e,[n,r]=Object(c.useState)(null);Object(c.useEffect)((()=>{$n(new a.gc(s))}),[s]);const i=Object(c.useCallback)((e=>{const t=e.getParser();t&&t.data.issueId===s&&r(t.data)}),[s]);return it(a.Z,i),Object(Kr.jsxs)(_c,{className:"nitro-mod-tools-chatlog",theme:"primary-slim",children:[Object(Kr.jsx)(hc,{headerText:"Issue Chatlog",onCloseClick:t}),Object(Kr.jsx)(lc,{className:"text-black",children:n&&Object(Kr.jsx)(vu,{records:[n.chatRecord]})})]})},ku=e=>{const{issueId:t=null,onIssueInfoClosed:s=null}=e,{modToolsState:n=null}=Iu(),{tickets:r=null}=n,[i,o]=Object(c.useState)(!1),l=Object(c.useMemo)((()=>r&&r.length?r.find((e=>e.issueId===t)):null),[t,r]),u=e=>{$n(new a.fb([t],e)),s(t)},d=e=>Vt(new Nt(e));return Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsxs)(_c,{className:"nitro-mod-tools-handle-issue",theme:"primary-slim",children:[Object(Kr.jsx)(hc,{headerText:"Resolving issue "+t,onCloseClick:()=>s(t)}),Object(Kr.jsxs)(lc,{className:"text-black",children:[Object(Kr.jsx)(Zc,{fontSize:4,children:"Issue Information"}),Object(Kr.jsxs)(Jr,{overflow:"auto",children:[Object(Kr.jsx)(Nc,{size:8,children:Object(Kr.jsx)("table",{className:"table table-striped table-sm table-text-small text-black m-0",children:Object(Kr.jsxs)("tbody",{children:[Object(Kr.jsxs)("tr",{children:[Object(Kr.jsx)("th",{children:"Source"}),Object(Kr.jsx)("td",{children:yu(l.categoryId)})]}),Object(Kr.jsxs)("tr",{children:[Object(Kr.jsx)("th",{children:"Category"}),Object(Kr.jsx)("td",{className:"text-break",children:nt("help.cfh.topic."+l.reportedCategoryId)})]}),Object(Kr.jsxs)("tr",{children:[Object(Kr.jsx)("th",{children:"Description"}),Object(Kr.jsx)("td",{className:"text-break",children:l.message})]}),Object(Kr.jsxs)("tr",{children:[Object(Kr.jsx)("th",{children:"Caller"}),Object(Kr.jsx)("td",{children:Object(Kr.jsx)(Zc,{bold:!0,underline:!0,pointer:!0,onClick:e=>d(l.reporterUserId),children:l.reporterUserName})})]}),Object(Kr.jsxs)("tr",{children:[Object(Kr.jsx)("th",{children:"Reported User"}),Object(Kr.jsx)("td",{children:Object(Kr.jsx)(Zc,{bold:!0,underline:!0,pointer:!0,onClick:e=>d(l.reportedUserId),children:l.reportedUserName})})]})]})})}),Object(Kr.jsxs)(Nc,{size:4,gap:1,children:[Object(Kr.jsx)(tc,{variant:"secondary",onClick:()=>o(!i),children:"Chatlog"}),Object(Kr.jsx)(tc,{onClick:e=>u(a.fb.RESOLUTION_USELESS),children:"Close as useless"}),Object(Kr.jsx)(tc,{variant:"danger",onClick:e=>u(a.fb.RESOLUTION_ABUSIVE),children:"Close as abusive"}),Object(Kr.jsx)(tc,{variant:"success",onClick:e=>u(a.fb.RESOLUTION_RESOLVED),children:"Close as resolved"}),Object(Kr.jsx)(tc,{variant:"secondary",onClick:e=>(e=>{$n(new a.Nf([e])),s(e)})(t),children:"Release"})]})]})]})]}),i&&Object(Kr.jsx)(wu,{issueId:t,onCloseClick:()=>o(!1)})]})},Du=e=>{const{myIssues:t=null,onIssueHandleClick:s=null}=e;return Object(Kr.jsxs)(Nc,{gap:0,overflow:"hidden",children:[Object(Kr.jsx)(Nc,{gap:2,children:Object(Kr.jsxs)(Jr,{gap:1,className:"text-black fw-bold border-bottom pb-1",children:[Object(Kr.jsx)(Qr,{className:"g-col-2",children:"Type"}),Object(Kr.jsx)(Qr,{className:"g-col-3",children:"Room/Player"}),Object(Kr.jsx)(Qr,{className:"g-col-3",children:"Opened"}),Object(Kr.jsx)(Qr,{className:"g-col-2"}),Object(Kr.jsx)(Qr,{className:"g-col-2"})]})}),Object(Kr.jsx)(Nc,{overflow:"auto",className:"striped-children",gap:0,children:t&&t.length>0&&t.map((e=>Object(Kr.jsxs)(Jr,{gap:1,alignItems:"center",className:"text-black py-1 border-bottom",children:[Object(Kr.jsx)(Qr,{className:"g-col-2",children:e.categoryId}),Object(Kr.jsx)(Qr,{className:"g-col-3",children:e.reportedUserName}),Object(Kr.jsx)(Qr,{className:"g-col-3",children:new Date(Date.now()-e.issueAgeInMilliseconds).toLocaleTimeString()}),Object(Kr.jsx)(Qr,{className:"g-col-2",children:Object(Kr.jsx)(tc,{variant:"primary",onClick:t=>s(e.issueId),children:"Handle"})}),Object(Kr.jsx)(Qr,{className:"g-col-2",children:Object(Kr.jsx)(tc,{variant:"danger",onClick:t=>{return s=e.issueId,$n(new a.Nf([s]));var s},children:"Release"})})]},e.issueId)))})]})},Uu=e=>{const{openIssues:t=null}=e;return Object(Kr.jsxs)(Nc,{gap:0,overflow:"hidden",children:[Object(Kr.jsx)(Nc,{gap:2,children:Object(Kr.jsxs)(Jr,{gap:1,className:"text-black fw-bold border-bottom pb-1",children:[Object(Kr.jsx)(Qr,{className:"g-col-2",children:"Type"}),Object(Kr.jsx)(Qr,{className:"g-col-3",children:"Room/Player"}),Object(Kr.jsx)(Qr,{className:"g-col-4",children:"Opened"}),Object(Kr.jsx)(Qr,{className:"g-col-3"})]})}),Object(Kr.jsx)(Nc,{overflow:"auto",className:"striped-children",gap:0,children:t&&t.length>0&&t.map((e=>Object(Kr.jsxs)(Jr,{gap:1,alignItems:"center",className:"text-black py-1 border-bottom",children:[Object(Kr.jsx)(Qr,{className:"g-col-2",children:e.categoryId}),Object(Kr.jsx)(Qr,{className:"g-col-3",children:e.reportedUserName}),Object(Kr.jsx)(Qr,{className:"g-col-4",children:new Date(Date.now()-e.issueAgeInMilliseconds).toLocaleTimeString()}),Object(Kr.jsx)(Qr,{className:"g-col-3",children:Object(Kr.jsx)(tc,{variant:"success",onClick:t=>{return s=e.issueId,$n(new a.wf([s],!1,0,"pick issue button"));var s},children:"Pick Issue"})})]},e.issueId)))})]})},Pu=e=>{const{pickedIssues:t=null}=e;return Object(Kr.jsxs)(Nc,{gap:0,overflow:"hidden",children:[Object(Kr.jsx)(Nc,{gap:2,children:Object(Kr.jsxs)(Jr,{gap:1,className:"text-black fw-bold border-bottom pb-1",children:[Object(Kr.jsx)(Qr,{className:"g-col-2",children:"Type"}),Object(Kr.jsx)(Qr,{className:"g-col-3",children:"Room/Player"}),Object(Kr.jsx)(Qr,{className:"g-col-4",children:"Opened"}),Object(Kr.jsx)(Qr,{className:"g-col-3",children:"Picker"})]})}),Object(Kr.jsx)(Nc,{overflow:"auto",className:"striped-children",gap:0,children:t&&t.length>0&&t.map((e=>Object(Kr.jsxs)(Jr,{gap:1,alignItems:"center",className:"text-black py-1 border-bottom",children:[Object(Kr.jsx)(Qr,{className:"g-col-2",children:e.categoryId}),Object(Kr.jsx)(Qr,{className:"g-col-3",children:e.reportedUserName}),Object(Kr.jsx)(Qr,{className:"g-col-4",children:new Date(Date.now()-e.issueAgeInMilliseconds).toLocaleTimeString()}),Object(Kr.jsx)(Qr,{className:"g-col-3",children:e.pickerUserName})]},e.issueId)))})]})},Mu=["Open Issues","My Issues","Picked Issues"],Lu=e=>{const{onCloseClick:t=null}=e,{modToolsState:s=null}=Iu(),{tickets:n=null}=s,[r,i]=Object(c.useState)(0),[o,l]=Object(c.useState)([]),u=Object(c.useMemo)((()=>n?n.filter((e=>e.state===a.Sd.STATE_OPEN)):[]),[n]),d=Object(c.useMemo)((()=>n?n.filter((e=>e.state===a.Sd.STATE_PICKED&&e.pickerUserId===ee().userId)):[]),[n]),h=Object(c.useMemo)((()=>n?n.filter((e=>e.state===a.Sd.STATE_PICKED)):[]),[n]),j=Object(c.useCallback)((e=>{const t=o.indexOf(e);if(-1===t)return;const s=Array.from(o);s.splice(t,1),l(s)}),[o]),b=Object(c.useCallback)((e=>{if(-1===o.indexOf(e)){const t=Array.from(o);t.push(e),l(t)}else j(e)}),[o,j]),g=Object(c.useCallback)((()=>{switch(r){case 0:return Object(Kr.jsx)(Uu,{openIssues:u});case 1:return Object(Kr.jsx)(Du,{myIssues:d,onIssueHandleClick:b});case 2:return Object(Kr.jsx)(Pu,{pickedIssues:h});default:return null}}),[r,d,b,u,h]);return Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsxs)(_c,{className:"nitro-mod-tools-tickets",children:[Object(Kr.jsx)(hc,{headerText:"Tickets",onCloseClick:t}),Object(Kr.jsx)($c,{children:Mu.map(((e,t)=>Object(Kr.jsx)(Qc,{isActive:r===t,onClick:e=>i(t),children:e},t)))}),Object(Kr.jsx)(lc,{gap:1,children:Object(Kr.jsx)(g,{})})]}),o&&o.length>0&&o.map((e=>Object(Kr.jsx)(ku,{issueId:e,onIssueInfoClosed:j},e)))]})},Fu=e=>{const{userId:t=null,onCloseClick:s=null}=e,[n,r]=Object(c.useState)(null),[i,o]=Object(c.useState)(null),l=Object(c.useCallback)((e=>{const s=e.getParser();s&&s.data.userId===t&&(o(s.data.username),r(s.data.roomChatlogs))}),[t]);return it(a.xi,l),Object(c.useEffect)((()=>{$n(new a.Bc(t))}),[t]),Object(Kr.jsxs)(_c,{className:"nitro-mod-tools-chatlog",theme:"primary-slim",windowPosition:gc.TOP_LEFT,children:[Object(Kr.jsx)(hc,{headerText:`User Chatlog: ${i||""}`,onCloseClick:s}),Object(Kr.jsx)(lc,{className:"text-black h-100",children:n&&Object(Kr.jsx)(vu,{records:n})})]})};class Hu{constructor(e,t,s,n,r){this._actionId=void 0,this._name=void 0,this._actionType=void 0,this._sanctionTypeId=void 0,this._actionLengthHours=void 0,this._actionId=e,this._name=t,this._actionType=s,this._sanctionTypeId=n,this._actionLengthHours=r}get actionId(){return this._actionId}get name(){return this._name}get actionType(){return this._actionType}get sanctionTypeId(){return this._sanctionTypeId}get actionLengthHours(){return this._actionLengthHours}}Hu.ALERT=1,Hu.MUTE=2,Hu.BAN=3,Hu.KICK=4,Hu.TRADE_LOCK=5,Hu.MESSAGE=6;const Bu=[new Hu(1,"Alert",Hu.ALERT,1,0),new Hu(2,"Mute 1h",Hu.MUTE,2,0),new Hu(3,"Ban 18h",Hu.BAN,3,0),new Hu(4,"Ban 7 days",Hu.BAN,4,0),new Hu(5,"Ban 30 days (step 1)",Hu.BAN,5,0),new Hu(7,"Ban 30 days (step 2)",Hu.BAN,7,0),new Hu(6,"Ban 100 years",Hu.BAN,6,0),new Hu(106,"Ban avatar-only 100 years",Hu.BAN,6,0),new Hu(101,"Kick",Hu.KICK,0,0),new Hu(102,"Lock trade 1 week",Hu.TRADE_LOCK,0,168),new Hu(104,"Lock trade permanent",Hu.TRADE_LOCK,0,876e3),new Hu(105,"Message",Hu.MESSAGE,0,0)],Gu=e=>{const{user:t=null,onCloseClick:s=null}=e,[n,r]=Object(c.useState)(-1),[i,o]=Object(c.useState)(-1),[l,u]=Object(c.useState)(""),{modToolsState:d=null}=Iu(),{cfhCategories:h=null,settings:j=null}=d,b=Object(c.useMemo)((()=>{const e=[];if(h&&h.length)for(const t of h)for(const s of t.topics)e.push(s);return e}),[h]),g=e=>{Pr.simpleAlert(e,yr.DEFAULT,null,null,"Error")};return t?Object(Kr.jsxs)(_c,{className:"nitro-mod-tools-user-action",theme:"primary-slim",windowPosition:gc.TOP_LEFT,children:[Object(Kr.jsx)(hc,{headerText:"Mod Action: "+(t?t.username:""),onCloseClick:()=>s()}),Object(Kr.jsxs)(lc,{className:"text-black",children:[Object(Kr.jsxs)("select",{className:"form-select form-select-sm",value:n,onChange:e=>r(parseInt(e.target.value)),children:[Object(Kr.jsx)("option",{value:-1,disabled:!0,children:"CFH Topic"}),b.map(((e,t)=>Object(Kr.jsx)("option",{value:t,children:nt("help.cfh.topic."+e.id)},t)))]}),Object(Kr.jsxs)("select",{className:"form-select form-select-sm",value:i,onChange:e=>o(parseInt(e.target.value)),children:[Object(Kr.jsx)("option",{value:-1,disabled:!0,children:"Sanction Type"}),Bu.map(((e,t)=>Object(Kr.jsx)("option",{value:t,children:e.name},t)))]}),Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{small:!0,children:"Optional message type, overrides default"}),Object(Kr.jsx)("textarea",{className:"form-control",value:l,onChange:e=>u(e.target.value)})]}),Object(Kr.jsxs)(ec,{justifyContent:"between",gap:1,children:[Object(Kr.jsx)(tc,{variant:"primary",onClick:()=>{let e=null;const r=b[n];if(-1===n&&(e="You must select a CFH topic"),e)return g(e);const c=0===l.trim().length?nt(`help.cfh.topic.${r.id}`):l;$n(new a.rb(t.userId,n,c)),s()},children:"Default Sanction"}),Object(Kr.jsx)(tc,{variant:"success",onClick:()=>{let e=null;const r=b[n],c=Bu[i];if(-1===n||-1===i?e="You must select a CFH topic and Sanction":j&&j.cfhPermission?r?c||(e="You must select a sanction"):e="You must select a CFH topic":e="You do not have permission to do this",e)return void g(e);const o=0===l.trim().length?nt(`help.cfh.topic.${r.id}`):l;switch(c.actionType){case Hu.ALERT:if(!j.alertPermission)return void g("You have insufficient permissions");$n(new a.me(t.userId,o,r.id));break;case Hu.MUTE:$n(new a.qe(t.userId,o,r.id));break;case Hu.BAN:if(!j.banPermission)return void g("You have insufficient permissions");$n(new a.ne(t.userId,o,r.id,i,106===c.actionId));break;case Hu.KICK:if(!j.kickPermission)return void g("You have insufficient permissions");$n(new a.oe(t.userId,o,r.id));break;case Hu.TRADE_LOCK:{const e=60*c.actionLengthHours;$n(new a.re(t.userId,o,e,r.id));break}case Hu.MESSAGE:if(0===l.trim().length)return void g("Please write a message to user");$n(new a.pe(t.userId,l,r.id))}s()},children:"Sanction"})]})]})]}):null},Wu=e=>{const{userId:t=null,onCloseClick:s=null}=e,[n,r]=Object(c.useState)(null),i=Object(c.useCallback)((e=>{const s=e.getParser();s&&s.data.userId===t&&r(s.data)}),[t]);it(a.wh,i);const o=e=>{const t=n.rooms[e.index];return Object(Kr.jsxs)(Jr,{fullHeight:!1,style:e.style,gap:1,alignItems:"center",className:"text-black py-1 border-bottom",children:[Object(Kr.jsxs)(Zc,{className:"g-col-2",children:[t.enterHour.toString().padStart(2,"0"),": ",t.enterMinute.toString().padStart(2,"0")]}),Object(Kr.jsx)(Zc,{className:"g-col-7",children:t.roomName}),Object(Kr.jsx)(Zc,{bold:!0,underline:!0,pointer:!0,variant:"primary",className:"g-col-3",onClick:e=>Ar(t.roomId),children:"Visit Room"})]},e.key)};return Object(c.useEffect)((()=>{$n(new a.zc(t))}),[t]),t?Object(Kr.jsxs)(_c,{className:"nitro-mod-tools-user-visits",theme:"primary-slim",windowPosition:gc.TOP_LEFT,children:[Object(Kr.jsx)(hc,{headerText:"User Visits",onCloseClick:s}),Object(Kr.jsx)(lc,{className:"text-black",gap:1,children:Object(Kr.jsxs)(Nc,{fullHeight:!0,gap:0,overflow:"hidden",children:[Object(Kr.jsx)(Nc,{gap:2,children:Object(Kr.jsxs)(Jr,{gap:1,className:"text-black fw-bold border-bottom pb-1",children:[Object(Kr.jsx)(Qr,{className:"g-col-2",children:"Time"}),Object(Kr.jsx)(Qr,{className:"g-col-7",children:"Room name"}),Object(Kr.jsx)(Qr,{className:"g-col-3",children:"Visit"})]})}),Object(Kr.jsx)(Nc,{className:"log-container striped-children",overflow:"auto",gap:0,children:n&&Object(Kr.jsx)(Za.a,{defaultWidth:400,defaultHeight:200,children:e=>{let{height:t,width:s}=e;return Object(Kr.jsx)(Za.d,{width:s,height:t,rowCount:n.rooms.length,rowHeight:25,className:"log-entry-container",rowRenderer:o})}})})]})})]}):null},Vu=e=>{const{user:t=null,onCloseClick:s=null}=e,[n,r]=Object(c.useState)(""),i=Object(c.useCallback)((()=>{0!==n.trim().length?($n(new a.pe(t.userId,n,-999)),s()):Vt(new vt(["Please write a message to user."],null,null,null,"Error",null))}),[n,t,s]);return t?Object(Kr.jsxs)(_c,{className:"nitro-mod-tools-user-message",theme:"primary-slim",windowPosition:gc.TOP_LEFT,children:[Object(Kr.jsx)(hc,{headerText:"Send Message",onCloseClick:()=>s()}),Object(Kr.jsxs)(lc,{className:"text-black",children:[Object(Kr.jsxs)(Zc,{children:["Message To: ",t.username]}),Object(Kr.jsx)("textarea",{className:"form-control",value:n,onChange:e=>r(e.target.value)}),Object(Kr.jsx)(tc,{fullWidth:!0,onClick:i,children:"Send message"})]})]}):null},qu=e=>{const{onCloseClick:t=null,userId:s=null}=e,[n,r]=Object(c.useState)(null),[i,o]=Object(c.useState)(!1),[l,u]=Object(c.useState)(!1),[d,h]=Object(c.useState)(!1),j=Object(c.useCallback)((e=>{const t=e.getParser();t&&t.data.userId===s&&r(t.data)}),[s]);it(a.Ae,j);const b=Object(c.useMemo)((()=>n?[{localeKey:"modtools.userinfo.userName",value:n.userName,showOnline:!0},{localeKey:"modtools.userinfo.cfhCount",value:n.cfhCount.toString()},{localeKey:"modtools.userinfo.abusiveCfhCount",value:n.abusiveCfhCount.toString()},{localeKey:"modtools.userinfo.cautionCount",value:n.cautionCount.toString()},{localeKey:"modtools.userinfo.banCount",value:n.banCount.toString()},{localeKey:"modtools.userinfo.lastSanctionTime",value:n.lastSanctionTime},{localeKey:"modtools.userinfo.tradingLockCount",value:n.tradingLockCount.toString()},{localeKey:"modtools.userinfo.tradingExpiryDate",value:n.tradingExpiryDate},{localeKey:"modtools.userinfo.minutesSinceLastLogin",value:a.Kb.format(60*n.minutesSinceLastLogin,".ago",2)},{localeKey:"modtools.userinfo.lastPurchaseDate",value:n.lastPurchaseDate},{localeKey:"modtools.userinfo.primaryEmailAddress",value:n.primaryEmailAddress},{localeKey:"modtools.userinfo.identityRelatedBanCount",value:n.identityRelatedBanCount.toString()},{localeKey:"modtools.userinfo.registrationAgeInMinutes",value:a.Kb.format(60*n.registrationAgeInMinutes,".ago",2)},{localeKey:"modtools.userinfo.userClassification",value:n.userClassification}]:null),[n]);return Object(c.useEffect)((()=>{$n(new a.sc(s))}),[s]),n?Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsxs)(_c,{className:"nitro-mod-tools-user",theme:"primary-slim",windowPosition:gc.TOP_LEFT,children:[Object(Kr.jsx)(hc,{headerText:nt("modtools.userinfo.title",["username"],[n.userName]),onCloseClick:()=>t()}),Object(Kr.jsx)(lc,{className:"text-black",children:Object(Kr.jsxs)(Jr,{overflow:"hidden",children:[Object(Kr.jsx)(Nc,{size:8,overflow:"auto",children:Object(Kr.jsx)("table",{className:"table table-striped table-sm table-text-small text-black m-0",children:Object(Kr.jsx)("tbody",{children:b.map(((e,t)=>Object(Kr.jsxs)("tr",{children:[Object(Kr.jsx)("th",{scope:"row",children:nt(e.localeKey)}),Object(Kr.jsxs)("td",{children:[e.value,e.showOnline&&Object(Kr.jsx)("i",{className:`icon icon-pf-${n.online?"online":"offline"} ms-2`})]})]},t)))})})}),Object(Kr.jsxs)(Nc,{size:4,gap:1,children:[Object(Kr.jsx)(tc,{onClick:e=>Vt(new St(s)),children:"Room Chat"}),Object(Kr.jsx)(tc,{onClick:e=>o(!i),children:"Send Message"}),Object(Kr.jsx)(tc,{onClick:e=>h(!d),children:"Room Visits"}),Object(Kr.jsx)(tc,{onClick:e=>u(!l),children:"Mod Action"})]})]})})]}),i&&Object(Kr.jsx)(Vu,{user:{userId:s,username:n.userName},onCloseClick:()=>o(!1)}),l&&Object(Kr.jsx)(Gu,{user:{userId:s,username:n.userName},onCloseClick:()=>u(!1)}),d&&Object(Kr.jsx)(Wu,{userId:s,onCloseClick:()=>h(!1)})]}):null},Yu=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(null),[i,o]=Object(c.useState)(!1),[l,u]=Object(c.useReducer)(Su,Cu),{currentRoomId:d=null,openRooms:h=null,openRoomChatlogs:j=null,openUserChatlogs:b=null,openUserInfo:g=null}=l,O=Object(c.useRef)(null),m=Object(c.useCallback)((e=>{switch(e.type){case It.SHOW_MOD_TOOLS:return void s(!0);case It.HIDE_MOD_TOOLS:return void s(!1);case It.TOGGLE_MOD_TOOLS:return void s((e=>!e))}}),[]);qt(It.SHOW_MOD_TOOLS,m),qt(It.HIDE_MOD_TOOLS,m),qt(It.TOGGLE_MOD_TOOLS,m);const p=Object(c.useCallback)((e=>{if(e.category!==a.Ig.UNIT)return;const t=ie();if(!t)return;const s=t.userDataManager.getUserDataByIndex(e.objectId);s&&s.type===a.Mg.USER&&r({userId:s.webID,username:s.name})}),[]);Bt(a.pg.SELECTED,p);const _=Object(c.useCallback)(((e,t)=>{if(e)switch(e){case"toggle_room":return h?void(h.indexOf(d)>-1?_("close_room",d.toString()):Vt(new Ct(d))):void Vt(new Ct(d));case"close_room":{const e=h.indexOf(Number(t)),s=Array.from(h);return s.splice(e,1),void u({type:Tu.SET_OPEN_ROOMS,payload:{openRooms:s}})}case"toggle_room_chatlog":return j?void(j.indexOf(d)>-1?_("close_room_chatlog",d.toString()):Vt(new Tt(d))):void Vt(new Tt(d));case"close_room_chatlog":{const e=j.indexOf(Number(t)),s=Array.from(j);return s.splice(e,1),void u({type:Tu.SET_OPEN_ROOM_CHATLOGS,payload:{openRoomChatlogs:s}})}case"toggle_user_info":{if(!n)return;const e=n.userId;return g?void(g.indexOf(e)>-1?_("close_user_info",e.toString()):Vt(new Nt(e))):void Vt(new Nt(e))}case"close_user_info":{const e=g.indexOf(Number(t)),s=Array.from(g);return s.splice(e,1),void u({type:Tu.SET_OPEN_USERINFO,payload:{openUserInfo:s}})}case"close_user_chatlog":{const e=b.indexOf(Number(t)),s=Array.from(b);return s.splice(e,1),void u({type:Tu.SET_OPEN_USER_CHATLOGS,payload:{openUserChatlogs:s}})}}}),[h,d,j,n,g,b]);return Object(Kr.jsxs)(xu,{value:{modToolsState:l,dispatchModToolsState:u},children:[Object(Kr.jsx)(Nu,{}),t&&Object(Kr.jsxs)(_c,{uniqueKey:"mod-tools",className:"nitro-mod-tools",windowPosition:gc.TOP_LEFT,theme:"primary-slim",children:[Object(Kr.jsx)(hc,{headerText:"Mod Tools",onCloseClick:e=>s(!1)}),Object(Kr.jsxs)(lc,{className:"text-black",gap:1,children:[Object(Kr.jsxs)(tc,{gap:1,onClick:e=>_("toggle_room"),disabled:!d,className:"position-relative",children:[Object(Kr.jsx)(Qr,{className:"icon icon-small-room position-absolute start-1"})," Room Tool"]}),Object(Kr.jsxs)(tc,{innerRef:O,gap:1,onClick:e=>_("toggle_room_chatlog"),disabled:!d,className:"position-relative",children:[Object(Kr.jsx)(Qr,{className:"icon icon-chat-history position-absolute start-1"})," Chatlog Tool"]}),Object(Kr.jsxs)(tc,{gap:1,onClick:()=>_("toggle_user_info"),disabled:!n,className:"position-relative",children:[Object(Kr.jsx)(Qr,{className:"icon icon-user position-absolute start-1"})," User: ",n?n.username:""]}),Object(Kr.jsxs)(tc,{gap:1,onClick:()=>o((e=>!e)),className:"position-relative",children:[Object(Kr.jsx)(Qr,{className:"icon icon-tickets position-absolute start-1"})," Report Tool"]})]})]}),h&&h.map((e=>Object(Kr.jsx)(Au,{roomId:e,onCloseClick:()=>_("close_room",e.toString())},e))),j&&j.map((e=>Object(Kr.jsx)(Ru,{roomId:e,onCloseClick:()=>_("close_room_chatlog",e.toString())},e))),g&&g.map((e=>Object(Kr.jsx)(qu,{userId:e,onCloseClick:()=>_("close_user_info",e.toString())},e))),b&&b.map((e=>Object(Kr.jsx)(Fu,{userId:e,onCloseClick:()=>_("close_user_chatlog",e.toString())},e))),i&&Object(Kr.jsx)(Lu,{onCloseClick:()=>o(!1)})]})},zu=Object(c.createContext)({categories:null,setCategories:null,topLevelContext:null,setTopLevelContext:null,topLevelContexts:null,setTopLevelContexts:null,navigatorData:null,setNavigatorData:null,doorData:null,setDoorData:null,searchResult:null,setSearchResult:null}),Ku=e=>Object(Kr.jsx)(zu.Provider,{value:e.value,children:e.children}),Qu=()=>Object(c.useContext)(zu),$u=e=>{const{setCategories:t=null,setTopLevelContext:s=null,topLevelContexts:n=null,setTopLevelContexts:r=null,setNavigatorData:i=null,setDoorData:o=null,setSearchResult:l=null}=Qu(),u=Object(c.useCallback)((e=>{const t=e.getParser();$n(new a.Cg(t.roomId,!1,!1))}),[]);it(a.kh,u);const d=Object(c.useCallback)((e=>{const t=e.getParser();t.canCreate||Pr.simpleAlert(nt(`navigator.cannotcreateevent.error.${t.errorCode}`),null,null,null,nt("navigator.cannotcreateevent.title"))}),[]);it(a.R,d);const h=Object(c.useCallback)((e=>{$n(new a.De),$n(new a.Le)}),[]),j=Object(c.useCallback)((e=>{const t=e.getParser();i((e=>{const s={...e};return s.eventMod=t.securityLevel>=a.Hh.MODERATOR,s.roomPicker=t.securityLevel>=a.Hh.COMMUNITY,s}))}),[i]),b=Object(c.useCallback)((e=>{Ar(e.getParser().roomId)}),[]),g=Object(c.useCallback)((e=>{const t=e.getParser();i((e=>{const s={...e};return s.enteredGuestRoom=null,s.currentRoomOwner=t.isOwner,s.currentRoomId=t.roomId,s})),$n(new a.Cg(t.roomId,!0,!1)),a.Wd.available&&a.Wd.call("legacyTrack","navigator","private",[t.roomId])}),[i]),O=Object(c.useCallback)((e=>{const t=e.getParser();if(t.roomEnter)o({roomInfo:null,state:Sr.NONE}),i((e=>{const s={...e};s.enteredGuestRoom=t.data,s.currentRoomIsStaffPick=t.staffPick;return!(s.createdFlatId===t.data.roomId)&&t.data.displayRoomEntryAd&&k("roomenterad.habblet.enabled",!1)&&a.Jd.openRoomEnterAd(),s.createdFlatId=0,s.enteredGuestRoom&&s.enteredGuestRoom.habboGroupId,s}));else if(t.roomForward){if(t.data.ownerName!==ee().userName&&!t.isGroupMember)switch(t.data.doorMode){case a.hg.DOORBELL_STATE:return void o((e=>{const s={...e};return s.roomInfo=t.data,s.state=Sr.START_DOORBELL,s}));case a.hg.PASSWORD_STATE:return void o((e=>{const s={...e};return s.roomInfo=t.data,s.state=Sr.START_PASSWORD,s}))}if(t.data.doorMode===a.hg.NOOB_STATE&&!ee().isAmbassador&&!ee().isRealNoob&&!ee().isModerator)return;X(t.data.roomId)}else i((e=>{const s={...e};return s.enteredGuestRoom=t.data,s.currentRoomIsStaffPick=t.staffPick,s}))}),[i,o]),m=Object(c.useCallback)((e=>{const t=e.getParser();i((e=>{const s={...e};return s.currentRoomRating=t.totalLikes,s.canRate=t.canLike,s}))}),[i]),p=Object(c.useCallback)((e=>{const t=e.getParser();t.userName&&0!==t.userName.length||o((e=>{const t={...e};return t.state=Sr.STATE_WAITING,t}))}),[o]),_=Object(c.useCallback)((e=>{const t=e.getParser();t.userName&&0!==t.userName.length||o((e=>{const t={...e};return t.state=Sr.STATE_ACCEPTED,t}))}),[o]),E=Object(c.useCallback)((e=>{const t=e.getParser();t.userName&&0!==t.userName.length||o((e=>{const t={...e};return t.state=Sr.STATE_NO_ANSWER,t}))}),[o]),f=Object(c.useCallback)((e=>{switch(e.getParser().errorCode){case-100002:return void o((e=>{const t={...e};return t.state=Sr.STATE_WRONG_PASSWORD,t}));case 4009:return void Pr.simpleAlert(nt("navigator.alert.need.to.be.vip"),yr.DEFAULT,null,null,nt("generic.alert.title"));case 4010:return void Pr.simpleAlert(nt("navigator.alert.invalid_room_name"),yr.DEFAULT,null,null,nt("generic.alert.title"));case 4011:return void Pr.simpleAlert(nt("navigator.alert.cannot_perm_ban"),yr.DEFAULT,null,null,nt("generic.alert.title"));case 4013:return void Pr.simpleAlert(nt("navigator.alert.room_in_maintenance"),yr.DEFAULT,null,null,nt("generic.alert.title"))}}),[o]),x=Object(c.useCallback)((e=>{const t=e.getParser();r(t.topLevelContexts),s(t.topLevelContexts.length?t.topLevelContexts[0]:null)}),[r,s]),I=Object(c.useCallback)((e=>{const t=e.getParser();s((e=>{let s=e;if(s||(s=n&&n.length&&n[0]||null),!s)return null;if(t.result.code!==s.code&&n&&n.length)for(const r of n)r.code===t.result.code&&(s=r);for(const r of n)r.code===t.result.code&&(s=r);return s})),l(t.result)}),[n,s,l]),T=Object(c.useCallback)((e=>{const s=e.getParser();t(s.categories)}),[t]),C=Object(c.useCallback)((e=>{X(e.getParser().roomId)}),[]),S=Object(c.useCallback)((e=>{const t=e.getParser();let s=!1;if(i((e=>{s=e.settingsReceived;const n={...e};return n.homeRoomId=t.homeRoomId,n.settingsReceived=!0,n})),s)return;let n=-1,r=-1;void 0!==k("friend.id")&&parseInt(k("friend.id"))>0&&(n=0,$n(new a.Fb(parseInt(k("friend.id"))))),void 0!==k("forward.type")&&void 0!==k("forward.id")&&(n=parseInt(k("forward.type")),r=parseInt(k("forward.id"))),2===n?Ar(r):-1===n&&t.roomIdToEnter>0&&(y("navigator/close"),t.roomIdToEnter!==t.homeRoomId?X(t.roomIdToEnter):X(t.homeRoomId))}),[i]),N=Object(c.useCallback)((e=>{const t=e.getParser();switch(t.reason){case a.T.REASON_FULL:Pr.simpleAlert(nt("navigator.guestroomfull.text"),yr.DEFAULT,null,null,nt("navigator.guestroomfull.title"));break;case a.T.REASON_QUEUE_ERROR:Pr.simpleAlert(nt(`room.queue.error.${t.parameter}`),yr.DEFAULT,null,null,nt("room.queue.error.title"));break;case a.T.REASON_BANNED:Pr.simpleAlert(nt("navigator.banned.text"),yr.DEFAULT,null,null,nt("navigator.banned.title"));break;default:Pr.simpleAlert(nt("room.queue.error.title"),yr.DEFAULT,null,null,nt("room.queue.error.title"))}ue()}),[]),v=Object(c.useCallback)((e=>{y("navigator/show")}),[]);return it(a.Fi,h),it(a.Hi,j),it(a.zg,b),it(a.xg,g),it(a.nc,O),it(a.Sg,m),it(a.kg,p),it(a.jg,_),it(a.lg,E),it(a.bc,f),it(a.He,x),it(a.Ke,I),it(a.Ee,T),it(a.gg,C),it(a.Fe,S),it(a.vg,N),it(a.Ie,v),null},Xu=[Sr.START_DOORBELL,Sr.STATE_WAITING,Sr.STATE_NO_ANSWER,Sr.START_PASSWORD,Sr.STATE_WRONG_PASSWORD],Ju=[Sr.START_DOORBELL,Sr.STATE_WAITING,Sr.STATE_NO_ANSWER],Zu=(Sr.START_PASSWORD,Sr.STATE_WRONG_PASSWORD,e=>{const[t,s]=Object(c.useState)(""),{doorData:n=null,setDoorData:r=null}=Qu(),i=()=>{n&&n.state===Sr.STATE_WAITING&&ae(),r(null)};if(Object(c.useEffect)((()=>{n&&n.state===Sr.STATE_NO_ANSWER&&ae()}),[n]),!n||n.state===Sr.NONE||-1===Xu.indexOf(n.state))return null;const a=Ju.indexOf(n.state)>=0;return Object(Kr.jsxs)(_c,{className:"nitro-navigator-doorbell",theme:"primary-slim",children:[Object(Kr.jsx)(hc,{headerText:nt(a?"navigator.doorbell.title":"navigator.password.title"),onCloseClick:i}),Object(Kr.jsxs)(lc,{children:[Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:n&&n.roomInfo&&n.roomInfo.roomName}),n.state===Sr.START_DOORBELL&&Object(Kr.jsx)(Zc,{children:nt("navigator.doorbell.info")}),n.state===Sr.STATE_WAITING&&Object(Kr.jsx)(Zc,{children:nt("navigator.doorbell.waiting")}),n.state===Sr.STATE_NO_ANSWER&&Object(Kr.jsx)(Zc,{children:nt("navigator.doorbell.no.answer")}),n.state===Sr.START_PASSWORD&&Object(Kr.jsx)(Zc,{children:nt("navigator.password.info")}),n.state===Sr.STATE_WRONG_PASSWORD&&Object(Kr.jsx)(Zc,{children:nt("navigator.password.retryinfo")})]}),a&&Object(Kr.jsxs)(Nc,{gap:1,children:[n.state===Sr.START_DOORBELL&&Object(Kr.jsx)(tc,{variant:"success",onClick:()=>{n&&n.roomInfo&&(X(n.roomInfo.roomId),r((e=>{const t={...e};return t.state=Sr.STATE_PENDING_SERVER,t})))},children:nt("navigator.doorbell.button.ring")}),Object(Kr.jsx)(tc,{variant:"danger",onClick:i,children:nt("generic.cancel")})]}),!a&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{children:nt("navigator.password.enter")}),Object(Kr.jsx)("input",{type:"password",className:"form-control form-control-sm",onChange:e=>s(e.target.value)})]}),Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(tc,{variant:"success",onClick:()=>{n&&n.roomInfo&&(X(n.roomInfo.roomId,t),r((e=>{const t={...e};return t.state=Sr.STATE_PENDING_SERVER,t})))},children:nt("navigator.password.button.try")}),Object(Kr.jsx)(tc,{variant:"danger",onClick:i,children:nt("generic.cancel")})]})]})]})]})}),ed=e=>{const[t,s]=Object(c.useState)(null),[n,r]=Object(c.useState)(null),[i,o]=Object(c.useState)(null),[l,u]=Object(c.useState)(null),[d,h]=Object(c.useState)(null),[j,b]=Object(c.useState)(0),[g,O]=Object(c.useState)([]),[m,p]=Object(c.useState)(""),{categories:_=null}=Qu(),E=k("hc.disabled",!1),f=e=>k("images.url")+`/navigator/models/model_${e}.png`;return Object(c.useEffect)((()=>{if(!t){const e=[];for(let t=10;t<=100;t+=10)e.push(t);s(e),h(e[0])}}),[t]),Object(c.useEffect)((()=>{_&&_.length&&u(_[0].id)}),[_]),Object(c.useEffect)((()=>{const e=k("navigator.room.models");e&&e.length&&(O(e),p(e[0].name))}),[]),Object(Kr.jsxs)(Nc,{overflow:"hidden",children:[Object(Kr.jsxs)(Jr,{overflow:"hidden",children:[Object(Kr.jsxs)(Nc,{size:6,gap:1,overflow:"auto",children:[Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{children:nt("navigator.createroom.roomnameinfo")}),Object(Kr.jsx)("input",{type:"text",className:"form-control form-control-sm",maxLength:60,onChange:e=>r(e.target.value),placeholder:nt("navigator.createroom.roomnameinfo")})]}),Object(Kr.jsxs)(Nc,{grow:!0,gap:1,children:[Object(Kr.jsx)(Zc,{children:nt("navigator.createroom.roomdescinfo")}),Object(Kr.jsx)("textarea",{className:"flex-grow-1 form-control form-control-sm w-100",maxLength:255,onChange:e=>o(e.target.value),placeholder:nt("navigator.createroom.roomdescinfo")})]}),Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{children:nt("navigator.category")}),Object(Kr.jsx)("select",{className:"form-select form-select-sm",onChange:e=>u(Number(e.target.value)),children:_&&_.length>0&&_.map((e=>Object(Kr.jsx)("option",{value:e.id,children:nt(e.name)},e.id)))})]}),Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{children:nt("navigator.maxvisitors")}),Object(Kr.jsx)("select",{className:"form-select form-select-sm",onChange:e=>h(Number(e.target.value)),children:t&&t.map((e=>Object(Kr.jsx)("option",{value:e,children:e},e)))})]}),Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{children:nt("navigator.tradesettings")}),Object(Kr.jsxs)("select",{className:"form-select form-select-sm",onChange:e=>b(Number(e.target.value)),children:[Object(Kr.jsx)("option",{value:"0",children:nt("navigator.roomsettings.trade_not_allowed")}),Object(Kr.jsx)("option",{value:"1",children:nt("navigator.roomsettings.trade_not_with_Controller")}),Object(Kr.jsx)("option",{value:"2",children:nt("navigator.roomsettings.trade_allowed")})]})]})]}),Object(Kr.jsx)(Nc,{size:6,gap:1,overflow:"auto",children:g.map(((e,t)=>Object(Kr.jsxs)(wc,{fullHeight:!0,onClick:()=>((e,t)=>{!e||e.clubLevel>te()||p(g[t].name)})(e,t),itemActive:m===e.name,overflow:"unset",gap:0,className:"p-1",disabled:te()<e.clubLevel,children:[Object(Kr.jsx)(ec,{fullHeight:!0,center:!0,overflow:"hidden",children:Object(Kr.jsx)("img",{alt:"",src:f(e.name)})}),Object(Kr.jsxs)(Zc,{bold:!0,children:[e.tileSize," ",nt("navigator.createroom.tilesize")]}),!E&&e.clubLevel>a.Ed.NO_CLUB&&Object(Kr.jsx)(Ic,{position:"absolute",className:"top-1 end-1",type:"hc"})]},e.name)))})]}),Object(Kr.jsx)(tc,{fullWidth:!0,variant:!n||n.length<3?"danger":"success",onClick:()=>{$n(new a.fg(n,i,"model_"+m,Number(l),Number(d),j))},disabled:!n||n.length<3,children:nt("navigator.createroom.create")})]})};const td=e=>{const{onCloseClick:t=null}=e,[s,n]=Object(c.useState)(!1),[r,i]=Object(c.useState)(!1),{navigatorData:o=null}=Qu(),l=e=>{switch(e){case"settings":return ee().userId===o.enteredGuestRoom.ownerId||ee().isModerator;case"staff_pick":return ee().securityLevel>=a.Hh.COMMUNITY;default:return!1}},u=(e,s)=>{if(o&&o.enteredGuestRoom)switch(e){case"set_home_room":let e=-1;return o.homeRoomId!==o.enteredGuestRoom.roomId&&(e=o.enteredGuestRoom.roomId),void(e>0&&$n(new a.Ei(e)));case"navigator_search_tag":return;case"open_room_thumbnail_camera":return void Vt(new kt(kt.TOGGLE_THUMBNAIL));case"open_group_info":return void Er(o.enteredGuestRoom.habboGroupId);case"toggle_room_link":return void y("navigator/toggle-room-link");case"open_room_settings":return void $n(new a.ih(o.enteredGuestRoom.roomId));case"toggle_pick":return n((e=>!e)),void $n(new a.mh(o.enteredGuestRoom.roomId));case"toggle_mute":return i((e=>!e)),void $n(new a.Hg);case"open_floorplan_editor":return void y("floor-editor/toggle");case"close":return void t()}};return Object(c.useEffect)((()=>{o&&(n(o.currentRoomIsStaffPick),o.enteredGuestRoom&&i(o.enteredGuestRoom.allInRoomMuted))}),[o]),o.enteredGuestRoom?Object(Kr.jsxs)(_c,{className:"nitro-room-info",theme:"primary-slim",children:[Object(Kr.jsx)(hc,{headerText:nt("navigator.roomsettings.roominfo"),onCloseClick:()=>u("close")}),Object(Kr.jsx)(lc,{className:"text-black",children:o.enteredGuestRoom&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsxs)(ec,{gap:2,overflow:"hidden",children:[Object(Kr.jsx)(Yc,{roomId:o.enteredGuestRoom.roomId,customUrl:o.enteredGuestRoom.officialRoomPicRef,children:l("settings")&&Object(Kr.jsx)("i",{className:"icon icon-camera-small position-absolute b-0 r-0 m-1 cursor-pointer top-0",onClick:()=>u("open_room_thumbnail_camera")})}),Object(Kr.jsxs)(Nc,{grow:!0,gap:1,overflow:"hidden",children:[Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsxs)(Nc,{grow:!0,gap:1,children:[Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)("i",{onClick:()=>u("set_home_room"),className:"flex-shrink-0 icon icon-house-small cursor-pointer"+$i()({" gray":o.homeRoomId!==o.enteredGuestRoom.roomId})}),Object(Kr.jsx)(Zc,{bold:!0,children:o.enteredGuestRoom.roomName})]}),o.enteredGuestRoom.showOwner&&Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)(Zc,{variant:"muted",children:nt("navigator.roomownercaption")}),Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)(Kc,{userId:o.enteredGuestRoom.ownerId}),Object(Kr.jsx)(Zc,{children:o.enteredGuestRoom.ownerName})]})]}),Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)(Zc,{variant:"muted",children:nt("navigator.roomrating")}),Object(Kr.jsx)(Zc,{children:o.currentRoomRating})]}),o.enteredGuestRoom.tags.length>0&&Object(Kr.jsx)(ec,{alignItems:"center",gap:1,children:o.enteredGuestRoom.tags.map((e=>Object(Kr.jsxs)(Zc,{pointer:!0,className:"bg-muted rounded p-1",onClick:e=>u("navigator_search_tag"),children:["#",e]},e)))})]}),Object(Kr.jsxs)(Nc,{alignItems:"center",gap:1,children:[l("settings")&&Object(Kr.jsx)("i",{className:"icon icon-cog cursor-pointer",title:nt("navigator.room.popup.info.room.settings"),onClick:e=>u("open_room_settings")}),Object(Kr.jsx)(ic.a,{icon:"link",title:nt("navigator.embed.caption"),className:"cursor-pointer",onClick:e=>y("navigator/toggle-room-link")})]})]}),Object(Kr.jsx)(Zc,{overflow:"auto",style:{maxHeight:50},children:o.enteredGuestRoom.description}),o.enteredGuestRoom.habboGroupId>0&&Object(Kr.jsxs)(ec,{pointer:!0,alignItems:"center",gap:1,onClick:()=>u("open_group_info"),children:[Object(Kr.jsx)(xc,{className:"flex-none",badgeCode:o.enteredGuestRoom.groupBadgeCode,isGroup:!0}),Object(Kr.jsx)(Zc,{underline:!0,children:nt("navigator.guildbase",["groupName"],[o.enteredGuestRoom.groupName])})]})]})]}),Object(Kr.jsxs)(Nc,{gap:1,children:[l("staff_pick")&&Object(Kr.jsx)(tc,{onClick:()=>u("toggle_pick"),children:nt(s?"navigator.staffpicks.unpick":"navigator.staffpicks.pick")}),Object(Kr.jsx)(tc,{variant:"danger",disabled:!0,children:nt("help.emergency.main.report.room")}),l("settings")&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(tc,{onClick:()=>u("toggle_mute"),children:nt(r?"navigator.muteall_on":"navigator.muteall_off")}),Object(Kr.jsx)(tc,{onClick:()=>u("open_floorplan_editor"),children:nt("open.floor.plan.editor")})]})]})]})})]}):null};const sd=e=>{const{onCloseClick:t=null}=e,{navigatorData:s=null}=Qu();return s.enteredGuestRoom?Object(Kr.jsxs)(_c,{className:"nitro-room-link",theme:"primary-slim",children:[Object(Kr.jsx)(hc,{headerText:nt("navigator.embed.title"),onCloseClick:t}),Object(Kr.jsx)(lc,{className:"text-black d-flex align-items-center",children:Object(Kr.jsxs)(ec,{gap:2,children:[Object(Kr.jsx)(Yc,{roomId:s.enteredGuestRoom.roomId,customUrl:s.enteredGuestRoom.officialRoomPicRef}),Object(Kr.jsxs)(Nc,{children:[Object(Kr.jsx)(Zc,{bold:!0,fontSize:5,children:nt("navigator.embed.headline")}),Object(Kr.jsx)(Zc,{children:nt("navigator.embed.info")}),Object(Kr.jsx)("input",{type:"text",readOnly:!0,className:"form-control form-control-sm",value:nt("navigator.embed.src",["roomId"],[s.enteredGuestRoom.roomId.toString()])})]})]})})]}):null},nd=e=>{const{roomData:t=null,handleChange:s=null}=e,[n,r]=Object(c.useState)(""),[i,o]=Object(c.useState)(""),[l,u]=Object(c.useState)(!1);return Object(c.useEffect)((()=>{r(""),o(""),u(!1)}),[t]),Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("navigator.roomsettings.roomaccess.caption")}),Object(Kr.jsx)(Zc,{children:nt("navigator.roomsettings.roomaccess.info")})]}),Object(Kr.jsxs)(Nc,{overflow:"auto",children:[Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("navigator.roomsettings.doormode")}),Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)("input",{className:"form-check-input",type:"radio",name:"lockState",checked:t.lockState===a.hg.OPEN_STATE&&!l,onChange:e=>s("lock_state",a.hg.OPEN_STATE)}),Object(Kr.jsx)(Zc,{children:nt("navigator.roomsettings.doormode.open")})]}),Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)("input",{className:"form-check-input",type:"radio",name:"lockState",checked:t.lockState===a.hg.DOORBELL_STATE&&!l,onChange:e=>s("lock_state",a.hg.DOORBELL_STATE)}),Object(Kr.jsx)(Zc,{children:nt("navigator.roomsettings.doormode.doorbell")})]}),Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)("input",{className:"form-check-input",type:"radio",name:"lockState",checked:t.lockState===a.hg.INVISIBLE_STATE&&!l,onChange:e=>s("lock_state",a.hg.INVISIBLE_STATE)}),Object(Kr.jsx)(Zc,{children:nt("navigator.roomsettings.doormode.invisible")})]}),Object(Kr.jsxs)(ec,{fullWidth:!0,gap:1,children:[Object(Kr.jsx)("input",{className:"form-check-input",type:"radio",name:"lockState",checked:t.lockState===a.hg.PASSWORD_STATE||l,onChange:e=>u(e.target.checked)}),!l&&t.lockState!==a.hg.PASSWORD_STATE&&Object(Kr.jsx)(Zc,{children:nt("navigator.roomsettings.doormode.password")}),(l||t.lockState===a.hg.PASSWORD_STATE)&&Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{children:nt("navigator.roomsettings.doormode.password")}),Object(Kr.jsx)("input",{type:"password",className:"form-control form-control-sm col-4",value:n,onChange:e=>r(e.target.value),placeholder:nt("navigator.roomsettings.password"),onFocus:e=>u(!0)}),l&&n.length<=0&&Object(Kr.jsx)(Zc,{bold:!0,small:!0,variant:"danger",children:nt("navigator.roomsettings.passwordismandatory")}),Object(Kr.jsx)("input",{type:"password",className:"form-control form-control-sm col-4",value:i,onChange:e=>o(e.target.value),onBlur:()=>{!l||n.length<=0||i.length<=0||n!==i||s("password",n)},placeholder:nt("navigator.roomsettings.passwordconfirm")}),l&&n.length>0&&n!==i&&Object(Kr.jsx)(Zc,{bold:!0,small:!0,variant:"danger",children:nt("navigator.roomsettings.invalidconfirm")})]})]})]}),Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("navigator.roomsettings.pets")}),Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)("input",{className:"form-check-input",type:"checkbox",checked:t.allowPets,onChange:e=>s("allow_pets",e.target.checked)}),Object(Kr.jsx)(Zc,{children:nt("navigator.roomsettings.allowpets")})]}),Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)("input",{className:"form-check-input",type:"checkbox",checked:t.allowPetsEat,onChange:e=>s("allow_pets_eat",e.target.checked)}),Object(Kr.jsx)(Zc,{children:nt("navigator.roomsettings.allowfoodconsume")})]})]})]})]})},rd=e=>{const{roomData:t=null,handleChange:s=null,close:n=null}=e,[r,i]=Object(c.useState)(""),[o,l]=Object(c.useState)(""),{categories:u=null}=Qu();return Object(c.useEffect)((()=>{i(t.roomName),l(t.roomDescription)}),[t]),Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)(Zc,{className:"col-3",children:nt("navigator.roomname")}),Object(Kr.jsxs)(Nc,{fullWidth:!0,gap:0,children:[Object(Kr.jsx)("input",{className:"form-control form-control-sm",value:r,maxLength:60,onChange:e=>i(e.target.value),onBlur:()=>{r===t.roomName||r.length<3||r.length>60||s("name",r)}}),r.length<3&&Object(Kr.jsx)(Zc,{bold:!0,small:!0,variant:"danger",children:nt("navigator.roomsettings.roomnameismandatory")})]})]}),Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)(Zc,{className:"col-3",children:nt("navigator.roomsettings.desc")}),Object(Kr.jsx)("textarea",{className:"form-control form-control-sm",value:o,maxLength:255,onChange:e=>l(e.target.value),onBlur:()=>{o===t.roomDescription||o.length>255||s("description",o)}})]}),Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)(Zc,{className:"col-3",children:nt("navigator.category")}),Object(Kr.jsx)("select",{className:"form-select form-select-sm",value:t.categoryId,onChange:e=>s("category",e.target.value),children:u&&u.map((e=>Object(Kr.jsx)("option",{value:e.id,children:nt(e.name)},e.id)))})]}),Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)(Zc,{className:"col-3",children:nt("navigator.maxvisitors")}),Object(Kr.jsx)("select",{className:"form-select form-select-sm",value:t.userCount,onChange:e=>s("max_visitors",e.target.value),children:vr&&vr.map((e=>Object(Kr.jsx)("option",{value:e,children:e},e)))})]}),Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)(Zc,{className:"col-3",children:nt("navigator.tradesettings")}),Object(Kr.jsxs)("select",{className:"form-select form-select-sm",value:t.tradeState,onChange:e=>s("trade_state",e.target.value),children:[Object(Kr.jsx)("option",{value:"0",children:nt("navigator.roomsettings.trade_not_allowed")}),Object(Kr.jsx)("option",{value:"1",children:nt("navigator.roomsettings.trade_not_with_Controller")}),Object(Kr.jsx)("option",{value:"2",children:nt("navigator.roomsettings.trade_allowed")})]})]}),Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)(Qr,{className:"col-3"}),Object(Kr.jsx)("input",{className:"form-check-input",type:"checkbox",checked:t.allowWalkthrough,onChange:e=>s("allow_walkthrough",e.target.checked)}),Object(Kr.jsx)(Zc,{children:nt("navigator.roomsettings.allow_walk_through")})]}),Object(Kr.jsxs)(Zc,{variant:"danger",underline:!0,bold:!0,pointer:!0,className:"d-flex justify-content-center align-items-center gap-1",onClick:()=>{Pr.confirm(nt("navigator.roomsettings.deleteroom.confirm.message",["room_name"],[t.roomName]),(()=>{$n(new a.ig(t.roomId)),n&&n(),y("navigator/search/myworld_view")}),null,null,null,nt("navigator.roomsettings.deleteroom.confirm.title"))},children:[Object(Kr.jsx)(ic.a,{icon:"times"}),nt("navigator.roomsettings.delete")]})]})},cd=e=>{var t;const{roomData:s=null,handleChange:n=null}=e,[r,i]=Object(c.useState)(-1),[o,l]=Object(c.useState)([]),u=Object(c.useCallback)((e=>{const t=e.getParser();s&&s.roomId===t.roomId&&l(t.bannedUsers)}),[s]);it(a.w,u);const d=Object(c.useCallback)((e=>{l((t=>{const s=[...t],n=s.findIndex((t=>t.userId===e));return n>=0&&s.splice(n,1),s})),$n(new a.ph(e,s.roomId)),i(-1)}),[s]);return Object(c.useEffect)((()=>{$n(new a.Yf(s.roomId))}),[s.roomId]),Object(Kr.jsxs)(Jr,{overflow:"auto",children:[Object(Kr.jsxs)(Nc,{size:6,children:[Object(Kr.jsxs)(Zc,{bold:!0,children:[nt("navigator.roomsettings.moderation.banned.users")," (",o.length,")"]}),Object(Kr.jsx)(ec,{overflow:"hidden",className:"bg-white rounded list-container p-2",children:Object(Kr.jsx)(Nc,{fullWidth:!0,overflow:"auto",gap:1,children:o&&o.length>0&&o.map(((e,t)=>Object(Kr.jsxs)(ec,{shrink:!0,alignItems:"center",gap:1,overflow:"hidden",children:[Object(Kr.jsx)(Kc,{userName:e.userName}),Object(Kr.jsxs)(Zc,{pointer:!0,grow:!0,onClick:t=>i(e.userId),children:[" ",e.userName]})]},t)))})}),Object(Kr.jsxs)(tc,{disabled:r<=0,onClick:e=>d(r),children:[nt("navigator.roomsettings.moderation.unban")," ",r>0&&(null===(t=o.find((e=>e.userId===r)))||void 0===t?void 0:t.userName)]})]}),Object(Kr.jsxs)(Nc,{size:6,children:[Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("navigator.roomsettings.moderation.mute.header")}),Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)("input",{className:"form-check-input",type:"checkbox",checked:1===s.moderationSettings.allowMute,onChange:e=>n("moderation_mute",e.target.checked?1:0)}),Object(Kr.jsx)(Zc,{children:nt("navigator.roomsettings.moderation.rights")})]})]}),Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("navigator.roomsettings.moderation.kick.header")}),Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)("input",{className:"form-check-input",type:"checkbox",checked:0===s.moderationSettings.allowKick,onChange:e=>n("moderation_kick",e.target.checked?0:2)}),Object(Kr.jsx)(Zc,{children:nt("navigator.roomsettings.moderation.all")})]}),Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)("input",{className:"form-check-input",type:"checkbox",checked:1===s.moderationSettings.allowKick||0===s.moderationSettings.allowKick,disabled:0===s.moderationSettings.allowKick,onChange:e=>n("moderation_kick",e.target.checked?1:2)}),Object(Kr.jsx)(Zc,{children:nt("navigator.roomsettings.moderation.rights")})]})]}),Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("navigator.roomsettings.moderation.ban.header")}),Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)("input",{className:"form-check-input",type:"checkbox",checked:1===s.moderationSettings.allowBan,onChange:e=>n("moderation_ban",e.target.checked?1:0)}),Object(Kr.jsx)(Zc,{children:nt("navigator.roomsettings.moderation.rights")})]})]})]})]})},id=e=>{const{roomData:t=null}=e,[s,n]=Object(c.useState)(new Map),r=Object(c.useCallback)((e=>{const s=e.getParser();t&&t.roomId===s.roomId&&n(s.users)}),[t]);it(a.Db,r);const i=Object(c.useCallback)((e=>{const s=e.getParser();t&&t.roomId===s.roomId&&n((e=>{const t=new Map(e);return t.set(s.data.userId,s.data.userName),t}))}),[t]);it(a.Bb,i);const o=Object(c.useCallback)((e=>{const s=e.getParser();t&&t.roomId===s.roomId&&n((e=>{const t=new Map(e);return t.delete(s.userId),t}))}),[t]);return it(a.Cb,o),Object(c.useEffect)((()=>{$n(new a.uh(t.roomId))}),[t.roomId]),Object(Kr.jsxs)(Jr,{children:[Object(Kr.jsxs)(Nc,{size:6,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("navigator.flatctrls.userswithrights",["displayed","total"],[s.size.toString(),s.size.toString()])}),Object(Kr.jsx)(ec,{overflow:"hidden",className:"bg-white rounded list-container p-2",children:Object(Kr.jsx)(Nc,{fullWidth:!0,overflow:"auto",gap:1,children:Array.from(s.entries()).map(((e,t)=>{let[s,n]=e;return Object(Kr.jsxs)(ec,{shrink:!0,alignItems:"center",gap:1,overflow:"hidden",children:[Object(Kr.jsx)(Kc,{userName:n}),Object(Kr.jsxs)(Zc,{pointer:!0,grow:!0,onClick:e=>$n(new a.nh(s)),children:[" ",n]})]},t)}))})})]}),Object(Kr.jsx)(Nc,{size:6,justifyContent:"end",children:Object(Kr.jsx)(tc,{variant:"danger",disabled:!s.size,onClick:e=>$n(new a.Of(t.roomId)),children:nt("navigator.flatctrls.clear")})})]})},ad=e=>{const{roomData:t=null,handleChange:s=null}=e,[n,r]=Object(c.useState)(0);return Object(c.useEffect)((()=>{r(t.chatSettings.distance)}),[t.chatSettings]),Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("navigator.roomsettings.vip.caption")}),Object(Kr.jsx)(Zc,{children:nt("navigator.roomsettings.vip.info")})]}),Object(Kr.jsxs)(Jr,{overflow:"auto",children:[Object(Kr.jsxs)(Nc,{size:6,gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("navigator.roomsettings.chat_settings")}),Object(Kr.jsx)(Zc,{children:nt("navigator.roomsettings.chat_settings.info")}),Object(Kr.jsxs)("select",{className:"form-select form-select-sm",value:t.chatSettings.mode,onChange:e=>s("bubble_mode",e.target.value),children:[Object(Kr.jsx)("option",{value:a.bg.CHAT_MODE_FREE_FLOW,children:nt("navigator.roomsettings.chat.mode.free.flow")}),Object(Kr.jsx)("option",{value:a.bg.CHAT_MODE_LINE_BY_LINE,children:nt("navigator.roomsettings.chat.mode.line.by.line")})]}),Object(Kr.jsxs)("select",{className:"form-select form-select-sm",value:t.chatSettings.weight,onChange:e=>s("chat_weight",e.target.value),children:[Object(Kr.jsx)("option",{value:a.bg.CHAT_BUBBLE_WIDTH_NORMAL,children:nt("navigator.roomsettings.chat.bubbles.width.normal")}),Object(Kr.jsx)("option",{value:a.bg.CHAT_BUBBLE_WIDTH_THIN,children:nt("navigator.roomsettings.chat.bubbles.width.thin")}),Object(Kr.jsx)("option",{value:a.bg.CHAT_BUBBLE_WIDTH_WIDE,children:nt("navigator.roomsettings.chat.bubbles.width.wide")})]}),Object(Kr.jsxs)("select",{className:"form-select form-select-sm",value:t.chatSettings.speed,onChange:e=>s("bubble_speed",e.target.value),children:[Object(Kr.jsx)("option",{value:a.bg.CHAT_SCROLL_SPEED_FAST,children:nt("navigator.roomsettings.chat.speed.fast")}),Object(Kr.jsx)("option",{value:a.bg.CHAT_SCROLL_SPEED_NORMAL,children:nt("navigator.roomsettings.chat.speed.normal")}),Object(Kr.jsx)("option",{value:a.bg.CHAT_SCROLL_SPEED_SLOW,children:nt("navigator.roomsettings.chat.speed.slow")})]}),Object(Kr.jsxs)("select",{className:"form-select form-select-sm",value:t.chatSettings.protection,onChange:e=>s("flood_protection",e.target.value),children:[Object(Kr.jsx)("option",{value:a.bg.FLOOD_FILTER_LOOSE,children:nt("navigator.roomsettings.chat.flood.loose")}),Object(Kr.jsx)("option",{value:a.bg.FLOOD_FILTER_NORMAL,children:nt("navigator.roomsettings.chat.flood.normal")}),Object(Kr.jsx)("option",{value:a.bg.FLOOD_FILTER_STRICT,children:nt("navigator.roomsettings.chat.flood.strict")})]}),Object(Kr.jsx)(Zc,{children:nt("navigator.roomsettings.chat_settings.hearing.distance")}),Object(Kr.jsx)("input",{type:"number",min:"0",className:"form-control form-control-sm",value:n,onChange:e=>r(e.target.valueAsNumber),onBlur:e=>s("chat_distance",n)})]}),Object(Kr.jsxs)(Nc,{size:6,gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("navigator.roomsettings.vip_settings")}),Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)("input",{className:"form-check-input",type:"checkbox",checked:t.hideWalls,onChange:e=>s("hide_walls",e.target.checked)}),Object(Kr.jsx)(Zc,{children:nt("navigator.roomsettings.hide_walls")})]}),Object(Kr.jsxs)("select",{className:"form-select form-select-sm",value:t.wallThickness,onChange:e=>s("wall_thickness",e.target.value),children:[Object(Kr.jsx)("option",{value:"0",children:nt("navigator.roomsettings.wall_thickness.normal")}),Object(Kr.jsx)("option",{value:"1",children:nt("navigator.roomsettings.wall_thickness.thick")}),Object(Kr.jsx)("option",{value:"-1",children:nt("navigator.roomsettings.wall_thickness.thin")}),Object(Kr.jsx)("option",{value:"-2",children:nt("navigator.roomsettings.wall_thickness.thinnest")})]}),Object(Kr.jsxs)("select",{className:"form-select form-select-sm",value:t.floorThickness,onChange:e=>s("floor_thickness",e.target.value),children:[Object(Kr.jsx)("option",{value:"0",children:nt("navigator.roomsettings.floor_thickness.normal")}),Object(Kr.jsx)("option",{value:"1",children:nt("navigator.roomsettings.floor_thickness.thick")}),Object(Kr.jsx)("option",{value:"-1",children:nt("navigator.roomsettings.floor_thickness.thin")}),Object(Kr.jsx)("option",{value:"-2",children:nt("navigator.roomsettings.floor_thickness.thinnest")})]})]})]})]})},od=["navigator.roomsettings.tab.1","navigator.roomsettings.tab.2","navigator.roomsettings.tab.3","navigator.roomsettings.tab.4","navigator.roomsettings.tab.5"],ld=e=>{const[t,s]=Object(c.useState)(null),[n,r]=Object(c.useState)(od[0]),i=Object(c.useCallback)((e=>{const t=e.getParser();t&&(s({roomId:t.roomId,roomName:t.name,roomDescription:t.description,categoryId:t.categoryId,userCount:t.userCount,tags:t.tags,tradeState:t.tradeMode,allowWalkthrough:t.allowWalkthrough,lockState:t.state,password:null,allowPets:t.allowPets,allowPetsEat:t.allowPetsEat,hideWalls:t.hideWalls,wallThickness:t.thicknessWall,floorThickness:t.thicknessFloor,chatSettings:{mode:t.chatSettings.mode,weight:t.chatSettings.weight,speed:t.chatSettings.speed,distance:t.chatSettings.distance,protection:t.chatSettings.protection},moderationSettings:{allowMute:t.moderationSettings.allowMute,allowKick:t.moderationSettings.allowKick,allowBan:t.moderationSettings.allowBan}}),$n(new a.Yf(t.roomId)))}),[]);it(a.jh,i);const o=()=>{s(null),r(od[0])},l=(e,t)=>{s((s=>{const n={...s};switch(e){case"name":n.roomName=String(t);break;case"description":n.roomDescription=String(t);break;case"category":n.categoryId=Number(t);break;case"max_visitors":n.userCount=Number(t);break;case"trade_state":n.tradeState=Number(t);break;case"allow_walkthrough":n.allowWalkthrough=Boolean(t);break;case"allow_pets":n.allowPets=Boolean(t);break;case"allow_pets_eat":n.allowPetsEat=Boolean(t);break;case"hide_walls":n.hideWalls=Boolean(t);break;case"wall_thickness":n.wallThickness=Number(t);break;case"floor_thickness":n.floorThickness=Number(t);break;case"lock_state":n.lockState=Number(t);break;case"password":n.lockState=a.hg.PASSWORD_STATE,n.password=String(t);break;case"moderation_mute":n.moderationSettings.allowMute=Number(t);break;case"moderation_kick":n.moderationSettings.allowKick=Number(t);break;case"moderation_ban":n.moderationSettings.allowBan=Number(t);break;case"bubble_mode":n.chatSettings.mode=Number(t);break;case"chat_weight":n.chatSettings.weight=Number(t);break;case"bubble_speed":n.chatSettings.speed=Number(t);break;case"flood_protection":n.chatSettings.protection=Number(t);break;case"chat_distance":n.chatSettings.distance=Number(t)}return $n(new a.Dh(n.roomId,n.roomName,n.roomDescription,n.lockState,n.password,n.userCount,n.categoryId,n.tags.length,n.tags,n.tradeState,n.allowPets,n.allowPetsEat,n.allowWalkthrough,n.hideWalls,n.wallThickness,n.floorThickness,n.moderationSettings.allowMute,n.moderationSettings.allowKick,n.moderationSettings.allowBan,n.chatSettings.mode,n.chatSettings.weight,n.chatSettings.speed,n.chatSettings.distance,n.chatSettings.protection)),n}))};return t?Object(Kr.jsxs)(_c,{uniqueKey:"nitro-room-settings",className:"nitro-room-settings",children:[Object(Kr.jsx)(hc,{headerText:nt("navigator.roomsettings"),onCloseClick:o}),Object(Kr.jsx)($c,{children:od.map((e=>Object(Kr.jsx)(Qc,{isActive:n===e,onClick:t=>r(e),children:nt(e)},e)))}),Object(Kr.jsxs)(lc,{children:[n===od[0]&&Object(Kr.jsx)(rd,{roomData:t,handleChange:l,close:o}),n===od[1]&&Object(Kr.jsx)(nd,{roomData:t,handleChange:l}),n===od[2]&&Object(Kr.jsx)(id,{roomData:t,handleChange:l}),n===od[3]&&Object(Kr.jsx)(ad,{roomData:t,handleChange:l}),n===od[4]&&Object(Kr.jsx)(cd,{roomData:t,handleChange:l})]})]}):null};var ud=s(90);const dd=e=>{const{roomData:t=null}=e,[s,n]=Object(c.useState)(!1),r=Object(c.useRef)();return Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(Qr,{pointer:!0,innerRef:r,className:"icon icon-navigator-info",onMouseOver:e=>n(!0),onMouseLeave:e=>n(!1)}),Object(Kr.jsx)(ud.a,{show:s,target:r.current,placement:"right",children:Object(Kr.jsx)(Sl.a,{className:"rounded",children:Object(Kr.jsx)(lc,{overflow:"hidden",className:"room-info bg-transparent",children:Object(Kr.jsxs)(ec,{gap:2,overflow:"hidden",children:[Object(Kr.jsxs)(Yc,{roomId:t.roomId,customUrl:t.officialRoomPicRef,className:"d-flex flex-column align-items-center justify-content-end mb-1",children:[t.habboGroupId>0&&Object(Kr.jsx)(xc,{badgeCode:t.groupBadgeCode,isGroup:!0,className:"position-absolute top-0 start-0 m-1 "}),t.doorMode!==a.hg.OPEN_STATE&&Object(Kr.jsx)("i",{className:"position-absolute end-0 mb-1 me-1 icon icon-navigator-room-"+(t.doorMode===a.hg.DOORBELL_STATE?"locked":t.doorMode===a.hg.PASSWORD_STATE?"password":t.doorMode===a.hg.INVISIBLE_STATE?"invisible":"")})]}),Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,truncate:!0,className:"flex-grow-1",style:{maxHeight:13},children:t.roomName}),Object(Kr.jsxs)(ec,{gap:2,children:[Object(Kr.jsx)(Zc,{italics:!0,variant:"muted",children:nt("navigator.roomownercaption")}),Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)(Kc,{userId:t.ownerId}),Object(Kr.jsx)(Zc,{italics:!0,children:t.ownerName})]})]}),Object(Kr.jsx)(Zc,{className:"flex-grow-1",children:t.description}),Object(Kr.jsxs)(ec,{className:"badge p-1 position-absolute m-1 bottom-0 end-0 m-2 "+(()=>{const e=t.userCount/t.maxUserCount*100;let s="bg-primary";return e>=92?s="bg-danger":e>=50?s="bg-warning":e>0&&(s="bg-success"),s})(),gap:1,children:[Object(Kr.jsx)(ic.a,{icon:"user"}),t.userCount]})]})]})})})})]})},hd=e=>{const{roomData:t=null,children:s=null,thumbnail:n=!1,...r}=e,{setDoorData:c=null}=Qu(),i=()=>{const e=t.userCount/t.maxUserCount*100;let s="bg-primary";return e>=92?s="bg-danger":e>=50?s="bg-warning":e>0&&(s="bg-success"),s},o=e=>{if(t.ownerId!==ee().userId){if(0!==t.habboGroupId)return void Ar(t.roomId);switch(t.doorMode){case a.hg.DOORBELL_STATE:return void c((e=>{const s={...e};return s.roomInfo=t,s.state=Sr.START_DOORBELL,s}));case a.hg.PASSWORD_STATE:return void c((e=>{const s={...e};return s.roomInfo=t,s.state=Sr.START_PASSWORD,s}))}}X(t.roomId)};return n?Object(Kr.jsxs)(Nc,{pointer:!0,overflow:"hidden",alignItems:"center",onClick:o,gap:0,className:"navigator-item p-1 bg-light rounded small mb-1 flex-column border border-muted",...r,children:[Object(Kr.jsxs)(Yc,{roomId:t.roomId,customUrl:t.officialRoomPicRef,className:"d-flex flex-column align-items-center justify-content-end mb-1",children:[t.habboGroupId>0&&Object(Kr.jsx)(xc,{badgeCode:t.groupBadgeCode,isGroup:!0,className:"position-absolute top-0 start-0 m-1"}),Object(Kr.jsxs)(ec,{center:!0,className:"badge p-1 position-absolute m-1 "+i(),gap:1,children:[Object(Kr.jsx)(ic.a,{icon:"user"}),t.userCount]}),t.doorMode!==a.hg.OPEN_STATE&&Object(Kr.jsx)("i",{className:"position-absolute end-0 mb-1 me-1 icon icon-navigator-room-"+(t.doorMode===a.hg.DOORBELL_STATE?"locked":t.doorMode===a.hg.PASSWORD_STATE?"password":t.doorMode===a.hg.INVISIBLE_STATE?"invisible":"")})]}),Object(Kr.jsxs)(ec,{className:"w-100",children:[Object(Kr.jsx)(Zc,{truncate:!0,className:"flex-grow-1",children:t.roomName}),Object(Kr.jsx)(ec,{reverse:!0,alignItems:"center",gap:1,children:Object(Kr.jsx)(dd,{roomData:t})}),s]})]}):Object(Kr.jsxs)(ec,{pointer:!0,overflow:"hidden",alignItems:"center",onClick:o,gap:2,className:"navigator-item px-2 py-1 small",...r,children:[Object(Kr.jsxs)(ec,{center:!0,className:"badge p-1 "+i(),gap:1,children:[Object(Kr.jsx)(ic.a,{icon:"user"}),t.userCount]}),Object(Kr.jsx)(Zc,{truncate:!0,grow:!0,children:t.roomName}),Object(Kr.jsxs)(ec,{reverse:!0,alignItems:"center",gap:1,children:[Object(Kr.jsx)(dd,{roomData:t}),t.habboGroupId>0&&Object(Kr.jsx)("i",{className:"icon icon-navigator-room-group"}),t.doorMode!==a.hg.OPEN_STATE&&Object(Kr.jsx)("i",{className:"icon icon-navigator-room-"+(t.doorMode===a.hg.DOORBELL_STATE?"locked":t.doorMode===a.hg.PASSWORD_STATE?"password":t.doorMode===a.hg.INVISIBLE_STATE?"invisible":"")})]}),s]})},jd=e=>{const{searchResult:t=null,...s}=e,[n,r]=Object(c.useState)(!0),[i,a]=Object(c.useState)(0);Object(c.useEffect)((()=>{t&&a(t.mode)}),[t,e]);const o=i>=Nr.THUMBNAILS;return Object(Kr.jsxs)(Nc,{className:"bg-white navigator-boxes border border-muted",gap:0,children:[Object(Kr.jsxs)(ec,{fullWidth:!0,alignItems:"center",justifyContent:"between",className:"px-2 py-1",children:[Object(Kr.jsxs)(ec,{grow:!0,pointer:!0,alignItems:"center",gap:1,onClick:e=>r((e=>!e)),children:[Object(Kr.jsx)(ic.a,{icon:n?"minus":"plus",className:"text-secondary"}),Object(Kr.jsx)(Zc,{children:nt((()=>{let e=t.code;return e&&e.length?e.startsWith("${")?e.slice(2,e.length-1):"navigator.searchcode.title."+e:t.data})())})]}),Object(Kr.jsx)(ic.a,{icon:i===Nr.LIST?"th":i>=Nr.THUMBNAILS?"bars":null,className:"text-secondary",onClick:()=>{a((e=>e===Nr.LIST?Nr.THUMBNAILS:Nr.LIST))}})]})," ",n&&Object(Kr.jsx)(Kr.Fragment,{children:o?Object(Kr.jsx)(Zr,{columnCount:3,...s,columnMinWidth:110,columnMinHeight:130,className:"mx-2",children:t.rooms.length>0&&t.rooms.map(((e,t)=>Object(Kr.jsx)(hd,{roomData:e,thumbnail:!0},t)))}):Object(Kr.jsx)(Jr,{columnCount:1,className:"navigator-grid",gap:0,children:t.rooms.length>0&&t.rooms.map(((e,t)=>Object(Kr.jsx)(hd,{roomData:e},t)))})})]})},bd=e=>{const{sendSearch:t=null}=e,[s,n]=Object(c.useState)(0),[r,i]=Object(c.useState)(""),{topLevelContext:a=null,searchResult:o=null}=Qu(),l=()=>{if(!a)return;let e=Rr[s];e||(e=Rr[0]);const n=(e.query?e.query+":":"")+r;t(n||"",a.code)};return Object(c.useEffect)((()=>{if(!o)return;const e=o.data.split(":");let t=null,s="";if(e.length>=2){const[n,...r]=e;t=Rr.find((e=>e.query===n)),s=r.join(":")}else s=o.data;t||(t=Rr[0]),n(Rr.findIndex((e=>e===t))),i(s)}),[o]),Object(Kr.jsxs)(ec,{fullWidth:!0,gap:1,children:[Object(Kr.jsx)(ec,{shrink:!0,children:Object(Kr.jsx)("select",{className:"form-select form-select-sm",value:s,onChange:e=>n(parseInt(e.target.value)),children:Rr.map(((e,t)=>Object(Kr.jsx)("option",{value:t,children:nt("navigator.filter."+e.name)},t)))})}),Object(Kr.jsxs)(ec,{fullWidth:!0,gap:1,children:[Object(Kr.jsx)("input",{type:"text",className:"form-control form-control-sm",placeholder:nt("navigator.filter.input.placeholder"),value:r,onChange:e=>i(e.target.value),onKeyDown:e=>(e=>{"Enter"===e.key&&l()})(e)}),Object(Kr.jsx)(tc,{variant:"primary",onClick:l,children:Object(Kr.jsx)(ic.a,{icon:"search"})})]})]})},gd=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(!1),[i,o]=Object(c.useState)(!1),[l,u]=Object(c.useState)(!1),[d,h]=Object(c.useState)(!1),[j,b]=Object(c.useState)(!1),[g,O]=Object(c.useState)(!0),[m,p]=Object(c.useState)(!1),[_,E]=Object(c.useState)(null),[f,x]=Object(c.useState)(null),[I,T]=Object(c.useState)(null),[C,N]=_s(),[v,R]=Object(c.useState)({roomInfo:null,state:Sr.NONE}),[A,y]=Object(c.useState)(null),w=Object(c.useRef)(null),k=Object(c.useCallback)((e=>{if(e.type===a.Yg.CREATED)return s(!1),void o(!1)}),[]);Gt(a.Yg.CREATED,k);const D=Object(c.useCallback)(((e,t)=>{o(!1),$n(new a.Je(t,e)),b(!0)}),[]),U=Object(c.useCallback)((()=>{if(n)return w.current?(D(w.current.value,w.current.code),void(w.current=null)):void(A?D(A.data,A.code):f&&D("",f.code));p(!0)}),[n,A,f,D]),P=Object(c.useCallback)((e=>{const n=e.split("/");if(!(n.length<2))switch(n[1]){case"show":return s(!0),void p(!0);case"hide":return void s(!1);case"toggle":return t?void s(!1):(s(!0),void p(!0));case"toggle-room-info":return void u((e=>!e));case"toggle-room-link":return void h((e=>!e));case"goto":if(n.length<=2)return;if("home"===n[2]){if(C.homeRoomId<=0)return;Ar(C.homeRoomId)}else{Ar(parseInt(n[2]))}return;case"create":return s(!0),void o(!0);case"search":if(n.length>2){const e=n[2];let t="";n.length>3&&(t=n[3]),w.current={value:t,code:e},s(!0),p(!0)}return}}),[t,C]);return Object(c.useEffect)((()=>{const e={linkReceived:P,eventUrlPrefix:"navigator/"};return S(e),()=>M(e)}),[P]),Object(c.useEffect)((()=>{A&&b(!1)}),[A]),Object(c.useEffect)((()=>{t&&n&&m&&(U(),p(!1))}),[t,n,m,U]),Object(c.useEffect)((()=>{!n&&f&&r(!0)}),[n,f]),Object(c.useEffect)((()=>{t&&g&&($n(new a.Ge),O(!1))}),[t,g]),Object(c.useEffect)((()=>{a.Wd.addCallback(a.Jd.OPENROOM,(function(e){return $n(new a.pb(e))}))}),[]),Object(Kr.jsxs)(Ku,{value:{categories:_,setCategories:E,topLevelContext:f,setTopLevelContext:x,topLevelContexts:I,setTopLevelContexts:T,navigatorData:C,setNavigatorData:N,doorData:v,setDoorData:R,searchResult:A,setSearchResult:y},children:[Object(Kr.jsx)($u,{}),t&&Object(Kr.jsxs)(_c,{uniqueKey:"navigator",className:"nitro-navigator",children:[Object(Kr.jsx)(hc,{headerText:nt(i?"navigator.createroom.title":"navigator.title"),onCloseClick:e=>s(!1)}),Object(Kr.jsxs)($c,{children:[I&&I.length>0&&I.map(((e,t)=>Object(Kr.jsx)(Qc,{isActive:f===e&&!i,onClick:t=>D("",e.code),children:nt("navigator.toplevelview."+e.code)},t))),Object(Kr.jsx)(Qc,{isActive:i,onClick:e=>o(!0),children:Object(Kr.jsx)(ic.a,{icon:"plus"})})]}),Object(Kr.jsxs)(lc,{position:"relative",children:[j&&Object(Kr.jsx)(Qr,{fit:!0,position:"absolute",className:"top-0 start-0 z-index-1 bg-muted opacity-0-5"}),!i&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(bd,{sendSearch:D}),Object(Kr.jsx)(Nc,{overflow:"auto",children:A&&A.results.map(((e,t)=>Object(Kr.jsx)(jd,{searchResult:e},t)))})]}),i&&Object(Kr.jsx)(ed,{})]})]}),Object(Kr.jsx)(Zu,{}),l&&Object(Kr.jsx)(td,{onCloseClick:()=>u(!1)}),d&&Object(Kr.jsx)(sd,{onCloseClick:()=>h(!1)}),Object(Kr.jsx)(ld,{})]})},Od=/\n\r|\n|\r/gm,md=e=>{const[t,s]=Object(c.useState)(null),[n,r]=Object(c.useState)(""),[i,o]=Object(c.useState)(null),l=Object(c.useRef)(null),u=Object(c.useCallback)((async e=>{try{const t=await fetch(e);if(!t)return;const n=(await t.text()).split(Od),c=n.shift().split("|");r(c[0]),o((e=>c[1]&&2===c[1].split(";").length?{width:parseInt(c[1].split(";")[0]),height:parseInt(c[1].split(";")[1])}:null)),s(n.join(""))}catch(t){a.We.error(`Failed to fetch ${e}`)}}),[]),d=Object(c.useCallback)((e=>{const t=e.split("/");t.length<2||(t.shift(),u(k("habbopages.url")+t.join("/")))}),[u]);return Object(c.useEffect)((()=>{const e={linkReceived:d,eventUrlPrefix:"habbopages/"};return S(e),()=>M(e)}),[d]),Object(c.useEffect)((()=>{const e=e=>{if(!(e.target instanceof HTMLAnchorElement))return;e.preventDefault();const t=e.target.href;t&&t.length&&Pr.openUrl(t)};return document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}}),[]),t?Object(Kr.jsxs)(_c,{className:"nitropedia",theme:"primary-slim",style:i?{width:i.width,height:i.height}:{},children:[Object(Kr.jsx)(hc,{headerText:n,onCloseClick:()=>s(null)}),Object(Kr.jsx)(lc,{children:Object(Kr.jsx)(Qr,{fit:!0,innerRef:l,className:"text-black",dangerouslySetInnerHTML:{__html:t}})})]}):null},pd=e=>{const[t,s]=Object(c.useState)(0),[n,r]=Object(c.useState)(null),[i,o]=Object(c.useState)(!0),l=Object(c.useCallback)((e=>{s(0),r(null)}),[]);it(a.tb,l);const u=Object(c.useCallback)((e=>{s(0),r(null)}),[]);it(a.xg,u);const d=Object(c.useCallback)((e=>{const t=e.getParser();t.roomEnter&&(t.data.habboGroupId>0?(s(t.data.habboGroupId),$n(new a.Tc(t.data.habboGroupId,!1))):(s(0),r(null)))}),[]);it(a.nc,d);const h=Object(c.useCallback)((e=>{const c=e.getParser();!n||c.groupId!==n.id&&c.groupId!==t||(s(0),r(null))}),[t,n]);it(a.Gd,h);const j=Object(c.useCallback)((e=>{const s=e.getParser();s.id===t&&r(s)}),[t]);it(a.Uc,j);const b=n&&n.ownerName===ee().userName;return n?Object(Kr.jsx)(Qr,{className:"nitro-notification-bubble",children:Object(Kr.jsxs)(Nc,{children:[Object(Kr.jsxs)(ec,{alignItems:"center",justifyContent:"between",pointer:!0,onClick:e=>o((e=>!e)),children:[Object(Kr.jsx)(Zc,{variant:"white",children:nt("group.homeroominfo.title")}),Object(Kr.jsx)(ic.a,{icon:i?"chevron-up":"chevron-down"})]}),i&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsxs)(ec,{pointer:!0,alignItems:"center",gap:2,onClick:e=>Er(n.id),children:[Object(Kr.jsx)(Qr,{className:"group-badge",children:Object(Kr.jsx)(xc,{badgeCode:n.badge,isGroup:!0})}),Object(Kr.jsx)(Zc,{variant:"white",children:n.title})]}),(n.type!==cl.PRIVATE||b)&&Object(Kr.jsx)(tc,{fullWidth:!0,variant:"success",disabled:n.membershipType===rl.REQUEST_PENDING,onClick:()=>{if(b)return fr(n.id);n.type===cl.PRIVATE&&n.membershipType===rl.NOT_MEMBER||(n.membershipType!==rl.MEMBER?Ir(n.id):Pr.confirm(nt("group.leaveconfirm.desc"),(()=>{$n(new a.cd(n.id,ee().userId))}),null))},children:nt(b?"group.manage":n.type===cl.PRIVATE?"":n.membershipType===rl.MEMBER?"group.leave":n.membershipType===rl.NOT_MEMBER&&n.type===cl.REGULAR?"group.join":n.membershipType===rl.REQUEST_PENDING?"group.membershippending":n.membershipType===rl.NOT_MEMBER&&n.type===cl.EXCLUSIVE?"group.requestmembership":void 0)})]})]})}):null},_d=e=>{const t=Object(c.useCallback)((e=>{const t=e.getParser();if(t.userId!==ee().userId)return;const s=nt("notifications.text.respect.1"),n=nt("notifications.text.respect.2",["count"],[t.respectsReceived.toString()]);Pr.showSingleBubble(s,kr.RESPECT),Pr.showSingleBubble(n,kr.RESPECT)}),[]);it(a.Wf,t);const s=Object(c.useCallback)((e=>{const t=e.getParser();Pr.simpleAlert(t.message.replace(/\\r/g,"\r"),null,null,nt("notifications.broadcast.title"))}),[]);it(a.Dd,s);const n=Object(c.useCallback)((e=>{const t=e.getParser(),s=nt("achievements.levelup.desc"),n=et(t.data.badgeCode),r=ee().getBadgeUrl(t.data.badgeCode),c="questengine/achievements/"+t.data.category;Pr.showSingleBubble(s+" "+n,kr.ACHIEVEMENT,r,c)}),[]);it(a.c,n);const r=Object(c.useCallback)((e=>{const t=e.getParser();Pr.showClubGiftNotification(t.numGifts)}),[]);it(a.hb,r);const i=Object(c.useCallback)((e=>{const t=e.getParser();Pr.handleModeratorMessage(t.message,t.url)}),[]);it(a.xe,i);const o=Object(c.useCallback)((e=>{const t=e.getParser();if(t.amountChanged<=0||5!==t.type)return;const s=k("currency.asset.icon.url","").replace("%type%",t.type.toString());Pr.showSingleBubble(nt("notifications.text.loyalty.received",["AMOUNT"],[t.amountChanged.toString()]),kr.INFO,s)}),[]);it(a.f,o);const l=Object(c.useCallback)((e=>{const t=e.getParser();Pr.handleUserBannedMessage(t.message)}),[]);it(a.wi,l);const u=Object(c.useCallback)((e=>{const t=e.getParser();Pr.handleHotelClosedMessage(t.openHour,t.openMinute,t.userThrowOutAtClose)}),[]);it(a.Ld,u);const d=Object(c.useCallback)((e=>{const t=e.getParser(),s=nt("notifications.text."+(t.boughtAsGift?"petbought":"petreceived"));let n=null;const r=L().getRoomObjectPetImage(t.pet.typeId,t.pet.paletteId,parseInt(t.pet.color,16),new a.Ui(135),64,null,!0);r&&(n=r.getImage().src),Pr.showSingleBubble(s,kr.PETLEVEL,n)}),[]);it(a.rf,d);const h=Object(c.useCallback)((e=>{e.getParser();Pr.showModerationDisclaimer()}),[]);it(a.wg,h);const j=Object(c.useCallback)((e=>{const t=e.getParser();Pr.handleMOTD(t.messages)}),[]);it(a.be,j);const b=Object(c.useCallback)((e=>{const t=e.getParser();let s=null;const n=L().getRoomObjectPetImage(t.figureData.typeId,t.figureData.paletteId,parseInt(t.figureData.color,16),new a.Ui(135),64,null,!0);n&&(s=n.getImage().src),Pr.showSingleBubble(nt("notifications.text.petlevel",["pet_name","level"],[t.petName,t.level.toString()]),kr.PETLEVEL,s)}),[]);it(a.qf,b);const g=Object(c.useCallback)((e=>{const t=e.getParser();Pr.BUBBLES_DISABLED=!t.enabled}),[]);it(a.Nd,g);const O=Object(c.useCallback)((e=>{const t=e.getParser();if(!t.products||!t.products.length)return;const s=t.products[0];s&&Pr.showSingleBubble(nt("notifications.text.club_gift.selected"),kr.INFO,sn.getProductImageUrl(s.productType,s.furniClassId,s.extraParam))}),[]);it(a.ib,O);const m=Object(c.useCallback)((e=>{const t=e.getParser();Pr.handleHotelMaintenanceMessage(t.minutesUntilMaintenance,t.duration)}),[]);it(a.ce,m);const p=Object(c.useCallback)((e=>{const t=e.getParser();Pr.handleModeratorCaution(t.message,t.url)}),[]);it(a.ve,p);const _=Object(c.useCallback)((e=>{const t=e.getParser();Pr.showNotification(t.type,t.parameters)}),[]);it(a.ff,_);const E=Object(c.useCallback)((e=>{const t=e.getParser();Pr.handleHotelClosingMessage(t.openMinute)}),[]);it(a.Md,E);const f=Object(c.useCallback)((e=>{const t=e.getParser();Pr.handleLoginFailedHotelClosedMessage(t.openHour,t.openMinute)}),[]);return it(a.Kd,f),null},Ed=e=>{const{title:t="Nitro",close:s=null,...n}=e;return Object(Kr.jsx)(Pc,{title:t,close:s,...n,children:Object(Kr.jsxs)(Jr,{children:[Object(Kr.jsx)(Nc,{center:!0,size:5,children:Object(Kr.jsx)("object",{data:"https://assets.nitrodev.co/logos/nitro-n-dark.svg",width:"100",height:"100",children:"\xa0"})}),Object(Kr.jsxs)(Nc,{size:7,children:[Object(Kr.jsxs)(Nc,{alignItems:"center",gap:0,children:[Object(Kr.jsx)(Zc,{bold:!0,fontSize:4,children:"Nitro React"}),Object(Kr.jsxs)(Zc,{children:["v","2.0.0"]})]}),Object(Kr.jsxs)(Nc,{alignItems:"center",children:[Object(Kr.jsxs)(Zc,{children:[Object(Kr.jsx)("b",{children:"Renderer:"})," v",a.ef.RENDERER_VERSION]}),Object(Kr.jsxs)(Nc,{fullWidth:!0,gap:1,children:[Object(Kr.jsx)(tc,{fullWidth:!0,variant:"success",onClick:e=>window.open("https://discord.nitrodev.co"),children:"Discord"}),Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)(tc,{fullWidth:!0,onClick:e=>window.open("https://git.krews.org/nitro/nitro-react"),children:"Git"}),Object(Kr.jsx)(tc,{fullWidth:!0,onClick:e=>window.open("https://git.krews.org/nitro/nitro-react/-/issues"),children:"Bug Report"})]})]})]})]})]})})},fd=e=>{const{item:t=null,title:s=e.item&&e.item.title||"",close:n=null,...r}=e,[i,a]=Object(c.useState)(!1),o=Object(c.useCallback)((()=>{Pr.openUrl(t.clickUrl),n()}),[t,n]),l=t.alertType===yr.DEFAULT;return Object(Kr.jsxs)(Pc,{title:s,close:n,...r,type:l?yr.DEFAULT:t.alertType,children:[Object(Kr.jsxs)(ec,{fullHeight:!0,overflow:"auto",gap:l||t.imageUrl&&!i?4:0,children:[l&&!t.imageUrl&&Object(Kr.jsx)(Qr,{className:"notification-frank flex-shrink-0"}),t.imageUrl&&!i&&Object(Kr.jsx)("img",{src:t.imageUrl,alt:t.title,onError:()=>{a(!0)},className:"align-self-baseline"}),Object(Kr.jsxs)(Qr,{classNames:["notification-text overflow-y-auto d-flex flex-column w-100",t.clickUrl&&!l?"justify-content-center":""],children:[t.messages.length>0&&t.messages.map(((e,t)=>{const s=e.replace(/\r\n|\r|\n/g,"<br />");return Object(Kr.jsx)(Qr,{dangerouslySetInnerHTML:{__html:s}},t)})),t.clickUrl&&t.clickUrl.length>0&&t.imageUrl&&!i&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)("hr",{className:"my-2 w-100"}),Object(Kr.jsx)(tc,{onClick:o,className:"align-self-center px-3",children:nt(t.clickUrlText)})]})]})]}),(!t.imageUrl||t.imageUrl&&i)&&Object(Kr.jsx)(Kr.Fragment,{children:Object(Kr.jsxs)(Nc,{alignItems:"center",center:!0,gap:0,children:[Object(Kr.jsx)("hr",{className:"my-2 w-100"}),!t.clickUrl&&Object(Kr.jsx)(tc,{onClick:n,children:nt("generic.close")}),t.clickUrl&&t.clickUrl.length>0&&Object(Kr.jsx)(tc,{onClick:o,children:nt(t.clickUrlText)})]})})]})},xd=e=>{const{item:t=null,title:s=e.item&&e.item.title||"",close:n=null,...r}=e,[i,a]=Object(c.useState)(""),[o,l]=Object(c.useState)([]),u=Object(c.useCallback)((()=>{Pr.openUrl(t.clickUrl),n()}),[t,n]);Object(c.useEffect)((()=>{l(JSON.parse(t.messages[0]))}),[t]);const d=Object(c.useCallback)((e=>{let s=JSON.parse(t.messages[0]);l(s.filter((t=>t.includes(e)))),a(e)}),[t]),h=t.clickUrl&&t.clickUrl.startsWith("event:");return Object(Kr.jsxs)(Pc,{title:s,close:n,...r,children:[Object(Kr.jsx)(ec,{fullWidth:!0,alignItems:"center",position:"relative",children:Object(Kr.jsx)("input",{type:"text",className:"form-control form-control-sm",placeholder:nt("generic.search"),value:i,onChange:e=>d(e.target.value)})}),Object(Kr.jsx)(Nc,{fullHeight:!0,className:"py-1",overflow:"hidden",children:Object(Kr.jsx)(Zr,{gap:1,columnCount:1,children:o&&o.map(((e,t)=>Object(Kr.jsx)("span",{children:e},t)))})}),Object(Kr.jsx)("hr",{className:"my-2"}),Object(Kr.jsxs)(Nc,{alignItems:"center",center:!0,gap:1,children:[!h&&!t.clickUrl&&Object(Kr.jsx)(tc,{onClick:n,children:nt("generic.close")}),t.clickUrl&&t.clickUrl.length>0&&Object(Kr.jsx)(tc,{onClick:u,children:nt(t.clickUrlText)})]})]})},Id=(e,t)=>{if(!e)return null;const s={key:e.id,item:e,close:t};switch(e.alertType){case yr.NITRO:return Object(Kr.jsx)(Ed,{...s});case yr.SEARCH:return Object(Kr.jsx)(xd,{...s});default:return Object(Kr.jsx)(fd,{...s})}},Td=e=>{const{item:t=null,close:s=null,...n}=e;return Object(Kr.jsxs)(Bc,{fadesOut:!1,className:"flex-column club-gift",close:s,...n,children:[Object(Kr.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-2",children:[Object(Kr.jsx)(Ic,{type:"hc",className:"flex-shrink-0"}),Object(Kr.jsx)("span",{className:"ms-1",children:nt("notifications.text.club_gift")})]}),Object(Kr.jsxs)("div",{className:"d-flex align-items-center justify-content-end gap-2",children:[Object(Kr.jsx)("button",{type:"button",className:"btn btn-lighter w-100 btn-sm",onClick:()=>Pr.openUrl(t.linkUrl),children:nt("notifications.button.show_gift_list")}),Object(Kr.jsx)("span",{className:"text-decoration-underline cursor-pointer text-nowrap",onClick:s,children:nt("notifications.button.later")})]})]})},Cd=e=>{const{item:t=null,close:s=null,...n}=e,r=t.message.replace(/\r\n|\r|\n/g,"<br />");return Object(Kr.jsxs)(Bc,{close:s,gap:2,alignItems:"center",onClick:e=>t.linkUrl&&t.linkUrl.length&&Pr.openUrl(t.linkUrl),...n,children:[Object(Kr.jsx)(ec,{center:!0,className:"bubble-image-container",children:t.iconUrl&&t.iconUrl.length&&Object(Kr.jsx)("img",{className:"no-select",src:t.iconUrl,alt:""})}),Object(Kr.jsx)(Zc,{wrap:!0,variant:"white",dangerouslySetInnerHTML:{__html:r}})]})},Sd=(e,t)=>{if(!e)return null;const s={key:e.id,item:e,close:t};return e.notificationType===kr.CLUBGIFT?Object(Kr.jsx)(Td,{...s}):Object(Kr.jsx)(Cd,{...s})},Nd=e=>{const{item:t=null,close:s=null,...n}=e,{message:r=null,onConfirm:c=null,onCancel:i=null,confirmText:a=null,cancelText:o=null,title:l=null}=t;return Object(Kr.jsxs)(Pc,{title:l,close:s,...n,type:yr.ALERT,children:[Object(Kr.jsx)(ec,{grow:!0,center:!0,children:Object(Kr.jsx)(Zc,{children:r})}),Object(Kr.jsxs)(ec,{gap:1,className:"mt-2",children:[Object(Kr.jsx)(tc,{fullWidth:!0,variant:"danger",onClick:()=>{i&&i(),s()},children:o}),Object(Kr.jsx)(tc,{fullWidth:!0,onClick:()=>{c&&c(),s()},children:a})]})]})},vd=(e,t)=>{if(!e)return null;const s={key:e.id,item:e,close:t};return e.confirmType,Object(Kr.jsx)(Nd,{...s})},Rd=e=>{const[t,s]=Object(c.useState)([]),[n,r]=Object(c.useState)([]),[i,a]=Object(c.useState)([]),o=Object(c.useCallback)((e=>{const t=new wr(e.messages,e.alertType,e.clickUrl,e.clickUrlText,e.title,e.imageUrl);s((e=>[t,...e]))}),[]);qt(vt.ALERT,o);const l=Object(c.useCallback)((e=>{const t=new Dr(e.message,e.notificationType,e.imageUrl,e.linkUrl);r((e=>[t,...e]))}),[]);qt(Rt.NEW_BUBBLE,l);const u=Object(c.useCallback)((e=>{const t=new Ur(e.type,e.message,e.onConfirm,e.onCancel,e.confirmText,e.cancelText,e.title);a((e=>[t,...e]))}),[]);qt(wt.CONFIRM,u);const d=Object(c.useCallback)((e=>{s((t=>{const s=[...t],n=s.findIndex((t=>e===t));return n>=0&&s.splice(n,1),s}))}),[]),h=Object(c.useCallback)((e=>{r((t=>{const s=[...t],n=s.findIndex((t=>e===t));return n>=0&&s.splice(n,1),s}))}),[]),j=Object(c.useCallback)((e=>{a((t=>{const s=[...t],n=s.findIndex((t=>e===t));return n>=0&&s.splice(n,1),s}))}),[]),b=Object(c.useMemo)((()=>{if(!t||!t.length)return null;const e=[];for(const s of t){const t=Id(s,(()=>d(s)));e.push(t)}return e}),[t,d]),g=Object(c.useMemo)((()=>{if(!n||!n.length)return null;const e=[];for(const t of n){const s=Sd(t,(()=>h(t)));t.notificationType!==kr.CLUBGIFT?e.push(s):e.unshift(s)}return e}),[n,h]),O=Object(c.useMemo)((()=>{if(!i||!i.length)return null;const e=[];for(const t of i){const s=vd(t,(()=>j(t)));e.push(s)}return e}),[i,j]);return Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(_d,{}),Object(Kr.jsx)(Nc,{gap:1,children:g}),O,b]})};var Ad=s(143);const yd=e=>{const{type:t=-1,amount:s=-1,short:n=!1}=e,r=Object(c.useMemo)((()=>Object(Kr.jsxs)(ec,{justifyContent:"end",pointer:!0,gap:1,classNames:["nitro-purse-button","currency-"+Math.abs(t).toString()],children:[Object(Kr.jsx)(Zc,{truncate:!0,textEnd:!0,variant:"white",grow:!0,children:n?st(s):tt(s)}),Object(Kr.jsx)(Ic,{type:t})]})),[s,n,t]);return n?Object(Kr.jsx)(Nl.a,{placement:"left",overlay:Object(Kr.jsx)(Ad.a,{id:`tooltip-${t}`,children:tt(s)}),children:r}):r},wd=e=>{const{type:t=-1,amount:s=-1}=e;return Object(Kr.jsxs)(ec,{fullWidth:!0,justifyContent:"between",className:"nitro-purse-seasonal-currency p-2 rounded",children:[Object(Kr.jsx)(Zc,{variant:"white",children:nt(`purse.seasonal.currency.${t}`)}),Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)(Zc,{variant:"white",children:tt(s)}),Object(Kr.jsx)(Ic,{type:t})]})]})},kd=e=>{const{purse:t=null,hcDisabled:s=!1}=fs(),n=Object(c.useMemo)((()=>k("system.currency.types",[])),[]),r=Object(c.useMemo)((()=>k("currency.display.number.short",!1)),[]),i=Object(c.useMemo)((()=>{if(!t)return null;const e=31*t.clubPeriods+t.clubDays,s=t.minutesUntilExpiration;return t.clubLevel===a.Ed.NO_CLUB?nt("purse.clubdays.zero.amount.text"):s>-1&&s<1440?a.Kb.shortFormat(60*s):a.Kb.shortFormat(86400*e)}),[t]),o=Object(c.useCallback)((function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,c=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!t||!t.activityPoints||!t.activityPoints.size)return null;const i=Array.from(t.activityPoints.keys()).filter((e=>n.indexOf(e)>=0));let a=0;for(;a<e;)i.shift(),a++;a=0;const o=[];for(const n of i){if(s>-1&&a===s)break;c?o.push(Object(Kr.jsx)(wd,{type:n,amount:t.activityPoints.get(n)},n)):o.push(Object(Kr.jsx)(yd,{type:n,amount:t.activityPoints.get(n),short:r},n)),a++}return o}),[t,n,r]);return t?Object(Kr.jsxs)(Nc,{alignItems:"end",className:"nitro-purse-container",gap:1,children:[Object(Kr.jsx)(ec,{className:"nitro-purse",children:Object(Kr.jsxs)(Jr,{fullWidth:!0,gap:1,children:[Object(Kr.jsxs)(Nc,{justifyContent:"center",size:s?10:6,gap:1,children:[Object(Kr.jsx)(yd,{type:-1,amount:t.credits,short:r}),o(0,2)]}),!s&&Object(Kr.jsxs)(Nc,{center:!0,pointer:!0,size:4,gap:1,className:"nitro-purse-subscription",onClick:e=>y("habboUI/open/hccenter"),children:[Object(Kr.jsx)(Ic,{type:"hc"}),Object(Kr.jsx)(Zc,{variant:"white",children:i})]}),Object(Kr.jsxs)(Nc,{justifyContent:"center",size:2,gap:1,children:[Object(Kr.jsx)(ec,{center:!0,pointer:!0,fullHeight:!0,className:"nitro-purse-button",onClick:e=>y("help/show"),children:Object(Kr.jsx)("i",{className:"icon icon-help"})}),Object(Kr.jsx)(ec,{center:!0,pointer:!0,fullHeight:!0,className:"nitro-purse-button",onClick:e=>y("user-settings/toggle"),children:Object(Kr.jsx)("i",{className:"icon icon-cog"})})]})]})}),o(2,-1,!0)]}):null},Dd=e=>Object(Kr.jsx)("div",{className:"nitro-right-side",children:Object(Kr.jsxs)(Nc,{position:"relative",gap:1,children:[Object(Kr.jsx)(kd,{}),Object(Kr.jsx)(pd,{}),Object(Kr.jsx)(Rd,{})]})}),Ud=Object(c.createContext)({roomSession:null,eventDispatcher:null,widgetHandler:null}),Pd=e=>Object(Kr.jsx)(Ud.Provider,{value:e.value,children:e.children}),Md=()=>Object(c.useContext)(Ud),Ld=e=>{const[t,s]=Object(c.useState)(null),[n,r]=Object(c.useState)(null),[i,o]=Object(c.useState)(0),{roomSession:l=null,widgetHandler:u=null,eventDispatcher:d=null}=Md(),h=Object(c.useCallback)((function(e,s,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!t)return;const c=a.jb.hslToRGB(((255&e)<<16)+((255&s)<<8)+(255&n));r&&o(c),t.tint=e||s||n?c:0}),[t]),j=Object(c.useCallback)((e=>{if(!n)return;const t=e>>16&255,s=e>>8&255,r=255&e;n.red=t/255,n.green=s/255,n.blue=r/255}),[n]),b=Object(c.useCallback)((e=>{if(!a.Bg.isRoomPreviewerId(e.roomId))switch(e.type){case a.Jg.ROOM_BACKGROUND_COLOR:{const t=e;return void(t.enable?h(t.hue,t.saturation,t.lightness,!0):h(0,0,0,!0))}case a.Xf.ROOM_COLOR:{const t=e;let s=0,n=255;return t.bgOnly||(s=t.color,n=t.brightness),void j(a.jb.hslToRGB((16776960&a.jb.rgbToHSL(s))+n))}case a.ng.ROOM_COLOR:u.processEvent(e)}}),[u,h,j]);Bt(a.Jg.ROOM_BACKGROUND_COLOR,b),Bt(a.Xf.ROOM_COLOR,b),Bt(a.ng.ROOM_COLOR,b);const g=Object(c.useCallback)((e=>{switch(e.type){case Ce.PREVIEW:return void h(e.hue,e.saturation,e.lightness);case Ce.CLEAR_PREVIEW:if(!t)return;return void(t.tint=i)}}),[t,i,h]);return Pt(Ce.PREVIEW,d,g),Pt(Ce.CLEAR_PREVIEW,d,g),Object(c.useEffect)((()=>{if(!l)return;const e=L().getRoomInstanceRenderingCanvas(l.roomId,1);if(!e)return;const t=new a.af(a.bf.WHITE),n=new a.Pe,c=e.master;t.tint=0,t.width=C().width,t.height=C().height,c.addChildAt(t,0),c.filters=[n],s(t),r(n);const i=e=>{t.width=C().width,t.height=C().height};return window.addEventListener("resize",i),()=>{s((e=>(e&&e.destroy(),null))),r((e=>(e&&e.destroy(),null))),o(0),window.removeEventListener("resize",i)}}),[l]),null},Fd=e=>Object(Kr.jsx)("div",{className:"room-spectator"}),Hd=e=>{const{justifyContent:t="center",alignItems:s="center",classNames:n=[],...r}=e,i=Object(c.useMemo)((()=>{const e=["menu-header","p-1"];return n.length&&e.push(...n),e}),[n]);return Object(Kr.jsx)(ec,{justifyContent:t,alignItems:s,classNames:i,...r})};class Bd{}Bd.GENERIC_SKILL=0,Bd.DRESS_UP=1,Bd.SETUP_CHAT=2,Bd.RANDOM_WALK=3,Bd.DANCE=4,Bd.CHANGE_BOT_NAME=5,Bd.SERVE_BEVERAGE=6,Bd.INCLIENT_LINK=7,Bd.NUX_PROCEED=8,Bd.CHANGE_BOT_MOTTO=9,Bd.NUX_TAKE_TOUR=10,Bd.NO_PICK_UP=12,Bd.NAVIGATOR_SEARCH=14,Bd.DONATE_TO_USER=24,Bd.DONATE_TO_ALL=25;const Gd=e=>{const{chatEvent:t=null,close:s=null}=e,[n,r]=Object(c.useState)("${bot.skill.chatter.configuration.text.placeholder}"===t.chat?"":t.chat),[i,o]=Object(c.useState)(t.automaticChat),[l,u]=Object(c.useState)(t.mixSentences),[d,h]=Object(c.useState)(t.chatDelay),j=Object(c.useMemo)((()=>he(ie().roomId,t.objectId,t.category,1)),[t]);return Object(Kr.jsx)(pc,{windowPosition:gc.NOTHING,handleSelector:".drag-handler",dragStyle:{top:j.y,left:j.x},children:Object(Kr.jsxs)(Qr,{className:"nitro-context-menu bot-chat",children:[Object(Kr.jsx)(Hd,{className:"drag-handler",children:nt("bot.skill.chatter.configuration.title")}),Object(Kr.jsxs)(Nc,{className:"p-1",children:[Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{variant:"white",children:nt("bot.skill.chatter.configuration.chat.text")}),Object(Kr.jsx)("textarea",{className:"form-control form-control-sm",placeholder:nt("bot.skill.chatter.configuration.text.placeholder"),value:n,rows:7,onChange:e=>r(e.target.value)})]}),Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsxs)(ec,{gap:1,alignItems:"center",justifyContent:"between",children:[Object(Kr.jsx)(Zc,{fullWidth:!0,variant:"white",children:nt("bot.skill.chatter.configuration.automatic.chat")}),Object(Kr.jsx)("input",{type:"checkbox",className:"form-check-input",checked:i,onChange:e=>o(e.target.checked)})]}),Object(Kr.jsxs)(ec,{gap:1,alignItems:"center",justifyContent:"between",children:[Object(Kr.jsx)(Zc,{fullWidth:!0,variant:"white",children:nt("bot.skill.chatter.configuration.markov")}),Object(Kr.jsx)("input",{type:"checkbox",className:"form-check-input",checked:l,onChange:e=>u(e.target.checked)})]}),Object(Kr.jsxs)(ec,{gap:1,alignItems:"center",justifyContent:"between",children:[Object(Kr.jsx)(Zc,{fullWidth:!0,variant:"white",children:nt("bot.skill.chatter.configuration.chat.delay")}),Object(Kr.jsx)("input",{type:"number",className:"form-control form-control-sm",value:d,onChange:e=>h(e.target.valueAsNumber)})]})]}),Object(Kr.jsxs)(ec,{alignItems:"center",justifyContent:"between",gap:1,children:[Object(Kr.jsx)(tc,{fullWidth:!0,variant:"primary",onClick:s,children:nt("cancel")}),Object(Kr.jsx)(tc,{fullWidth:!0,variant:"success",onClick:()=>{const e=n.replace(/;#;/g," ").replace(/\r\n|\r|\n/g,"\r")+";#;"+i+";#;"+d+";#;"+l;$n(new a.D(t.botId,Bd.SETUP_CHAT,e)),s()},children:nt("save")})]})]})]})})},Wd=e=>{const{item:t=null,close:s=null}=e,[n,r]=Object(c.useState)(-1),[i,o]=Object(c.useState)(null),[l,u]=Object(c.useState)(null),{roomSession:d=null,widgetHandler:h=null}=Md(),j=Object(c.useCallback)((()=>{i&&L().selectRoomObject(d.roomId,i.roomIndex,a.Ig.UNIT)}),[d,i]),b=Object(c.useCallback)((()=>{h.processWidgetMessage(new Sn(Sn.PET_PRODUCT,t.requestRoomObjectId,i.webID)),s()}),[h,t,i,s]),g=Object(c.useMemo)((()=>{if(!i||!l)return null;const e=new a.of(i.figure),t=l.customParams.split(" "),s=parseInt(t[0]);switch(l.specialType){case Rs.PET_SHAMPOO:{if(t.length<2)return null;const n=L().getPetColorResult(s,e.paletteId),r=L().getPetColorResultsForTag(s,t[1]);let c=-1;for(const e of r)if(e.breed===n.breed){c=parseInt(e.id);break}return Object(Kr.jsx)(Gc,{typeId:e.typeId,paletteId:c,petColor:e.color,customParts:e.customParts,direction:2})}case Rs.PET_CUSTOM_PART:{if(t.length<4)return null;const s=[],n=t[1].split(",").map((e=>parseInt(e))),r=t[2].split(",").map((e=>parseInt(e))),c=t[3].split(",").map((e=>parseInt(e)));let i=0;for(;i<n.length;){const t=n[i],o=e.getCustomPart(t);let l=c[i];null!=o&&(l=o.paletteId),s.push(new a.nf(t,r[i],l)),i++}return Object(Kr.jsx)(Gc,{typeId:e.typeId,paletteId:e.paletteId,petColor:e.color,customParts:s,direction:2})}case Rs.PET_CUSTOM_PART_SHAMPOO:{if(t.length<3)return null;const s=[],n=t[1].split(",").map((e=>parseInt(e))),r=t[2].split(",").map((e=>parseInt(e)));let c=0;for(;c<n.length;){const t=n[c],i=e.getCustomPart(t);let o=-1;null!=i&&(o=i.partId),s.push(new a.nf(n[c],o,r[c])),c++}return Object(Kr.jsx)(Gc,{typeId:e.typeId,paletteId:e.paletteId,petColor:e.color,customParts:s,direction:2})}case Rs.PET_SADDLE:{if(t.length<4)return null;const s=[],n=t[1].split(",").map((e=>parseInt(e))),r=t[2].split(",").map((e=>parseInt(e))),c=t[3].split(",").map((e=>parseInt(e)));let i=0;for(;i<n.length;)s.push(new a.nf(n[i],r[i],c[i])),i++;for(const t of e.customParts)-1===n.indexOf(t.layerId)&&s.push(t);return Object(Kr.jsx)(Gc,{typeId:e.typeId,paletteId:e.paletteId,petColor:e.color,customParts:s,direction:2})}case Rs.MONSTERPLANT_REBREED:case Rs.MONSTERPLANT_REVIVAL:case Rs.MONSTERPLANT_FERTILIZE:{let t="rip";const s=L().getRoomObject(d.roomId,i.roomIndex,a.Ig.UNIT);if(s&&(t=s.model.getValue(a.Og.FIGURE_POSTURE),"rip"===t)){const e=i.petLevel;t=e<7?`grw${e}`:"std"}return Object(Kr.jsx)(Gc,{typeId:e.typeId,paletteId:e.paletteId,petColor:e.color,customParts:e.customParts,posture:t,direction:2})}}}),[i,l,d]);return Object(c.useEffect)((()=>{const e=d.userDataManager.getUserDataByIndex(t.id);o(e);const s=ne(d.roomId,t.requestRoomObjectId,a.Ig.FLOOR);if(!s)return;u(s);let n=-1;switch(s.specialType){case Rs.PET_SHAMPOO:n=0;break;case Rs.PET_CUSTOM_PART:n=1;break;case Rs.PET_CUSTOM_PART_SHAMPOO:n=2;break;case Rs.PET_SADDLE:n=3;break;case Rs.MONSTERPLANT_REVIVAL:n=4;break;case Rs.MONSTERPLANT_REBREED:n=5;break;case Rs.MONSTERPLANT_FERTILIZE:n=6}r(n)}),[d,t]),i?Object(Kr.jsxs)(_c,{className:"nitro-use-product-confirmation",children:[Object(Kr.jsx)(hc,{headerText:nt("useproduct.widget.title",["name"],[i.name]),onCloseClick:s}),Object(Kr.jsx)(lc,{center:!0,children:Object(Kr.jsxs)(ec,{gap:2,overflow:"hidden",children:[Object(Kr.jsx)(Nc,{children:Object(Kr.jsx)(Qr,{pointer:!0,className:"product-preview",onClick:j,children:g})}),Object(Kr.jsxs)(Nc,{justifyContent:"between",overflow:"auto",children:[Object(Kr.jsxs)(Nc,{gap:2,children:[0===n&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(Zc,{children:nt("useproduct.widget.text.shampoo",["productName"],[l.name])}),Object(Kr.jsx)(Zc,{children:nt("useproduct.widget.info.shampoo")})]}),1===n&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(Zc,{children:nt("useproduct.widget.text.custompart",["productName"],[l.name])}),Object(Kr.jsx)(Zc,{children:nt("useproduct.widget.info.custompart")})]}),2===n&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(Zc,{children:nt("useproduct.widget.text.custompartshampoo",["productName"],[l.name])}),Object(Kr.jsx)(Zc,{children:nt("useproduct.widget.info.custompartshampoo")})]}),3===n&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(Zc,{children:nt("useproduct.widget.text.saddle",["productName"],[l.name])}),Object(Kr.jsx)(Zc,{children:nt("useproduct.widget.info.saddle")})]}),4===n&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(Zc,{children:nt("useproduct.widget.text.revive_monsterplant",["productName"],[l.name])}),Object(Kr.jsx)(Zc,{children:nt("useproduct.widget.info.revive_monsterplant")})]}),5===n&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(Zc,{children:nt("useproduct.widget.text.rebreed_monsterplant",["productName"],[l.name])}),Object(Kr.jsx)(Zc,{children:nt("useproduct.widget.info.rebreed_monsterplant")})]}),6===n&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(Zc,{children:nt("useproduct.widget.text.fertilize_monsterplant",["productName"],[l.name])}),Object(Kr.jsx)(Zc,{children:nt("useproduct.widget.info.fertilize_monsterplant")})]})]}),Object(Kr.jsxs)(ec,{alignItems:"center",justifyContent:"between",children:[Object(Kr.jsx)(tc,{variant:"danger",onClick:s,children:nt("useproduct.widget.cancel")}),Object(Kr.jsx)(tc,{variant:"success",onClick:b,children:nt("useproduct.widget.use")})]})]})]})})]}):null},Vd=e=>{const{disabled:t=!1,fullWidth:s=!0,justifyContent:n="center",alignItems:r="center",classNames:i=[],onClick:a=null,...o}=e,l=Object(c.useMemo)((()=>{const e=["menu-item","list-item"];return t&&e.push("disabled"),i.length&&e.push(...i),e}),[t,i]);return Object(Kr.jsx)(ec,{fullWidth:s,justifyContent:n,alignItems:r,classNames:l,onClick:e=>{t||a&&a(e)},...o})},qd=e=>{const{justifyContent:t="center",alignItems:s="center",classNames:n=[],collapsed:r=!0,...i}=e,a=Object(c.useMemo)((()=>{const e=["menu-footer"];return n.length&&e.push(...n),e}),[n]);return Object(Kr.jsx)(ec,{justifyContent:t,alignItems:s,classNames:a,...i,children:Object(Kr.jsx)(ic.a,{icon:r?"caret-up":"caret-down",className:"align-self-center"})})},Yd=10;let zd=!1;const Kd=e=>{const{objectId:t=-1,category:s=-1,userType:n=-1,fades:r=!1,close:i=null,position:o="absolute",classNames:l=[],style:u={},children:d=null,collapsable:h=!1,...j}=e,[b,g]=Object(c.useState)({x:null,y:null}),[O,m]=Object(c.useState)(null),[p,_]=Object(c.useState)(-1e6),[E,f]=Object(c.useState)(1),[x,I]=Object(c.useState)(!1),[T,S]=Object(c.useState)(0),[N,v]=Object(c.useState)(!1),R=Object(c.useRef)(),[A,y]=Object(c.useState)(zd),w=Object(c.useCallback)((e=>{let t=-R.current.offsetHeight;return n>-1&&(n===a.Mg.USER||n===a.Mg.BOT||n===a.Mg.RENTABLE_BOT)?t+=e.height>50?15:0:t-=14,t}),[n]),k=Object(c.useCallback)((e=>{let t=e,s=1;if(x){if(S((e=>(t+=e,t))),s=1*(1-t/75),s<=0)return i(),!1;f(s)}return!0}),[x,i]),D=Object(c.useCallback)(((e,t)=>{if(!e||!t||!O)return;const s=w(e);O.addValue(t.y-e.top);let n=O.getMax();n<p-3&&(n=p-3);const r=t.y-n;let c=~~(t.x-R.current.offsetWidth/2),i=~~(r+s);const a=C().width-R.current.offsetWidth-Yd,o=C().height-R.current.offsetHeight-Yd;c<Yd?c=Yd:c>a&&(c=a),i<Yd?i=Yd:i>o&&(i=o),_(n),g({x:c,y:i})}),[O,p,w]),U=Object(c.useCallback)((e=>{if(!R.current||!k(e))return;const n=he(ie().roomId,t,s),r=je(ie().roomId,t,s);D(n,r)}),[t,s,k,D]),M=Object(c.useMemo)((()=>{const e=["nitro-context-menu"];return A&&e.push("menu-hidden"),e.push(null!==b.x?"visible":"invisible"),l.length&&e.push(...l),e}),[b,l,A]),L=Object(c.useMemo)((()=>{let e={};return e.left=b.x||0,e.top=b.y||0,e.opacity=E,Object.keys(u).length&&(e={...e,...u}),e}),[b,E,u]);Object(c.useEffect)((()=>{m(new a.Ab(25)),_(-1e6)}),[]),Object(c.useEffect)((()=>{let e=!1;return N||(e=!0,P().add(U)),()=>{e&&P().remove(U)}}),[N,U]),Object(c.useEffect)((()=>{if(!r)return;const e=setTimeout((()=>I(!0)),3e3);return()=>clearTimeout(e)}),[r]);return Object(Kr.jsxs)(Qr,{innerRef:R,position:o,classNames:M,style:L,onMouseOver:e=>v(!0),onMouseOut:e=>v(!1),...j,children:[!(h&&zd)&&d,h&&Object(Kr.jsx)(qd,{onClick:()=>(zd=!zd,void y(zd)),collapsed:A})]})},Qd=e=>{const{item:t=null,updateConfirmingProduct:s=null,close:n=null}=e,[r,i]=Object(c.useState)(0),{roomSession:o=null}=Md();Object(c.useEffect)((()=>{if(!t)return;const e=ne(o.roomId,t.requestRoomObjectId,a.Ig.FLOOR);if(!e)return;let s=0;switch(e.specialType){case Rs.PET_SHAMPOO:s=1;break;case Rs.PET_CUSTOM_PART:s=2;break;case Rs.PET_CUSTOM_PART_SHAMPOO:s=3;break;case Rs.PET_SADDLE:s=4;break;case Rs.MONSTERPLANT_REVIVAL:s=5;break;case Rs.MONSTERPLANT_REBREED:s=6;break;case Rs.MONSTERPLANT_FERTILIZE:s=7}i(s)}),[o,t]);const l=Object(c.useCallback)((e=>{if(e)switch(e){case"use_product":case"use_product_shampoo":case"use_product_custom_part":case"use_product_custom_part_shampoo":case"use_product_saddle":case"replace_product_saddle":case"revive_monsterplant":case"rebreed_monsterplant":case"fertilize_monsterplant":s(t)}}),[t,s]);return Object(Kr.jsxs)(Kd,{objectId:t.id,category:a.Ig.UNIT,userType:a.Mg.PET,close:n,collapsable:!0,children:[Object(Kr.jsx)(Hd,{children:t.name}),0===r&&Object(Kr.jsx)(Vd,{onClick:e=>l("use_product"),children:nt("infostand.button.useproduct")}),1===r&&Object(Kr.jsx)(Vd,{onClick:e=>l("use_product_shampoo"),children:nt("infostand.button.useproduct_shampoo")}),2===r&&Object(Kr.jsx)(Vd,{onClick:e=>l("use_product_custom_part"),children:nt("infostand.button.useproduct_custom_part")}),3===r&&Object(Kr.jsx)(Vd,{onClick:e=>l("use_product_custom_part_shampoo"),children:nt("infostand.button.useproduct_custom_part_shampoo")}),4===r&&Object(Kr.jsxs)(Kr.Fragment,{children:[t.replace&&Object(Kr.jsx)(Vd,{onClick:e=>l("replace_product_saddle"),children:nt("infostand.button.replaceproduct_saddle")}),!t.replace&&Object(Kr.jsx)(Vd,{onClick:e=>l("use_product_saddle"),children:nt("infostand.button.useproduct_saddle")})]}),5===r&&Object(Kr.jsx)(Vd,{onClick:e=>l("revive_monsterplant"),children:nt("infostand.button.revive_monsterplant")}),6===r&&Object(Kr.jsx)(Vd,{onClick:e=>l("rebreed_monsterplant"),children:nt("infostand.button.rebreed_monsterplant")}),7===r&&Object(Kr.jsx)(Vd,{onClick:e=>l("fertilize_monsterplant"),children:nt("infostand.button.fertilize_monsterplant")})]})},$d=e=>{const{userData:t=null,close:s=null}=e,[n,r]=Object(c.useState)(0),[i,o]=Object(c.useState)(0),{canRequestFriend:l=null}=es(),{widgetHandler:u=null}=Md(),d=Object(c.useMemo)((()=>t.amIOwner&&t.targetRoomControllerLevel<a.eg.GUEST&&!t.isGuildRoom),[t]),h=Object(c.useMemo)((()=>t.amIOwner&&t.targetRoomControllerLevel===a.eg.GUEST&&!t.isGuildRoom),[t]),j=Object(c.useMemo)((()=>t.canBeKicked||t.canBeBanned||t.canBeMuted||d||h),[d,h,t]),b=Object(c.useMemo)((()=>{let e=!1;const t=de();if(t){const s=t.model.getValue(a.Og.FIGURE_CARRY_OBJECT);s>0&&s<999999&&(e=!0)}return e}),[]),g=Object(c.useCallback)((e=>{let n=null,c=null,a=!0;if(e){switch(e){case"moderate":case"back_moderate":a=!1,r(1);break;case"ban":a=!1,r(2);break;case"mute":a=!1,r(3);break;case"ambassador":case"back_ambassador":a=!1,r(4);break;case"ambassador_mute":a=!1,r(5);break;case"back":a=!1,r(0);break;case"whisper":n=Nn.WHISPER_USER;break;case"friend":y(`friends/request/${t.webID}/${t.name}`);break;case"relationship":a=!1,r(6);break;case"respect":{let e=i-1;o(e),n=Nn.RESPECT_USER,e>0&&(a=!1);break}case"ignore":n=Nn.IGNORE_USER;break;case"unignore":n=Nn.UNIGNORE_USER;break;case"kick":n=Nn.KICK_USER;break;case"ban_hour":n=Nn.BAN_USER_HOUR;break;case"ban_day":n=Nn.BAN_USER_DAY;break;case"perm_ban":n=Nn.BAN_USER_PERM;break;case"mute_2min":case"ambassador_mute_2min":n=Nn.MUTE_USER_2MIN;break;case"mute_5min":n=Nn.MUTE_USER_5MIN;break;case"mute_10min":n=Nn.MUTE_USER_10MIN;break;case"give_rights":n=Nn.GIVE_RIGHTS;break;case"remove_rights":n=Nn.TAKE_RIGHTS;break;case"trade":n=Nn.START_TRADING;break;case"report":n=Nn.REPORT_CFH_OTHER;break;case"pass_hand_item":n=Nn.PASS_CARRY_ITEM;break;case"ambassador_alert":n=Nn.AMBASSADOR_ALERT_USER;break;case"ambassador_kick":n=Nn.AMBASSADOR_KICK_USER;break;case"ambassador_mute_10min":n=Nn.AMBASSADOR_MUTE_USER_10MIN;break;case"ambassador_mute_60min":n=Nn.AMBASSADOR_MUTE_USER_60MIN;break;case"ambassador_mute_18hour":n=Nn.AMBASSADOR_MUTE_USER_18HOUR;break;case"rship_heart":n=Nn.RELATIONSHIP_HEART;break;case"rship_smile":n=Nn.RELATIONSHIP_SMILE;break;case"rship_bobba":n=Nn.RELATIONSHIP_BOBBA;break;case"rship_none":n=Nn.RELATIONSHIP_NONE}n&&(c=new Nn(n,t.webID)),c&&u.processWidgetMessage(c)}a&&s()}),[t,i,u,s]);return Object(c.useEffect)((()=>{r(0),o(t.respectLeft)}),[t]),Object(Kr.jsxs)(Kd,{objectId:t.roomIndex,category:a.Ig.UNIT,userType:t.userType,close:s,collapsable:!0,children:[Object(Kr.jsx)(Hd,{className:"cursor-pointer",onClick:e=>Lr(t.webID),children:t.name}),0===n&&Object(Kr.jsxs)(Kr.Fragment,{children:[l(t.webID)&&Object(Kr.jsx)(Vd,{onClick:e=>g("friend"),children:nt("infostand.button.friend")}),Object(Kr.jsx)(Vd,{onClick:e=>g("trade"),children:nt("infostand.button.trade")}),Object(Kr.jsx)(Vd,{onClick:e=>g("whisper"),children:nt("infostand.button.whisper")}),i>0&&Object(Kr.jsx)(Vd,{onClick:e=>g("respect"),children:nt("infostand.button.respect",["count"],[i.toString()])}),!l(t.webID)&&Object(Kr.jsxs)(Vd,{onClick:e=>g("relationship"),children:[nt("infostand.link.relationship"),Object(Kr.jsx)(ic.a,{icon:"chevron-right",className:"right"})]}),!t.isIgnored&&Object(Kr.jsx)(Vd,{onClick:e=>g("ignore"),children:nt("infostand.button.ignore")}),t.isIgnored&&Object(Kr.jsx)(Vd,{onClick:e=>g("unignore"),children:nt("infostand.button.unignore")}),Object(Kr.jsx)(Vd,{onClick:e=>g("report"),children:nt("infostand.button.report")}),j&&Object(Kr.jsxs)(Vd,{onClick:e=>g("moderate"),children:[Object(Kr.jsx)(ic.a,{icon:"chevron-right",className:"right"}),nt("infostand.link.moderate")]}),t.isAmbassador&&Object(Kr.jsxs)(Vd,{onClick:e=>g("ambassador"),children:[Object(Kr.jsx)(ic.a,{icon:"chevron-right",className:"right"}),nt("infostand.link.ambassador")]}),b&&Object(Kr.jsx)(Vd,{onClick:e=>g("pass_hand_item"),children:nt("avatar.widget.pass_hand_item")})]}),1===n&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(Vd,{onClick:e=>g("kick"),children:nt("infostand.button.kick")}),Object(Kr.jsxs)(Vd,{onClick:e=>g("mute"),children:[Object(Kr.jsx)(ic.a,{icon:"chevron-right",className:"right"}),nt("infostand.button.mute")]}),Object(Kr.jsxs)(Vd,{onClick:e=>g("ban"),children:[Object(Kr.jsx)(ic.a,{icon:"chevron-right",className:"right"}),nt("infostand.button.ban")]}),d&&Object(Kr.jsx)(Vd,{onClick:e=>g("give_rights"),children:nt("infostand.button.giverights")}),h&&Object(Kr.jsx)(Vd,{onClick:e=>g("remove_rights"),children:nt("infostand.button.removerights")}),Object(Kr.jsxs)(Vd,{onClick:e=>g("back"),children:[Object(Kr.jsx)(ic.a,{icon:"chevron-left",className:"left"}),nt("generic.back")]})]}),2===n&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(Vd,{onClick:e=>g("ban_hour"),children:nt("infostand.button.ban_hour")}),Object(Kr.jsx)(Vd,{onClick:e=>g("ban_day"),children:nt("infostand.button.ban_day")}),Object(Kr.jsx)(Vd,{onClick:e=>g("ban_perm"),children:nt("infostand.button.perm_ban")}),Object(Kr.jsxs)(Vd,{onClick:e=>g("back_moderate"),children:[Object(Kr.jsx)(ic.a,{icon:"chevron-left",className:"left"}),nt("generic.back")]})]}),3===n&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(Vd,{onClick:e=>g("mute_2min"),children:nt("infostand.button.mute_2min")}),Object(Kr.jsx)(Vd,{onClick:e=>g("mute_5min"),children:nt("infostand.button.mute_5min")}),Object(Kr.jsx)(Vd,{onClick:e=>g("mute_10min"),children:nt("infostand.button.mute_10min")}),Object(Kr.jsxs)(Vd,{onClick:e=>g("back_moderate"),children:[Object(Kr.jsx)(ic.a,{icon:"chevron-left",className:"left"}),nt("generic.back")]})]}),4===n&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(Vd,{onClick:e=>g("ambassador_alert"),children:nt("infostand.button.alert")}),Object(Kr.jsx)(Vd,{onClick:e=>g("ambassador_kick"),children:nt("infostand.button.kick")}),Object(Kr.jsxs)(Vd,{onClick:e=>g("ambassador_mute"),children:[nt("infostand.button.mute"),Object(Kr.jsx)(ic.a,{icon:"chevron-right",className:"right"})]}),Object(Kr.jsxs)(Vd,{onClick:e=>g("back"),children:[Object(Kr.jsx)(ic.a,{icon:"chevron-left",className:"left"}),nt("generic.back")]})]}),5===n&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(Vd,{onClick:e=>g("ambassador_mute_2min"),children:nt("infostand.button.mute_2min")}),Object(Kr.jsx)(Vd,{onClick:e=>g("ambassador_mute_10min"),children:nt("infostand.button.mute_10min")}),Object(Kr.jsx)(Vd,{onClick:e=>g("ambassador_mute_60min"),children:nt("infostand.button.mute_60min")}),Object(Kr.jsx)(Vd,{onClick:e=>g("ambassador_mute_18hr"),children:nt("infostand.button.mute_18hour")}),Object(Kr.jsxs)(Vd,{onClick:e=>g("back_ambassador"),children:[Object(Kr.jsx)(ic.a,{icon:"chevron-left",className:"left"}),nt("generic.back")]})]}),6===n&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsxs)(ec,{className:"menu-list-split-3",children:[Object(Kr.jsx)(Vd,{onClick:e=>g("rship_heart"),children:Object(Kr.jsx)(Qr,{pointer:!0,className:"nitro-friends-spritesheet icon-heart"})}),Object(Kr.jsx)(Vd,{onClick:e=>g("rship_smile"),children:Object(Kr.jsx)(Qr,{pointer:!0,className:"nitro-friends-spritesheet icon-smile"})}),Object(Kr.jsx)(Vd,{onClick:e=>g("rship_bobba"),children:Object(Kr.jsx)(Qr,{pointer:!0,className:"nitro-friends-spritesheet icon-bobba"})})]}),Object(Kr.jsx)(Vd,{onClick:e=>g("rship_none"),children:nt("avatar.widget.clear_relationship")}),Object(Kr.jsxs)(Vd,{onClick:e=>g("back"),children:[Object(Kr.jsx)(ic.a,{icon:"chevron-left",className:"left"}),nt("generic.back")]})]})]})},Xd=e=>{const{classNames:t=[],...s}=e,n=Object(c.useMemo)((()=>{const e=["menu-list"];return t.length&&e.push(...t),e}),[t]);return Object(Kr.jsx)(Nc,{classNames:n,...s})},Jd=e=>{const{userId:t=-1,userName:s="",roomIndex:n=-1}=e,{eventDispatcher:r=null}=Md();return Object(Kr.jsx)(Kd,{objectId:n,category:a.Ig.UNIT,close:null,children:Object(Kr.jsx)(Xd,{children:Object(Kr.jsx)(Vd,{onClick:()=>r.dispatchEvent(new ye(!1)),children:nt("widget.avatar.stop_decorating")})})})},Zd=e=>{const{nameData:t=null,close:s=null}=e,n=Object(c.useMemo)((()=>t.id!==ee().userId),[t]);return Object(Kr.jsx)(Kd,{objectId:t.roomIndex,category:t.category,userType:t.userType,fades:n,className:"name-only",close:s,children:Object(Kr.jsx)("div",{className:"text-shadow",children:t.name})})},eh=e=>{const{userData:t=null,isDancing:s=!1,close:n=null}=e,[r,i]=Object(c.useState)(s&&oe()?1:0),{roomSession:o=null,eventDispatcher:l=null,widgetHandler:u=null}=Md(),d=Object(c.useCallback)((e=>{let s=null,r=!0;if(e){if(e.startsWith("sign_")){const t=parseInt(e.split("_")[1]);o.sendSignMessage(t)}else switch(e){case"decorate":l.dispatchEvent(new ye(!0));break;case"change_name":Vt(new Et(Et.INIT));break;case"change_looks":y("avatar-editor/show");break;case"expressions":r=!1,i(3);break;case"sit":s=new dn(dn.POSTURE_SIT);break;case"stand":s=new dn(dn.POSTURE_STAND);break;case"wave":s=new ln(a.n.WAVE);break;case"blow":s=new ln(a.n.BLOW);break;case"laugh":s=new ln(a.n.LAUGH);break;case"idle":s=new ln(a.n.IDLE);break;case"dance_menu":r=!1,i(1);break;case"dance":s=new On(1);break;case"dance_stop":s=new On(0);break;case"dance_1":case"dance_2":case"dance_3":case"dance_4":s=new On(parseInt(e.charAt(e.length-1)));break;case"signs":r=!1,i(4);break;case"back":r=!1,i(0);break;case"drop_carry_item":s=new Nn(Nn.DROP_CARRY_ITEM,t.webID)}s&&u.processWidgetMessage(s)}r&&n()}),[o,l,u,t,n]),h=Object(c.useMemo)((()=>t.amIOwner||t.amIAnyRoomController||t.roomControllerLevel>a.eg.GUEST),[t]),j=function(){const e=de();return!!e&&77===e.model.getValue(a.Og.FIGURE_EFFECT)}();return Object(Kr.jsxs)(Kd,{objectId:t.roomIndex,category:a.Ig.UNIT,userType:t.userType,close:n,collapsable:!0,children:[Object(Kr.jsx)(Hd,{className:"cursor-pointer",onClick:e=>Lr(t.webID),children:t.name}),0===r&&Object(Kr.jsxs)(Kr.Fragment,{children:[t.allowNameChange&&Object(Kr.jsx)(Vd,{onClick:e=>d("change_name"),children:nt("widget.avatar.change_name")}),h&&Object(Kr.jsx)(Vd,{onClick:e=>d("decorate"),children:nt("widget.avatar.decorate")}),Object(Kr.jsx)(Vd,{onClick:e=>d("change_looks"),children:nt("widget.memenu.myclothes")}),oe()&&!j&&Object(Kr.jsxs)(Vd,{onClick:e=>d("dance_menu"),children:[Object(Kr.jsx)(ic.a,{icon:"chevron-right",className:"right"}),nt("widget.memenu.dance")]}),!s&&!oe()&&!j&&Object(Kr.jsx)(Vd,{onClick:e=>d("dance"),children:nt("widget.memenu.dance")}),s&&!oe()&&!j&&Object(Kr.jsx)(Vd,{onClick:e=>d("dance_stop"),children:nt("widget.memenu.dance.stop")}),Object(Kr.jsxs)(Vd,{onClick:e=>d("expressions"),children:[Object(Kr.jsx)(ic.a,{icon:"chevron-right",className:"right"}),nt("infostand.link.expressions")]}),Object(Kr.jsxs)(Vd,{onClick:e=>d("signs"),children:[Object(Kr.jsx)(ic.a,{icon:"chevron-right",className:"right"}),nt("infostand.show.signs")]}),t.carryItem>0&&Object(Kr.jsx)(Vd,{onClick:e=>d("drop_carry_item"),children:nt("avatar.widget.drop_hand_item")})]}),1===r&&Object(Kr.jsxs)(Kr.Fragment,{children:[s&&Object(Kr.jsx)(Vd,{onClick:e=>d("dance_stop"),children:nt("widget.memenu.dance.stop")}),Object(Kr.jsx)(Vd,{onClick:e=>d("dance_1"),children:nt("widget.memenu.dance1")}),Object(Kr.jsx)(Vd,{onClick:e=>d("dance_2"),children:nt("widget.memenu.dance2")}),Object(Kr.jsx)(Vd,{onClick:e=>d("dance_3"),children:nt("widget.memenu.dance3")}),Object(Kr.jsx)(Vd,{onClick:e=>d("dance_4"),children:nt("widget.memenu.dance4")}),Object(Kr.jsxs)(Vd,{onClick:e=>d("back"),children:[Object(Kr.jsx)(ic.a,{icon:"chevron-left",className:"left"}),nt("generic.back")]})]}),3===r&&Object(Kr.jsxs)(Kr.Fragment,{children:[re()===a.k.POSTURE_STAND&&Object(Kr.jsx)(Vd,{onClick:e=>d("sit"),children:nt("widget.memenu.sit")}),J()&&Object(Kr.jsx)(Vd,{onClick:e=>d("stand"),children:nt("widget.memenu.stand")}),Z()&&Object(Kr.jsx)(Vd,{onClick:e=>d("wave"),children:nt("widget.memenu.wave")}),Z()&&Object(Kr.jsxs)(Vd,{disabled:!le(),onClick:e=>d("laugh"),children:[!le()&&Object(Kr.jsx)(Ic,{type:"hc"}),nt("widget.memenu.laugh")]}),Z()&&Object(Kr.jsxs)(Vd,{disabled:!le(),onClick:e=>d("blow"),children:[!le()&&Object(Kr.jsx)(Ic,{type:"hc"}),nt("widget.memenu.blow")]}),Object(Kr.jsx)(Vd,{onClick:e=>d("idle"),children:nt("widget.memenu.idle")}),Object(Kr.jsxs)(Vd,{onClick:e=>d("back"),children:[Object(Kr.jsx)(ic.a,{icon:"chevron-left",className:"left"}),nt("generic.back")]})]}),4===r&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsxs)(ec,{className:"menu-list-split-3",children:[Object(Kr.jsx)(Vd,{onClick:e=>d("sign_1"),children:"1"}),Object(Kr.jsx)(Vd,{onClick:e=>d("sign_2"),children:"2"}),Object(Kr.jsx)(Vd,{onClick:e=>d("sign_3"),children:"3"})]}),Object(Kr.jsxs)(ec,{className:"menu-list-split-3",children:[Object(Kr.jsx)(Vd,{onClick:e=>d("sign_4"),children:"4"}),Object(Kr.jsx)(Vd,{onClick:e=>d("sign_5"),children:"5"}),Object(Kr.jsx)(Vd,{onClick:e=>d("sign_6"),children:"6"})]}),Object(Kr.jsxs)(ec,{className:"menu-list-split-3",children:[Object(Kr.jsx)(Vd,{onClick:e=>d("sign_7"),children:"7"}),Object(Kr.jsx)(Vd,{onClick:e=>d("sign_8"),children:"8"}),Object(Kr.jsx)(Vd,{onClick:e=>d("sign_9"),children:"9"})]}),Object(Kr.jsxs)(ec,{className:"menu-list-split-3",children:[Object(Kr.jsx)(Vd,{onClick:e=>d("sign_10"),children:"10"}),Object(Kr.jsx)(Vd,{onClick:e=>d("sign_11"),children:Object(Kr.jsx)("i",{className:"icon icon-sign-heart"})}),Object(Kr.jsx)(Vd,{onClick:e=>d("sign_12"),children:Object(Kr.jsx)("i",{className:"icon icon-sign-skull"})})]}),Object(Kr.jsxs)(ec,{className:"menu-list-split-3",children:[Object(Kr.jsx)(Vd,{onClick:e=>d("sign_0"),children:"0"}),Object(Kr.jsx)(Vd,{onClick:e=>d("sign_13"),children:Object(Kr.jsx)("i",{className:"icon icon-sign-exclamation"})}),Object(Kr.jsx)(Vd,{onClick:e=>d("sign_15"),children:Object(Kr.jsx)("i",{className:"icon icon-sign-smile"})})]}),Object(Kr.jsxs)(ec,{className:"menu-list-split-3",children:[Object(Kr.jsx)(Vd,{onClick:e=>d("sign_14"),children:Object(Kr.jsx)("i",{className:"icon icon-sign-soccer"})}),Object(Kr.jsx)(Vd,{onClick:e=>d("sign_17"),children:Object(Kr.jsx)("i",{className:"icon icon-sign-yellow"})}),Object(Kr.jsx)(Vd,{onClick:e=>d("sign_16"),children:Object(Kr.jsx)("i",{className:"icon icon-sign-red"})})]}),Object(Kr.jsxs)(Vd,{onClick:e=>d("back"),children:[Object(Kr.jsx)(ic.a,{icon:"chevron-left",className:"left"}),nt("generic.back")]})]})]})},th=e=>{const{petData:t=null,close:s=null}=e,[n,r]=Object(c.useState)(0),[i,o]=Object(c.useState)(0),{roomSession:l=null,widgetHandler:u=null}=Md(),d=Object(c.useMemo)((()=>{let e=!1;const t=de();if(t){const s=t.model.getValue(a.Og.FIGURE_CARRY_OBJECT);s>0&&s<999999&&(e=!0)}return e}),[]),h=e=>{let r=null,c=null,i=!0;if(e){switch(e){case"respect":let e=0;o((t=>(e=t-1,e))),r=Nn.RESPECT_PET,e>0&&(i=!1);break;case"treat":r=Nn.TREAT_PET;break;case"pass_handitem":r=Nn.GIVE_CARRY_ITEM_TO_PET;break;case"train":break;case"pick_up":r=Nn.PICKUP_PET;break;case"mount":r=Nn.MOUNT_PET;break;case"toggle_riding_permission":r=Nn.TOGGLE_PET_RIDING_PERMISSION;break;case"toggle_breeding_permission":r=Nn.TOGGLE_PET_BREEDING_PERMISSION;break;case"dismount":r=Nn.DISMOUNT_PET;break;case"saddle_off":r=Nn.SADDLE_OFF;break;case"breed":0===n||3===n&&(r=Nn.REQUEST_BREED_PET);break;case"harvest":r=Nn.HARVEST_PET;break;case"revive":r=Nn.REVIVE_PET;break;case"compost":r=Nn.COMPOST_PLANT;break;case"buy_saddle":y("catalog/open/"+k("catalog.links")["pets.buy_saddle"])}r&&(c=new Nn(r,t.id)),c&&u.processWidgetMessage(c)}i&&s()};return Object(c.useEffect)((()=>{r((e=>t.petType===a.vf.MONSTERPLANT?3:t.saddle&&!t.rider?1:t.rider?2:0)),o(t.respectsPetLeft)}),[t]),Object(Kr.jsxs)(Kd,{objectId:t.roomIndex,category:a.Ig.UNIT,userType:a.Mg.PET,close:s,collapsable:!0,children:[Object(Kr.jsx)(Hd,{children:t.name}),0===n&&Object(Kr.jsxs)(Kr.Fragment,{children:[i>0&&Object(Kr.jsx)(Vd,{onClick:e=>h("respect"),children:nt("infostand.button.petrespect",["count"],[i.toString()])}),Object(Kr.jsx)(Vd,{onClick:e=>h("train"),children:nt("infostand.button.train")}),Object(Kr.jsx)(Vd,{onClick:e=>h("pick_up"),children:nt("infostand.button.pickup")}),t.petType===a.vf.HORSE&&Object(Kr.jsx)(Vd,{onClick:e=>h("buy_saddle"),children:nt("infostand.button.buy_saddle")}),[a.vf.BEAR,a.vf.TERRIER,a.vf.CAT,a.vf.DOG,a.vf.PIG].indexOf(t.petType)>-1&&Object(Kr.jsx)(Vd,{onClick:e=>h("breed"),children:nt("infostand.button.breed")})]}),1===n&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(Vd,{onClick:e=>h("mount"),children:nt("infostand.button.mount")}),Object(Kr.jsxs)(Vd,{onClick:e=>h("toggle_riding_permission"),gap:1,children:[Object(Kr.jsx)("input",{type:"checkbox",checked:!!t.publiclyRideable,readOnly:!0}),nt("infostand.button.toggle_riding_permission")]}),i>0&&Object(Kr.jsx)(Vd,{onClick:e=>h("respect"),children:nt("infostand.button.petrespect",["count"],[i.toString()])}),Object(Kr.jsx)(Vd,{onClick:e=>h("train"),children:nt("infostand.button.train")}),Object(Kr.jsx)(Vd,{onClick:e=>h("pick_up"),children:nt("infostand.button.pickup")}),Object(Kr.jsx)(Vd,{onClick:e=>h("saddle_off"),children:nt("infostand.button.saddleoff")})]}),2===n&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(Vd,{onClick:e=>h("dismount"),children:nt("infostand.button.dismount")}),i>0&&Object(Kr.jsx)(Vd,{onClick:e=>h("respect"),children:nt("infostand.button.petrespect",["count"],[i.toString()])})]}),3===n&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(Vd,{onClick:e=>h("pick_up"),children:nt("infostand.button.pickup")}),t.dead&&Object(Kr.jsx)(Vd,{onClick:e=>h("revive"),children:nt("infostand.button.revive")}),l.isRoomOwner&&Object(Kr.jsx)(Vd,{onClick:e=>h("compost"),children:nt("infostand.button.compost")}),!t.dead&&t.energy/t.maximumEnergy<.98&&Object(Kr.jsx)(Vd,{onClick:e=>h("treat"),children:nt("infostand.button.treat")}),!t.dead&&t.level===t.maximumLevel&&t.breedable&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsxs)(Vd,{onClick:e=>h("toggle_breeding_permission"),gap:1,children:[Object(Kr.jsx)("input",{type:"checkbox",checked:t.publiclyBreedable,readOnly:!0}),nt("infostand.button.toggle_breeding_permission")]}),Object(Kr.jsx)(Vd,{onClick:e=>h("breed"),children:nt("infostand.button.breed")})]})]}),d&&Object(Kr.jsx)(Vd,{onClick:e=>h("pass_hand_item"),children:nt("infostand.button.pass_hand_item")})]})},sh=e=>{const{petData:t=null,close:s=null}=e,[n,r]=Object(c.useState)(0),[i,o]=Object(c.useState)(0),{roomSession:l=null,widgetHandler:u=null}=Md(),d=Object(c.useMemo)((()=>l.isRoomOwner||l.controllerLevel>=a.eg.GUEST||ee().isModerator),[l]),h=Object(c.useMemo)((()=>{let e=!1;const t=de();if(t){const s=t.model.getValue(a.Og.FIGURE_CARRY_OBJECT);s>0&&s<999999&&(e=!0)}return e}),[]),j=e=>{let n=null,r=null,c=!0;if(e){switch(e){case"respect":let e=0;o((t=>(e=t-1,e))),n=Nn.RESPECT_PET,e>0&&(c=!1);break;case"treat":n=Nn.TREAT_PET;break;case"pass_handitem":n=Nn.GIVE_CARRY_ITEM_TO_PET;break;case"pick_up":n=Nn.PICKUP_PET;break;case"mount":n=Nn.MOUNT_PET;break;case"dismount":n=Nn.DISMOUNT_PET}n&&(r=new Nn(n,t.id)),r&&u.processWidgetMessage(r)}c&&s()};return Object(c.useEffect)((()=>{r((e=>t.petType===a.vf.MONSTERPLANT?3:t.saddle&&!t.rider?1:t.rider?2:0)),o(t.respectsPetLeft)}),[t]),Object(Kr.jsxs)(Kd,{objectId:t.roomIndex,category:a.Ig.UNIT,userType:a.Mg.PET,close:s,collapsable:!0,children:[Object(Kr.jsx)(Hd,{children:t.name}),0===n&&i>0&&Object(Kr.jsx)(Vd,{onClick:e=>j("respect"),children:nt("infostand.button.petrespect",["count"],[i.toString()])}),1===n&&Object(Kr.jsxs)(Kr.Fragment,{children:[!!t.publiclyRideable&&Object(Kr.jsx)(Vd,{onClick:e=>j("mount"),children:nt("infostand.button.mount")}),i>0&&Object(Kr.jsx)(Vd,{onClick:e=>j("respect"),children:nt("infostand.button.petrespect",["count"],[i.toString()])})]}),2===n&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(Vd,{onClick:e=>j("dismount"),children:nt("infostand.button.dismount")}),i>0&&Object(Kr.jsx)(Vd,{onClick:e=>j("respect"),children:nt("infostand.button.petrespect",["count"],[i.toString()])})]}),3===n&&!t.dead&&t.energy/t.maximumEnergy<.98&&Object(Kr.jsx)(Vd,{onClick:e=>j("treat"),children:nt("infostand.button.treat")}),d&&Object(Kr.jsx)(Vd,{onClick:e=>j("pick_up"),children:nt("infostand.button.pickup")}),h&&Object(Kr.jsx)(Vd,{onClick:e=>j("pass_hand_item"),children:nt("infostand.button.pass_hand_item")})]})},nh=e=>{const{rentableBotData:t=null,close:s=null}=e,[n,r]=Object(c.useState)(0),[i,o]=Object(c.useState)(""),[l,u]=Object(c.useState)(""),{eventDispatcher:d=null}=Md(),h=Object(c.useCallback)((e=>{const n=e.getParser();if(n.botId===t.webID)switch(n.commandId){case Bd.CHANGE_BOT_NAME:return o(n.data),void r(1);case Bd.CHANGE_BOT_MOTTO:return u(n.data),void r(2);case Bd.SETUP_CHAT:{const e=n.data,r=e.split(-1===e.indexOf(";#;")?";":";#;");return void(3!==r.length&&4!==r.length||(d.dispatchEvent(new Ge(t.roomIndex,a.Ig.UNIT,t.webID,r[0],"true"===r[1].toLowerCase()||"1"===r[1],parseInt(r[2]),!!r[3]&&("true"===r[3].toLowerCase()||"1"===r[3]))),s()))}}}),[t,d,s]);it(a.z,h);const j=e=>$n(new a.Sf(t.webID,e)),b=e=>{let n=!0;if(e)switch(e){case"donate_to_all":j(Bd.DONATE_TO_ALL),$n(new a.D(t.webID,Bd.DONATE_TO_ALL,""));break;case"donate_to_user":j(Bd.DONATE_TO_USER),$n(new a.D(t.webID,Bd.DONATE_TO_USER,""));break;case"change_bot_name":j(Bd.CHANGE_BOT_NAME),n=!1;break;case"save_bot_name":$n(new a.D(t.webID,Bd.CHANGE_BOT_NAME,i));break;case"change_bot_motto":j(Bd.CHANGE_BOT_MOTTO),n=!1;break;case"save_bot_motto":$n(new a.D(t.webID,Bd.CHANGE_BOT_MOTTO,l));break;case"dress_up":$n(new a.D(t.webID,Bd.DRESS_UP,""));break;case"random_walk":$n(new a.D(t.webID,Bd.RANDOM_WALK,""));break;case"setup_chat":j(Bd.SETUP_CHAT),n=!1;break;case"dance":$n(new a.D(t.webID,Bd.DANCE,""));break;case"nux_take_tour":C().createLinkEvent("help/tour"),$n(new a.D(t.webID,Bd.NUX_TAKE_TOUR,""));break;case"pick":$n(new a.B(t.webID))}n&&s()};Object(c.useEffect)((()=>{r(0)}),[t]);const g=t.amIOwner||t.amIAnyRoomController;return Object(Kr.jsxs)(Kd,{objectId:t.roomIndex,category:a.Ig.UNIT,userType:a.Mg.RENTABLE_BOT,close:s,collapsable:!0,children:[Object(Kr.jsx)(Hd,{children:t.name}),0===n&&g&&Object(Kr.jsxs)(Kr.Fragment,{children:[t.botSkills.indexOf(Bd.DONATE_TO_ALL)>=0&&Object(Kr.jsx)(Vd,{onClick:e=>b("donate_to_all"),children:nt("avatar.widget.donate_to_all")}),t.botSkills.indexOf(Bd.DONATE_TO_USER)>=0&&Object(Kr.jsx)(Vd,{onClick:e=>b("donate_to_user"),children:nt("avatar.widget.donate_to_user")}),t.botSkills.indexOf(Bd.CHANGE_BOT_NAME)>=0&&Object(Kr.jsx)(Vd,{onClick:e=>b("change_bot_name"),children:nt("avatar.widget.change_bot_name")}),t.botSkills.indexOf(Bd.CHANGE_BOT_MOTTO)>=0&&Object(Kr.jsx)(Vd,{onClick:e=>b("change_bot_motto"),children:nt("avatar.widget.change_bot_motto")}),t.botSkills.indexOf(Bd.DRESS_UP)>=0&&Object(Kr.jsx)(Vd,{onClick:e=>b("dress_up"),children:nt("avatar.widget.dress_up")}),t.botSkills.indexOf(Bd.RANDOM_WALK)>=0&&Object(Kr.jsx)(Vd,{onClick:e=>b("random_walk"),children:nt("avatar.widget.random_walk")}),t.botSkills.indexOf(Bd.SETUP_CHAT)>=0&&Object(Kr.jsx)(Vd,{onClick:e=>b("setup_chat"),children:nt("avatar.widget.setup_chat")}),t.botSkills.indexOf(Bd.DANCE)>=0&&Object(Kr.jsx)(Vd,{onClick:e=>b("dance"),children:nt("avatar.widget.dance")}),-1===t.botSkills.indexOf(Bd.NO_PICK_UP)&&Object(Kr.jsx)(Vd,{onClick:e=>b("pick"),children:nt("avatar.widget.pick_up")})]}),1===n&&Object(Kr.jsxs)(Nc,{className:"menu-item",onClick:null,gap:1,children:[Object(Kr.jsx)(Zc,{variant:"white",children:nt("bot.skill.name.configuration.new.name")}),Object(Kr.jsx)("input",{type:"text",className:"form-control form-control-sm",value:i,maxLength:k("bot.name.max.length",15),onChange:e=>o(e.target.value)}),Object(Kr.jsxs)(ec,{alignItems:"center",justifyContent:"between",gap:1,children:[Object(Kr.jsx)(tc,{fullWidth:!0,variant:"secondary",onClick:e=>b(null),children:nt("cancel")}),Object(Kr.jsx)(tc,{fullWidth:!0,variant:"success",onClick:e=>b("save_bot_name"),children:nt("save")})]})]}),2===n&&Object(Kr.jsxs)(Nc,{className:"menu-item",onClick:null,gap:1,children:[Object(Kr.jsx)(Zc,{variant:"white",children:nt("bot.skill.name.configuration.new.motto")}),Object(Kr.jsx)("input",{type:"text",className:"form-control form-control-sm",value:l,maxLength:k("motto.max.length",38),onChange:e=>u(e.target.value)}),Object(Kr.jsxs)(ec,{alignItems:"center",justifyContent:"between",gap:1,children:[Object(Kr.jsx)(tc,{fullWidth:!0,variant:"secondary",onClick:e=>b(null),children:nt("cancel")}),Object(Kr.jsx)(tc,{fullWidth:!0,variant:"success",onClick:e=>b("save_bot_motto"),children:nt("save")})]})]})]})},rh=e=>{const[t,s]=Object(c.useState)(null),[n,r]=Object(c.useState)([]),[i,o]=Object(c.useState)([]),[l,u]=Object(c.useState)(null),[d,h]=Object(c.useState)(null),[j,b]=Object(c.useState)(!1),[g,O]=Object(c.useState)(!1),[m,p]=Object(c.useState)(!1),[_,E]=Object(c.useState)(null),{roomSession:f=null,eventDispatcher:x=null,widgetHandler:I=null}=Md(),T=Object(c.useCallback)((e=>{r((t=>{const s=[...t];return s.splice(e,1),s}))}),[]),C=Object(c.useCallback)((e=>{o((t=>{const s=[...t],n=s.splice(e,1)[0];return l===n&&u(null),s}))}),[l]),S=Object(c.useCallback)((()=>{o([])}),[]),N=Object(c.useCallback)((()=>{h(null)}),[]),v=Object(c.useCallback)((()=>{s(null)}),[]),R=Object(c.useCallback)((e=>{u(e),o([])}),[]),A=Object(c.useCallback)((e=>{switch(e.type){case We.NORMAL_MODE:return void(j&&b(!1));case We.GAME_MODE:return void(j||b(!0))}}),[j]);Pt(We.NORMAL_MODE,x,A),Pt(We.GAME_MODE,x,A);const y=Object(c.useCallback)((e=>{if(t&&e.id===t.id&&s(null),e.category===a.Ig.UNIT){const t=n.findIndex((t=>t.roomIndex===e.id));t>-1&&T(t),i.length&&o((t=>t.filter((t=>t.id!==e.id))))}else e.category===a.Ig.FLOOR&&i.length&&o((t=>t.filter((t=>t.requestRoomObjectId!==e.id))));d&&(d instanceof Pe?d.id===e.id&&N():d instanceof Fe||d instanceof Le?d.roomIndex===e.id&&N():d instanceof Me&&d.roomIndex===e.id&&N())}),[t,d,n,i,T,N]);Pt(Ve.USER_REMOVED,x,y),Pt(Ve.FURNI_REMOVED,x,y);const w=Object(c.useCallback)((e=>{switch(e.type){case Ve.OBJECT_ROLL_OVER:{const t=e;if(d)return;return void I.processWidgetMessage(new Cn(Cn.GET_OBJECT_NAME,t.id,t.category))}case Ve.OBJECT_ROLL_OUT:{const n=e;if(!t||t.roomIndex!==n.id)return;return void s(null)}}}),[d,t,I]);Pt(Ve.OBJECT_ROLL_OVER,x,w),Pt(Ve.OBJECT_ROLL_OUT,x,w);const k=Object(c.useCallback)((e=>{d&&N(),i.length&&o([])}),[d,i,N]);Pt(Ve.OBJECT_DESELECTED,x,k);const D=Object(c.useCallback)((e=>{e.category===a.Ig.UNIT&&(s(e),S())}),[S]);Pt(Ie.TYPE,x,D);const U=Object(c.useCallback)((e=>{t&&s(null),e.type===Pe.FURNI?N():h(e),S()}),[t,N,S]);Pt(Pe.FURNI,x,U),Pt(Fe.OWN_USER,x,U),Pt(Fe.PEER,x,U),Pt(Fe.BOT,x,U),Pt(Le.RENTABLE_BOT,x,U),Pt(Me.PET_INFO,x,U);const P=Object(c.useCallback)((e=>{O(e.isDancing)}),[]);Pt(Ae.UPDATE_DANCE,x,P);const M=Object(c.useCallback)((e=>{E(e)}),[]);Pt(Ge.UPDATE_CHAT,x,M);const L=Object(c.useCallback)((e=>{u(null),o((t=>{const s=[...t];for(const n of e.items){const e=s.findIndex((e=>e.id===n.id));e>-1&&s.splice(e,1),s.push(n)}return s}))}),[]);Pt(Ke.USE_PRODUCT_BUBBLES,x,L);const F=Object(c.useCallback)((e=>{p(e.isDecorating)}),[]);Pt(ye.UPDATE_DECORATE,x,F);const H=Object(c.useMemo)((()=>{if(ie().isDecorating=m,!m)return null;const e=ee().userId,t=ee().userName,s=ie().ownRoomIndex;return Object(Kr.jsx)(Jd,{userId:e,userName:t,roomIndex:s})}),[m]),B=Object(c.useMemo)((()=>{if(j)return null;if(H)return H;if(t){const e=n.findIndex((e=>e.roomIndex===t.roomIndex));return e>-1&&T(e),Object(Kr.jsx)(Zd,{nameData:t,close:v})}if(d)switch(d.type){case Fe.OWN_USER:case Fe.PEER:{const e=d;if(e.isSpectatorMode)return null;const t=n.findIndex((t=>t.roomIndex===e.roomIndex));return t>-1&&T(t),e.isOwnUser?a.ug.isRunning()?null:Object(Kr.jsx)(eh,{userData:e,isDancing:g,close:N}):Object(Kr.jsx)($d,{userData:e,close:N})}case Me.PET_INFO:{const e=d;return e.isOwner?Object(Kr.jsx)(th,{petData:e,close:N}):Object(Kr.jsx)(sh,{petData:e,close:N})}case Le.RENTABLE_BOT:return Object(Kr.jsx)(nh,{rentableBotData:d,close:N});case Pe.FURNI:return null}return null}),[j,H,t,n,g,d,v,N,T]);return Object(Kr.jsxs)(Kr.Fragment,{children:[B,n.length>0&&n.map(((e,t)=>Object(Kr.jsx)(Zd,{nameData:e,close:()=>T(t)},t))),i.length>0&&i.map(((e,t)=>Object(Kr.jsx)(Qd,{item:e,updateConfirmingProduct:R,close:()=>C(t)},e.id))),_&&Object(Kr.jsx)(Gd,{chatEvent:_,close:()=>E(null)}),l&&Object(Kr.jsx)(Wd,{item:l,close:()=>u(null)})]})},ch=e=>{const{chatStyleId:t=0,chatStyleIds:s=null,selectChatStyleId:n=null}=e,[r,i]=Object(c.useState)(null),[a,o]=Object(c.useState)(!1);return Object(c.useEffect)((()=>{a||i(null)}),[a]),Object(Kr.jsxs)(Qr,{className:"nitro-chat-style-box",children:[Object(Kr.jsx)(Qr,{pointer:!0,className:"icon chatstyles-icon",onClick:e=>{let t=!1;o((e=>(t=!e,t))),t&&i(e.target)}}),Object(Kr.jsx)(ud.a,{show:a,target:r,placement:"top",children:Object(Kr.jsx)(Sl.a,{className:"nitro-chat-style-selector-container",children:Object(Kr.jsx)(lc,{overflow:"hidden",className:"bg-transparent",children:Object(Kr.jsx)(Jr,{columnCount:3,overflow:"auto",children:s&&s.length>0&&s.map((e=>Object(Kr.jsx)(ec,{center:!0,pointer:!0,className:"bubble-parent-container",onClick:t=>(e=>{n(e),o(!1)})(e),children:Object(Kr.jsx)(Qr,{className:"bubble-container",children:Object(Kr.jsx)(Qr,{className:`chat-bubble bubble-${e}`,children:"\xa0"})},e)},e)))})})})})]})},ih=e=>{const[t,s]=Object(c.useState)(""),[n,r]=Object(c.useState)(""),[i,o]=Object(c.useState)(!1),[l,u]=Object(c.useState)(!1),[d,h]=Object(c.useState)(!1),[j,b]=Object(c.useState)(ee().chatStyle),[g,O]=Object(c.useState)(!1),[m,p]=Object(c.useState)(!1),[_,E]=Object(c.useState)(0),{eventDispatcher:f=null,widgetHandler:x=null}=Md(),I=Object(c.useRef)(),T=Object(c.useMemo)((()=>nt("widgets.chatinput.mode.whisper")),[]),C=Object(c.useMemo)((()=>nt("widgets.chatinput.mode.shout")),[]),S=Object(c.useMemo)((()=>nt("widgets.chatinput.mode.speak")),[]),N=Object(c.useMemo)((()=>k("chat.input.maxlength",100)),[]),v=Object(c.useCallback)((()=>{const e=document.activeElement;return!!e&&((!I||I.current!==e)&&(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement))}),[I]),R=Object(c.useCallback)((()=>{I.current.focus(),I.current.setSelectionRange(2*I.current.value.length,2*I.current.value.length)}),[I]),A=Object(c.useCallback)((()=>{s((e=>e===T&&n.length?`${e} ${n}`:e))}),[n,T]),y=Object(c.useCallback)((function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;s(""),x.processWidgetMessage(new hn(hn.MESSAGE_CHAT,e,t,n,r))}),[x]),w=Object(c.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e||""===e)return;let n=t?hn.CHAT_SHOUT:hn.CHAT_DEFAULT,r=e;const c=r.split(" ");let i="",a="";switch(c[0]){case T:n=hn.CHAT_WHISPER,i=c[1],a=T+" "+i+" ",c.shift(),c.shift();break;case C:n=hn.CHAT_SHOUT,c.shift();break;case S:n=hn.CHAT_DEFAULT,c.shift()}r=c.join(" "),o(!1),h(!1),r.length<=N&&(g&&(ee().sendChatStyleUpdate(j),O(!1)),y(r,n,i,j)),s(a)}),[T,C,S,N,j,g,y]),D=Object(c.useCallback)((e=>{e&&e.length?(o(!0),h(!0)):o(!1),s(e)}),[]),U=Object(c.useCallback)((e=>{if(m||!I.current||v())return;document.activeElement!==I.current&&R();const t=e.target.value;switch(e.key){case" ":case"Space":return void A();case"NumpadEnter":case"Enter":return void w(t,e.shiftKey);case"Backspace":if(t){const e=t.split(" ");e[0]===T&&3===e.length&&""===e[2]&&s("")}return}}),[m,I,T,v,R,A,w]),P=Object(c.useCallback)((e=>{r("")}),[]);Pt(Ve.OBJECT_DESELECTED,f,P);const M=Object(c.useCallback)((e=>{r(e.name)}),[]);Pt(Fe.PEER,f,M);const L=Object(c.useCallback)((e=>{switch(e.chatMode){case Ne.WHISPER:return void s(`${T} ${e.userName} `);case Ne.SHOUT:return}}),[T]);Pt(Ne.CHAT_INPUT_CONTENT,f,L);const F=Object(c.useCallback)((e=>{p(!0),E(e.seconds)}),[]);Pt(xe.FLOOD_CONTROL,f,F);const H=Object(c.useCallback)((e=>{b(e),O(!0)}),[]),B=Object(c.useMemo)((()=>{let e=[];const t=k("chat.styles");for(const s of t)s&&(s.minRank>0?ee().hasSecurity(s.minRank)&&e.push(s.styleId):s.isSystemStyle&&ee().hasSecurity(a.eg.MODERATOR)?e.push(s.styleId):k("chat.styles.disabled").indexOf(s.styleId)>=0||(s.isHcOnly&&te()>=a.Ed.CLUB||s.isAmbassadorOnly&&ee().isAmbassador?e.push(s.styleId):s.isHcOnly||s.isAmbassadorOnly||e.push(s.styleId)));return e}),[]);return Object(c.useEffect)((()=>{i?l||(u(!0),x.processWidgetMessage(new bn(i))):l&&(u(!1),x.processWidgetMessage(new bn(i)))}),[x,i,l]),Object(c.useEffect)((()=>{if(!d)return;let e=null;return d&&(e=setTimeout((()=>{h(!1),o(!1)}),1e4)),()=>clearTimeout(e)}),[d]),Object(c.useEffect)((()=>{if(!m)return;let e=0;const t=setInterval((()=>{E((t=>(e=(t||0)-1,e))),e<0&&(clearInterval(t),p(!1))}),1e3);return()=>clearInterval(t)}),[m]),Object(c.useEffect)((()=>(document.body.addEventListener("keydown",U),()=>{document.body.removeEventListener("keydown",U)})),[U]),Object(c.useEffect)((()=>{I.current&&(I.current.parentElement.dataset.value=t)}),[t]),ie().isSpectator?null:Object(bc.createPortal)(Object(Kr.jsxs)("div",{className:"nitro-chat-input-container",children:[Object(Kr.jsx)(ch,{chatStyleId:j,chatStyleIds:B,selectChatStyleId:H}),Object(Kr.jsxs)("div",{className:"input-sizer align-items-center",children:[!m&&Object(Kr.jsx)("input",{ref:I,type:"text",className:"chat-input",placeholder:nt("widgets.chatinput.default"),value:t,maxLength:N,onChange:e=>D(e.target.value),onMouseDown:e=>R()}),m&&Object(Kr.jsxs)(Zc,{variant:"danger",children:[nt("chat.input.alert.flood",["time"],[_.toString()])," "]})]})]}),document.getElementById("toolbar-chat-input-container"))},ah=e=>{const{chat:t=null,makeRoom:s=null,onChatClicked:n=null,bubbleWidth:r=a.bg.CHAT_BUBBLE_WIDTH_NORMAL}=e,[i,o]=Object(c.useState)(!1),l=Object(c.useRef)(),u=Object(c.useMemo)((()=>{switch(r){case a.bg.CHAT_BUBBLE_WIDTH_NORMAL:return 350;case a.bg.CHAT_BUBBLE_WIDTH_THIN:return 240;case a.bg.CHAT_BUBBLE_WIDTH_WIDE:return 2e3}}),[r]);return Object(c.useEffect)((()=>{const e=l.current;if(!e)return;const n=e.offsetWidth,r=e.offsetHeight;t.width=n,t.height=r,t.elementRef=e;let c=t.left,i=t.top;return c||i||(c=t.location.x-n/2,i=e.parentElement.offsetHeight-r,t.left=c,t.top=i),t.visible||(s(t),t.visible=!0),()=>{t.elementRef=null}}),[l,t,s]),Object(c.useEffect)((()=>o(t.visible)),[t.visible]),Object(Kr.jsxs)("div",{ref:l,className:"bubble-container "+(i?"visible":"invisible"),onClick:e=>n(t),children:[0===t.styleId&&Object(Kr.jsx)("div",{className:"user-container-bg",style:{backgroundColor:t.color}}),Object(Kr.jsxs)("div",{className:`chat-bubble bubble-${t.styleId} type-${t.type}`,style:{maxWidth:u},children:[Object(Kr.jsx)("div",{className:"user-container",children:t.imageUrl&&t.imageUrl.length>0&&Object(Kr.jsx)("div",{className:"user-image",style:{backgroundImage:`url(${t.imageUrl})`}})}),Object(Kr.jsxs)("div",{className:"chat-content",children:[Object(Kr.jsx)("b",{className:"username mr-1",dangerouslySetInnerHTML:{__html:`${t.username}: `}}),Object(Kr.jsx)("span",{className:"message",dangerouslySetInnerHTML:{__html:`${t.formattedText}`}})]}),Object(Kr.jsx)("div",{className:"pointer"})]})]})};class oh{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,o=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null;this.senderId=e,this.senderCategory=t,this.roomId=s,this.text=n,this.formattedText=r,this.username=c,this.location=i,this.type=a,this.styleId=o,this.imageUrl=l,this.color=u,this.id=-1,this.width=0,this.height=0,this.elementRef=null,this.visible=!1,this.skipMovement=!1,this._top=0,this._left=0,this.id=++oh.BUBBLE_COUNTER}get top(){return this._top}set top(e){this._top=e,this.elementRef&&(this.elementRef.style.top=this._top+"px")}get left(){return this._left}set left(e){this._left=e,this.elementRef&&(this.elementRef.style.left=this._left+"px")}}oh.BUBBLE_COUNTER=0;const lh=function(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return!(e.left+n+e.width<t.left+n||e.left+n>t.left+n+t.width||e.top+e.height<t.top+s||e.top>t.top+s+t.height)};let uh=0;const dh=e=>{const[t,s]=Object(c.useState)({mode:a.bg.CHAT_MODE_FREE_FLOW,weight:a.bg.CHAT_BUBBLE_WIDTH_NORMAL,speed:a.bg.CHAT_SCROLL_SPEED_NORMAL,distance:50,protection:a.bg.FLOOD_FILTER_NORMAL}),[n,r]=Object(c.useState)([]),[i,o]=Object(c.useState)(uh++),{roomSession:l=null,eventDispatcher:u=null,widgetHandler:d=null}=Md(),h=Object(c.useRef)(),j=Object(c.useCallback)((()=>{r((e=>{if(e){const t=e.filter((e=>e.top>2*-e.height));if(t.length!==e.length)return t}return e}))}),[]),b=Object(c.useCallback)((e=>{r((t=>(t&&t.forEach((t=>{t.skipMovement?t.skipMovement=!1:t.top-=e})),t))),j()}),[j]),g=Object(c.useCallback)(((e,t,s)=>{const r=n.length;if(r)for(let c=r-1;c>=0;c--){const r=n[c];if(!(!r||e===r||s.indexOf(r)>=0||r.top-t>=e.top+e.height)&&lh(e,r,-t,4)){const t=Math.abs(r.top+r.height-e.top);s.push(r),r.top-=t,r.skipMovement=!0,g(r,t,s)}}}),[n]),O=Object(c.useCallback)((e=>{if(t.mode===a.bg.CHAT_MODE_FREE_FLOW)e.skipMovement=!0,g(e,0,[e]),j();else{const t=e.top+e.height,s=e.height,r=h.current.offsetHeight-t,c=s-r;r<s&&(n.forEach((t=>{t!==e&&(t.top-=c)})),j())}}),[t,n,j,g]),m=Object(c.useCallback)((e=>{const t=new oh(e.userId,e.userCategory,e.roomId,e.text,function(e){let t="";if(e=e.replace(/([\u00A0-\u9999<>&])(.|$)/g,(function(e,t,s){return"&"!==t||"#"!==s?(/[\u00A0-\u9999<>&]/.test(s)&&(s="&#"+s.charCodeAt(0)+";"),"&#"+t.charCodeAt(0)+";"+s):e})),(e=rn.shortnameToUnicode(e)).startsWith("@")&&e.indexOf("@",1)>-1){let s=null;for(;null!==(s=/@[a-zA-Z]+@/g.exec(e));){const n=s[0].toString(),r=n.substr(1,n.length-2),c=e.replace(n,"");t=cn.has(r)?'<span style="color: '+cn.get(r)+'">'+c+"</span>":c;break}}else t=e;return t}(e.text),e.userName,new a.Xe(e.userX,e.userY),e.chatType,e.styleId,e.userImage,e.userColor&&("#"+e.userColor.toString(16).padStart(6,"0")||!1));r((e=>[...e,t]))}),[]);Pt(Se.CHAT_EVENT,u,m);const p=Object(c.useCallback)((e=>{if(!n.length||e.roomId!==l.roomId)return;const t=e.offsetX;n.forEach((e=>e.elementRef&&(e.left+=t)))}),[l,n]);Bt(a.mg.ROOM_DRAG,p);const _=Object(c.useCallback)((e=>{d.processWidgetMessage(new Cn(Cn.GET_OBJECT_INFO,e.senderId,e.senderCategory)),d.processWidgetMessage(new jn(jn.MESSAGE_SELECT_AVATAR,e.senderId,e.username,e.roomId))}),[d]),E=Object(c.useCallback)((()=>{if(!t)return 6e3;switch(t.speed){case a.bg.CHAT_SCROLL_SPEED_FAST:return 3e3;case a.bg.CHAT_SCROLL_SPEED_NORMAL:return 6e3;case a.bg.CHAT_SCROLL_SPEED_SLOW:return 12e3}}),[t]),f=Object(c.useCallback)((e=>{const t=e.getParser();t.roomEnter&&s(t.chat)}),[]);it(a.nc,f);const x=Object(c.useCallback)((e=>{const t=e.getParser();s(t.chat)}),[]);it(a.cg,x),Object(c.useEffect)((()=>{const e=e=>{if(!h||!h.current)return;const t=h.current.offsetHeight,s=Math.round(document.body.offsetHeight*k("chat.viewer.height.percentage"));h.current.style.height=`${s}px`,r((e=>(e&&e.forEach((e=>e.top-=t-s)),e)))};return window.addEventListener("resize",e),e(),()=>{window.removeEventListener("resize",e)}}),[]);const I=Object(c.useCallback)((e=>{"MOVE_CHATS"!==e.type||b(15)}),[b]);return Object(c.useEffect)((()=>{const e={workerMessageReceived:I};var t;return t=e,C().addWorkerEventTracker(t),Xn({type:"CREATE_INTERVAL",time:E(),timerId:i,response:{type:"MOVE_CHATS"}}),()=>{Xn({type:"REMOVE_INTERVAL",timerId:i}),(e=>{C().removeWorkerEventTracker(e)})(e)}}),[i,I,E]),Object(Kr.jsx)("div",{ref:h,className:"nitro-chat-widget",children:n.map((e=>Object(Kr.jsx)(ah,{chat:e,makeRoom:O,onChatClicked:_,bubbleWidth:t.weight},e.id)))})},hh=e=>{const{title:t=null,items:s=null,displayItemId:n=!1,onCloseClick:r=null}=e,[i,a]=Object(c.useState)(null),[o,l]=Object(c.useState)(""),{widgetHandler:u=null}=Md(),d=Object(c.useMemo)((()=>{if(!s)return[];if(!o||!o.length)return s;const e=o.toLocaleLowerCase();return s.filter((t=>t.name.toLocaleLowerCase().includes(e)))}),[s,o]),h=Object(c.useCallback)((e=>{a(e),u.processWidgetMessage(new Cn(Cn.SELECT_OBJECT,e.id,e.category))}),[u,a]),j=e=>{const t=d[e.index];return Object(Kr.jsx)(ec,{alignItems:"center",position:"absolute",className:"rounded px-1"+(i===t?" bg-muted":""),pointer:!0,style:e.style,onClick:e=>h(t),children:Object(Kr.jsxs)(Zc,{truncate:!0,children:[t.name," ",n&&" - "+t.id]})},e.key)};return Object(Kr.jsxs)(_c,{className:"nitro-chooser-widget",theme:"primary-slim",children:[Object(Kr.jsx)(hc,{headerText:t,onCloseClick:r}),Object(Kr.jsxs)(lc,{overflow:"hidden",children:[Object(Kr.jsx)("input",{type:"text",className:"form-control form-control-sm",placeholder:nt("generic.search"),value:o,onChange:e=>l(e.target.value)}),Object(Kr.jsx)(Nc,{fullHeight:!0,overflow:"auto",children:Object(Kr.jsx)(Za.a,{defaultWidth:0,defaultHeight:0,children:e=>{let{width:t,height:s}=e;return Object(Kr.jsx)(Za.d,{width:t,height:s,rowCount:d.length,rowHeight:20,rowRenderer:j})}})})]})]})},jh=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(null),[i,o]=Object(c.useState)(null),{eventDispatcher:l=null,widgetHandler:u=null}=Md(),d=Object(c.useCallback)((()=>{t&&o((e=>(e&&clearTimeout(e),setTimeout((()=>u.processWidgetMessage(new Tn(Tn.FURNI_CHOOSER))),100))))}),[t,u]),h=Object(c.useCallback)((e=>{r(e.items),s(!0)}),[]);Pt(fe.FURNI_CHOOSER_CONTENT,l,h);const j=Object(c.useCallback)((e=>{if(t)switch(e.type){case Ve.FURNI_ADDED:case Ve.FURNI_REMOVED:return void d()}}),[t,d]);Pt(Ve.FURNI_ADDED,l,j),Pt(Ve.FURNI_REMOVED,l,j);const b=Object(c.useCallback)((()=>{s(!1),r(null)}),[]);return n?Object(Kr.jsx)(hh,{title:nt("widget.chooser.furni.title"),displayItemId:ee().hasSecurity(a.Hh.MODERATOR),items:n,onCloseClick:b}):null},bh=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(null),[i,a]=Object(c.useState)(null),{eventDispatcher:o=null,widgetHandler:l=null}=Md(),u=Object(c.useCallback)((()=>{t&&a((e=>(e&&clearTimeout(e),setTimeout((()=>l.processWidgetMessage(new Tn(Tn.USER_CHOOSER))),100))))}),[t,l]),d=Object(c.useCallback)((e=>{r(e.items),s(!0)}),[]);Pt(fe.USER_CHOOSER_CONTENT,o,d);const h=Object(c.useCallback)((e=>{if(t)switch(e.type){case Ve.USER_ADDED:case Ve.USER_REMOVED:return void u()}}),[t,u]);Pt(Ve.USER_ADDED,o,h),Pt(Ve.USER_REMOVED,o,h);const j=Object(c.useCallback)((()=>{s(!1),r(null)}),[]);return t?Object(Kr.jsx)(hh,{title:nt("widget.chooser.user.title"),displayItemId:!1,items:n,onCloseClick:j}):null},gh=e=>{const[t,s]=Object(c.useState)(!1),{users:n=[],answer:r=null}=xs();return Object(c.useEffect)((()=>{s(!!n.length)}),[n]),t?Object(Kr.jsxs)(_c,{className:"nitro-widget-doorbell",theme:"primary-slim",children:[Object(Kr.jsx)(hc,{headerText:nt("navigator.doorbell.title"),onCloseClick:e=>s(!1)}),Object(Kr.jsxs)(lc,{overflow:"hidden",gap:0,children:[Object(Kr.jsx)(Nc,{gap:2,children:Object(Kr.jsxs)(Jr,{gap:1,className:"text-black fw-bold border-bottom px-1 pb-1",children:[Object(Kr.jsx)(Qr,{className:"g-col-6",children:nt("generic.username")}),Object(Kr.jsx)(Qr,{className:"g-col-6"})]})}),Object(Kr.jsx)(Nc,{overflow:"auto",className:"striped-children",gap:0,children:n&&n.length>0&&n.map((e=>Object(Kr.jsxs)(Jr,{gap:1,alignItems:"center",className:"text-black border-bottom p-1",children:[Object(Kr.jsx)(Qr,{className:"g-col-6",children:e}),Object(Kr.jsx)(Qr,{className:"g-col-6",children:Object(Kr.jsxs)(ec,{alignItems:"center",justifyContent:"end",gap:1,children:[Object(Kr.jsx)(tc,{variant:"success",onClick:()=>r(e,!0),children:nt("generic.accept")}),Object(Kr.jsx)(tc,{variant:"danger",onClick:()=>r(e,!1),children:nt("generic.deny")})]})})]},e)))})]})]}):null},Oh=e=>{const{objectId:t=-1,category:s=-1,noFollow:n=!1,position:r="absolute",...i}=e,[a,o]=Object(c.useState)({x:-1,y:-1}),l=Object(c.useRef)(),u=Object(c.useCallback)((()=>{const e=ie();return he(e.roomId,t,s,1)}),[t,s]),d=Object(c.useCallback)((()=>{const e=u();e&&l.current&&o({x:Math.round(e.left+e.width/2-l.current.offsetWidth/2),y:Math.round(e.top-l.current.offsetHeight+10)})}),[u]);return Object(c.useEffect)((()=>{let e=!1;return n?d():(e=!0,C().ticker.add(d)),()=>{e&&C().ticker.remove(d)}}),[d,n]),Object(Kr.jsx)(Qr,{innerRef:l,position:r,visible:a.x+(l.current?l.current.offsetWidth:0)>-1,className:"object-location",style:{left:a.x,top:a.y},...i})},mh=e=>{const{roomIndex:t=-1,request:s=null,hideFriendRequest:n=null}=e,{requestResponse:r=null}=es();return Object(Kr.jsx)(Oh,{objectId:t,category:a.Ig.UNIT,children:Object(Kr.jsx)(Qr,{className:"nitro-friend-request-dialog nitro-context-menu p-2",children:Object(Kr.jsxs)(Nc,{children:[Object(Kr.jsxs)(ec,{alignItems:"center",justifyContent:"between",gap:2,children:[Object(Kr.jsx)(Zc,{variant:"white",fontSize:6,children:nt("widget.friendrequest.from",["username"],[s.name])}),Object(Kr.jsx)(ic.a,{icon:"times",className:"cursor-pointer",onClick:e=>n(s.requesterUserId)})]}),Object(Kr.jsxs)(ec,{justifyContent:"end",gap:1,children:[Object(Kr.jsx)(tc,{variant:"danger",onClick:e=>r(s.requesterUserId,!1),children:nt("widget.friendrequest.decline")}),Object(Kr.jsx)(tc,{variant:"success",onClick:e=>r(s.requesterUserId,!0),children:nt("widget.friendrequest.accept")})]})]})})})},ph=e=>{const[t,s]=Object(c.useState)([]),[n,r]=Object(c.useState)([]),{roomSession:i=null,eventDispatcher:o=null}=Md(),{requests:l=[]}=es(),u=e=>{r((t=>{if(t.indexOf(e)>=0)return t;const s=[...t];return s.push(e),s}))},d=Object(c.useCallback)((e=>{if(e.category!==a.Ig.UNIT)return;const n=i.userDataManager.getUserDataByIndex(e.id);if(n&&n.type===a.Ng.getTypeNumber(a.Ng.USER)){if(e.type===Ve.USER_ADDED){const e=l.find((e=>e.requesterUserId===n.webID));if(!e||t.find((e=>e.request.requesterUserId===n.webID)))return;const r=[...t];r.push({roomIndex:n.roomIndex,request:e}),s(r)}}else if(e.type===Ve.USER_REMOVED){const n=t.findIndex((t=>t.roomIndex===e.id));if(-1===n)return;const r=[...t];r.splice(n,1),s(r)}}),[i,l,t]);return Pt(Ve.USER_ADDED,o,d),Pt(Ve.USER_REMOVED,o,d),Object(c.useEffect)((()=>{if(!l||!l.length)return;const e=[];for(const t of l){const s=i.userDataManager.getUserData(t.requesterUserId);s&&e.push({roomIndex:s.roomIndex,request:t})}s(e)}),[i,l]),l.length?Object(Kr.jsx)(Kr.Fragment,{children:t.map(((e,t)=>n.indexOf(e.request.requesterUserId)>=0?null:Object(Kr.jsx)(mh,{roomIndex:e.roomIndex,request:e.request,hideFriendRequest:u},t)))}):null},_h=e=>{const[t,s]=Object(c.useState)(-1),[n,r]=Object(c.useState)(0),[i,o]=Object(c.useState)(0),[l,u]=Object(c.useState)(0),{roomSession:d=null,eventDispatcher:h=null}=Md(),j=Object(c.useCallback)((()=>{h.dispatchEvent(new Ce(Ce.CLEAR_PREVIEW)),s(-1)}),[h]),b=Object(c.useCallback)((()=>d.isRoomOwner||d.controllerLevel>=a.eg.GUEST||ee().isModerator),[d]),g=Object(c.useCallback)((e=>{switch(e.type){case a.sg.REQUEST_BACKGROUND_COLOR:{if(!b())return;const t=L().getRoomObject(e.roomId,e.objectId,e.category),n=t.model;return s(t.id),r(parseInt(n.getValue(a.Og.FURNITURE_ROOM_BACKGROUND_COLOR_HUE))),o(parseInt(n.getValue(a.Og.FURNITURE_ROOM_BACKGROUND_COLOR_SATURATION))),void u(parseInt(n.getValue(a.Og.FURNITURE_ROOM_BACKGROUND_COLOR_LIGHTNESS)))}case Ve.FURNI_REMOVED:if(t!==e.objectId)return;return void j()}}),[t,b,j]);Bt(a.sg.REQUEST_BACKGROUND_COLOR,g),Pt(Ve.FURNI_REMOVED,h,g);const O=Object(c.useCallback)((e=>{switch(e){case"apply":$n(new a.h(t,n,i,l));break;case"toggle":d.useMultistateItem(t)}}),[d,t,n,i,l]);return Object(c.useEffect)((()=>{-1!==t&&h.dispatchEvent(new Ce(Ce.PREVIEW,n,i,l))}),[h,t,n,i,l]),-1===t?null:Object(Kr.jsxs)(_c,{theme:"primary-slim",className:"nitro-room-widget-toner",children:[Object(Kr.jsx)(hc,{headerText:nt("widget.backgroundcolor.title"),onCloseClick:j}),Object(Kr.jsxs)(lc,{overflow:"hidden",justifyContent:"between",children:[Object(Kr.jsxs)(Nc,{overflow:"auto",gap:1,children:[Object(Kr.jsxs)(Nc,{children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("widget.backgroundcolor.hue")}),Object(Kr.jsx)(Li.a,{className:"nitro-slider",min:0,max:360,value:n,onChange:e=>r(e),thumbClassName:"thumb degree",renderThumb:(e,t)=>Object(Kr.jsx)("div",{...e,children:t.valueNow})})]}),Object(Kr.jsxs)(Nc,{children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("widget.backgroundcolor.saturation")}),Object(Kr.jsx)(Li.a,{className:"nitro-slider",min:0,max:255,value:i,onChange:e=>o(e),thumbClassName:"thumb percent",renderThumb:(e,t)=>Object(Kr.jsx)("div",{...e,children:t.valueNow})})]}),Object(Kr.jsxs)(Nc,{children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("widget.backgroundcolor.lightness")}),Object(Kr.jsx)(Li.a,{className:"nitro-slider",min:0,max:255,value:l,onChange:e=>u(e),thumbClassName:"thumb percent",renderThumb:(e,t)=>Object(Kr.jsx)("div",{...e,children:t.valueNow})})]})]}),Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(tc,{fullWidth:!0,variant:"primary",onClick:e=>O("toggle"),children:nt("widget.backgroundcolor.button.on")}),Object(Kr.jsx)(tc,{fullWidth:!0,variant:"primary",onClick:e=>O("apply"),children:nt("widget.backgroundcolor.button.apply")})]})]})]})};class Eh{constructor(e,t,s,n,r,c,i){this.objectId=e,this.category=t,this.color=s,this.ownerName=n,this.date=r,this.message=c,this.customTitle=i}}const fh=e=>{const[t,s]=Object(c.useState)(null),{widgetHandler:n=null}=Md(),r=Object(c.useCallback)((e=>{switch(e.type){case a.sg.REQUEST_ACHIEVEMENT_RESOLUTION_ENGRAVING:case a.sg.REQUEST_BADGE_DISPLAY_ENGRAVING:{const t=e,n=L().getRoomObject(t.roomId,t.objectId,t.category);if(!n)return;const r=new a.Qh;r.initializeFromRoomObjectModel(n.model);const c=et(r.getValue(1)),i=Ze(r.getValue(1)),o=r.getValue(2),l=r.getValue(3);return void s(new Eh(t.objectId,t.category,"1",l,o,i,c))}case Ve.FURNI_REMOVED:{const t=e;return void s((e=>e&&t.id===e.objectId&&t.category===e.category?null:e))}}}),[]);Bt(a.sg.REQUEST_BADGE_DISPLAY_ENGRAVING,r),Bt(a.sg.REQUEST_ACHIEVEMENT_RESOLUTION_ENGRAVING,r),Pt(Ve.FURNI_REMOVED,n.eventDispatcher,r);const i=Object(c.useCallback)((function(e){"close"!==e||s(null)}),[]);return t?Object(Kr.jsx)(zc,{color:t.color,message:t.message,date:t.date,senderName:t.ownerName,customTitle:t.customTitle,onCloseClick:()=>i("close")}):null},xh=e=>{const{objectId:t=-1,close:s=null}=e,{roomSession:n=null}=Md();return Object(Kr.jsxs)(_c,{className:"nitro-use-product-confirmation",children:[Object(Kr.jsx)(hc,{headerText:nt("effectbox.header.title"),onCloseClick:s}),Object(Kr.jsx)(lc,{center:!0,children:Object(Kr.jsx)(ec,{gap:2,children:Object(Kr.jsxs)(Nc,{justifyContent:"between",children:[Object(Kr.jsx)(Zc,{children:nt("effectbox.header.description")}),Object(Kr.jsxs)(ec,{alignItems:"center",justifyContent:"between",children:[Object(Kr.jsx)(tc,{variant:"danger",onClick:s,children:nt("generic.cancel")}),Object(Kr.jsx)(tc,{variant:"success",onClick:()=>{n.useMultistateItem(t),s()},children:nt("generic.ok")})]})]})})})]})},Ih=e=>{const{objectId:t=-1,close:s=null}=e,[n,r]=Object(c.useState)(null),[i,o]=Object(c.useState)(-1),{roomSession:l=null,widgetHandler:u=null}=Md();return Object(c.useEffect)((()=>{if(!l||-1===t)return;const e=ne(l.roomId,t,a.Ig.FLOOR);if(!e)return;r(e);let n=-1;if(e.specialType===Rs.MONSTERPLANT_SEED)n=0;-1!==n?o(n):s()}),[l,t,s]),-1===i?null:Object(Kr.jsxs)(_c,{className:"nitro-use-product-confirmation",children:[Object(Kr.jsx)(hc,{headerText:nt("useproduct.widget.title.plant_seed",["name"],[n.name]),onCloseClick:s}),Object(Kr.jsx)(lc,{center:!0,children:Object(Kr.jsxs)(ec,{gap:2,overflow:"hidden",children:[Object(Kr.jsx)(Nc,{children:Object(Kr.jsx)(Qr,{className:"product-preview",children:Object(Kr.jsx)(Qr,{className:"monsterplant-image"})})}),Object(Kr.jsxs)(Nc,{justifyContent:"between",overflow:"auto",children:[Object(Kr.jsxs)(Nc,{gap:2,children:[Object(Kr.jsx)(Zc,{children:nt("useproduct.widget.text.plant_seed",["productName"],[n.name])}),Object(Kr.jsx)(Zc,{children:nt("useproduct.widget.info.plant_seed")})]}),Object(Kr.jsxs)(ec,{alignItems:"center",justifyContent:"between",children:[Object(Kr.jsx)(tc,{variant:"danger",onClick:s,children:nt("useproduct.widget.cancel")}),Object(Kr.jsx)(tc,{variant:"success",onClick:()=>{u.processWidgetMessage(new Sn(Sn.MONSTERPLANT_SEED,t)),s()},children:nt("widget.monsterplant_seed.button.use")})]})]})]})})]})},Th=e=>{const{objectId:t=-1,close:s=null}=e,[n,r]=Object(c.useState)(-1),[i,o]=Object(c.useState)(di.MALE),[l,u]=Object(c.useState)(null),{roomSession:d=null}=Md();return Object(c.useEffect)((()=>{let e=-1;const n=ee().figure,c=ee().gender,i=[];if(d&&t>=0){const s=ne(d.roomId,t,a.Ig.FLOOR);if(s&&s.specialType===Rs.FIGURE_PURCHASABLE_SET){e=0;const t=s.customParams.split(",").map((e=>parseInt(e)));for(const e of t)N().isValidFigureSetForGender(e,c)&&i.push(e)}}-1!==e?(o(c),u(N().getFigureStringWithFigureIds(n,c,i)),r(e)):s()}),[d,t,s]),-1===n?null:Object(Kr.jsxs)(_c,{className:"nitro-use-product-confirmation",children:[Object(Kr.jsx)(hc,{headerText:nt("useproduct.widget.title.bind_clothing"),onCloseClick:s}),Object(Kr.jsx)(lc,{center:!0,children:Object(Kr.jsxs)(ec,{gap:2,overflow:"hidden",children:[Object(Kr.jsx)(Nc,{children:Object(Kr.jsx)(Qr,{className:"mannequin-preview",children:Object(Kr.jsx)(Ec,{figure:l,direction:2})})}),Object(Kr.jsxs)(Nc,{justifyContent:"between",overflow:"auto",children:[Object(Kr.jsxs)(Nc,{gap:2,children:[Object(Kr.jsx)(Zc,{children:nt("useproduct.widget.text.bind_clothing")}),Object(Kr.jsx)(Zc,{children:nt("useproduct.widget.info.bind_clothing")})]}),Object(Kr.jsxs)(ec,{alignItems:"center",justifyContent:"between",children:[Object(Kr.jsx)(tc,{variant:"danger",onClick:s,children:nt("useproduct.widget.cancel")}),Object(Kr.jsx)(tc,{variant:"success",onClick:()=>{D().send(new a.If(t)),D().send(new a.Di(i,l)),s()},children:nt("useproduct.widget.bind_clothing")})]})]})]})})]})},Ch="MONSTERPLANT_SEED_CONFIRMATION",Sh="PURCHASABLE_CLOTHING_CONFIRMATION",Nh="GROUP_FURNITURE",vh="EFFECTBOX_OPEN",Rh=e=>{const[t,s]=Object(c.useState)(-1),[n,r]=Object(c.useState)(null),[i,o]=Object(c.useState)(null),[l,u]=Object(c.useState)(-1),[d,h]=Object(c.useState)(null),[j,b]=Object(c.useState)(!1),{roomSession:g=null,widgetHandler:O=null}=Md(),m=Object(c.useCallback)((()=>{s(-1),h(null),b(!1),r(null)}),[]),p=()=>{o(null),u(-1)},_=Object(c.useCallback)((e=>{const n=L().getRoomObject(g.roomId,e.objectId,e.category);if(n)switch(e.type){case a.sg.REQUEST_MONSTERPLANT_SEED_PLANT_CONFIRMATION_DIALOG:if(!K(n))return;return u(n.id),o(Ch),void m();case a.sg.REQUEST_EFFECTBOX_OPEN_DIALOG:if(!K(n))return;return u(n.id),o(vh),void m();case a.sg.REQUEST_PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG:if(!K(n))return;return u(n.id),o(Sh),void m();case a.sg.OPEN_FURNI_CONTEXT_MENU:switch(s(n.id),e.contextMenu){case a.nb.FRIEND_FURNITURE:return void r(a.nb.FRIEND_FURNITURE);case a.nb.MONSTERPLANT_SEED:return void(K(n)&&r(a.nb.MONSTERPLANT_SEED));case a.nb.MYSTERY_BOX:return;case a.nb.RANDOM_TELEPORT:return void r(a.nb.RANDOM_TELEPORT);case a.nb.PURCHASABLE_CLOTHING:return void(K(n)&&r(a.nb.PURCHASABLE_CLOTHING))}return;case a.sg.CLOSE_FURNI_CONTEXT_MENU:return void(n.id===t&&m())}}),[g,t,m]);Bt(a.sg.OPEN_FURNI_CONTEXT_MENU,_),Bt(a.sg.CLOSE_FURNI_CONTEXT_MENU,_),Bt(a.sg.REQUEST_MONSTERPLANT_SEED_PLANT_CONFIRMATION_DIALOG,_),Bt(a.sg.REQUEST_PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG,_),Bt(a.sg.REQUEST_EFFECTBOX_OPEN_DIALOG,_);const E=Object(c.useCallback)((e=>{const t=e.getParser();s(t.objectId),h(t),b(t.userIsMember),r(Nh)}),[]);it(a.Sc,E);const f=e=>{if(e)switch(e){case"use_friend_furni":g.useMultistateItem(t);break;case"use_monsterplant_seed":o(Ch),u(t);break;case"use_random_teleport":O.processWidgetMessage(new En(En.USE,t,a.Ig.FLOOR));break;case"use_purchaseable_clothing":o(Sh),u(t);break;case"join_group":return Ir(d.guildId),void b(!0);case"go_to_group_homeroom":d&&Ar(d.guildHomeRoomId)}m()};return Object(Kr.jsxs)(Kr.Fragment,{children:[i===Ch&&Object(Kr.jsx)(Ih,{objectId:l,close:p}),i===Sh&&Object(Kr.jsx)(Th,{objectId:l,close:p}),i===vh&&Object(Kr.jsx)(xh,{objectId:l,close:p}),t>=0&&n&&Object(Kr.jsxs)(Kd,{objectId:t,category:a.Ig.FLOOR,close:m,fades:!0,children:[n===a.nb.FRIEND_FURNITURE&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(Hd,{children:nt("friendfurni.context.title")}),Object(Kr.jsx)(Vd,{onClick:e=>f("use_friend_furni"),children:nt("friendfurni.context.use")})]}),n===a.nb.MONSTERPLANT_SEED&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(Hd,{children:nt("furni.mnstr_seed.name")}),Object(Kr.jsx)(Vd,{onClick:e=>f("use_monsterplant_seed"),children:nt("widget.monsterplant_seed.button.use")})]}),n===a.nb.RANDOM_TELEPORT&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(Hd,{children:nt("furni.random_teleport.name")}),Object(Kr.jsx)(Vd,{onClick:e=>f("use_random_teleport"),children:nt("widget.random_teleport.button.use")})]}),n===a.nb.PURCHASABLE_CLOTHING&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(Hd,{children:nt("furni.generic_usable.name")}),Object(Kr.jsx)(Vd,{onClick:e=>f("use_purchaseable_clothing"),children:nt("widget.generic_usable.button.use")})]}),n===Nh&&d&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(Hd,{className:"cursor-pointer text-truncate",onClick:()=>Er(d.guildId),children:d.guildName}),!j&&Object(Kr.jsx)(Vd,{onClick:e=>f("join_group"),children:nt("widget.furniture.button.join.group")}),Object(Kr.jsx)(Vd,{onClick:e=>f("go_to_group_homeroom"),children:nt("widget.furniture.button.go.to.group.home.room")}),d.guildHasReadableForum&&Object(Kr.jsx)(Vd,{onClick:e=>f("open_forum"),children:nt("widget.furniture.button.open_group_forum")})]})]})]})},Ah=40,yh=e=>{const[t,s]=Object(c.useState)(-1),[n,r]=Object(c.useState)(0),[i,o]=Object(c.useState)(-1),{eventDispatcher:l=null}=Md(),u=Object(c.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e||(e=0),e=Math.abs(e),t||e>Ah&&(e=Ah),r(parseFloat(e.toFixed(2))),t||o(100*e)}),[]),d=Object(c.useCallback)((e=>{if(e.type===Re.UPDATE_CUSTOM_STACK_HEIGHT)s(e.objectId),u(e.height,!0)}),[u]);Pt(Re.UPDATE_CUSTOM_STACK_HEIGHT,l,d);const h=Object(c.useCallback)((e=>{const s=e.getParser();t===s.furniId&&u(s.height,!0)}),[t,u]);it(a.Zb,h);const j=Object(c.useCallback)((e=>{$n(new a.Yb(t,~~e))}),[t]);return Object(c.useEffect)((()=>{if(-1===t||-1===i)return;const e=setTimeout((()=>j(~~i)),10);return()=>clearTimeout(e)}),[t,i,j]),-1===t?null:Object(Kr.jsxs)(_c,{className:"nitro-widget-custom-stack-height",theme:"primary-slim",children:[Object(Kr.jsx)(hc,{headerText:nt("widget.custom.stack.height.title"),onCloseClick:()=>{s(-1),r(0)}}),Object(Kr.jsxs)(lc,{justifyContent:"between",children:[Object(Kr.jsx)(Zc,{children:nt("widget.custom.stack.height.text")}),Object(Kr.jsxs)(ec,{gap:2,children:[Object(Kr.jsx)(Li.a,{className:"nitro-slider",min:0,max:Ah,step:.01,value:n,onChange:e=>u(e),renderThumb:(e,t)=>Object(Kr.jsx)("div",{...e,children:t.valueNow})}),Object(Kr.jsx)("input",{type:"number",min:0,max:Ah,value:n,onChange:e=>u(parseFloat(e.target.value))})]}),Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(tc,{onClick:e=>j(-100),children:nt("furniture.above.stack")}),Object(Kr.jsx)(tc,{onClick:e=>j(0),children:nt("furniture.floor.level")})]})]})]})};class wh{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.id=e,this.type=t,this.color=s,this.light=n}}const kh=[7665141,21495,15161822,15353138,15923281,8581961,0],Dh=["#74F5F5","#0053F7","#E759DE","#EA4532","#F2F851","#82F349","#000000"],Uh=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)([]),[i,a]=Object(c.useState)(0),[o,l]=Object(c.useState)(0),[u,d]=Object(c.useState)(0),[h,j]=Object(c.useState)(0),[b,g]=Object(c.useState)(16777215),[O,m]=Object(c.useState)(255),[p,_]=Object(c.useState)(0),[E,f]=Object(c.useState)(0),[x,I]=Object(c.useState)(0),{eventDispatcher:T=null,widgetHandler:C=null}=Md(),S=Object(c.useCallback)((e=>{switch(e.type){case we.PRESETS:{const t=e,n=[];for(const e of t.presets)n.push(new wh(e.id,e.type,e.color,e.brightness));return r(n),a(t.selectedPresetId),void s(!0)}case we.HIDE:return void s(!1);case ke.DIMMER_STATE:{const t=e;return d(o),l(t.state),a(t.presetId),j(t.effectId),_(t.effectId),g(t.color),f(t.color),m(t.brightness),void I(t.brightness)}}}),[o]);Pt(we.PRESETS,T,S),Pt(we.HIDE,T,S),Pt(ke.DIMMER_STATE,T,S);const N=Object(c.useCallback)((e=>{const t=n[e-1];t&&(a(t.id),_(t.type),f(t.color),I(t.light))}),[n]),v=Object(c.useCallback)((()=>{C.processWidgetMessage(new pn(b,O,2===h)),s(!1)}),[C,b,O,h]),R=Object(c.useCallback)((()=>{C.processWidgetMessage(new mn)}),[C]),A=Object(c.useCallback)((()=>{if(0===o)return;const e=i-1;if(i<1||i>n.length)return;const t=n[e];!t||p===t.type&&E===t.color&&x===t.light||(r((s=>{const n=[...s];return n[e]=new wh(t.id,p,E,x),n})),C.processWidgetMessage(new _n(t.id,p,E,x,!0)))}),[C,o,i,n,p,E,x]),y=Object(c.useCallback)((e=>~~(100*(e-76)/179+0)),[]),w=Object(c.useMemo)((()=>k("widget.dimmer.colorwheel",!1)),[]);return Object(c.useEffect)((()=>{0===o&&0===u||C.processWidgetMessage(new pn(E,x,2===p))}),[C,o,u,E,x,p]),t?Object(Kr.jsxs)(_c,{className:"nitro-room-widget-dimmer",children:[Object(Kr.jsx)(hc,{headerText:nt("widget.dimmer.title"),onCloseClick:v}),1===o&&Object(Kr.jsx)($c,{children:n.map((e=>Object(Kr.jsx)(Qc,{isActive:i===e.id,onClick:t=>N(e.id),children:nt(`widget.dimmer.tab.${e.id}`)},e.id)))}),Object(Kr.jsxs)(lc,{children:[0===o&&Object(Kr.jsxs)(Nc,{alignItems:"center",children:[Object(Kr.jsx)(Qr,{className:"dimmer-banner"}),Object(Kr.jsx)(Zc,{center:!0,className:"bg-muted rounded p-1",children:nt("widget.dimmer.info.off")}),Object(Kr.jsx)(tc,{fullWidth:!0,variant:"success",onClick:R,children:nt("widget.dimmer.button.on")})]}),1===o&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{fontWeight:"bold",children:nt("widget.backgroundcolor.hue")}),w&&Object(Kr.jsx)("input",{type:"color",className:"form-control",value:Je.makeColorNumberHex(E),onChange:e=>f(Je.convertFromHex(e.target.value))}),!w&&Object(Kr.jsx)(Jr,{gap:1,columnCount:7,children:kh.map(((e,t)=>Object(Kr.jsx)(Nc,{fullWidth:!0,pointer:!0,className:"color-swatch rounded"+$i()({" active":e===E}),onClick:()=>f(e),style:{backgroundColor:Dh[t]}},t)))})]}),Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{fontWeight:"bold",children:nt("widget.backgroundcolor.lightness")}),Object(Kr.jsx)(Li.a,{className:"nitro-slider",min:76,max:255,value:x,onChange:e=>I(e),thumbClassName:"thumb percent",renderThumb:(e,t)=>Object(Kr.jsx)("div",{...e,children:y(t.valueNow)})})]}),Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)("input",{className:"form-check-input",type:"checkbox",checked:2===p,onChange:e=>_(e.target.checked?2:1)}),Object(Kr.jsx)(Zc,{children:nt("widget.dimmer.type.checkbox")})]}),Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)(tc,{fullWidth:!0,variant:"danger",onClick:R,children:nt("widget.dimmer.button.off")}),Object(Kr.jsx)(tc,{fullWidth:!0,variant:"success",onClick:A,children:nt("widget.dimmer.button.apply")})]})]})]})]}):null},Ph=e=>{const[t,s]=Object(c.useState)(-1),[n,r]=Object(c.useState)(0),{eventDispatcher:i=null,widgetHandler:a=null}=Md(),o=Object(c.useCallback)((e=>{s(e.objectId),r(e.value)}),[]);Pt(ve.CREDIT_FURNI_UPDATE,i,o);const l=()=>{s(-1),r(0)};return-1===t?null:Object(Kr.jsxs)(_c,{className:"nitro-widget-exchange-credit",theme:"primary-slim",children:[Object(Kr.jsx)(hc,{headerText:nt("catalog.redeem.dialog.title"),onCloseClick:l}),Object(Kr.jsx)(lc,{center:!0,children:Object(Kr.jsxs)(ec,{overflow:"hidden",gap:2,children:[Object(Kr.jsx)(Nc,{center:!0,children:Object(Kr.jsx)(Qr,{className:"exchange-image"})}),Object(Kr.jsxs)(Nc,{grow:!0,justifyContent:"between",overflow:"hidden",children:[Object(Kr.jsxs)(Nc,{gap:1,overflow:"auto",children:[Object(Kr.jsx)(Zc,{fontWeight:"bold",children:nt("creditfurni.description",["credits"],[n.toString()])}),Object(Kr.jsx)(Zc,{children:nt("creditfurni.prompt")})]}),Object(Kr.jsx)(tc,{variant:"success",onClick:()=>{a.processWidgetMessage(new gn(gn.REDEEM,t)),l()},children:nt("catalog.redeem.dialog.button.exchange")})]})]})})]})},Mh=e=>{const[t,s]=Object(c.useState)(-1),[n,r]=Object(c.useState)(null),{eventDispatcher:i=null}=Md(),a=Object(c.useCallback)((e=>{if(e.type===De.UPDATE_EXTERNAL_IMAGE)return s(e.objectId),void r(e.photoData)}),[]);return Pt(De.UPDATE_EXTERNAL_IMAGE,i,a),-1!==t&&n?Object(Kr.jsxs)(_c,{className:"nitro-external-image-widget",theme:"primary-slim",children:[Object(Kr.jsx)(hc,{headerText:"",onCloseClick:()=>{s(-1),r(null)}}),Object(Kr.jsxs)(lc,{children:[Object(Kr.jsx)(ec,{center:!0,className:"picture-preview border border-black",style:n.w?{backgroundImage:"url("+n.w+")"}:{},children:!n.w&&Object(Kr.jsx)(Zc,{bold:!0,children:nt("camera.loading")})}),n.m&&n.m.length&&Object(Kr.jsx)(Zc,{center:!0,children:n.m}),Object(Kr.jsxs)(ec,{alignItems:"center",justifyContent:"between",children:[Object(Kr.jsx)(Zc,{children:n.n||""}),Object(Kr.jsx)(Zc,{children:new Date(1e3*n.t).toLocaleDateString()})]})]})]}):null};class Lh{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;this.objectId=e,this.category=t,this.type=s,this.usernames=n,this.figures=r,this.date=c}}const Fh=e=>{const{eventDispatcher:t=null,widgetHandler:s=null}=Md(),[n,r]=Object(c.useState)(null),[i,o]=Object(c.useState)(0),l=e=>{switch(e.type){case a.sg.REQUEST_FRIEND_FURNITURE_ENGRAVING:{const t=e,s=L().getRoomObject(t.roomId,t.objectId,t.category);if(!s)return;const n=s.model.getValue(a.Og.FURNITURE_DATA),c=s.model.getValue(a.Og.FURNITURE_FRIENDFURNI_ENGRAVING);if("1"===n[0]){if(6!==n.length)return;r(new Lh(t.objectId,t.category,c,[n[1],n[2]],[n[3],n[4]],n[5])),o(0)}return}case Ve.FURNI_REMOVED:{const t=e;return void r((e=>e&&t.id===e.objectId&&t.category===e.category?null:e))}}};Bt(a.sg.REQUEST_FRIEND_FURNITURE_ENGRAVING,l),Pt(Ve.FURNI_REMOVED,t,l);const u=Object(c.useCallback)((e=>{const t=e.getParser();r(new Lh(t.furniId)),o(t.start?1:2)}),[]);it(a.ae,u);const d=Object(c.useCallback)((function(e){switch(e){case"close_view":return void r(null);case"accept_request":return ie().connection.send(new a.Gb(n.objectId,!0)),void d("close_request");case"reject_request":return ie().connection.send(new a.Gb(n.objectId,!1)),void d("close_request");case"close_request":return o(0),void r(null)}}),[n]),h=Object(c.useCallback)((e=>{d("close_request")}),[d]);return it(a.Yd,h),it(a.Zd,h),Object(Kr.jsxs)(Kr.Fragment,{children:[i>0&&Object(Kr.jsxs)(_c,{className:"nitro-engraving-lock",theme:"primary-slim",children:[Object(Kr.jsx)(hc,{headerText:nt("friend.furniture.confirm.lock.caption"),onCloseClick:e=>d("close_request")}),Object(Kr.jsxs)(lc,{children:[Object(Kr.jsx)("h5",{className:"text-black text-center fw-bold mt-2 mb-2",children:nt("friend.furniture.confirm.lock.subtitle")}),Object(Kr.jsx)("div",{className:"d-flex justify-content-center mb-2",children:Object(Kr.jsx)("div",{className:"engraving-lock-stage-"+i})}),2===i&&Object(Kr.jsx)("div",{className:"text-small text-black text-center mb-2",children:nt("friend.furniture.confirm.lock.other.locked")}),Object(Kr.jsxs)("div",{className:"d-flex",children:[Object(Kr.jsx)("button",{className:"btn btn-primary w-100 me-2",onClick:e=>d("reject_request"),children:nt("friend.furniture.confirm.lock.button.cancel")}),Object(Kr.jsx)("button",{className:"btn btn-success w-100",onClick:e=>d("accept_request"),children:nt("friend.furniture.confirm.lock.button.confirm")})]})]})]}),n&&n.usernames.length>0&&Object(Kr.jsx)(pc,{handleSelector:".nitro-engraving-lock-view",children:Object(Kr.jsxs)("div",{className:"nitro-engraving-lock-view engraving-lock-"+n.type,children:[Object(Kr.jsx)("div",{className:"engraving-lock-close",onClick:e=>d("close_view")}),Object(Kr.jsxs)("div",{className:"d-flex justify-content-center",children:[Object(Kr.jsx)("div",{className:"engraving-lock-avatar",children:Object(Kr.jsx)(Ec,{figure:n.figures[0],direction:2})}),Object(Kr.jsx)("div",{className:"engraving-lock-avatar",children:Object(Kr.jsx)(Ec,{figure:n.figures[1],direction:4})})]}),Object(Kr.jsxs)("div",{className:"text-center mt-1",children:[Object(Kr.jsxs)("div",{children:[0===n.type&&nt("lovelock.engraving.caption"),3===n.type&&nt("wildwest.engraving.caption")]}),Object(Kr.jsx)("div",{children:n.date}),Object(Kr.jsxs)("div",{className:"d-flex justify-content-center",children:[Object(Kr.jsx)("div",{className:"me-4",children:n.usernames[0]}),Object(Kr.jsx)("div",{children:n.usernames[1]})]})]})]})})]})},Hh=e=>{const[t,s]=Object(c.useState)(-1),[n,r]=Object(c.useState)(-1),[i,o]=Object(c.useState)(null),[l,u]=Object(c.useState)(null),[d,h]=Object(c.useState)(!1),[j,b]=Object(c.useState)(null),[g,O]=Object(c.useState)(null),[m,p]=Object(c.useState)(-1),[_,E]=Object(c.useState)(null),[f,x]=Object(c.useState)(!1),[I,T]=Object(c.useState)(null),[C,S]=Object(c.useState)(!1),{roomSession:N=null,eventDispatcher:v=null,widgetHandler:R=null}=Md(),A=Object(c.useCallback)((()=>{C||s(-1),u(null),h(!1)}),[C]),w=Object(c.useCallback)((e=>""),[]),k=Object(c.useCallback)((e=>{switch(e.type){case Be.PACKAGEINFO:return S(!1),s(e.objectId),u(e.giftMessage),h(e.isController),b(e.purchaserName),O(e.purchaserFigure),void T(e.imageUrl);case Be.CONTENTS_FLOOR:case Be.CONTENTS_LANDSCAPE:case Be.CONTENTS_WALLPAPER:{let t=null;return e.type===Be.CONTENTS_FLOOR?t="packagecard_icon_floor":e.type===Be.CONTENTS_LANDSCAPE?t="packagecard_icon_landscape":e.type===Be.CONTENTS_WALLPAPER&&(t="packagecard_icon_wallpaper"),s(e.objectId),r(e.classId),o(e.itemType),u(e.giftMessage),h(e.isController),p(e.placedItemId),E(e.placedItemType),x(e.placedInRoom),void T(w(t))}case Be.CONTENTS_CLUB:return s(e.objectId),r(e.classId),o(e.itemType),u(e.giftMessage),h(e.isController),void T(w("packagecard_icon_hc"));case Be.CONTENTS:if(!C)return;return s(e.objectId),r(e.classId),o(e.itemType),u(e.giftMessage),h(e.isController),p(e.placedItemId),E(e.placedItemType),x(e.placedInRoom),void T(e.imageUrl);case Be.CONTENTS_IMAGE:if(!C)return;T(e.imageUrl)}}),[C,w]);Pt(Be.PACKAGEINFO,v,k),Pt(Be.CONTENTS,v,k),Pt(Be.CONTENTS_FLOOR,v,k),Pt(Be.CONTENTS_LANDSCAPE,v,k),Pt(Be.CONTENTS_WALLPAPER,v,k),Pt(Be.CONTENTS_CLUB,v,k),Pt(Be.CONTENTS_IMAGE,v,k);const D=Object(c.useCallback)((e=>{e.id===t&&A(),e.id===m&&f&&x(!1)}),[t,m,f,A]);Pt(Ve.FURNI_REMOVED,v,D);const U=Object(c.useCallback)((()=>{s(-1),S(!1),p(-1),x(!1),u(null),h(!1)}),[]),P=Object(c.useMemo)((()=>{if(i!==er.WALL)return!1;const e=ee().getWallItemData(n);if(!e)return!1;const t=e.className;return"floor"===t||"landscape"===t||"wallpaper"===t}),[n,i]),M=Object(c.useMemo)((()=>-1===t?"":P?"widget.furni.present.spaces.message_opened":"widget.furni.present.message_opened"),[t,P]),F=Object(c.useCallback)((e=>{switch(e){case 0:return void y("catalog/open");case 1:return S(!0),void R.processWidgetMessage(new In(In.OPEN_PRESENT,t));case 2:return;case 3:if(m>0&&f)if(_===er.PET)N.pickupPet(m);else{const e=L().getRoomObject(N.roomId,m,a.Ig.FLOOR);e&&L().processRoomObjectOperation(e.id,a.Ig.FLOOR,a.Kg.OBJECT_PICKUP)}return void U()}}),[N,R,t,f,m,_,U]);return-1===t?null:Object(Kr.jsxs)(_c,{className:"nitro-gift-opening",theme:"primary-slim",children:[Object(Kr.jsx)(hc,{headerText:nt(j?"widget.furni.present.window.title_from":"widget.furni.present.window.title",["name"],[j]),onCloseClick:U}),Object(Kr.jsxs)(lc,{center:!0,children:[-1===m&&Object(Kr.jsxs)(Nc,{overflow:"hidden",children:[Object(Kr.jsx)(ec,{center:!0,overflow:"auto",children:Object(Kr.jsx)(Sc,{userName:j,figure:g,message:l})}),Object(Kr.jsxs)(ec,{gap:1,children:[j&&Object(Kr.jsx)(tc,{fullWidth:!0,onClick:e=>F(0),children:nt("widget.furni.present.give_gift",["name"],[j])}),Object(Kr.jsx)(tc,{fullWidth:!0,variant:"success",onClick:e=>F(1),children:nt("widget.furni.present.open_gift")})]})]}),m>-1&&Object(Kr.jsxs)(Nc,{overflow:"hidden",children:[Object(Kr.jsxs)(ec,{center:!0,overflow:"auto",gap:2,children:[Object(Kr.jsx)("img",{src:I,className:"no-select",alt:""}),Object(Kr.jsx)(Zc,{wrap:!0,children:nt(M,["product"],[l])})]}),Object(Kr.jsxs)(Nc,{grow:!0,gap:1,children:[Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)(tc,{fullWidth:!0,onClick:e=>F(3),children:nt("widget.furni.present.put_in_inventory")}),Object(Kr.jsx)(tc,{fullWidth:!0,variant:"success",onClick:e=>F(2),children:nt(f?"widget.furni.present.keep_in_room":"widget.furni.present.place_in_room")})]}),j&&j.length&&Object(Kr.jsx)(tc,{fullWidth:!0,onClick:e=>F(0),children:nt("widget.furni.present.give_gift",["name"],[j])})]})]})]})]})},Bh=["perteam","mostwins","classic"],Gh=["alltime","daily","weekly","monthly"],Wh=e=>{const[t,s]=Object(c.useState)(new Map),{roomSession:n=null}=Md(),r=Object(c.useCallback)((e=>{switch(e.type){case a.sg.REQUEST_HIGH_SCORE_DISPLAY:{const t=L().getRoomObject(n.roomId,e.objectId,e.category);if(!t)return;const r=t.model.getValue(a.Og.FURNITURE_DATA_FORMAT),c=a.gf.getData(r);return c.initializeFromRoomObjectModel(t.model),void s((e=>{const s=new Map(e);return s.set(t.id,c),s}))}case a.sg.REQUEST_HIDE_HIGH_SCORE_DISPLAY:if(e.roomId!==n.roomId)return;return void s((t=>{const s=new Map(t);return s.delete(e.objectId),s}))}}),[n]);return Bt(a.sg.REQUEST_HIGH_SCORE_DISPLAY,r),Bt(a.sg.REQUEST_HIDE_HIGH_SCORE_DISPLAY,r),t.size?Object(Kr.jsx)(Kr.Fragment,{children:Array.from(t.entries()).map(((e,t)=>{let[s,n]=e;return Object(Kr.jsx)(Oh,{objectId:s,category:a.Ig.FLOOR,children:Object(Kr.jsxs)(Nc,{className:"nitro-widget-high-score nitro-context-menu",gap:0,children:[Object(Kr.jsx)(Hd,{children:nt("high.score.display.caption",["scoretype","cleartype"],[nt(`high.score.display.scoretype.${Bh[n.scoreType]}`),nt(`high.score.display.cleartype.${Gh[n.clearType]}`)])}),Object(Kr.jsxs)(Xd,{overflow:"hidden",gap:1,className:"h-100",children:[Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsxs)(ec,{alignItems:"center",children:[Object(Kr.jsx)(Zc,{center:!0,bold:!0,variant:"white",className:"col-8",children:nt("high.score.display.users.header")}),Object(Kr.jsx)(Zc,{center:!0,bold:!0,variant:"white",className:"col-4",children:nt("high.score.display.score.header")})]}),Object(Kr.jsx)("hr",{className:"m-0"})]}),Object(Kr.jsx)(Nc,{overflow:"auto",gap:1,className:"overflow-y-scroll",children:n.entries.map(((e,t)=>Object(Kr.jsxs)(ec,{alignItems:"center",children:[Object(Kr.jsx)(Zc,{center:!0,variant:"white",className:"col-8",children:e.users.join(", ")}),Object(Kr.jsx)(Zc,{center:!0,variant:"white",className:"col-4",children:e.score})]},t)))})]})]})},t)}))}):null},Vh=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(-1),[i,o]=Object(c.useState)(-1),{roomSession:l=null,eventDispatcher:u=null,widgetHandler:d=null}=Md(),h=Object(c.useCallback)((()=>{ge(n,i,a.Kg.OBJECT_ROTATE_POSITIVE)}),[n,i]),j=Object(c.useCallback)((()=>{ge(n,i,a.Kg.OBJECT_MOVE)}),[n,i]),b=Object(c.useCallback)((()=>{ge(n,i,a.Kg.OBJECT_PICKUP)}),[n,i]),g=Object(c.useCallback)((e=>{switch(e.type){case Ve.OBJECT_REQUEST_MANIPULATION:return s(!0),r(e.id),void o(e.category);case Ve.FURNI_REMOVED:return void(e.id===n&&(s(!1),r(-1),o(-1)));case Ve.OBJECT_DESELECTED:return s(!1),r(-1),void o(-1)}}),[n]);Pt(Ve.OBJECT_REQUEST_MANIPULATION,u,g),Pt(Ve.OBJECT_DESELECTED,u,g);const O=Object(c.useCallback)((e=>{e.isDecorating||(j(),s(!1),r(-1),o(-1))}),[j]);return Pt(ye.UPDATE_DECORATE,u,O),Object(c.useEffect)((()=>{t?(u.dispatchEvent(new ye(!0)),j()):u.dispatchEvent(new ye(!1))}),[u,t,j]),t?Object(Kr.jsx)(Oh,{objectId:n,category:i,children:Object(Kr.jsxs)("div",{className:"btn-group",children:[Object(Kr.jsx)("button",{type:"button",className:"btn btn-primary btn-sm",onClick:b,children:Object(Kr.jsx)(ic.a,{icon:"times"})}),Object(Kr.jsx)("button",{type:"button",className:"btn btn-primary btn-sm",onClick:h,children:Object(Kr.jsx)(ic.a,{icon:"undo"})})]})}):null},qh=["hd",99999,[99998]],Yh=[a.p.CHEST_ACCESSORY,a.p.COAT_CHEST,a.p.CHEST,a.p.LEGS,a.p.SHOES,a.p.WAIST_ACCESSORY],zh=e=>{const[t,s]=Object(c.useState)(-1),[n,r]=Object(c.useState)(null),[i,o]=Object(c.useState)(null),[l,u]=Object(c.useState)(null),[d,h]=Object(c.useState)(a.Ed.NO_CLUB),[j,b]=Object(c.useState)(null),[g,O]=Object(c.useState)(a.Ed.NO_CLUB),[m,p]=Object(c.useState)(-1),{roomSession:_=null,eventDispatcher:E=null}=Md(),f=Object(c.useCallback)((e=>{const t=N().createFigureContainer(e.figure),n=N().getFigureClubLevel(t,e.gender,Yh);s(e.objectId),r(e.figure),o(e.gender),u(e.name),h(n),_.isRoomOwner||_.controllerLevel>=a.eg.GUEST||ee().isModerator?p(0):ee().gender.toLowerCase()!==e.gender.toLowerCase()?p(4):te()<n?p(3):p(2)}),[_]);Pt(He.MANNEQUIN_UPDATE,E,f);const x=e=>{for(const t of e.getPartTypeIds())Yh.indexOf(t)>=0||e.removePart(t);e.updatePart(qh[0],qh[1],qh[2])},I=Object(c.useCallback)((function(e){switch(e){case 3:$n(new a.Sb(t));break;case 2:$n(new a.Ub(t));break;case 1:return void $n(new a.Tb(t,l))}p(-1)}),[t,l]);return Object(c.useEffect)((()=>{switch(m){case 0:case 4:{const e=N().createFigureContainer(n);x(e),b(e.getFigureString()),O(d);break}case 1:{const e=N().createFigureContainer(ee().figure);x(e),b(e.getFigureString()),O(N().getFigureClubLevel(e,ee().gender,Yh));break}case 2:case 3:{const e=((e,t)=>{const s=N().createFigureContainer(e),n=N().createFigureContainer(t);for(const r of Yh)s.removePart(r);for(const r of n.getPartTypeIds())s.updatePart(r,n.getPartSetId(r),n.getPartColorIds(r));return s})(ee().figure,n);b(e.getFigureString()),O(d);break}}}),[m,n,d]),-1===m?null:Object(Kr.jsxs)(_c,{className:"nitro-mannequin",theme:"primary-slim",children:[Object(Kr.jsx)(hc,{headerText:nt("mannequin.widget.title"),onCloseClick:e=>p(-1)}),Object(Kr.jsx)(lc,{center:!0,children:Object(Kr.jsxs)(ec,{gap:2,overflow:"hidden",children:[Object(Kr.jsx)(Nc,{children:Object(Kr.jsxs)(Qr,{position:"relative",className:"mannequin-preview",children:[Object(Kr.jsx)(Ec,{figure:j,direction:2}),d>0&&Object(Kr.jsx)(Ic,{className:"position-absolute end-2 bottom-2",type:"hc"})]})}),Object(Kr.jsxs)(Nc,{justifyContent:"between",overflow:"auto",children:[0===m&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)("input",{type:"text",className:"form-control",value:l,onChange:e=>u(e.target.value),onKeyDown:e=>(e=>{"Enter"===e.key&&I(1)})(e)}),Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(tc,{variant:"success",onClick:e=>p(1),children:nt("mannequin.widget.style")}),Object(Kr.jsx)(tc,{variant:"success",onClick:e=>I(2),children:nt("mannequin.widget.wear")})]})]}),1===m&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:l}),Object(Kr.jsx)(Zc,{wrap:!0,children:nt("mannequin.widget.savetext")})]}),Object(Kr.jsxs)(ec,{alignItems:"center",justifyContent:"between",children:[Object(Kr.jsx)(Zc,{underline:!0,pointer:!0,onClick:e=>p(0),children:nt("mannequin.widget.back")}),Object(Kr.jsx)(tc,{variant:"success",onClick:e=>I(3),children:nt("mannequin.widget.save")})]})]}),2===m&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:l}),Object(Kr.jsx)(Zc,{children:nt("mannequin.widget.weartext")})]}),Object(Kr.jsx)(tc,{variant:"success",onClick:e=>I(2),children:nt("mannequin.widget.wear")})]}),3===m&&Object(Kr.jsx)(Zc,{children:nt("mannequin.widget.clubnotification")}),4===m&&Object(Kr.jsx)(Zc,{children:nt("mannequin.widget.wronggender")})]})]})})]})};class Kh{constructor(e,t,s,n){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.objectId=e,this.category=t,this.color=s,this.text=n,this.canModify=r,this.isEditing=c}}const Qh=["9CCEFF","FF9CFF","9CFF9C","FFFF33"],$h=["blue","pink","green","yellow"];function Xh(e){let t=Qh.indexOf(e);return-1===t&&(t=0),$h[t]}const Jh=e=>{const{eventDispatcher:t=null,widgetHandler:s=null}=Md(),[n,r]=Object(c.useState)(null),i=Object(c.useCallback)((e=>{switch(e.type){case a.sg.REQUEST_STICKIE:{const t=e,s=L().getRoomObject(t.roomId,t.objectId,t.category);if(!s)return;const n=s.model.getValue(a.Og.FURNITURE_ITEMDATA);if(n.length<6)return;let c=null,i=null;return n.indexOf(" ")>0?(c=n.slice(0,n.indexOf(" ")),i=n.slice(n.indexOf(" ")+1,n.length)):c=n,void r(new Kh(t.objectId,t.category,c,i,ie().isRoomOwner||ee().isModerator,!1))}case Ve.FURNI_REMOVED:{const t=e;return void r((e=>e&&t.id===e.objectId&&t.category===e.category?null:e))}}}),[]);Bt(a.sg.REQUEST_STICKIE,i),Pt(Ve.FURNI_REMOVED,t,i);const o=Object(c.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(e){case"close":return void r(null);case"trash":return void r((e=>e?(L().deleteRoomObject(e.objectId,e.category),null):null));case"changeColor":return void r((e=>{const s=new Kh(e.objectId,e.category,t,e.text,e.canModify);return L().modifyRoomObjectData(s.objectId,s.category,s.color,s.text),s}));case"changeText":return void r((e=>{const s=new Kh(e.objectId,e.category,e.color,t,e.canModify);return L().modifyRoomObjectData(s.objectId,s.category,s.color,s.text),s}));case"editMode":return void r((e=>e.canModify?new Kh(e.objectId,e.category,e.color,e.text,e.canModify,!0):e))}}),[]);return n?Object(Kr.jsx)(pc,{handleSelector:".drag-handler",windowPosition:gc.NOTHING,children:Object(Kr.jsxs)("div",{className:"nitro-stickie nitro-stickie-image stickie-"+Xh(n.color),children:[Object(Kr.jsxs)("div",{className:"d-flex align-items-center stickie-header drag-handler",children:[Object(Kr.jsx)("div",{className:"d-flex align-items-center flex-grow-1 h-100",children:n.canModify&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)("div",{className:"nitro-stickie-image stickie-trash header-trash",onClick:e=>o("trash")}),Qh.map((e=>Object(Kr.jsx)("div",{className:"stickie-color ms-1",onClick:t=>o("changeColor",e),style:{backgroundColor:Je.makeColorHex(e)}},e)))]})}),Object(Kr.jsx)("div",{className:"d-flex align-items-center nitro-stickie-image stickie-close header-close",onClick:e=>o("close")})]}),Object(Kr.jsx)("div",{className:"stickie-context",children:n.isEditing?Object(Kr.jsx)("textarea",{className:"context-text",defaultValue:n.text||"",tabIndex:0,onBlur:e=>o("changeText",e.target.value),autoFocus:!0}):Object(Kr.jsx)("div",{className:"context-text",onClick:e=>o("editMode"),children:n.text})})]})}):null},Zh=e=>{const{eventDispatcher:t=null,widgetHandler:s=null}=Md(),[n,r]=Object(c.useState)(null),i=Object(c.useCallback)((e=>{switch(e.type){case a.sg.REQUEST_TROPHY:{const t=e,s=L().getRoomObject(t.roomId,t.objectId,t.category);if(!s)return;let n=s.model.getValue(a.Og.FURNITURE_DATA),c=s.model.getValue(a.Og.FURNITURE_EXTRAS);c||(c="0");const i=s.model.getValue(a.Og.FURNITURE_COLOR),o=n.substring(0,n.indexOf("\t"));n=n.substring(o.length+1,n.length);const l=n.substring(0,n.indexOf("\t")),u=n.substr(l.length+1,n.length);return void r(new Eh(t.objectId,t.category,i,o,l,u))}case Ve.FURNI_REMOVED:{const t=e;return void r((e=>e&&t.id===e.objectId&&t.category===e.category?null:e))}}}),[]);Bt(a.sg.REQUEST_TROPHY,i),Pt(Ve.FURNI_REMOVED,s.eventDispatcher,i);const o=Object(c.useCallback)((function(e){"close"!==e||r(null)}),[]);return n?Object(Kr.jsx)(zc,{color:n.color,message:n.message,date:n.date,senderName:n.ownerName,onCloseClick:()=>o("close")}):null};var ej=s(86);class tj{}tj.UNSTARTED=-1,tj.ENDED=0,tj.PLAYING=1,tj.PAUSED=2,tj.BUFFERING=3,tj.CUED=5;const sj=e=>{const[t,s]=Object(c.useState)(-1),[n,r]=Object(c.useState)(null),[i,o]=Object(c.useState)(null),[l,u]=Object(c.useState)(null),[d,h]=Object(c.useState)(-1),[j,b]=Object(c.useState)(null),[g,O]=Object(c.useState)(null),[m,p]=Object(c.useState)(!1),[_,E]=Object(c.useState)(null),{eventDispatcher:f=null}=Md(),x=Object(c.useCallback)((e=>{if(e.type===ze.UPDATE_YOUTUBE_DISPLAY)s(e.objectId),p(e.hasControl)}),[]),I=Object(c.useCallback)((()=>{s(-1),b(null),O(null),p(!1),r(null),u(null),o(null),h(-1)}),[]);Pt(ze.UPDATE_YOUTUBE_DISPLAY,f,x);const T=Object(c.useCallback)((e=>{if(-1===t)return;const s=e.getParser();t===s.furniId&&(r(s.videoId),o(s.startAtSeconds),u(s.endAtSeconds),h(s.state))}),[t]),C=Object(c.useCallback)((e=>{if(-1===t)return;const s=e.getParser();t===s.furniId&&(O(s.playlists),b(s.selectedPlaylistId),r(null),h(-1),u(null),o(null))}),[t]),S=Object(c.useCallback)((e=>{if(-1===t)return;const s=e.getParser();if(t===s.furniId)switch(s.commandId){case 1:h(tj.PLAYING),_.getPlayerState()!==tj.PLAYING&&_.playVideo();break;case 2:h(tj.PAUSED),_.getPlayerState()!==tj.PAUSED&&_.pauseVideo()}}),[t,_]);it(a.jj,T),it(a.ij,C),it(a.hj,S);const N=Object(c.useCallback)((e=>{switch(e){case"playlist_prev":$n(new a.ob(t,Fn.CONTROL_COMMAND_PREVIOUS_VIDEO));break;case"playlist_next":$n(new a.ob(t,Fn.CONTROL_COMMAND_NEXT_VIDEO));break;case"video_pause":m&&n&&n.length&&$n(new a.ob(t,Fn.CONTROL_COMMAND_PAUSE_VIDEO));break;case"video_play":m&&n&&n.length&&$n(new a.ob(t,Fn.CONTROL_COMMAND_CONTINUE_VIDEO));break;default:if(j===e)return b(null),void $n(new a.Ph(t,""));$n(new a.Ph(t,e)),b(e)}}),[m,t,j,n]),v=Object(c.useCallback)((e=>{E(e.target)}),[]),R=Object(c.useCallback)((e=>{if(E(e.target),t)switch(e.target.getPlayerState()){case-1:case 1:return void(1!==d&&N("video_play"));case 2:2!==d&&N("video_pause")}}),[d,t,N]),A=Object(c.useMemo)((()=>i||l?{height:"375",width:"500",playerVars:{autoplay:1,disablekb:1,controls:0,origin:window.origin,modestbranding:1,start:i,end:l}}:{height:"375",width:"500",playerVars:{autoplay:1,disablekb:1,controls:0,origin:window.origin,modestbranding:1}}),[l,i]);return-1===t?null:Object(Kr.jsxs)(_c,{className:"youtube-tv-widget",children:[Object(Kr.jsx)(hc,{headerText:"",onCloseClick:I}),Object(Kr.jsx)(lc,{children:Object(Kr.jsxs)("div",{className:"row w-100 h-100",children:[Object(Kr.jsxs)("div",{className:"youtube-video-container col-9",children:[n&&n.length>0&&Object(Kr.jsx)(ej.a,{videoId:n,opts:A,onReady:v,onStateChange:R,containerClassName:"youtubeContainer"}),(!n||0===n.length)&&Object(Kr.jsx)("div",{className:"empty-video w-100 h-100 justify-content-center align-items-center d-flex",children:nt("widget.furni.video_viewer.no_videos")})]}),Object(Kr.jsxs)("div",{className:"playlist-container col-3",children:[Object(Kr.jsxs)("span",{className:"playlist-controls justify-content-center d-flex",children:[Object(Kr.jsx)("i",{className:"icon icon-youtube-prev cursor-pointer",onClick:()=>N("playlist_prev")}),Object(Kr.jsx)("i",{className:"icon icon-youtube-next cursor-pointer",onClick:()=>N("playlist_next")})]}),Object(Kr.jsx)("div",{className:"mb-1",children:nt("widget.furni.video_viewer.playlists")}),Object(Kr.jsx)(Jr,{columnCount:1,className:"playlist-grid",children:g&&g.map(((e,t)=>Object(Kr.jsxs)(wc,{onClick:()=>N(e.video),itemActive:e.video===j,children:[Object(Kr.jsx)("b",{children:e.title})," - ",e.description]},t)))})]})]})})]})},nj=e=>Object(Kr.jsxs)("div",{className:"position-absolute nitro-room-widgets top-0 start-0 w-100 h-100",children:[Object(Kr.jsx)(_h,{}),Object(Kr.jsx)(Rh,{}),Object(Kr.jsx)(yh,{}),Object(Kr.jsx)(Uh,{}),Object(Kr.jsx)(Fh,{}),Object(Kr.jsx)(Hh,{}),Object(Kr.jsx)(Ph,{}),Object(Kr.jsx)(Wh,{}),Object(Kr.jsx)(Vh,{}),Object(Kr.jsx)(zh,{}),Object(Kr.jsx)(Jh,{}),Object(Kr.jsx)(Zh,{}),Object(Kr.jsx)(fh,{}),Object(Kr.jsx)(Mh,{}),Object(Kr.jsx)(sj,{})]}),rj=e=>{const{botData:t=null,close:s=null}=e;return t?Object(Kr.jsx)(Nc,{className:"nitro-infostand",children:Object(Kr.jsxs)(Nc,{overflow:"visible",className:"container-fluid content-area",gap:1,children:[Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsxs)(ec,{alignItems:"center",justifyContent:"between",gap:1,children:[Object(Kr.jsx)(Zc,{variant:"white",small:!0,wrap:!0,children:t.name}),Object(Kr.jsx)(ic.a,{icon:"times",className:"cursor-pointer",onClick:s})]}),Object(Kr.jsx)("hr",{className:"m-0"})]}),Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsxs)(ec,{gap:2,children:[Object(Kr.jsx)(Nc,{fullWidth:!0,className:"body-image bot",children:Object(Kr.jsx)(Ec,{figure:t.figure,direction:4})}),Object(Kr.jsx)(Nc,{grow:!0,center:!0,gap:0,children:t.badges.length>0&&t.badges.map((e=>Object(Kr.jsx)(xc,{badgeCode:e,showInfo:!0},e)))})]}),Object(Kr.jsx)("hr",{className:"m-0"})]}),Object(Kr.jsx)(ec,{alignItems:"center",className:"bg-light-dark rounded py-1 px-2",children:Object(Kr.jsx)(Zc,{fullWidth:!0,wrap:!0,textBreak:!0,variant:"white",small:!0,className:"motto-content",children:t.motto})}),t.carryItem>0&&Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)("hr",{className:"m-0"}),Object(Kr.jsx)(Zc,{variant:"white",small:!0,wrap:!0,children:nt("infostand.text.handitem",["item"],[nt("handitem"+t.carryItem)])})]})]})}):null},cj=e=>{const{furniData:t=null,close:s=null}=e,{roomSession:n=null,eventDispatcher:r=null,widgetHandler:i=null}=Md(),[o,l]=Object(c.useState)(0),[u,d]=Object(c.useState)(!1),[h,j]=Object(c.useState)(!1),[b,g]=Object(c.useState)(!1),[O,m]=Object(c.useState)([]),[p,_]=Object(c.useState)([]),[E,f]=Object(c.useState)([]),[x,I]=Object(c.useState)([]),[T,C]=Object(c.useState)(!1),[S,N]=Object(c.useState)(0),[v,R]=Object(c.useState)(0),[A,w]=Object(c.useState)(!1),[k,D]=Object(c.useState)(!1),[U,P]=Object(c.useState)(null);Object(c.useEffect)((()=>{let e=0,s=!1,r=!1,c=!1,i=[],o=[],u=[],h=[],b=!1,O=0,p=0,E=!1,x=!1;const T=t.roomControllerLevel>=a.eg.GUEST;if((T||t.isOwner||t.isRoomOwner||t.isAnyRoomController)&&(s=!0,r=!t.isWallItem,t.roomControllerLevel>=a.eg.MODERATOR&&(E=!0)),t.isAnyRoomController&&(x=!0),(t.usagePolicy===a.Ah.EVERYBODY||t.usagePolicy===a.Ah.CONTROLLER&&T||t.extraParam===a.zh.JUKEBOX&&T||t.extraParam===a.zh.USABLE_PRODUCT&&T)&&(c=!0),t.extraParam){if(t.extraParam===a.zh.CRACKABLE_FURNI){const e=t.stuffData;c=!0,b=!0,O=e.hits,p=e.target}if(E){const e=t.extraParam.substr(a.zh.BRANDING_OPTIONS.length);if(e){const t=e.split("\t");for(const e of t){const t=e.split("=");t&&2===t.length&&(i.push(t[0]),o.push(t[1]))}}}}if(E){const e=L().getRoomObject(n.roomId,t.id,t.isWallItem?a.Ig.WALL:a.Ig.FLOOR);if(e){const t=e.model.getValue(a.Og.FURNITURE_CUSTOM_VARIABLES),s=e.model.getValue(a.Og.FURNITURE_DATA);if(t&&t.length)for(const e of t)u.push(e),h.push(s[e]||"")}}t.isOwner||t.isAnyRoomController?e=2:(t.isRoomOwner||t.roomControllerLevel>=a.eg.GUILD_ADMIN)&&(e=1),t.isStickie&&(e=0),l(e),d(s),j(r),g(c),m(i),_(o),f(u),I(h),C(b),N(O),R(p),w(E),D(x),P(null),t.groupId&&$n(new a.Tc(t.groupId,!1))}),[n,t]);const M=Object(c.useCallback)((e=>{const s=e.getParser();t&&t.groupId===s.id&&!s.flag&&(U&&P(null),P(s.title))}),[t,U]);it(a.Uc,M);const F=Object(c.useCallback)(((e,t)=>{const s=Array.from(p);s[e]=t,_(s)}),[p]),H=Object(c.useCallback)(((e,t)=>{const s=Array.from(x);s[e]=t,I(s)}),[x]),B=Object(c.useCallback)((()=>{if(0===O.length||0===p.length)return"";let e="",t=0;for(;t<O.length;){e=e+(O[t]+"=")+p[t]+"\t",t++}return e}),[O,p]),G=Object(c.useCallback)((e=>{if(!e||""===e)return;let s=null,n=null;switch(e){case"buy_one":return void y(`catalog/open/offerId/${t.purchaseOfferId}`);case"move":s=En.MOVE;break;case"rotate":s=En.ROTATE;break;case"pickup":s=2===o?En.PICKUP:En.EJECT;break;case"use":s=En.USE;break;case"save_branding_configuration":s=En.SAVE_STUFF_DATA,n=B();break;case"save_custom_variables":const e=new Map;for(let t=0;t<E.length;t++){const s=E[t],n=x[t];s&&s.length&&n&&n.length&&e.set(s,n)}$n(new a.Nh(t.id,e))}s&&i.processWidgetMessage(new En(s,t.id,t.category,t.purchaseOfferId,n))}),[i,t,o,E,x,B]),W=Object(c.useCallback)((()=>{const e=t.stuffData;return e&&e instanceof a.Qh?e.getValue(2):null}),[t]);return t?Object(Kr.jsxs)(Nc,{gap:1,alignItems:"end",children:[Object(Kr.jsx)(Nc,{className:"nitro-infostand",children:Object(Kr.jsxs)(Nc,{overflow:"visible",className:"container-fluid content-area",gap:1,children:[Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsxs)(ec,{alignItems:"center",justifyContent:"between",gap:1,children:[Object(Kr.jsx)(Zc,{variant:"white",small:!0,wrap:!0,children:t.name}),Object(Kr.jsx)(ic.a,{icon:"times",className:"cursor-pointer",onClick:s})]}),Object(Kr.jsx)("hr",{className:"m-0"})]}),Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsxs)(ec,{position:"relative",gap:1,children:[t.stuffData.isUnique&&Object(Kr.jsx)("div",{className:"position-absolute end-0",children:Object(Kr.jsx)(Ac,{uniqueNumber:t.stuffData.uniqueNumber,uniqueSeries:t.stuffData.uniqueSeries})}),t.stuffData.rarityLevel>-1&&Object(Kr.jsx)("div",{className:"position-absolute end-0",children:Object(Kr.jsx)(Vc,{level:t.stuffData.rarityLevel})}),t.image&&t.image.src.length&&Object(Kr.jsx)("img",{className:"d-block mx-auto",src:t.image.src,alt:""})]}),Object(Kr.jsx)("hr",{className:"m-0"})]}),Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{fullWidth:!0,wrap:!0,textBreak:!0,variant:"white",small:!0,children:t.description}),Object(Kr.jsx)("hr",{className:"m-0"})]}),Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)(Kc,{userId:t.ownerId}),Object(Kr.jsx)(Zc,{variant:"white",small:!0,wrap:!0,children:nt("furni.owner",["name"],[t.ownerName])})]}),t.purchaseOfferId>0&&Object(Kr.jsx)(ec,{children:Object(Kr.jsx)(Zc,{variant:"white",small:!0,underline:!0,pointer:!0,onClick:e=>G("buy_one"),children:nt("infostand.button.buy")})})]}),Object(Kr.jsxs)(Nc,{gap:1,children:[T&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)("hr",{className:"m-0"}),Object(Kr.jsx)(Zc,{variant:"white",small:!0,wrap:!0,children:nt("infostand.crackable_furni.hits_remaining",["hits","target"],[S.toString(),v.toString()])})]}),t.groupId>0&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)("hr",{className:"m-0"}),Object(Kr.jsxs)(ec,{pointer:!0,alignItems:"center",gap:2,onClick:()=>Er(t.groupId),children:[Object(Kr.jsx)(xc,{badgeCode:W(),isGroup:!0}),Object(Kr.jsx)(Zc,{variant:"white",underline:!0,children:U})]})]}),A&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)("hr",{className:"m-0"}),k&&Object(Kr.jsxs)(Zc,{small:!0,wrap:!0,variant:"white",children:["ID: ",t.id]}),O.length>0&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)("hr",{className:"m-0"}),Object(Kr.jsx)(Nc,{gap:1,children:O.map(((e,t)=>Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)(Zc,{small:!0,wrap:!0,align:"end",variant:"white",className:"col-4",children:e}),Object(Kr.jsx)("input",{type:"text",className:"form-control form-control-sm",value:p[t],onChange:e=>F(t,e.target.value)})]},t)))})]})]}),E.length>0&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)("hr",{className:"m-0 my-1"}),Object(Kr.jsx)(Nc,{gap:1,children:E.map(((e,t)=>Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)(Zc,{small:!0,wrap:!0,align:"end",variant:"white",className:"col-4",children:e}),Object(Kr.jsx)("input",{type:"text",className:"form-control form-control-sm",value:x[t],onChange:e=>H(t,e.target.value)})]},t)))})]})]})]})}),Object(Kr.jsxs)(ec,{gap:1,justifyContent:"end",children:[u&&Object(Kr.jsx)(tc,{variant:"dark",onClick:e=>G("move"),children:nt("infostand.button.move")}),h&&Object(Kr.jsx)(tc,{variant:"dark",onClick:e=>G("rotate"),children:nt("infostand.button.rotate")}),0!==o&&Object(Kr.jsx)(tc,{variant:"dark",onClick:e=>G("pickup"),children:nt(1===o?"infostand.button.eject":"infostand.button.pickup")}),b&&Object(Kr.jsx)(tc,{variant:"dark",onClick:e=>G("use"),children:nt("infostand.button.use")}),O.length>0&&p.length>0&&O.length===p.length&&Object(Kr.jsx)(tc,{variant:"dark",onClick:()=>G("save_branding_configuration"),children:nt("save")}),E.length>0&&x.length>0&&E.length===x.length&&Object(Kr.jsx)(tc,{variant:"dark",onClick:()=>G("save_custom_variables"),children:nt("save")})]})]}):null},ij=e=>{const{petData:t=null,close:s=null}=e;return t?Object(Kr.jsx)(Nc,{className:"nitro-infostand",children:Object(Kr.jsxs)(Nc,{overflow:"visible",className:"container-fluid content-area",gap:1,children:[Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsxs)(ec,{alignItems:"center",justifyContent:"between",gap:1,children:[Object(Kr.jsx)(Zc,{variant:"white",small:!0,wrap:!0,children:t.name}),Object(Kr.jsx)(ic.a,{icon:"times",className:"cursor-pointer",onClick:s})]}),Object(Kr.jsx)(Zc,{variant:"white",small:!0,wrap:!0,children:nt(`pet.breed.${t.petType}.${t.petBreed}`)}),Object(Kr.jsx)("hr",{className:"m-0"})]}),Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsxs)(ec,{gap:2,children:[Object(Kr.jsx)(Nc,{fullWidth:!0,overflow:"hidden",className:"body-image pet p-1",children:Object(Kr.jsx)(Gc,{figure:t.petFigure,posture:t.posture,direction:4})}),Object(Kr.jsxs)(Nc,{grow:!0,gap:1,children:[Object(Kr.jsx)(Zc,{variant:"white",center:!0,small:!0,wrap:!0,children:nt("pet.level",["level","maxlevel"],[t.level.toString(),t.maximumLevel.toString()])}),Object(Kr.jsxs)(Nc,{alignItems:"center",gap:1,children:[Object(Kr.jsx)(Zc,{variant:"white",small:!0,truncate:!0,children:nt("infostand.pet.text.happiness")}),Object(Kr.jsxs)(Qr,{fullWidth:!0,overflow:"hidden",position:"relative",className:"bg-light-dark rounded",children:[Object(Kr.jsx)(ec,{fit:!0,center:!0,position:"absolute",children:Object(Kr.jsx)(Zc,{variant:"white",small:!0,children:t.happyness+"/"+t.maximumHappyness})}),Object(Kr.jsx)(Qr,{className:"bg-info rounded pet-stats",style:{width:t.happyness/t.maximumHappyness*100+"%"}})]})]}),Object(Kr.jsxs)(Nc,{alignItems:"center",gap:1,children:[Object(Kr.jsx)(Zc,{variant:"white",small:!0,truncate:!0,children:nt("infostand.pet.text.experience")}),Object(Kr.jsxs)(Qr,{fullWidth:!0,overflow:"hidden",position:"relative",className:"bg-light-dark rounded",children:[Object(Kr.jsx)(ec,{fit:!0,center:!0,position:"absolute",children:Object(Kr.jsx)(Zc,{variant:"white",small:!0,children:t.experience+"/"+t.levelExperienceGoal})}),Object(Kr.jsx)(Qr,{className:"bg-purple rounded pet-stats",style:{width:t.experience/t.levelExperienceGoal*100+"%"}})]})]}),Object(Kr.jsxs)(Nc,{alignItems:"center",gap:1,children:[Object(Kr.jsx)(Zc,{variant:"white",small:!0,truncate:!0,children:nt("infostand.pet.text.energy")}),Object(Kr.jsxs)(Qr,{fullWidth:!0,overflow:"hidden",position:"relative",className:"bg-light-dark rounded",children:[Object(Kr.jsx)(ec,{fit:!0,center:!0,position:"absolute",children:Object(Kr.jsx)(Zc,{variant:"white",small:!0,children:t.energy+"/"+t.maximumEnergy})}),Object(Kr.jsx)(Qr,{className:"bg-success rounded pet-stats",style:{width:t.energy/t.maximumEnergy*100+"%"}})]})]})]})]}),Object(Kr.jsx)("hr",{className:"m-0"})]}),Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{variant:"white",small:!0,wrap:!0,children:nt("infostand.text.petrespect",["count"],[t.respect.toString()])}),Object(Kr.jsx)(Zc,{variant:"white",small:!0,wrap:!0,children:nt("pet.age",["age"],[t.age.toString()])}),Object(Kr.jsx)("hr",{className:"m-0"})]}),Object(Kr.jsx)(Nc,{gap:1,children:Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)(Kc,{userId:t.ownerId}),Object(Kr.jsx)(Zc,{variant:"white",small:!0,wrap:!0,children:nt("infostand.text.petowner",["name"],[t.ownerName])})]})})]})}):null},aj=e=>{const{rentableBotData:t=null,close:s=null}=e,n=Object(c.useMemo)((()=>!(t.botSkills.indexOf(Bd.NO_PICK_UP)>=0)&&!(!t.amIOwner&&!t.amIAnyRoomController)),[t]);if(t)return Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Nc,{className:"nitro-infostand",children:Object(Kr.jsxs)(Nc,{overflow:"visible",className:"container-fluid content-area",gap:1,children:[Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsxs)(ec,{alignItems:"center",justifyContent:"between",gap:1,children:[Object(Kr.jsx)(Zc,{variant:"white",small:!0,wrap:!0,children:t.name}),Object(Kr.jsx)(ic.a,{icon:"times",className:"cursor-pointer",onClick:s})]}),Object(Kr.jsx)("hr",{className:"m-0"})]}),Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsxs)(ec,{gap:2,children:[Object(Kr.jsx)(Nc,{fullWidth:!0,className:"body-image bot",children:Object(Kr.jsx)(Ec,{figure:t.figure,direction:4})}),Object(Kr.jsx)(Nc,{grow:!0,center:!0,gap:0,children:t.badges.length>0&&t.badges.map((e=>Object(Kr.jsx)(xc,{badgeCode:e,showInfo:!0},e)))})]}),Object(Kr.jsx)("hr",{className:"m-0"})]}),Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(ec,{alignItems:"center",className:"bg-light-dark rounded py-1 px-2",children:Object(Kr.jsx)(Zc,{fullWidth:!0,wrap:!0,textBreak:!0,variant:"white",small:!0,className:"motto-content",children:t.motto})}),Object(Kr.jsx)("hr",{className:"m-0"})]}),Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)(Kc,{userId:t.ownerId}),Object(Kr.jsx)(Zc,{variant:"white",small:!0,wrap:!0,children:nt("infostand.text.botowner",["name"],[t.ownerName])})]}),t.carryItem>0&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)("hr",{className:"m-0"}),Object(Kr.jsx)(Zc,{variant:"white",small:!0,wrap:!0,children:nt("infostand.text.handitem",["item"],[nt("handitem"+t.carryItem)])})]})]})]})}),n&&Object(Kr.jsx)(ec,{justifyContent:"end",children:Object(Kr.jsx)(tc,{variant:"dark",onClick:()=>$n(new a.B(t.webID)),children:nt("infostand.button.pickup")})})]})},oj=e=>{const{relationships:t=null}=e,s=e=>{let{type:s}=e;const n=t&&t.relationshipStatusMap.hasKey(s)?t.relationshipStatusMap.getValue(s):null;if(!n||!n.friendCount)return null;const r=a.Lf.RELATIONSHIP_NAMES[s].toLocaleLowerCase();return Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)("i",{className:`nitro-friends-spritesheet icon-${r}`}),Object(Kr.jsx)(ec,{alignItems:"center",gap:0,children:Object(Kr.jsxs)(Zc,{small:!0,variant:"white",onClick:e=>Lr(n.randomFriendId),children:[Object(Kr.jsx)("u",{children:n.randomFriendName}),n.friendCount>1&&" "+nt(`extendedprofile.relstatus.others.${r}`,["count"],[(n.friendCount-1).toString()])]})})]})};return Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(s,{type:a.Lf.HEART}),Object(Kr.jsx)(s,{type:a.Lf.SMILE}),Object(Kr.jsx)(s,{type:a.Lf.BOBBA})]})},lj=e=>{const{userData:t=null,setUserData:s=null,close:n=null}=e,[r,i]=Object(c.useState)(null),[o,l]=Object(c.useState)(!1),[u,d]=Object(c.useState)(null),{eventDispatcher:h=null,widgetHandler:j=null}=Md(),b=(k("user.badges.max.slots",5),e=>{!o||e.length>k("motto.max.length",38)||(j.processWidgetMessage(new un(e)),l(!1))}),g=Object(c.useCallback)((e=>{t&&t.webID===e.userId&&s((t=>{const s=Xe(t);return s.badges=e.badges,s}))}),[t,s]);Pt(a.eh.RSUBE_BADGES,h,g);const O=Object(c.useCallback)((e=>{t&&t.roomIndex===e.roomIndex&&s((t=>{const s=Xe(t);return s.figure=e.figure,s.motto=e.customInfo,s.achievementScore=e.activityPoints,s}))}),[t,s]);Pt(a.gh.USER_FIGURE,h,O);const m=Object(c.useCallback)((e=>{t&&t.roomIndex===e.roomIndex&&s((t=>{const s=Xe(t),n=-1===e.status||e.habboGroupId<=0;return s.groupId=n?-1:e.habboGroupId,s.groupName=n?null:e.habboGroupName,s.groupBadgeId=n?null:ee().getGroupBadge(e.habboGroupId),s}))}),[t,s]);Pt(a.Zg.FAVOURITE_GROUP_UPDATE,h,m);const p=Object(c.useCallback)((e=>{const s=e.getParser();t&&t.webID===s.userId&&d(s)}),[t]);return it(a.Mf,p),Object(c.useEffect)((()=>(l(!1),i(t.motto),$n(new a.Ki(t.webID)),()=>{l(!1),i(null),d(null)})),[t]),t?Object(Kr.jsx)(Nc,{className:"nitro-infostand",children:Object(Kr.jsxs)(Nc,{overflow:"visible",className:"container-fluid content-area",gap:1,children:[Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsxs)(ec,{alignItems:"center",justifyContent:"between",children:[Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)(Kc,{userId:t.webID}),Object(Kr.jsx)(Zc,{variant:"white",small:!0,wrap:!0,children:t.name})]}),Object(Kr.jsx)(ic.a,{icon:"times",className:"cursor-pointer",onClick:n})]}),Object(Kr.jsx)("hr",{className:"m-0"})]}),Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsxs)(ec,{gap:2,children:[Object(Kr.jsx)(Nc,{fullWidth:!0,className:"body-image",onClick:e=>Lr(t.webID),children:Object(Kr.jsx)(Ec,{figure:t.figure,direction:4})}),Object(Kr.jsxs)(Nc,{grow:!0,gap:0,children:[Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)(Qr,{className:"badge-image",children:t.badges[0]&&Object(Kr.jsx)(xc,{badgeCode:t.badges[0],showInfo:!0})}),Object(Kr.jsx)(Qr,{pointer:t.groupId>0,className:"badge-image",onClick:e=>Er(t.groupId),children:t.groupId>0&&Object(Kr.jsx)(xc,{badgeCode:t.groupBadgeId,isGroup:!0,showInfo:!0,customTitle:t.groupName})})]}),Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)(Qr,{className:"badge-image",children:t.badges[1]&&Object(Kr.jsx)(xc,{badgeCode:t.badges[1],showInfo:!0})}),Object(Kr.jsx)(Qr,{className:"badge-image",children:t.badges[2]&&Object(Kr.jsx)(xc,{badgeCode:t.badges[2],showInfo:!0})})]}),Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)(Qr,{className:"badge-image",children:t.badges[3]&&Object(Kr.jsx)(xc,{badgeCode:t.badges[3],showInfo:!0})}),Object(Kr.jsx)(Qr,{className:"badge-image",children:t.badges[4]&&Object(Kr.jsx)(xc,{badgeCode:t.badges[4],showInfo:!0})})]})]})]}),Object(Kr.jsx)("hr",{className:"m-0"})]}),Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsxs)(ec,{alignItems:"center",className:"bg-light-dark rounded py-1 px-2",children:[t.type!==Fe.OWN_USER&&Object(Kr.jsx)(ec,{grow:!0,alignItems:"center",className:"motto-content",children:Object(Kr.jsx)(Zc,{fullWidth:!0,pointer:!0,wrap:!0,textBreak:!0,small:!0,variant:"white",children:r})}),t.type===Fe.OWN_USER&&Object(Kr.jsxs)(ec,{grow:!0,alignItems:"center",gap:2,children:[Object(Kr.jsx)(ic.a,{icon:"pencil-alt",className:"small"}),Object(Kr.jsxs)(ec,{grow:!0,alignItems:"center",className:"motto-content",children:[!o&&Object(Kr.jsxs)(Zc,{fullWidth:!0,pointer:!0,wrap:!0,textBreak:!0,small:!0,variant:"white",onClick:e=>l(!0),children:[r,"\xa0"]}),o&&Object(Kr.jsx)("input",{type:"text",className:"motto-input",maxLength:k("motto.max.length",38),value:r,onChange:e=>i(e.target.value),onBlur:e=>b(e.target.value),onKeyDown:e=>{e.stopPropagation(),"Enter"!==e.key||b(e.target.value)},autoFocus:!0})]})]})]}),Object(Kr.jsx)("hr",{className:"m-0"})]}),Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{variant:"white",small:!0,wrap:!0,children:nt("infostand.text.achievement_score")+" "+t.achievementScore}),t.carryItem>0&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)("hr",{className:"m-0"}),Object(Kr.jsx)(Zc,{variant:"white",small:!0,wrap:!0,children:nt("infostand.text.handitem",["item"],[nt("handitem"+t.carryItem)])})]})]}),Object(Kr.jsx)(Nc,{gap:1,children:Object(Kr.jsx)(oj,{relationships:u})})]})}):null},uj=e=>{const{eventDispatcher:t=null,widgetHandler:s=null}=Md(),[n,r]=Object(c.useState)(null),i=Object(c.useCallback)((()=>{r(null)}),[]),a=Object(c.useCallback)((e=>{switch(e.type){case Ve.OBJECT_SELECTED:{const t=e;return void s.processWidgetMessage(new Cn(Cn.GET_OBJECT_INFO,t.id,t.category))}case Ve.OBJECT_DESELECTED:return void i();case Ve.FURNI_REMOVED:case Ve.USER_REMOVED:{const t=e;return void r((s=>{switch(e.type){case Ve.FURNI_REMOVED:if(s instanceof Pe&&s.id===t.id)return null;break;case Ve.USER_REMOVED:if(s instanceof Fe||s instanceof Le){if(s.roomIndex===t.id)return null}else if(s instanceof Me&&s.roomIndex===t.id)return null}return s}))}case Pe.FURNI:case Fe.OWN_USER:case Fe.PEER:case Fe.BOT:case Le.RENTABLE_BOT:case Me.PET_INFO:return void r(e);default:return void console.log(e)}}),[s,i]);Pt(Ve.OBJECT_SELECTED,t,a),Pt(Ve.OBJECT_DESELECTED,t,a),Pt(Ve.USER_REMOVED,t,a),Pt(Ve.FURNI_REMOVED,t,a),Pt(Pe.FURNI,t,a),Pt(Fe.OWN_USER,t,a),Pt(Fe.PEER,t,a),Pt(Fe.BOT,t,a),Pt(Le.RENTABLE_BOT,t,a),Pt(Me.PET_INFO,t,a),Pt(Me.PET_INFO,t,a);const o=Object(c.useCallback)((()=>{if(!n)return null;switch(n.type){case Pe.FURNI:return Object(Kr.jsx)(cj,{furniData:n,close:i});case Fe.OWN_USER:case Fe.PEER:return Object(Kr.jsx)(lj,{userData:n,setUserData:r,close:i});case Fe.BOT:return Object(Kr.jsx)(rj,{botData:n,close:i});case Le.RENTABLE_BOT:return Object(Kr.jsx)(aj,{rentableBotData:n,close:i});case Me.PET_INFO:return Object(Kr.jsx)(ij,{petData:n,close:i})}return null}),[n,i]);return n?Object(Kr.jsx)(Nc,{alignItems:"end",className:"nitro-infostand-container",children:o()}):null},dj=e=>{const[t,s]=Object(c.useState)(!1),{roomSession:n=null}=Md(),r=Object(c.useCallback)((e=>{switch(e.type){case kt.SHOW_THUMBNAIL:return void s(!0);case kt.HIDE_THUMBNAIL:return void s(!1);case kt.TOGGLE_THUMBNAIL:return void s((e=>!e))}}),[]);qt(kt.SHOW_THUMBNAIL,r),qt(kt.HIDE_THUMBNAIL,r),qt(kt.TOGGLE_THUMBNAIL,r);const i=Object(c.useCallback)((e=>{L().saveTextureAsScreenshot(e,!0),s(!1)}),[]);return t?Object(Kr.jsx)(Uc,{roomId:n.roomId,textureReceiver:i,onClose:()=>s(!1)}):null},hj=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(null),[i,o]=Object(c.useState)(null),[l,u]=Object(c.useState)(null),[d,h]=Object(c.useState)(!1),[j,b]=Object(c.useState)(!1),[g,O]=_s(),{roomSession:m=null,widgetHandler:p=null}=Md(),_=e=>{switch(e){case"settings":return void y("navigator/toggle-room-info");case"zoom":return void s((e=>{let t=L().getRoomInstanceRenderingCanvasScale(m.roomId,1);return e?t*=2:t/=2,L().setRoomInstanceRenderingCanvasScale(m.roomId,1,t),!e}));case"chat_history":return void y("chat-history/toggle");case"like_room":return void $n(new a.Fg(1));case"toggle_room_link":return void y("navigator/toggle-room-link")}},E=Object(c.useCallback)((e=>{const t=e.getParser();t.roomEnter&&(n!==t.data.roomName&&r(t.data.roomName),i!==t.data.ownerName&&o(t.data.ownerName),l!==t.data.tags&&u(t.data.tags))}),[n,i,l]);return it(a.nc,E),Object(c.useEffect)((()=>{b(!0);const e=setTimeout((()=>b(!1)),5e3);return()=>clearTimeout(e)}),[n,i,l]),Object(Kr.jsxs)(ec,{className:"nitro-room-tools-container",gap:2,children:[Object(Kr.jsxs)(Nc,{center:!0,className:"nitro-room-tools p-2",children:[Object(Kr.jsx)(Qr,{pointer:!0,title:nt("room.settings.button.text"),className:"icon icon-cog",onClick:()=>_("settings")}),Object(Kr.jsx)(Qr,{pointer:!0,title:nt("room.zoom.button.text"),onClick:()=>_("zoom"),className:"icon "+$i()({"icon-zoom-less":!t,"icon-zoom-more":t})}),Object(Kr.jsx)(Qr,{pointer:!0,title:nt("room.chathistory.button.text"),onClick:()=>_("chat_history"),className:"icon icon-chat-history"}),g.canRate&&Object(Kr.jsx)(Qr,{pointer:!0,title:nt("room.like.button.text"),onClick:()=>_("like_room"),className:"icon icon-like-room"})]}),Object(Kr.jsx)(Nc,{justifyContent:"center",children:Object(Kr.jsx)(Hc,{type:Lc.SLIDE_LEFT,inProp:j,timeout:300,children:Object(Kr.jsx)(Nc,{center:!0,children:Object(Kr.jsxs)(Nc,{className:"nitro-room-tools-info py-2 px-3",children:[Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{wrap:!0,variant:"white",fontSize:4,children:n}),Object(Kr.jsx)(Zc,{variant:"muted",fontSize:5,children:i})]}),l&&l.length>0&&Object(Kr.jsx)(ec,{gap:2,className:"mb-1",children:l.map(((e,t)=>Object(Kr.jsxs)(Zc,{small:!0,variant:"white",className:"rounded tag p-1",children:["#",e]},t)))})]})})})})]})},jj="0",bj=e=>{const{question:t=null,canVote:s=null,vote:n=null,noVotes:r=null,yesVotes:c=null}=e;return Object(Kr.jsxs)(Nc,{gap:2,className:"wordquiz-question p-2",children:[!s&&Object(Kr.jsxs)(ec,{fullWidth:!0,alignItems:"center",gap:2,children:[Object(Kr.jsx)(ec,{center:!0,pointer:!0,className:"bg-danger rounded p-2",children:Object(Kr.jsx)(Zc,{variant:"white",children:r})}),Object(Kr.jsx)(Zc,{variant:"white",center:!0,textBreak:!0,children:t}),Object(Kr.jsx)(ec,{center:!0,pointer:!0,className:"bg-success rounded p-2",children:Object(Kr.jsx)(Zc,{variant:"white",children:c})})]}),s&&Object(Kr.jsxs)(Nc,{children:[Object(Kr.jsx)(Zc,{variant:"white",center:!0,textBreak:!0,children:t}),Object(Kr.jsxs)(ec,{fullWidth:!0,justifyContent:"center",gap:2,children:[Object(Kr.jsx)(ec,{center:!0,pointer:!0,className:"bg-danger rounded p-1",onClick:e=>n(jj),children:Object(Kr.jsx)(Qr,{className:"word-quiz-dislike"})}),Object(Kr.jsx)(ec,{center:!0,pointer:!0,className:"bg-success rounded p-1",onClick:e=>n("1"),children:Object(Kr.jsx)(Qr,{className:"word-quiz-like"})})]})]})]})};var gj=s(50);const Oj=e=>{const{userIndex:t=null,vote:s=null,...n}=e;return Object(Kr.jsx)(Oh,{objectId:t,category:gj.Kg.UNIT,...n,children:Object(Kr.jsx)(ec,{center:!0,pointer:!0,className:`bg-${s===jj?"danger":"success"} rounded p-1`,children:Object(Kr.jsx)(Qr,{className:`word-quiz-${s===jj?"dislike":"like"}-sm`})})})},mj=e=>{const[t,s]=Object(c.useState)(-1),[n,r]=Object(c.useState)(null),[i,a]=Object(c.useState)(!1),[o,l]=Object(c.useState)(null),[u,d]=Object(c.useState)(new Map),[h,j]=Object(c.useState)(new Map),{eventDispatcher:b=null,widgetHandler:g=null,roomSession:O=null}=Md(),m=Object(c.useCallback)((()=>{s(-1),r(null)}),[]),p=Object(c.useCallback)((e=>{switch(e.type){case Qe.NEW_QUESTION:s(e.id),r(e.question),a(!1),d(new Map),j(new Map),l((t=>{if(t&&clearTimeout(t),e.duration>0){const t=e.duration<1e3?4e3:e.duration;return setTimeout((()=>m()),t)}return null}));break;case Qe.QUESTION_ANSWERED:{const t=O.userDataManager.getUserData(e.userId);if(!t)return;d(e.answerCounts),j((s=>{if(!s.has(t.roomIndex)){const s=new Map(h);return s.set(t.roomIndex,{value:e.value,secondsLeft:3}),s}return s}));break}case Qe.QUESTION_FINISHED:n&&n.id===e.questionId&&(d(e.answerCounts),a(!0),l((e=>(e&&clearTimeout(e),setTimeout((()=>m()),4e3))))),j(new Map)}}),[n,O.userDataManager,h,m]);Pt(Qe.NEW_QUESTION,b,p),Pt(Qe.QUESTION_ANSWERED,b,p),Pt(Qe.QUESTION_FINISHED,b,p);const _=Object(c.useCallback)((e=>{if(i||!n)return;const s=new xn(xn.ANSWER,t);s.questionId=n.id,s.answers=[e],g.processWidgetMessage(s),a(!0)}),[i,t,n,g]),E=Object(c.useCallback)((()=>{j((e=>{const t=[];if(e.forEach(((e,s)=>{e.secondsLeft--,e.secondsLeft<=0&&t.push(s)})),0===t.length)return e;const s=new Map(e);return t.forEach((e=>s.delete(e))),s}))}),[]);return Object(c.useEffect)((()=>{const e=setInterval((()=>E()),1e3);return()=>clearInterval(e)}),[E]),Object(c.useEffect)((()=>()=>{l((e=>(e&&clearTimeout(e),null)))}),[]),Object(Kr.jsxs)(Kr.Fragment,{children:[n&&Object(Kr.jsx)(bj,{question:n.content,canVote:!i,vote:_,noVotes:u.get(jj)||0,yesVotes:u.get("1")||0}),h&&Array.from(h.entries()).map(((e,t)=>{let[s,n]=e;return Object(Kr.jsx)(Oj,{userIndex:s,vote:n.value},t)}))]})},pj=e=>{const{roomSession:t=null,eventDispatcher:s=null,widgetHandler:n=null}=Md(),r=Object(c.useCallback)((e=>{if(s&&!a.Bg.isRoomPreviewerId(e.roomId))switch(e.type){case a.og.NORMAL_MODE:return void s.dispatchEvent(new We(We.NORMAL_MODE,e.roomId));case a.og.GAME_MODE:return void s.dispatchEvent(new We(We.GAME_MODE,e.roomId));case a.Bh.ROOM_ZOOM:{const t=e;return void L().setRoomInstanceRenderingCanvasScale(e.roomId,1,t.level,null,null,!1,t.asDelta)}}}),[s]);Bt(a.og.NORMAL_MODE,r),Bt(a.og.GAME_MODE,r),Bt(a.Bh.ROOM_ZOOM,r);const i=Object(c.useCallback)((e=>{}),[]),o=Object(c.useCallback)((e=>{}),[]),l=Object(c.useCallback)((e=>{if(!t||!n)return;const s=e.objectId,r=e.category;let c=null;switch(e.type){case a.pg.SELECTED:(function(e){let t=!1;const s=L().getRoomObject(e.roomId,e.objectId,e.category);s&&1===s.model.getValue(a.Og.FURNITURE_SELECTION_DISABLED)&&(t=!0,ee().isModerator&&(t=!1));return t})(e)||(c=new Ve(Ve.OBJECT_SELECTED,s,r,e.roomId));break;case a.pg.DESELECTED:c=new Ve(Ve.OBJECT_DESELECTED,s,r,e.roomId);break;case a.pg.ADDED:{let t=null;switch(r){case a.Ig.FLOOR:case a.Ig.WALL:t=Ve.FURNI_ADDED;break;case a.Ig.UNIT:t=Ve.USER_ADDED}t&&(c=new Ve(t,s,r,e.roomId));break}case a.pg.REMOVED:{let t=null;switch(r){case a.Ig.FLOOR:case a.Ig.WALL:t=Ve.FURNI_REMOVED;break;case a.Ig.UNIT:t=Ve.USER_REMOVED}t&&(c=new Ve(t,s,r,e.roomId));break}case a.pg.REQUEST_MOVE:Q(t,s,r)&&ge(s,r,a.Kg.OBJECT_MOVE);break;case a.pg.REQUEST_ROTATE:Q(t,s,r)&&ge(s,r,a.Kg.OBJECT_ROTATE_POSITIVE);break;case a.pg.REQUEST_MANIPULATION:Q(t,s,r)&&(c=new Ve(Ve.OBJECT_REQUEST_MANIPULATION,s,r,e.roomId));break;case a.pg.MOUSE_ENTER:c=new Ve(Ve.OBJECT_ROLL_OVER,s,r,e.roomId);break;case a.pg.MOUSE_LEAVE:c=new Ve(Ve.OBJECT_ROLL_OUT,s,r,e.roomId);break;case a.sg.REQUEST_CREDITFURNI:n.processWidgetMessage(new fn(fn.REQUEST_CREDITFURNI,s,r,e.roomId));break;case a.sg.REQUEST_STICKIE:n.processWidgetMessage(new fn(fn.REQUEST_STICKIE,s,r,e.roomId));break;case a.sg.REQUEST_PRESENT:n.processWidgetMessage(new fn(fn.REQUEST_PRESENT,s,r,e.roomId));break;case a.sg.REQUEST_TROPHY:n.processWidgetMessage(new fn(fn.REQUEST_TROPHY,s,r,e.roomId));break;case a.sg.REQUEST_TEASER:n.processWidgetMessage(new fn(fn.REQUEST_TEASER,s,r,e.roomId));break;case a.sg.REQUEST_ECOTRONBOX:n.processWidgetMessage(new fn(fn.REQUEST_ECOTRONBOX,s,r,e.roomId));break;case a.sg.REQUEST_DIMMER:n.processWidgetMessage(new fn(fn.REQUEST_DIMMER,s,r,e.roomId));break;case a.sg.REQUEST_PLACEHOLDER:n.processWidgetMessage(new fn(fn.REQUEST_PLACEHOLDER,s,r,e.roomId));break;case a.sg.REQUEST_CLOTHING_CHANGE:n.processWidgetMessage(new fn(fn.REQUEST_CLOTHING_CHANGE,s,r,e.roomId));break;case a.sg.REQUEST_PLAYLIST_EDITOR:n.processWidgetMessage(new fn(fn.REQUEST_PLAYLIST_EDITOR,s,r,e.roomId));break;case a.sg.REQUEST_ACHIEVEMENT_RESOLUTION_ENGRAVING:n.processWidgetMessage(new fn(fn.REQUEST_ACHIEVEMENT_RESOLUTION_ENGRAVING,s,r,e.roomId));break;case a.sg.REQUEST_BADGE_DISPLAY_ENGRAVING:n.processWidgetMessage(new fn(fn.REQUEST_BADGE_DISPLAY_ENGRAVING,s,r,e.roomId));break;case a.sg.REQUEST_ACHIEVEMENT_RESOLUTION_FAILED:L().getRoomObject(e.roomId,s,r).model.getValue(a.Og.FURNITURE_OWNER_ID)===ee().userId&&n.processWidgetMessage(new fn(fn.REQUEST_ACHIEVEMENT_RESOLUTION_FAILED,s,r,e.roomId));break;case a.sg.OPEN_WIDGET:case a.sg.CLOSE_WIDGET:case a.sg.OPEN_FURNI_CONTEXT_MENU:case a.sg.CLOSE_FURNI_CONTEXT_MENU:case a.sg.REMOVE_DIMMER:case a.sg.REQUEST_MANNEQUIN:case a.tg.USE_PRODUCT_FROM_INVENTORY:case a.tg.USE_PRODUCT_FROM_ROOM:case a.sg.REQUEST_BACKGROUND_COLOR:case a.sg.REQUEST_FRIEND_FURNITURE_ENGRAVING:case a.sg.REQUEST_HIGH_SCORE_DISPLAY:case a.sg.REQUEST_HIDE_HIGH_SCORE_DISPLAY:case a.sg.REQUEST_INTERNAL_LINK:case a.sg.REQUEST_ROOM_LINK:n.processEvent(e);break;case a.rg.FURNI_CLICK:case a.rg.FURNI_DOUBLE_CLICK:i(e);break;case a.rg.TOOLTIP_SHOW:case a.rg.TOOLTIP_HIDE:o(e)}if(c){let e=!0;c instanceof Ve&&(e=!a.Bg.isRoomPreviewerId(c.roomId)),e&&n.eventDispatcher.dispatchEvent(c)}}),[t,n,i,o]);Bt(a.pg.SELECTED,l),Bt(a.pg.DESELECTED,l),Bt(a.pg.ADDED,l),Bt(a.pg.REMOVED,l),Bt(a.pg.PLACED,l),Bt(a.pg.REQUEST_MOVE,l),Bt(a.pg.REQUEST_ROTATE,l),Bt(a.pg.REQUEST_MANIPULATION,l),Bt(a.pg.MOUSE_ENTER,l),Bt(a.pg.MOUSE_LEAVE,l),Bt(a.sg.REQUEST_CREDITFURNI,l),Bt(a.sg.REQUEST_STICKIE,l),Bt(a.sg.REQUEST_PRESENT,l),Bt(a.sg.REQUEST_TROPHY,l),Bt(a.sg.REQUEST_TEASER,l),Bt(a.sg.REQUEST_ECOTRONBOX,l),Bt(a.sg.REQUEST_DIMMER,l),Bt(a.sg.REQUEST_PLACEHOLDER,l),Bt(a.sg.REQUEST_CLOTHING_CHANGE,l),Bt(a.sg.REQUEST_PLAYLIST_EDITOR,l),Bt(a.sg.REQUEST_ACHIEVEMENT_RESOLUTION_ENGRAVING,l),Bt(a.sg.REQUEST_BADGE_DISPLAY_ENGRAVING,l),Bt(a.sg.REQUEST_ACHIEVEMENT_RESOLUTION_FAILED,l),Bt(a.sg.OPEN_WIDGET,l),Bt(a.sg.CLOSE_WIDGET,l),Bt(a.sg.OPEN_FURNI_CONTEXT_MENU,l),Bt(a.sg.CLOSE_FURNI_CONTEXT_MENU,l),Bt(a.sg.REMOVE_DIMMER,l),Bt(a.sg.REQUEST_MANNEQUIN,l),Bt(a.tg.USE_PRODUCT_FROM_INVENTORY,l),Bt(a.tg.USE_PRODUCT_FROM_ROOM,l),Bt(a.sg.REQUEST_BACKGROUND_COLOR,l),Bt(a.sg.REQUEST_FRIEND_FURNITURE_ENGRAVING,l),Bt(a.sg.REQUEST_HIGH_SCORE_DISPLAY,l),Bt(a.sg.REQUEST_HIDE_HIGH_SCORE_DISPLAY,l),Bt(a.sg.REQUEST_INTERNAL_LINK,l),Bt(a.sg.REQUEST_ROOM_LINK,l),Bt(a.rg.FURNI_CLICK,l),Bt(a.rg.FURNI_DOUBLE_CLICK,l),Bt(a.rg.TOOLTIP_SHOW,l),Bt(a.rg.TOOLTIP_HIDE,l);const u=Object(c.useCallback)((e=>{n&&n.processEvent(e)}),[n]);Gt(a.Tg.CHAT_EVENT,u),Gt(a.Tg.FLOOD_EVENT,u),Gt(a.Ug.RSDE_DANCE,u),Gt(a.eh.RSUBE_BADGES,u),Gt(a.gh.USER_FIGURE,u),Gt(a.Zg.FAVOURITE_GROUP_UPDATE,u),Gt(a.bh.PET_STATUS_UPDATE,u),Gt(a.Wg.DOORBELL,u),Gt(a.Wg.RSDE_REJECTED,u),Gt(a.Wg.RSDE_ACCEPTED,u),Gt(a.Vg.ROOM_DIMMER_PRESETS,u),Gt(a.dh.RSPE_PRESENT_OPENED,u),Gt(a.ah.PET_INFO,u),Gt(a.hh.ANSWERED,u),Gt(a.hh.FINISHED,u),Gt(a.hh.QUESTION,u),Gt(a.ch.OFFER,u),Gt(a.ch.ERROR,u),Gt(a.ch.CONTENT,u);const d=Object(c.useCallback)((e=>{if(!e)return;let t=nt("error.title"),s="";switch(e.type){case a.Xg.RSEME_MAX_PETS:s=nt("room.error.max_pets");break;case a.Xg.RSEME_MAX_NUMBER_OF_OWN_PETS:s=nt("room.error.max_own_pets");break;case a.Xg.RSEME_KICKED:s=nt("room.error.kicked"),t=nt("generic.alert.title");break;case a.Xg.RSEME_PETS_FORBIDDEN_IN_HOTEL:s=nt("room.error.pets.forbidden_in_hotel");break;case a.Xg.RSEME_PETS_FORBIDDEN_IN_FLAT:s=nt("room.error.pets.forbidden_in_flat");break;case a.Xg.RSEME_NO_FREE_TILES_FOR_PET:s=nt("room.error.pets.no_free_tiles");break;case a.Xg.RSEME_SELECTED_TILE_NOT_FREE_FOR_PET:s=nt("room.error.pets.selected_tile_not_free");break;case a.Xg.RSEME_BOTS_FORBIDDEN_IN_HOTEL:s=nt("room.error.bots.forbidden_in_hotel");break;case a.Xg.RSEME_BOTS_FORBIDDEN_IN_FLAT:s=nt("room.error.bots.forbidden_in_flat");break;case a.Xg.RSEME_BOT_LIMIT_REACHED:s=nt("room.error.max_bots");break;case a.Xg.RSEME_SELECTED_TILE_NOT_FREE_FOR_BOT:s=nt("room.error.bots.selected_tile_not_free");break;case a.Xg.RSEME_BOT_NAME_NOT_ACCEPTED:s=nt("room.error.bots.name.not.accepted");break;default:return}Pr.simpleAlert(s,yr.DEFAULT,null,null,t)}),[]);return Gt(a.Xg.RSEME_KICKED,d),Gt(a.Xg.RSEME_PETS_FORBIDDEN_IN_HOTEL,d),Gt(a.Xg.RSEME_PETS_FORBIDDEN_IN_FLAT,d),Gt(a.Xg.RSEME_MAX_PETS,d),Gt(a.Xg.RSEME_MAX_NUMBER_OF_OWN_PETS,d),Gt(a.Xg.RSEME_NO_FREE_TILES_FOR_PET,d),Gt(a.Xg.RSEME_SELECTED_TILE_NOT_FREE_FOR_PET,d),Gt(a.Xg.RSEME_BOTS_FORBIDDEN_IN_HOTEL,d),Gt(a.Xg.RSEME_BOTS_FORBIDDEN_IN_FLAT,d),Gt(a.Xg.RSEME_BOT_LIMIT_REACHED,d),Gt(a.Xg.RSEME_SELECTED_TILE_NOT_FREE_FOR_BOT,d),Gt(a.Xg.RSEME_BOT_NAME_NOT_ACCEPTED,d),n?Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(rh,{}),Object(Kr.jsx)(dh,{}),Object(Kr.jsx)(ih,{}),Object(Kr.jsx)(gh,{}),Object(Kr.jsx)(nj,{}),Object(Kr.jsx)(uj,{}),Object(Kr.jsx)(hj,{}),Object(Kr.jsx)(dj,{}),Object(Kr.jsx)(jh,{}),Object(Kr.jsx)(bh,{}),Object(Kr.jsx)(mj,{}),Object(Kr.jsx)(ph,{})]}):null},_j=e=>{const[t,s]=Object(c.useState)(null),[n,r]=Object(c.useState)(null),i=Object(c.useRef)(),o=Object(c.useCallback)((e=>{if(a.Bg.isRoomPreviewerId(e.roomId))return;const t=ie();if(t)switch(e.type){case a.og.INITIALIZED:return Oe(e.roomId),void s(t);case a.og.DISPOSED:return void s(null)}}),[]);Bt(a.og.INITIALIZED,o),Bt(a.og.DISPOSED,o);const l=Object(c.useCallback)((e=>{switch(e.type){case a.Yg.CREATED:return t=e.session,void $().startSession(t);case a.Yg.ENDED:return void s(null)}var t}),[]);Gt(a.Yg.CREATED,l),Gt(a.Yg.ENDED,l);const u=Object(c.useCallback)((function(){const e=C().renderer.view;if(!e)return;e.style.width=`${Math.floor(window.innerWidth)}px`,e.style.height=`${Math.floor(window.innerHeight)}px`;const t=C();t.renderer.resolution=window.devicePixelRatio,t.renderer.resize(window.innerWidth,window.innerHeight),be(window.innerWidth,window.innerHeight,1),t.render()}),[]);return Object(c.useEffect)((()=>{if(!t)return void r(null);const e=new qn(t,new a.xb);e.registerHandler(new Gn),e.registerHandler(new zn),e.registerHandler(new Vn),e.registerHandler(new Wn),e.registerHandler(new Kn),e.registerHandler(new Qn),e.registerHandler(new Hn),e.registerHandler(new Rn),e.registerHandler(new An),e.registerHandler(new yn),e.registerHandler(new wn),e.registerHandler(new Dn),e.registerHandler(new Mn),e.registerHandler(new kn),e.registerHandler(new Fn),e.registerHandler(new Pn),e.registerHandler(new Un),e.registerHandler(new Ln),r(e);const s=L(),n=t.roomId;u();const c=s.getRoomInstanceDisplay(n,1,window.innerWidth,window.innerHeight,a.Ag.SCALE_ZOOMED_IN);if(!c)return;const i=s.getRoomInstanceGeometry(n,1);if(i){let e=((s.getRoomInstanceVariable(n,a.vh.ROOM_MIN_X)||0)+(s.getRoomInstanceVariable(n,a.vh.ROOM_MAX_X)||0))/2,t=((s.getRoomInstanceVariable(n,a.vh.ROOM_MIN_Y)||0)+(s.getRoomInstanceVariable(n,a.vh.ROOM_MAX_Y)||0))/2;const r=20;e+=r-1,t+=r-1;const c=Math.sqrt(r*r+r*r)*Math.tan(30/180*Math.PI);i.location=new a.Ui(e,t,c)}const o=C().stage;o&&(o.addChild(c),Oe(t.roomId))}),[t,u]),Object(c.useEffect)((()=>{const e=C().renderer.view;if(!e)return;e.onclick=e=>G(e),e.onmousemove=e=>G(e),e.onmousedown=e=>G(e),e.onmouseup=e=>G(e),e.ontouchstart=e=>z(e),e.ontouchmove=e=>z(e),e.ontouchend=e=>z(e),e.ontouchcancel=e=>z(e),u();const t=i.current;return t&&t.appendChild(e),window.addEventListener("resize",u),()=>{t&&t.removeChild(e),window.removeEventListener("resize",u)}}),[u]),Object(Kr.jsx)(Pd,{value:{roomSession:t,eventDispatcher:n&&n.eventDispatcher,widgetHandler:n},children:Object(Kr.jsx)(Qr,{fit:!0,innerRef:i,className:!t&&"d-none",children:t&&n&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(Ld,{}),Object(Kr.jsx)(pj,{}),t.isSpectator&&Object(Kr.jsx)(Fd,{})]})})})},Ej=e=>{const{useGuideTool:t=!1,unseenAchievementCount:s=0,setMeExpanded:n=null,children:r=null,...i}=e,o=Object(c.useRef)();return Object(c.useEffect)((()=>{const e=ie();e&&L().selectRoomObject(e.roomId,e.ownRoomIndex,a.Ig.UNIT)}),[]),Object(c.useEffect)((()=>{const e=e=>n(!1);return document.addEventListener("click",e),()=>document.removeEventListener(a.Ce.MOUSE_CLICK,e)}),[n]),Object(Kr.jsxs)(ec,{innerRef:o,alignItems:"center",className:"nitro-toolbar-me p-2",gap:2,children:[t&&Object(Kr.jsx)(Qr,{pointer:!0,children:Object(Kr.jsx)(Qr,{className:"navigation-item icon icon-me-helper-tool",onClick:e=>Vt(new pt(pt.TOGGLE_GUIDE_TOOL))})}),Object(Kr.jsx)(Qr,{pointer:!0,children:Object(Kr.jsx)(Qr,{className:"navigation-item icon icon-me-achievements",onClick:e=>y("achievements/toggle"),children:s>0&&Object(Kr.jsx)(vc,{count:s})})}),Object(Kr.jsx)(Qr,{pointer:!0,children:Object(Kr.jsx)(Qr,{className:"navigation-item icon icon-me-profile",onClick:e=>Lr(ee().userId)})}),Object(Kr.jsx)(Qr,{pointer:!0,children:Object(Kr.jsx)(Qr,{className:"navigation-item icon icon-me-rooms",onClick:e=>y("navigator/search/myworld_view")})}),Object(Kr.jsx)(Qr,{pointer:!0,children:Object(Kr.jsx)(Qr,{className:"navigation-item icon icon-me-clothing",onClick:e=>y("avatar-editor/toggle")})}),Object(Kr.jsx)(Qr,{pointer:!0,children:Object(Kr.jsx)(Qr,{className:"navigation-item icon icon-me-settings",onClick:e=>y("user-settings/toggle")})}),r]})},fj=e=>{const{isInRoom:t}=e,[s,n]=Object(c.useState)(!1),[r,i]=Object(c.useState)(!1),{userFigure:o=null}=Ts(),{getFullCount:l=0}=cs(),{getTotalUnseen:u=0}=at(),{requests:d=[]}=es(),{iconState:h=jr.HIDDEN}=ss(),j=ee().isModerator,b=Object(c.useCallback)((e=>{const t=e.getParser();i(t.isAllowed(a.lf.USE_GUIDE_TOOL))}),[i]);it(a.kf,b);const g=Object(c.useCallback)(((e,t,s,n)=>{const r=document.body.getElementsByClassName(e)[0];if(!r)return;t.className="toolbar-icon-animation",t.style.visibility="visible",t.style.left=s+"px",t.style.top=n+"px",document.body.append(t);const c=r.getBoundingClientRect(),i=t.getBoundingClientRect(),o=i.x-c.x,l=i.y-c.y,u=Math.sqrt(o*o+l*l),d=500-Math.abs(1/u*100*500*.5),h=`ToolbarBouncing[${e}]`;a.Be.getMotionByTag(h)||(a.Be.runMotion(new a.Hf(new a.Xi(d+8),new a.vb(r,400,12))).tag=h);const j=new a.Hf(new a.wb(new a.Ud(t,d,c.x-i.x+20,c.y-i.y,100,1),1),new a.ub(t));a.Be.runMotion(j)}),[]),O=Object(c.useCallback)((e=>{g("icon-inventory",e.image,e.x,e.y)}),[g]);return Bt(a.df.ANIMATE_ICON,O),Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(Hc,{type:Lc.FADE_IN,inProp:s,timeout:300,children:Object(Kr.jsx)(Ej,{useGuideTool:r,unseenAchievementCount:u,setMeExpanded:n})}),Object(Kr.jsxs)(ec,{alignItems:"center",justifyContent:"between",gap:2,className:"nitro-toolbar py-1 px-3 mb-2",children:[Object(Kr.jsx)(ec,{gap:2,alignItems:"center",children:Object(Kr.jsxs)(ec,{alignItems:"center",gap:2,children:[Object(Kr.jsxs)(Qr,{className:"position-relative",children:[Object(Kr.jsx)(ec,{center:!0,pointer:!0,className:"navigation-item item-avatar "+(s?"active ":""),onClick:e=>n(!s),children:Object(Kr.jsx)(Ec,{figure:o,direction:2,position:"absolute"})}),u>0&&Object(Kr.jsx)(vc,{count:u})]}),Object(Kr.jsxs)(ec,{alignItems:"center",gap:2,className:"nitro-toolbar-boxes left",children:[t&&Object(Kr.jsx)(Qr,{pointer:!0,className:"navigation-item icon icon-habbo",onClick:e=>ue()}),!t&&Object(Kr.jsx)(Qr,{pointer:!0,className:"navigation-item icon icon-house",onClick:e=>y("navigator/goto/home")}),Object(Kr.jsx)(Qr,{pointer:!0,className:"navigation-item icon icon-rooms",onClick:e=>y("navigator/toggle")}),Object(Kr.jsx)(Qr,{pointer:!0,className:"navigation-item icon icon-catalog",onClick:e=>y("catalog/toggle")}),Object(Kr.jsx)(Qr,{pointer:!0,className:"navigation-item icon icon-inventory",onClick:e=>y("inventory/toggle"),children:l>0&&Object(Kr.jsx)(vc,{count:l})}),t&&Object(Kr.jsx)(Qr,{pointer:!0,className:"navigation-item icon icon-camera",onClick:e=>y("camera/toggle")}),j&&Object(Kr.jsx)(Qr,{pointer:!0,className:"navigation-item icon icon-modtools",onClick:e=>Vt(new It(It.TOGGLE_MOD_TOOLS))})]})]})}),Object(Kr.jsx)(ec,{alignItems:"center",id:"toolbar-chat-input-container"}),Object(Kr.jsxs)(ec,{alignItems:"center",gap:2,className:"nitro-toolbar-boxes right",children:[Object(Kr.jsxs)(ec,{gap:2,children:[Object(Kr.jsx)(Qr,{pointer:!0,className:"navigation-item icon icon-friendall",onClick:e=>y("friends/toggle"),children:d.length>0&&Object(Kr.jsx)(vc,{count:d.length})}),(h===jr.SHOW||h===jr.UNREAD)&&Object(Kr.jsx)(Qr,{pointer:!0,className:`navigation-item icon icon-message ${h===jr.UNREAD&&"is-unseen"}`,onClick:e=>_r()})]}),Object(Kr.jsx)(Qr,{id:"toolbar-friend-bar-container",className:"d-none d-lg-block"})]})]})]})},xj=e=>{const{badges:t=null,gap:s=1,justifyContent:n="between",...r}=e;return Object(Kr.jsx)(Kr.Fragment,{children:t&&t.length>0&&t.map(((e,t)=>Object(Kr.jsx)(Nc,{center:!0,className:"profile-badge",children:Object(Kr.jsx)(xc,{badgeCode:e},e)},e)))})},Ij=e=>{const{relationships:t=null}=e,s=e=>{let{type:s}=e;const n=t&&t.relationshipStatusMap.hasKey(s)?t.relationshipStatusMap.getValue(s):null,r=a.Lf.RELATIONSHIP_NAMES[s].toLocaleLowerCase();return Object(Kr.jsxs)(ec,{fullWidth:!0,gap:1,children:[Object(Kr.jsx)(ec,{center:!0,className:"user-relationship",children:Object(Kr.jsx)("i",{className:`nitro-friends-spritesheet icon-${r}`})}),Object(Kr.jsxs)(Nc,{grow:!0,gap:0,children:[Object(Kr.jsxs)(ec,{alignItems:"center",justifyContent:"between",className:"bg-white px-2 py-1 user-relationship",children:[Object(Kr.jsxs)(Zc,{small:!0,underline:!0,pointer:!0,onClick:e=>n&&n.randomFriendId>=1&&Lr(n.randomFriendId),children:[(!n||0===n.friendCount)&&nt("extendedprofile.add.friends"),n&&n.friendCount>=1&&n.randomFriendName]}),n&&n.friendCount>=1&&Object(Kr.jsx)(ec,{center:!0,position:"relative",className:"avatar-image-container",children:Object(Kr.jsx)(Ec,{figure:n.randomFriendFigure,headOnly:!0,direction:4})})]}),Object(Kr.jsxs)(Zc,{small:!0,italics:!0,className:"user-relationship-count",children:[(!n||0===n.friendCount)&&nt("extendedprofile.no.friends.in.this.category"),n&&n.friendCount>1&&nt(`extendedprofile.relstatus.others.${r}`,["count"],[(n.friendCount-1).toString()]),"\xa0"]})]})]})};return Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(s,{type:a.Lf.HEART}),Object(Kr.jsx)(s,{type:a.Lf.SMILE}),Object(Kr.jsx)(s,{type:a.Lf.BOBBA})]})},Tj=e=>{const{relationships:t=null,friendsCount:s=null}=e;return Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsxs)(Zc,{small:!0,children:[Object(Kr.jsx)("b",{children:nt("extendedprofile.friends.count")})," ",s]}),Object(Kr.jsx)(Zc,{bold:!0,small:!0,children:nt("extendedprofile.relstatus")}),Object(Kr.jsx)(Nc,{children:Object(Kr.jsx)(Ij,{relationships:t})})]})},Cj=e=>{const{itsMe:t=null,groups:s=null,onLeaveGroup:n=null,overflow:r="hidden",gap:i=2,...o}=e,[l,u]=Object(c.useState)(null),[d,h]=Object(c.useState)(null),j=Object(c.useCallback)((e=>{const t=e.getParser();l&&l===t.id&&!t.flag&&h(t)}),[l]);return it(a.Uc,j),Object(c.useEffect)((()=>{l&&$n(new a.Tc(l,!1))}),[l]),Object(c.useEffect)((()=>{h(null),s.length>0&&u((e=>(e===s[0].groupId&&$n(new a.Tc(s[0].groupId,!1)),s[0].groupId)))}),[s]),s&&s.length?Object(Kr.jsxs)(Jr,{overflow:r,gap:2,...o,children:[Object(Kr.jsx)(Nc,{alignItems:"center",size:2,overflow:"auto",children:Object(Kr.jsx)(Zr,{overflow:null,columnCount:1,columnMinHeight:50,className:"user-groups-container",children:s.map(((e,s)=>Object(Kr.jsxs)(wc,{overflow:"unset",itemActive:l===e.groupId,onClick:()=>u(e.groupId),className:"p-1",children:[t&&Object(Kr.jsx)("i",{className:"position-absolute end-0 top-0 z-index-1 icon icon-group-"+(e.favourite?"favorite":"not-favorite"),onClick:()=>(e=>{$n(e.favourite?new a.jd(e.groupId):new a.Rc(e.groupId))})(e)}),Object(Kr.jsx)(xc,{badgeCode:e.badgeCode,isGroup:!0})]},s)))})}),Object(Kr.jsx)(Nc,{size:10,overflow:"hidden",children:d&&Object(Kr.jsx)(al,{groupInformation:d,onClose:n})})]}):Object(Kr.jsx)(Nc,{center:!0,fullHeight:!0,children:Object(Kr.jsxs)(ec,{justifyContent:"center",gap:2,children:[Object(Kr.jsx)(Qr,{className:"no-group-spritesheet image-1"}),Object(Kr.jsx)(Qr,{className:"no-group-spritesheet image-2"}),Object(Kr.jsx)(Qr,{className:"no-group-spritesheet image-3"})]})})},Sj=e=>{const{userProfile:t=null}=e,[s,n]=Object(c.useState)(t.requestSent),r=t.id===ee().userId,i=!s&&!r&&!t.isMyFriend&&!t.requestSent;return Object(c.useEffect)((()=>{n(t.requestSent)}),[t]),Object(Kr.jsxs)(ec,{gap:2,children:[Object(Kr.jsx)(Nc,{center:!0,className:"avatar-container",children:Object(Kr.jsx)(Ec,{figure:t.figure,direction:2})}),Object(Kr.jsxs)(Nc,{children:[Object(Kr.jsxs)(Nc,{gap:0,children:[Object(Kr.jsx)(Zc,{bold:!0,children:t.username}),Object(Kr.jsxs)(Zc,{italics:!0,textBreak:!0,small:!0,children:[t.motto,"\xa0"]})]}),Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsxs)(Zc,{small:!0,children:[Object(Kr.jsx)("b",{children:nt("extendedprofile.created")})," ",t.registration]}),Object(Kr.jsxs)(Zc,{small:!0,children:[Object(Kr.jsx)("b",{children:nt("extendedprofile.last.login")})," ",a.Kb.format(t.secondsSinceLastVisit,".ago",2)]}),Object(Kr.jsxs)(Zc,{small:!0,children:[Object(Kr.jsx)("b",{children:nt("extendedprofile.achievementscore")})," ",t.achievementPoints]})]}),Object(Kr.jsxs)(ec,{gap:1,children:[t.isOnline&&Object(Kr.jsx)("i",{className:"icon icon-pf-online"}),!t.isOnline&&Object(Kr.jsx)("i",{className:"icon icon-pf-offline"}),Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[i&&Object(Kr.jsx)(Zc,{small:!0,underline:!0,pointer:!0,onClick:()=>{n(!0),$n(new a.Uf(t.username))},children:nt("extendedprofile.addasafriend")}),!i&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)("i",{className:"icon icon-pf-tick"}),r&&Object(Kr.jsx)(Zc,{children:nt("extendedprofile.me")}),t.isMyFriend&&Object(Kr.jsx)(Zc,{children:nt("extendedprofile.friend")}),(s||t.requestSent)&&Object(Kr.jsx)(Zc,{children:nt("extendedprofile.friendrequestsent")})]})]})]})]})]})},Nj=e=>{const[t,s]=Object(c.useState)(null),[n,r]=Object(c.useState)([]),[i,o]=Object(c.useState)(null),l=Object(c.useCallback)((()=>{t&&t.id===ee().userId&&Lr(t.id)}),[t]),u=Object(c.useCallback)((e=>{const s=e.getParser();t&&s.userId===t.id&&r(s.badges)}),[t]);it(a.Ci,u);const d=Object(c.useCallback)((e=>{const s=e.getParser();t&&s.userId===t.id&&o(s)}),[t]);it(a.Mf,d);const h=Object(c.useCallback)((e=>{const t=e.getParser();let n=!1;s((e=>(e&&e.id&&(n=e.id===t.id),t))),n||(r([]),o(null)),$n(new a.Bi(t.id)),$n(new a.Ki(t.id))}),[]);it(a.Ji,h);const j=Object(c.useCallback)((e=>{if(!t)return;if(e.category!==a.Ig.UNIT)return;const s=ie().userDataManager.getUserDataByIndex(e.objectId);s.type===a.Mg.USER&&Lr(s.webID)}),[t]);return Bt(a.pg.SELECTED,j),t?Object(Kr.jsxs)(_c,{uniqueKey:"nitro-user-profile",theme:"primary-slim",className:"user-profile",children:[Object(Kr.jsx)(hc,{headerText:nt("extendedprofile.caption"),onCloseClick:()=>{s(null),r([]),o(null)}}),Object(Kr.jsxs)(lc,{overflow:"hidden",children:[Object(Kr.jsxs)(Jr,{fullHeight:!1,gap:2,children:[Object(Kr.jsxs)(Nc,{size:7,gap:1,className:"user-container pe-2",children:[Object(Kr.jsx)(Sj,{userProfile:t}),Object(Kr.jsx)(Jr,{columnCount:5,fullHeight:!0,className:"py-1",children:Object(Kr.jsx)(xj,{fullWidth:!0,center:!0,badges:n})})]}),Object(Kr.jsx)(Nc,{size:5,children:i&&Object(Kr.jsx)(Tj,{relationships:i,friendsCount:t.friendsCount})})]}),Object(Kr.jsx)(ec,{alignItems:"center",className:"rooms-button-container px-2 py-1",children:Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,onClick:e=>y(`navigator/search/hotel_view/owner:${t.username}`),children:[Object(Kr.jsx)("i",{className:"icon icon-rooms"}),Object(Kr.jsx)(Zc,{bold:!0,underline:!0,pointer:!0,children:nt("extendedprofile.rooms")})]})}),Object(Kr.jsx)(Cj,{fullWidth:!0,itsMe:t.id===ee().userId,groups:t.groups,onLeaveGroup:l})]})]}):null},vj=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(null),[i,o]=Kt(),[l,u]=$t(),d=Object(c.useCallback)((e=>{const t=e.getParser(),s=new a.Ze;s.volumeSystem=t.volumeSystem,s.volumeFurni=t.volumeFurni,s.volumeTrax=t.volumeTrax,s.oldChat=t.oldChat,s.roomInvites=t.roomInvites,s.cameraFollow=t.cameraFollow,s.flags=t.flags,s.chatType=t.chatType,r(s),Ft(s)}),[]);it(a.Mi,d);const h=Object(c.useCallback)(((e,t)=>{let c=!0;const i=n.clone();switch(e){case"close_view":return s(!1),void(c=!1);case"oldchat":i.oldChat=t,$n(new a.Ni(i.oldChat));break;case"room_invites":i.roomInvites=t,$n(new a.Oi(i.roomInvites));break;case"camera_follow":i.cameraFollow=t,$n(new a.Li(i.cameraFollow));break;case"system_volume":i.volumeSystem=t,i.volumeSystem=Math.max(0,i.volumeSystem),i.volumeSystem=Math.min(100,i.volumeSystem);break;case"furni_volume":i.volumeFurni=t,i.volumeFurni=Math.max(0,i.volumeFurni),i.volumeFurni=Math.min(100,i.volumeFurni);break;case"trax_volume":i.volumeTrax=t,i.volumeTrax=Math.max(0,i.volumeTrax),i.volumeTrax=Math.min(100,i.volumeTrax)}c&&r(i),Ft(i)}),[n]),j=Object(c.useCallback)((e=>{if("volume"===e)$n(new a.Pi(Math.round(n.volumeSystem),Math.round(n.volumeFurni),Math.round(n.volumeTrax)))}),[n]);return Object(c.useEffect)((()=>{const e={linkReceived:e=>{const t=e.split("/");if(!(t.length<2))switch(t[1]){case"show":return void s(!0);case"hide":return void s(!1);case"toggle":return void s((e=>!e))}},eventUrlPrefix:"user-settings/"};return S(e),()=>M(e)}),[]),Object(c.useEffect)((()=>{n&&Vt(n)}),[n]),t?Object(Kr.jsxs)(_c,{uniqueKey:"user-settings",className:"user-settings-window",theme:"primary-slim",children:[Object(Kr.jsx)(hc,{headerText:nt("widget.memenu.settings.title"),onCloseClick:e=>h("close_view")}),Object(Kr.jsxs)(lc,{className:"text-black",children:[Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)("input",{className:"form-check-input",type:"checkbox",checked:n.oldChat,onChange:e=>h("oldchat",e.target.checked)}),Object(Kr.jsx)(Zc,{children:nt("memenu.settings.chat.prefer.old.chat")})]}),Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)("input",{className:"form-check-input",type:"checkbox",checked:n.roomInvites,onChange:e=>h("room_invites",e.target.checked)}),Object(Kr.jsx)(Zc,{children:nt("memenu.settings.other.ignore.room.invites")})]}),Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)("input",{className:"form-check-input",type:"checkbox",checked:n.cameraFollow,onChange:e=>h("camera_follow",e.target.checked)}),Object(Kr.jsx)(Zc,{children:nt("memenu.settings.other.disable.room.camera.follow")})]}),Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)("input",{className:"form-check-input",type:"checkbox",checked:i,onChange:e=>o(e.target.checked)}),Object(Kr.jsx)(Zc,{children:nt("memenu.settings.other.place.multiple.objects")})]}),Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)("input",{className:"form-check-input",type:"checkbox",checked:l,onChange:e=>u(e.target.checked)}),Object(Kr.jsx)(Zc,{children:nt("memenu.settings.other.skip.purchase.confirmation")})]})]}),Object(Kr.jsxs)(Nc,{children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("widget.memenu.settings.volume")}),Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{children:nt("widget.memenu.settings.volume.ui")}),Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)(ic.a,{icon:0===n.volumeSystem?"volume-mute":n.volumeSystem>0?"volume-down":null,className:n.volumeSystem>=50?"text-muted":""}),Object(Kr.jsx)("input",{type:"range",className:"custom-range w-100",min:"0",max:"100",step:"1",id:"volumeSystem",value:n.volumeSystem,onChange:e=>h("system_volume",e.target.value),onMouseUp:()=>j("volume")}),Object(Kr.jsx)(ic.a,{icon:"volume-up",className:n.volumeSystem<50?"text-muted":""})]})]}),Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{children:nt("widget.memenu.settings.volume.furni")}),Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)(ic.a,{icon:0===n.volumeFurni?"volume-mute":n.volumeFurni>0?"volume-down":null,className:n.volumeFurni>=50?"text-muted":""}),Object(Kr.jsx)("input",{type:"range",className:"custom-range w-100",min:"0",max:"100",step:"1",id:"volumeFurni",value:n.volumeFurni,onChange:e=>h("furni_volume",e.target.value),onMouseUp:()=>j("volume")}),Object(Kr.jsx)(ic.a,{icon:"volume-up",className:n.volumeFurni<50?"text-muted":""})]})]}),Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{children:nt("widget.memenu.settings.volume.trax")}),Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)(ic.a,{icon:0===n.volumeTrax?"volume-mute":n.volumeTrax>0?"volume-down":null,className:n.volumeTrax>=50?"text-muted":""}),Object(Kr.jsx)("input",{type:"range",className:"custom-range w-100",min:"0",max:"100",step:"1",id:"volumeTrax",value:n.volumeTrax,onChange:e=>h("trax_volume",e.target.value),onMouseUp:()=>j("volume")}),Object(Kr.jsx)(ic.a,{icon:"volume-up",className:n.volumeTrax<50?"text-muted":""})]})]})]})]})]}):null},Rj=Object(c.createContext)({trigger:null,setTrigger:null,intParams:null,setIntParams:null,stringParam:null,setStringParam:null,furniIds:null,setFurniIds:null,actionDelay:null,setActionDelay:null,saveWired:null}),Aj=e=>Object(Kr.jsx)(Rj.Provider,{value:e.value,children:e.children}),yj=()=>Object(c.useContext)(Rj),wj=e=>{const{trigger:t=null,furniIds:s=[],setFurniIds:n=null}=yj(),r=Object(c.useCallback)((e=>{const s=e.objectId;s<=0||n((e=>{const n=[...e],r=e.indexOf(s);return r>=0?(n.splice(r,1),qr.hide(s)):n.length<t.maximumItemSelectionCount&&(n.push(s),qr.show(s)),n}))}),[t,n]);return qt(Ut.SELECT_OBJECT,r),Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("wiredfurni.pickfurnis.caption",["count","limit"],[s.length.toString(),t.maximumItemSelectionCount.toString()])}),Object(Kr.jsx)(Zc,{small:!0,children:nt("wiredfurni.pickfurnis.desc")})]})},kj=e=>{const{wiredType:t="",requiresFurni:s=Wr.STUFF_SELECTION_OPTION_NONE,save:n=null,validate:r=null,children:i=null,hasSpecialInput:a=!1}=e,[o,l]=Object(c.useState)(null),[u,d]=Object(c.useState)(null),[h,j]=Object(c.useState)(!1),{trigger:b=null,setTrigger:g=null,setIntParams:O=null,setStringParam:m=null,setFurniIds:p=null,saveWired:_=null}=yj(),E=()=>g(null);return Object(c.useEffect)((()=>{h&&(_(),j(!1))}),[h,_]),Object(c.useEffect)((()=>{if(!b)return;const e=b.spriteId||-1,t=ee().getFloorItemData(e);return t?(l(t.name),d(t.description)):(l("NAME: "+e),d("NAME: "+e)),a&&(O(b.intData),m(b.stringData)),s>Wr.STUFF_SELECTION_OPTION_NONE&&p((e=>(e&&e.length&&qr.clearSelectionShaderFromFurni(e),b.selectedItems&&b.selectedItems.length?(qr.applySelectionShaderToFurni(b.selectedItems),b.selectedItems):[]))),()=>{j(!1),O([]),m(null),p((e=>(e&&e.length&&qr.clearSelectionShaderFromFurni(e),[])))}}),[b,a,s,O,m,p]),Object(Kr.jsxs)(_c,{uniqueKey:"nitro-wired",className:"nitro-wired",theme:"primary-slim",children:[Object(Kr.jsx)(hc,{headerText:nt("wiredfurni.title"),onCloseClick:E}),Object(Kr.jsxs)(lc,{children:[Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)("i",{className:`icon icon-wired-${t}`}),Object(Kr.jsx)(Zc,{bold:!0,children:o})]}),Object(Kr.jsx)(Zc,{small:!0,children:u})]}),!!i&&Object(Kr.jsx)("hr",{className:"m-0 bg-dark"}),i,s>Wr.STUFF_SELECTION_OPTION_NONE&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)("hr",{className:"m-0 bg-dark"}),Object(Kr.jsx)(wj,{})]}),Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)(tc,{fullWidth:!0,variant:"success",onClick:()=>{r&&!r()||(n&&n(),j(!0))},children:nt("wiredfurni.ready")}),Object(Kr.jsx)(tc,{fullWidth:!0,variant:"secondary",onClick:E,children:nt("cancel")})]})]})]})},Dj=e=>{const{requiresFurni:t=Wr.STUFF_SELECTION_OPTION_NONE,save:s=null,hasSpecialInput:n=!1,children:r=null}=e,{trigger:i=null,actionDelay:a=0,setActionDelay:o=null}=yj();return Object(c.useEffect)((()=>{o(i.delayInPulses)}),[i,o]),Object(Kr.jsxs)(kj,{wiredType:"action",requiresFurni:t,save:s,hasSpecialInput:n,children:[r,!!r&&Object(Kr.jsx)("hr",{className:"m-0 bg-dark"}),Object(Kr.jsxs)(Nc,{children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("wiredfurni.params.delay",["seconds"],[Fr(a)])}),Object(Kr.jsx)(Li.a,{className:"nitro-slider",min:0,max:20,value:a,onChange:e=>o(e)})]})]})},Uj=e=>{const[t,s]=Object(c.useState)(""),[n,r]=Object(c.useState)(""),{trigger:i=null,setStringParam:a=null}=yj();return Object(c.useEffect)((()=>{const e=i.stringData.split(Yr);e.length>0&&s(e[0]),e.length>1&&r(e[1].length>0?e[1]:"hd-180-1.ch-210-66.lg-270-82.sh-290-81")}),[i]),Object(Kr.jsxs)(Dj,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>a(t+Yr+n),children:[Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("wiredfurni.params.bot.name")}),Object(Kr.jsx)("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:t,onChange:e=>s(e.target.value)})]}),Object(Kr.jsxs)(ec,{center:!0,children:[Object(Kr.jsx)(Ec,{figure:n,direction:4}),Object(Kr.jsx)(tc,{onClick:e=>r(ee().figure),children:nt("wiredfurni.params.capture.figure")})]})]})},Pj=e=>{const[t,s]=Object(c.useState)(""),[n,r]=Object(c.useState)(-1),{trigger:i=null,setStringParam:a=null,setIntParams:o=null}=yj();return Object(c.useEffect)((()=>{s(i.stringData),r(i.intData.length>0?i.intData[0]:0)}),[i]),Object(Kr.jsxs)(Dj,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>{a(t),o([n])},children:[Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("wiredfurni.params.bot.name")}),Object(Kr.jsx)("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:t,onChange:e=>s(e.target.value)})]}),Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)("input",{className:"form-check-input",type:"radio",name:"followMode",id:"followMode1",checked:1===n,onChange:e=>r(1)}),Object(Kr.jsx)(Zc,{children:nt("wiredfurni.params.start.following")})]}),Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)("input",{className:"form-check-input",type:"radio",name:"followMode",id:"followMode2",checked:0===n,onChange:e=>r(0)}),Object(Kr.jsx)(Zc,{children:nt("wiredfurni.params.stop.following")})]})]})]})},Mj=[2,5,7,8,9,10,27],Lj=e=>{const[t,s]=Object(c.useState)(""),[n,r]=Object(c.useState)(-1),{trigger:i=null,setStringParam:a=null,setIntParams:o=null}=yj();return Object(c.useEffect)((()=>{s(i.stringData),r(i.intData.length>0?i.intData[0]:0)}),[i]),Object(Kr.jsxs)(Dj,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>{a(t),o([n])},children:[Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("wiredfurni.params.bot.name")}),Object(Kr.jsx)("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:t,onChange:e=>s(e.target.value)})]}),Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("wiredfurni.params.handitem")}),Object(Kr.jsxs)("select",{className:"form-select form-select-sm",value:n,onChange:e=>r(parseInt(e.target.value)),children:[Object(Kr.jsx)("option",{value:"0",children:"------"}),Mj.map((e=>Object(Kr.jsx)("option",{value:e,children:nt(`handitem${e}`)},e)))]})]})]})},Fj=e=>{const[t,s]=Object(c.useState)(""),{trigger:n=null,setStringParam:r=null}=yj();return Object(c.useEffect)((()=>{s(n.stringData)}),[n]),Object(Kr.jsx)(Dj,{requiresFurni:Wr.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!0,save:()=>r(t),children:Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("wiredfurni.params.bot.name")}),Object(Kr.jsx)("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:t,onChange:e=>s(e.target.value)})]})})},Hj=e=>{const[t,s]=Object(c.useState)(""),[n,r]=Object(c.useState)(""),[i,a]=Object(c.useState)(-1),{trigger:o=null,setStringParam:l=null,setIntParams:u=null}=yj();return Object(c.useEffect)((()=>{const e=o.stringData.split(Yr);e.length>0&&s(e[0]),e.length>1&&r(e[1].length>0?e[1]:""),a(o.intData.length>0?o.intData[0]:0)}),[o]),Object(Kr.jsxs)(Dj,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>{l(t+Yr+n),u([i])},children:[Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("wiredfurni.params.bot.name")}),Object(Kr.jsx)("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:t,onChange:e=>s(e.target.value)})]}),Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("wiredfurni.params.message")}),Object(Kr.jsx)("input",{type:"text",className:"form-control form-control-sm",maxLength:64,value:n,onChange:e=>r(e.target.value)})]}),Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)("input",{className:"form-check-input",type:"radio",name:"talkMode",id:"talkMode1",checked:0===i,onChange:e=>a(0)}),Object(Kr.jsx)(Zc,{children:nt("wiredfurni.params.talk")})]}),Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)("input",{className:"form-check-input",type:"radio",name:"talkMode",id:"talkMode2",checked:1===i,onChange:e=>a(1)}),Object(Kr.jsx)(Zc,{children:nt("wiredfurni.params.whisper")})]})]})]})},Bj=e=>{const[t,s]=Object(c.useState)(""),[n,r]=Object(c.useState)(""),[i,a]=Object(c.useState)(-1),{trigger:o=null,setStringParam:l=null,setIntParams:u=null}=yj();return Object(c.useEffect)((()=>{const e=o.stringData.split(Yr);e.length>0&&s(e[0]),e.length>1&&r(e[1].length>0?e[1]:""),a(o.intData.length>0?o.intData[0]:0)}),[o]),Object(Kr.jsxs)(Dj,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>{l(t+Yr+n),u([i])},children:[Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("wiredfurni.params.bot.name")}),Object(Kr.jsx)("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:t,onChange:e=>s(e.target.value)})]}),Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("wiredfurni.params.message")}),Object(Kr.jsx)("input",{type:"text",className:"form-control form-control-sm",maxLength:64,value:n,onChange:e=>r(e.target.value)})]}),Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)("input",{className:"form-check-input",type:"radio",name:"talkMode",id:"talkMode1",checked:0===i,onChange:e=>a(0)}),Object(Kr.jsx)(Zc,{children:nt("wiredfurni.params.talk")})]}),Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)("input",{className:"form-check-input",type:"radio",name:"talkMode",id:"talkMode2",checked:1===i,onChange:e=>a(1)}),Object(Kr.jsx)(Zc,{children:nt("wiredfurni.params.shout")})]})]})]})},Gj=e=>{const[t,s]=Object(c.useState)(""),{trigger:n=null,setStringParam:r=null}=yj();return Object(c.useEffect)((()=>{s(n.stringData)}),[n]),Object(Kr.jsx)(Dj,{requiresFurni:Wr.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!0,save:()=>r(t),children:Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("wiredfurni.params.bot.name")}),Object(Kr.jsx)("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:t,onChange:e=>s(e.target.value)})]})})},Wj=e=>Object(Kr.jsx)(Dj,{requiresFurni:Wr.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!1,save:null}),Vj=e=>Object(Kr.jsx)(Dj,{requiresFurni:Wr.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!1,save:null}),qj=e=>{const[t,s]=Object(c.useState)(""),{trigger:n=null,setStringParam:r=null}=yj();return Object(c.useEffect)((()=>{s(n.stringData)}),[n]),Object(Kr.jsx)(Dj,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>r(t),children:Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("wiredfurni.params.message")}),Object(Kr.jsx)("input",{type:"text",className:"form-control form-control-sm",value:t,onChange:e=>s(e.target.value),maxLength:100})]})})},Yj=e=>Object(Kr.jsx)(Dj,{requiresFurni:Wr.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!1,save:null}),zj=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(1),[i,a]=Object(c.useState)(!1),[o,l]=Object(c.useState)(1),[u,d]=Object(c.useState)(1),[h,j]=Object(c.useState)([]),{trigger:b=null,setIntParams:g=null,setStringParam:O=null}=yj(),m=Object(c.useCallback)((()=>{j((e=>[...e,{isBadge:!1,itemCode:"",probability:null}]))}),[j]),p=Object(c.useCallback)((e=>{j((t=>{const s=Array.from(t);return s.splice(e,1),s}))}),[j]),_=Object(c.useCallback)(((e,t,s,n)=>{const r=Array.from(h),c=r[e];c&&(c.isBadge=t,c.itemCode=s,c.probability=n,j(r))}),[h,j]),E=Object(c.useCallback)((()=>{let e=[];for(const t of h){if(!t.itemCode)continue;const s=[t.isBadge?"0":"1",t.itemCode,t.probability.toString()];e.push(s.join(","))}e.length>0&&(O(e.join(";")),g([n,i?1:0,o,u]))}),[n,i,o,u,h,g,O]);return Object(c.useEffect)((()=>{const e=[];if(b.stringData.length>0&&b.stringData.includes(";")){const t=b.stringData.split(";");for(const s of t){const t=s.split(",");3===t.length&&e.push({isBadge:"0"===t[0],itemCode:t[1],probability:Number(t[2])})}}0===e.length&&e.push({isBadge:!1,itemCode:"",probability:null}),r(b.intData.length>0?b.intData[0]:0),a(b.intData.length>1&&1===b.intData[1]),l(b.intData.length>2?b.intData[2]:0),d(b.intData.length>3?b.intData[3]:0),s(b.intData.length>3&&b.intData[3]>0),j(e)}),[b]),Object(Kr.jsxs)(Dj,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:E,children:[Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)("input",{className:"form-check-input",type:"checkbox",id:"limitEnabled",onChange:e=>s(e.target.checked)}),Object(Kr.jsx)(Zc,{children:nt("wiredfurni.params.prizelimit",["amount"],[t?o.toString():""])})]}),!t&&Object(Kr.jsx)(Zc,{center:!0,small:!0,className:"bg-muted rounded p-1",children:"Reward limit not set. Make sure rewards are badges or non-tradeable items."}),t&&Object(Kr.jsx)(Li.a,{className:"nitro-slider",min:1,max:1e3,value:o,onChange:e=>l(e)}),Object(Kr.jsx)("hr",{className:"m-0 bg-dark"}),Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:"How often can a user be rewarded?"}),Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsxs)("select",{className:"form-select form-select-sm w-100",value:n,onChange:e=>r(Number(e.target.value)),children:[Object(Kr.jsx)("option",{value:"0",children:"Once"}),Object(Kr.jsxs)("option",{value:"3",children:["Once every ",u," minutes"]}),Object(Kr.jsxs)("option",{value:"2",children:["Once every ",u," hours"]}),Object(Kr.jsxs)("option",{value:"1",children:["Once every ",u," days"]})]}),n>0&&Object(Kr.jsx)("input",{type:"number",className:"form-control form-control-sm",value:u,onChange:e=>d(Number(e.target.value))})]})]}),Object(Kr.jsx)("hr",{className:"m-0 bg-dark"}),Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)("input",{className:"form-check-input",type:"checkbox",id:"uniqueRewards",checked:i,onChange:e=>a(e.target.checked)}),Object(Kr.jsx)(Zc,{children:"Unique rewards"})]}),Object(Kr.jsx)(Zc,{center:!0,small:!0,className:"bg-muted rounded p-1",children:"If checked each reward will be given once to each user. This will disable the probabilities option."}),Object(Kr.jsx)("hr",{className:"m-0 bg-dark"}),Object(Kr.jsxs)(ec,{justifyContent:"between",alignItems:"center",children:[Object(Kr.jsx)(Zc,{bold:!0,children:"Rewards"}),Object(Kr.jsx)(tc,{variant:"success",onClick:m,children:Object(Kr.jsx)(ic.a,{icon:"plus"})})]}),Object(Kr.jsx)(Nc,{gap:1,children:h&&h.map(((e,t)=>Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)("input",{className:"form-check-input",type:"checkbox",checked:e.isBadge,onChange:s=>_(t,s.target.checked,e.itemCode,e.probability)}),Object(Kr.jsx)(Zc,{small:!0,children:"Badge?"})]}),Object(Kr.jsx)("input",{type:"text",className:"form-control form-control-sm",value:e.itemCode,onChange:s=>_(t,e.isBadge,s.target.value,e.probability),placeholder:"Item Code"}),Object(Kr.jsx)("input",{type:"number",className:"form-control form-control-sm",value:e.probability,onChange:s=>_(t,e.isBadge,e.itemCode,Number(s.target.value)),placeholder:"Probability"}),t>0&&Object(Kr.jsx)(tc,{variant:"danger",onClick:e=>p(t),children:Object(Kr.jsx)(ic.a,{icon:"trash"})})]},t)))})]})},Kj=e=>{const[t,s]=Object(c.useState)(1),[n,r]=Object(c.useState)(1),[i,a]=Object(c.useState)(1),{trigger:o=null,setIntParams:l=null}=yj();return Object(c.useEffect)((()=>{o.intData.length>=2?(s(o.intData[0]),r(o.intData[1]),a(o.intData[2])):(s(1),r(1),a(1))}),[o]),Object(Kr.jsxs)(Dj,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>l([t,n,i]),children:[Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("wiredfurni.params.setpoints",["points"],[t.toString()])}),Object(Kr.jsx)(Li.a,{className:"nitro-slider",min:1,max:100,value:t,onChange:e=>s(e)})]}),Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("wiredfurni.params.settimesingame",["times"],[n.toString()])}),Object(Kr.jsx)(Li.a,{className:"nitro-slider",min:1,max:10,value:n,onChange:e=>r(e)})]}),Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("wiredfurni.params.team")}),[1,2,3,4].map((e=>Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)("input",{className:"form-check-input",type:"radio",name:"selectedTeam",id:`selectedTeam${e}`,checked:i===e,onChange:t=>a(e)}),Object(Kr.jsx)(Zc,{children:nt("wiredfurni.params.team."+e)})]},e)))]})]})},Qj=e=>{const[t,s]=Object(c.useState)(1),[n,r]=Object(c.useState)(1),{trigger:i=null,setIntParams:a=null}=yj();return Object(c.useEffect)((()=>{i.intData.length>=2?(s(i.intData[0]),r(i.intData[1])):(s(1),r(1))}),[i]),Object(Kr.jsxs)(Dj,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>a([t,n]),children:[Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("wiredfurni.params.setpoints",["points"],[t.toString()])}),Object(Kr.jsx)(Li.a,{className:"nitro-slider",min:1,max:100,value:t,onChange:e=>s(e)})]}),Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("wiredfurni.params.settimesingame",["times"],[n.toString()])}),Object(Kr.jsx)(Li.a,{className:"nitro-slider",min:1,max:10,value:n,onChange:e=>r(e)})]})]})},$j=e=>{const[t,s]=Object(c.useState)(-1),{trigger:n=null,setIntParams:r=null}=yj();return Object(c.useEffect)((()=>{s(n.intData.length>0?n.intData[0]:0)}),[n]),Object(Kr.jsx)(Dj,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>r([t]),children:Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("wiredfurni.params.team")}),[1,2,3,4].map((e=>Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)("input",{className:"form-check-input",type:"radio",name:"selectedTeam",id:`selectedTeam${e}`,checked:t===e,onChange:t=>s(e)}),Object(Kr.jsx)(Zc,{children:nt(`wiredfurni.params.team.${e}`)})]},e)))]})})},Xj=e=>{const[t,s]=Object(c.useState)(""),{trigger:n=null,setStringParam:r=null}=yj();return Object(c.useEffect)((()=>{s(n.stringData)}),[n]),Object(Kr.jsx)(Dj,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>r(t),children:Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("wiredfurni.params.message")}),Object(Kr.jsx)("input",{type:"text",className:"form-control form-control-sm",value:t,onChange:e=>s(e.target.value),maxLength:100})]})})},Jj=e=>Object(Kr.jsx)(Dj,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!1,save:null}),Zj=[{value:0,icon:"ne"},{value:2,icon:"se"},{value:4,icon:"sw"},{value:6,icon:"nw"}],eb=[0,1,2,3,4,5,6],tb=e=>{const[t,s]=Object(c.useState)(-1),[n,r]=Object(c.useState)(-1),{trigger:i=null,setIntParams:a=null}=yj();return Object(c.useEffect)((()=>{i.intData.length>=2?(s(i.intData[0]),r(i.intData[1])):(s(-1),r(-1))}),[i]),Object(Kr.jsxs)(Dj,{requiresFurni:Wr.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!0,save:()=>a([t,n]),children:[Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("wiredfurni.params.startdir")}),Object(Kr.jsx)(ec,{gap:1,children:Zj.map((e=>Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)("input",{className:"form-check-input",type:"radio",name:"movement",id:`movement${e.value}`,checked:t===e.value,onChange:t=>s(e.value)}),Object(Kr.jsx)(Zc,{children:Object(Kr.jsx)("i",{className:`icon icon-${e.icon}`})})]},e.value)))})]}),Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("wiredfurni.params.turn")}),eb.map((e=>Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)("input",{className:"form-check-input",type:"radio",name:"rotation",id:`rotation${e}`,checked:n===e,onChange:t=>r(e)}),Object(Kr.jsx)(Zc,{children:nt(`wiredfurni.params.turn.${e}`)})]},e)))]})]})},sb=[{value:0,icon:"ne"},{value:2,icon:"se"},{value:4,icon:"sw"},{value:6,icon:"nw"}],nb=e=>{const[t,s]=Object(c.useState)(-1),[n,r]=Object(c.useState)(-1),{trigger:i=null,setIntParams:a=null}=yj();return Object(c.useEffect)((()=>{i.intData.length>=2?(s(i.intData[1]),r(i.intData[0])):(s(-1),r(-1))}),[i]),Object(Kr.jsxs)(Dj,{requiresFurni:Wr.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE,hasSpecialInput:!0,save:()=>a([n,t]),children:[Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("wiredfurni.params.emptytiles",["tiles"],[t.toString()])}),Object(Kr.jsx)(Li.a,{className:"nitro-slider",min:1,max:5,value:t,onChange:e=>s(e)})]}),Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("wiredfurni.params.startdir")}),Object(Kr.jsx)(ec,{gap:1,children:sb.map((e=>Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)("input",{className:"form-check-input",type:"radio",name:"movement",id:`movement${e.value}`,checked:n===e.value,onChange:t=>r(e.value)}),Object(Kr.jsx)(Zc,{children:Object(Kr.jsx)("i",{className:`icon icon-${e.icon}`})})]},e.value)))})]})]})},rb=[{value:4,icon:"ne"},{value:5,icon:"se"},{value:6,icon:"sw"},{value:7,icon:"nw"},{value:2,icon:"mv-2"},{value:3,icon:"mv-3"},{value:1,icon:"mv-1"}],cb=[0,1,2,3],ib=e=>{const[t,s]=Object(c.useState)(-1),[n,r]=Object(c.useState)(-1),{trigger:i=null,setIntParams:a=null}=yj();return Object(c.useEffect)((()=>{i.intData.length>=2?(s(i.intData[0]),r(i.intData[1])):(s(-1),r(-1))}),[i]),Object(Kr.jsxs)(Dj,{requiresFurni:Wr.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!0,save:()=>a([t,n]),children:[Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("wiredfurni.params.movefurni")}),Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)("input",{className:"form-check-input",type:"radio",name:"selectedTeam",id:"movement0",checked:0===t,onChange:e=>s(0)}),Object(Kr.jsx)(Zc,{children:nt("wiredfurni.params.movefurni.0")})]}),Object(Kr.jsxs)(ec,{gap:1,children:[rb.map((e=>Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)("input",{className:"form-check-input",type:"radio",name:"movement",id:`movement${e.value}`,checked:t===e.value,onChange:t=>s(e.value)}),Object(Kr.jsx)("i",{className:`icon icon-${e.icon}`})]},e.value))),Object(Kr.jsx)("div",{className:"col"})]})]}),Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("wiredfurni.params.rotatefurni")}),cb.map((e=>Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)("input",{className:"form-check-input",type:"radio",name:"rotation",id:`rotation${e}`,checked:n===e,onChange:t=>r(e)}),Object(Kr.jsxs)(Zc,{children:[[1,2].includes(e)&&Object(Kr.jsx)("i",{className:`icon icon-rot-${e}`}),nt(`wiredfurni.params.rotatefurni.${e}`)]})]},e)))]})]})},ab=e=>{const[t,s]=Object(c.useState)(-1),[n,r]=Object(c.useState)(""),{trigger:i=null,setIntParams:a=null,setStringParam:o=null}=yj();return Object(c.useEffect)((()=>{s(i.intData.length>0?i.intData[0]:0),r(i.stringData)}),[i]),Object(Kr.jsxs)(Dj,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>{a([t]),o(n)},children:[Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("wiredfurni.params.length.minutes",["minutes"],[t.toString()])}),Object(Kr.jsx)(Li.a,{className:"nitro-slider",min:1,max:10,value:t,onChange:e=>s(e)})]}),Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("wiredfurni.params.message")}),Object(Kr.jsx)("input",{type:"text",className:"form-control form-control-sm",value:n,onChange:e=>r(e.target.value),maxLength:100})]})]})},ob=e=>Object(Kr.jsx)(Dj,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!1,save:null}),lb=e=>{const[t,s]=Object(c.useState)(0),[n,r]=Object(c.useState)(0),[i,a]=Object(c.useState)(0),{trigger:o=null,setIntParams:l=null}=yj();return Object(c.useEffect)((()=>{s(o.getBoolean(0)?1:0),r(o.getBoolean(1)?1:0),a(o.getBoolean(2)?1:0)}),[o]),Object(Kr.jsx)(Dj,{requiresFurni:Wr.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!0,save:()=>l([t,n,i]),children:Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("wiredfurni.params.conditions")}),Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)("input",{className:"form-check-input",type:"checkbox",id:"stateFlag",checked:!!t,onChange:e=>s(e.target.checked?1:0)}),Object(Kr.jsx)(Zc,{children:nt("wiredfurni.params.condition.state")})]}),Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)("input",{className:"form-check-input",type:"checkbox",id:"directionFlag",checked:!!n,onChange:e=>r(e.target.checked?1:0)}),Object(Kr.jsx)(Zc,{children:nt("wiredfurni.params.condition.direction")})]}),Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)("input",{className:"form-check-input",type:"checkbox",id:"positionFlag",checked:!!i,onChange:e=>a(e.target.checked?1:0)}),Object(Kr.jsx)(Zc,{children:nt("wiredfurni.params.condition.position")})]})]})})},ub=e=>Object(Kr.jsx)(Dj,{requiresFurni:Wr.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!1,save:null}),db=e=>Object(Kr.jsx)(Dj,{requiresFurni:Wr.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!1,save:null}),hb=e=>{const{requiresFurni:t=Wr.STUFF_SELECTION_OPTION_NONE,save:s=null,hasSpecialInput:n=!1,children:r=null}=e;return Object(Kr.jsx)(kj,{wiredType:"condition",requiresFurni:t,hasSpecialInput:n,save:()=>s&&s(),children:r})},jb=[2,5,7,8,9,10,27],bb=e=>{const[t,s]=Object(c.useState)(-1),{trigger:n=null,setIntParams:r=null}=yj();return Object(c.useEffect)((()=>{s(n.intData.length>0?n.intData[0]:0)}),[n]),Object(Kr.jsx)(hb,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>r([t]),children:Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("wiredfurni.params.handitem")}),Object(Kr.jsx)("select",{className:"form-select form-select-sm",value:t,onChange:e=>s(parseInt(e.target.value)),children:jb.map((e=>Object(Kr.jsx)("option",{value:e,children:nt(`handitem${e}`)},e)))})]})})},gb=e=>Object(Kr.jsx)(hb,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!1,save:null}),Ob=e=>Object(Kr.jsx)(hb,{requiresFurni:Wr.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!1,save:null}),mb=[1,2,3,4],pb=e=>{const[t,s]=Object(c.useState)(-1),{trigger:n=null,setIntParams:r=null}=yj();return Object(c.useEffect)((()=>{s(n.intData.length>0?n.intData[0]:0)}),[n]),Object(Kr.jsx)(hb,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>r([t]),children:Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("wiredfurni.params.team")}),mb.map((e=>Object(Kr.jsxs)(ec,{gap:1,alignItems:"center",children:[Object(Kr.jsx)("input",{className:"form-check-input",type:"radio",name:"selectedTeam",id:`selectedTeam${e}`,checked:t===e,onChange:t=>s(e)}),Object(Kr.jsx)(Zc,{children:nt(`wiredfurni.params.team.${e}`)})]},e)))]})})},_b=e=>{const[t,s]=Object(c.useState)(""),{trigger:n=null,setStringParam:r=null}=yj();return Object(c.useEffect)((()=>{s(n.stringData)}),[n]),Object(Kr.jsx)(hb,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>r(t),children:Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("wiredfurni.params.badgecode")}),Object(Kr.jsx)("input",{type:"text",className:"form-control form-control-sm",value:t,onChange:e=>s(e.target.value)})]})})},Eb=e=>{const[t,s]=Object(c.useState)(-1),{trigger:n=null,setIntParams:r=null}=yj();return Object(c.useEffect)((()=>{s(n.intData.length>0?n.intData[0]:0)}),[n]),Object(Kr.jsx)(hb,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>r([t]),children:Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("wiredfurni.params.effectid")}),Object(Kr.jsx)("input",{type:"number",className:"form-control form-control-sm",value:t,onChange:e=>s(parseInt(e.target.value))})]})})},fb=e=>{const[t,s]=Object(c.useState)(""),[n,r]=Object(c.useState)(""),{trigger:i=null,setIntParams:a=null}=yj();return Object(c.useEffect)((()=>{if(i.intData.length>=2){let e=new Date,t=new Date;i.intData[0]>0&&(e=new Date(1e3*i.intData[0])),i.intData[1]>0&&(t=new Date(1e3*i.intData[1])),s(Gr(e)),r(Gr(t))}}),[i]),Object(Kr.jsxs)(hb,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>{let e=0,s=0;const r=new Date(t),c=new Date(n);r&&c&&(e=r.getTime()/1e3,s=c.getTime()/1e3),a([e,s])},children:[Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("wiredfurni.params.startdate")}),Object(Kr.jsx)("input",{type:"text",className:"form-control form-control-sm",value:t,onChange:e=>s(e.target.value)})]}),Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("wiredfurni.params.enddate")}),Object(Kr.jsx)("input",{type:"text",className:"form-control form-control-sm",value:n,onChange:e=>r(e.target.value)})]})]})},xb=e=>Object(Kr.jsx)(hb,{requiresFurni:Wr.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!1,save:null}),Ib=e=>{const[t,s]=Object(c.useState)(-1),{trigger:n=null,setIntParams:r=null}=yj();return Object(c.useEffect)((()=>{s(n.intData.length>0?n.intData[0]:0)}),[n]),Object(Kr.jsx)(hb,{requiresFurni:Wr.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!0,save:()=>r([t]),children:Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("wiredfurni.params.requireall")}),[0,1].map((e=>Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)("input",{className:"form-check-input",type:"radio",name:"requireAll",id:`requireAll${e}`,checked:t===e,onChange:t=>s(e)}),Object(Kr.jsx)(Zc,{children:nt("wiredfurni.params.requireall."+e)})]},e)))]})})},Tb=e=>{const[t,s]=Object(c.useState)(-1),{trigger:n=null,setIntParams:r=null}=yj();return Object(c.useEffect)((()=>{s(n.intData.length>0?n.intData[0]:0)}),[n]),Object(Kr.jsx)(hb,{requiresFurni:Wr.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!0,save:()=>r([t]),children:Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("wiredfurni.params.not_requireall")}),[0,1].map((e=>Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)("input",{className:"form-check-input",type:"radio",name:"requireAll",id:`requireAll${e}`,checked:t===e,onChange:t=>s(e)}),Object(Kr.jsx)(Zc,{children:nt(`wiredfurni.params.not_requireall.${e}`)})]},e)))]})})},Cb=e=>Object(Kr.jsx)(hb,{requiresFurni:Wr.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE,hasSpecialInput:!1,save:null}),Sb=e=>{const[t,s]=Object(c.useState)(0),[n,r]=Object(c.useState)(0),[i,a]=Object(c.useState)(0),{trigger:o=null,setIntParams:l=null}=yj();return Object(c.useEffect)((()=>{s(o.getBoolean(0)?1:0),r(o.getBoolean(1)?1:0),a(o.getBoolean(2)?1:0)}),[o]),Object(Kr.jsx)(hb,{requiresFurni:Wr.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!0,save:()=>l([t,n,i]),children:Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("wiredfurni.params.conditions")}),Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)("input",{className:"form-check-input",type:"checkbox",id:"stateFlag",checked:!!t,onChange:e=>s(e.target.checked?1:0)}),Object(Kr.jsx)(Zc,{children:nt("wiredfurni.params.condition.state")})]}),Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)("input",{className:"form-check-input",type:"checkbox",id:"directionFlag",checked:!!n,onChange:e=>r(e.target.checked?1:0)}),Object(Kr.jsx)(Zc,{children:nt("wiredfurni.params.condition.direction")})]}),Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)("input",{className:"form-check-input",type:"checkbox",id:"positionFlag",checked:!!i,onChange:e=>a(e.target.checked?1:0)}),Object(Kr.jsx)(Zc,{children:nt("wiredfurni.params.condition.position")})]})]})})},Nb=e=>{const[t,s]=Object(c.useState)(-1),{trigger:n=null,setIntParams:r=null}=yj();return Object(c.useEffect)((()=>{s(n.intData.length>0?n.intData[0]:0)}),[n]),Object(Kr.jsx)(hb,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>r([t]),children:Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("wiredfurni.params.allowbefore",["seconds"],[Fr(t)])}),Object(Kr.jsx)(Li.a,{className:"nitro-slider",min:1,max:1200,value:t,onChange:e=>s(e)})]})})},vb=e=>{const[t,s]=Object(c.useState)(-1),{trigger:n=null,setIntParams:r=null}=yj();return Object(c.useEffect)((()=>{s(n.intData.length>0?n.intData[0]:0)}),[n]),Object(Kr.jsx)(hb,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>r([t]),children:Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("wiredfurni.params.allowafter",["seconds"],[Fr(t)])}),Object(Kr.jsx)(Li.a,{className:"nitro-slider",min:1,max:1200,value:t,onChange:e=>s(e)})]})})},Rb=e=>{const[t,s]=Object(c.useState)(1),[n,r]=Object(c.useState)(1),{trigger:i=null,setIntParams:a=null}=yj();return Object(c.useEffect)((()=>{i.intData.length>=2?(s(i.intData[0]),r(i.intData[1])):(s(1),r(1))}),[i]),Object(Kr.jsxs)(hb,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>a([t,n]),children:[Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("wiredfurni.params.usercountmin",["value"],[t.toString()])}),Object(Kr.jsx)(Li.a,{className:"nitro-slider",min:1,max:50,value:t,onChange:e=>s(e)})]}),Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("wiredfurni.params.usercountmax",["value"],[n.toString()])}),Object(Kr.jsx)(Li.a,{className:"nitro-slider",min:1,max:50,value:n,onChange:e=>r(e)})]})]})},Ab=e=>{const{requiresFurni:t=Wr.STUFF_SELECTION_OPTION_NONE,save:s=null,hasSpecialInput:n=!1,children:r=null}=e;return Object(Kr.jsx)(kj,{wiredType:"trigger",requiresFurni:t,hasSpecialInput:n,save:()=>s&&s(),children:r})},yb=e=>{const[t,s]=Object(c.useState)(""),[n,r]=Object(c.useState)(0),{trigger:i=null,setStringParam:a=null}=yj();return Object(c.useEffect)((()=>{s(i.stringData),r(i.stringData?1:0)}),[i]),Object(Kr.jsx)(Ab,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>a(1===n?t:""),children:Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("wiredfurni.params.picktriggerer")}),Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)("input",{className:"form-check-input",type:"radio",name:"avatarMode",id:"avatarMode0",checked:0===n,onChange:e=>r(0)}),Object(Kr.jsx)(Zc,{children:nt("wiredfurni.params.anyavatar")})]}),Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)("input",{className:"form-check-input",type:"radio",name:"avatarMode",id:"avatarMode1",checked:1===n,onChange:e=>r(1)}),Object(Kr.jsx)(Zc,{children:nt("wiredfurni.params.certainavatar")})]}),1===n&&Object(Kr.jsx)("input",{type:"text",className:"form-control form-control-sm",value:t,onChange:e=>s(e.target.value)})]})})},wb=e=>{const[t,s]=Object(c.useState)(""),[n,r]=Object(c.useState)(-1),{trigger:i=null,setStringParam:a=null,setIntParams:o=null}=yj();return Object(c.useEffect)((()=>{s(i.stringData),r(i.intData.length>0?i.intData[0]:0)}),[i]),Object(Kr.jsxs)(Ab,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>{a(t),o([n])},children:[Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("wiredfurni.params.whatissaid")}),Object(Kr.jsx)("input",{type:"text",className:"form-control form-control-sm",value:t,onChange:e=>s(e.target.value)})]}),Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("wiredfurni.params.picktriggerer")}),Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)("input",{className:"form-check-input",type:"radio",name:"triggererAvatar",id:"triggererAvatar0",checked:0===n,onChange:e=>r(0)}),Object(Kr.jsx)(Zc,{children:nt("wiredfurni.params.anyavatar")})]}),Object(Kr.jsxs)(ec,{alignItems:"center",gap:1,children:[Object(Kr.jsx)("input",{className:"form-check-input",type:"radio",name:"triggererAvatar",id:"triggererAvatar1",checked:1===n,onChange:e=>r(1)}),Object(Kr.jsx)(Zc,{children:ee().userName})]})]})]})},kb=e=>Object(Kr.jsx)(Ab,{requiresFurni:Wr.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE,hasSpecialInput:!1,save:null}),Db=e=>Object(Kr.jsx)(Ab,{requiresFurni:Wr.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE,hasSpecialInput:!1,save:null}),Ub=e=>{const[t,s]=Object(c.useState)(""),{trigger:n=null,setStringParam:r=null}=yj();return Object(c.useEffect)((()=>{s(n.stringData)}),[n]),Object(Kr.jsx)(Ab,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>r(t),children:Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("wiredfurni.params.bot.name")}),Object(Kr.jsx)("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:t,onChange:e=>s(e.target.value)})]})})},Pb=e=>{const[t,s]=Object(c.useState)(""),{trigger:n=null,setStringParam:r=null}=yj();return Object(c.useEffect)((()=>{s(n.stringData)}),[n]),Object(Kr.jsx)(Ab,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>r(t),children:Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("wiredfurni.params.bot.name")}),Object(Kr.jsx)("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:t,onChange:e=>s(e.target.value)})]})})},Mb=e=>Object(Kr.jsx)(Ab,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!1,save:null}),Lb=e=>{const[t,s]=Object(c.useState)(1),{trigger:n=null,setIntParams:r=null}=yj();return Object(c.useEffect)((()=>{s(n.intData.length>0?n.intData[0]:0)}),[n]),Object(Kr.jsx)(Ab,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>r([t]),children:Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("wiredfurni.params.settime",["seconds"],[Fr(t)])}),Object(Kr.jsx)(Li.a,{className:"nitro-slider",min:1,max:1200,value:t,onChange:e=>s(e)})]})})},Fb=e=>{const[t,s]=Object(c.useState)(1),{trigger:n=null,setIntParams:r=null}=yj();return Object(c.useEffect)((()=>{s(n.intData.length>0?n.intData[0]:0)}),[n]),Object(Kr.jsx)(Ab,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>r([t]),children:Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("wiredfurni.params.setlongtime",["time"],[a.Kb.format(5*t).toString()])}),Object(Kr.jsx)(Li.a,{className:"nitro-slider",min:1,max:120,value:t,onChange:e=>s(e)})]})})},Hb=e=>{const[t,s]=Object(c.useState)(1),{trigger:n=null,setIntParams:r=null}=yj();return Object(c.useEffect)((()=>{s(n.intData.length>0?n.intData[0]:0)}),[n]),Object(Kr.jsx)(Ab,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>r([t]),children:Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("wiredfurni.params.settime",["seconds"],[Fr(t)])}),Object(Kr.jsx)(Li.a,{className:"nitro-slider",min:1,max:60,value:t,onChange:e=>s(e)})]})})},Bb=e=>Object(Kr.jsx)(Ab,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!1,save:null}),Gb=e=>Object(Kr.jsx)(Ab,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!1,save:null}),Wb=e=>{const[t,s]=Object(c.useState)(1),{trigger:n=null,setIntParams:r=null}=yj();return Object(c.useEffect)((()=>{s(n.intData.length>0?n.intData[0]:0)}),[n]),Object(Kr.jsx)(Ab,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>r([t]),children:Object(Kr.jsxs)(Nc,{gap:1,children:[Object(Kr.jsx)(Zc,{bold:!0,children:nt("wiredfurni.params.setscore",["points"],[t.toString()])}),Object(Kr.jsx)(Li.a,{className:"nitro-slider",min:1,max:1e3,value:t,onChange:e=>s(e)})]})})},Vb=e=>Object(Kr.jsx)(Ab,{requiresFurni:Wr.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE,hasSpecialInput:!1,save:null}),qb=e=>e instanceof a.Zi?(e=>{switch(e){case Hr.BOT_CHANGE_FIGURE:return Object(Kr.jsx)(Uj,{});case Hr.BOT_FOLLOW_AVATAR:return Object(Kr.jsx)(Pj,{});case Hr.BOT_GIVE_HAND_ITEM:return Object(Kr.jsx)(Lj,{});case Hr.BOT_MOVE:return Object(Kr.jsx)(Fj,{});case Hr.BOT_TALK:return Object(Kr.jsx)(Bj,{});case Hr.BOT_TALK_DIRECT_TO_AVTR:return Object(Kr.jsx)(Hj,{});case Hr.BOT_TELEPORT:return Object(Kr.jsx)(Gj,{});case Hr.CALL_ANOTHER_STACK:return Object(Kr.jsx)(Wj,{});case Hr.CHASE:return Object(Kr.jsx)(Vj,{});case Hr.CHAT:return Object(Kr.jsx)(qj,{});case Hr.FLEE:return Object(Kr.jsx)(Yj,{});case Hr.GIVE_REWARD:return Object(Kr.jsx)(zj,{});case Hr.GIVE_SCORE:return Object(Kr.jsx)(Qj,{});case Hr.GIVE_SCORE_TO_PREDEFINED_TEAM:return Object(Kr.jsx)(Kj,{});case Hr.JOIN_TEAM:return Object(Kr.jsx)($j,{});case Hr.KICK_FROM_ROOM:return Object(Kr.jsx)(Xj,{});case Hr.LEAVE_TEAM:return Object(Kr.jsx)(Jj,{});case Hr.MOVE_FURNI:return Object(Kr.jsx)(ib,{});case Hr.MOVE_AND_ROTATE_FURNI:return Object(Kr.jsx)(tb,{});case Hr.MOVE_FURNI_TO:return Object(Kr.jsx)(nb,{});case Hr.MUTE_USER:return Object(Kr.jsx)(ab,{});case Hr.RESET:return Object(Kr.jsx)(ob,{});case Hr.SET_FURNI_STATE:return Object(Kr.jsx)(lb,{});case Hr.TELEPORT:return Object(Kr.jsx)(ub,{});case Hr.TOGGLE_FURNI_STATE:return Object(Kr.jsx)(db,{})}return null})(e.code):e instanceof a.oi?(e=>{switch(e){case zr.AVATAR_ENTERS_ROOM:return Object(Kr.jsx)(yb,{});case zr.AVATAR_SAYS_SOMETHING:return Object(Kr.jsx)(wb,{});case zr.AVATAR_WALKS_OFF_FURNI:return Object(Kr.jsx)(kb,{});case zr.AVATAR_WALKS_ON_FURNI:return Object(Kr.jsx)(Db,{});case zr.BOT_REACHED_AVATAR:return Object(Kr.jsx)(Ub,{});case zr.BOT_REACHED_STUFF:return Object(Kr.jsx)(Pb,{});case zr.COLLISION:return Object(Kr.jsx)(Mb,{});case zr.EXECUTE_ONCE:return Object(Kr.jsx)(Lb,{});case zr.EXECUTE_PERIODICALLY:return Object(Kr.jsx)(Hb,{});case zr.EXECUTE_PERIODICALLY_LONG:return Object(Kr.jsx)(Fb,{});case zr.GAME_ENDS:return Object(Kr.jsx)(Bb,{});case zr.GAME_STARTS:return Object(Kr.jsx)(Gb,{});case zr.SCORE_ACHIEVED:return Object(Kr.jsx)(Wb,{});case zr.TOGGLE_FURNI:return Object(Kr.jsx)(Vb,{})}return null})(e.code):e instanceof a.lb?(e=>{switch(e){case Br.ACTOR_HAS_HANDITEM:return Object(Kr.jsx)(bb,{});case Br.ACTOR_IS_GROUP_MEMBER:case Br.NOT_ACTOR_IN_GROUP:return Object(Kr.jsx)(gb,{});case Br.ACTOR_IS_ON_FURNI:case Br.NOT_ACTOR_ON_FURNI:return Object(Kr.jsx)(Ob,{});case Br.ACTOR_IS_IN_TEAM:case Br.NOT_ACTOR_IN_TEAM:return Object(Kr.jsx)(pb,{});case Br.ACTOR_IS_WEARING_BADGE:case Br.NOT_ACTOR_WEARS_BADGE:return Object(Kr.jsx)(_b,{});case Br.ACTOR_IS_WEARING_EFFECT:case Br.NOT_ACTOR_WEARING_EFFECT:return Object(Kr.jsx)(Eb,{});case Br.DATE_RANGE_ACTIVE:return Object(Kr.jsx)(fb,{});case Br.FURNIS_HAVE_AVATARS:case Br.FURNI_NOT_HAVE_HABBO:return Object(Kr.jsx)(xb,{});case Br.HAS_STACKED_FURNIS:return Object(Kr.jsx)(Ib,{});case Br.NOT_HAS_STACKED_FURNIS:return Object(Kr.jsx)(Tb,{});case Br.STUFF_TYPE_MATCHES:case Br.NOT_FURNI_IS_OF_TYPE:return Object(Kr.jsx)(Cb,{});case Br.STATES_MATCH:case Br.NOT_STATES_MATCH:return Object(Kr.jsx)(Sb,{});case Br.TIME_ELAPSED_LESS:return Object(Kr.jsx)(Nb,{});case Br.TIME_ELAPSED_MORE:return Object(Kr.jsx)(vb,{});case Br.USER_COUNT_IN:case Br.NOT_USER_COUNT_IN:return Object(Kr.jsx)(Rb,{})}return null})(e.code):null,Yb=e=>{const{setTrigger:t=null}=yj(),s=Object(c.useCallback)((e=>{const s=e.getParser();t(s.definition)}),[t]),n=Object(c.useCallback)((e=>{const s=e.getParser();t(s.definition)}),[t]),r=Object(c.useCallback)((e=>{const s=e.getParser();t(s.definition)}),[t]),i=Object(c.useCallback)((e=>{const t=e.getParser();console.log(t)}),[]),o=Object(c.useCallback)((e=>{const t=e.getParser();console.log(t)}),[]),l=Object(c.useCallback)((e=>{t(null)}),[t]),u=Object(c.useCallback)((e=>{const t=e.getParser();Pr.simpleAlert(t.info,yr.DEFAULT,null,null,nt("error.title")),console.log(t)}),[]);return it(a.aj,s),it(a.bj,n),it(a.cj,r),it(a.dj,i),it(a.ej,o),it(a.fj,l),it(a.gj,u),null},zb=e=>{const[t,s]=Object(c.useState)(null),[n,r]=Object(c.useState)([]),[i,o]=Object(c.useState)(""),[l,u]=Object(c.useState)([]),[d,h]=Object(c.useState)(0);return Object(Kr.jsxs)(Aj,{value:{trigger:t,setTrigger:s,intParams:n,setIntParams:r,stringParam:i,setStringParam:o,furniIds:l,setFurniIds:u,actionDelay:d,setActionDelay:h,saveWired:()=>{const e=e=>{e&&(e instanceof a.Zi?$n(new a.si(e.id,n,i,l,d,e.stuffTypeSelectionCode)):e instanceof a.oi?$n(new a.vi(e.id,n,i,l,e.stuffTypeSelectionCode)):e instanceof a.lb&&$n(new a.ti(e.id,n,i,l,e.stuffTypeSelectionCode)))};!function(e){const t=L().getRoomObject(ie().roomId,e,a.Ig.FLOOR);return!(!t||!t.model)&&ee().userId===t.model.getValue(a.Og.FURNITURE_OWNER_ID)}(t.id)?Pr.confirm(nt("wiredfurni.nonowner.change.confirm.body"),(()=>{e(t)}),null,null,null,nt("wiredfurni.nonowner.change.confirm.title")):e(t)}},children:[Object(Kr.jsx)(Yb,{}),null!==t&&qb(t)]})},Kb=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(!0),i=Object(c.useCallback)((e=>{switch(e.type){case a.Yg.CREATED:return void r(!1);case a.Yg.ENDED:return void r(e.openLandingView)}}),[]);Gt(a.Yg.CREATED,i),Gt(a.Yg.ENDED,i);const o=Object(c.useCallback)((e=>{const t=e.split("/");if(!(t.length<2))if("open"!==t[1]);else if(t.length>2)if("credits"===t[2]);else{const e=t[2];a.Jd.openHabblet(e)}}),[]);return Object(c.useEffect)((()=>{s(!0),w().connection.onReady()}),[]),Object(c.useEffect)((()=>{const e={linkReceived:o,eventUrlPrefix:"habblet/"};return S(e),()=>{M(e)}}),[o]),Object(Kr.jsxs)(Qr,{fit:!0,children:[Object(Kr.jsx)(Hc,{type:Lc.FADE_IN,inProp:n,timeout:300,children:Object(Kr.jsx)(su,{})}),Object(Kr.jsx)(fj,{isInRoom:!n}),Object(Kr.jsx)(Yu,{}),Object(Kr.jsx)(_j,{}),Object(Kr.jsx)(lo,{}),Object(Kr.jsx)(zb,{}),Object(Kr.jsx)(wi,{}),Object(Kr.jsx)(oi,{}),Object(Kr.jsx)(gd,{}),Object(Kr.jsx)(Eu,{}),Object(Kr.jsx)(Ja,{}),Object(Kr.jsx)(Vo,{}),Object(Kr.jsx)(Dd,{}),Object(Kr.jsx)(vj,{}),Object(Kr.jsx)(Nj,{}),Object(Kr.jsx)(bl,{}),Object(Kr.jsx)(qi,{}),Object(Kr.jsx)(Kl,{}),Object(Kr.jsx)(Ao,{}),Object(Kr.jsx)(md,{}),Object(Kr.jsx)(Cl,{}),Object(Kr.jsx)(vl,{}),Object(Kr.jsx)(Ki,{})]})};var Qb=()=>{const e=[];self.onmessage=t=>{if(!t)return;const s=t.data;switch(s.type){case"CREATE_INTERVAL":{const t=s.timerId,n=s.time,r=s.response,c=setInterval((()=>postMessage(r)),n);return void e.push({id:t,interval:c})}case"REMOVE_INTERVAL":{const t=s.timerId,n=0;for(;n<e.length;){const s=e[n];if(s.id===t)return clearInterval(s.interval),void e.splice(n,1)}}}}};class $b extends Worker{constructor(e){const t=e.toString(),s=new Blob([`(${t})()`]);super(URL.createObjectURL(s))}}a.ef.UI_VERSION="2.0.0";const Xb=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(!1),[i,o]=Object(c.useState)("Tout est pr\xeat!"),[l,u]=Object(c.useState)(0),[d,h]=Object(c.useState)(!0);if(!C()){if(!NitroConfig)throw new Error("NitroConfig n'est pas d\xe9fini!");a.Oe.bootstrap();const e=new $b(Qb);a.Oe.instance.setWorker(e)}const j=Object(c.useCallback)((e=>{switch(e.type){case a.mb.LOADED:return C().localization.init(),void u((e=>e+20));case a.mb.FAILED:return r(!0),void o("\xc9chec de la configuration...");case a.Oe.WEBGL_UNAVAILABLE:return r(!0),void o("Oops... une erreur a \xe9t\xe9 rencontr\xe9e!");case a.Oe.WEBGL_CONTEXT_LOST:return r(!0),o("Oops... une erreur a \xe9t\xe9 rencontr\xe9e!"),void setTimeout((()=>window.location.reload()),1500);case a.Re.CONNECTION_HANDSHAKING:return void u((e=>e+20));case a.Re.CONNECTION_HANDSHAKE_FAILED:return r(!0),void o("Oops... une erreur a \xe9t\xe9 rencontr\xe9e!");case a.Re.CONNECTION_AUTHENTICATED:return u((e=>e+20)),C().init(),void(a.Wd.available&&a.Wd.call("legacyTrack","authentication","authok",[]));case a.Re.CONNECTION_ERROR:return r(!0),void o("Connexion \xe0 Habbox impossible...");case a.Re.CONNECTION_CLOSED:return o("Oops... tu as \xe9t\xe9 d\xe9connect\xe9 de Habbox!"),void a.Jd.send(-1,"client.init.handshake.fail");case a.og.ENGINE_INITIALIZED:return u((e=>e+20)),void setTimeout((()=>s(!0)),300);case a.Ve.LOADED:{const e=k("preload.assets.urls"),t=[];if(e&&e.length)for(const s of e)t.push(C().core.configuration.interpolate(s));return void C().core.asset.downloadAssets(t,(e=>{e?(w().init(),u((e=>e+20))):(r(!0),o("Oops... une erreur a \xe9t\xe9 rencontr\xe9e!"))}))}}}),[]);return Ht(a.Oe.WEBGL_UNAVAILABLE,j),Ht(a.Oe.WEBGL_CONTEXT_LOST,j),Ht(a.Re.CONNECTION_HANDSHAKING,j),Ht(a.Re.CONNECTION_HANDSHAKE_FAILED,j),Ht(a.Re.CONNECTION_AUTHENTICATED,j),Ht(a.Re.CONNECTION_ERROR,j),Ht(a.Re.CONNECTION_CLOSED,j),Bt(a.og.ENGINE_INITIALIZED,j),((e,t)=>{Pt(e,C().localization.events,t)})(a.Ve.LOADED,j),Mt(a.mb.LOADED,j),Mt(a.mb.FAILED,j),Object(c.useEffect)((()=>{a.Yi.isWebGLAvailable()?C().core.configuration.init():Vt(new a.Te(a.Oe.WEBGL_UNAVAILABLE));const e=e=>h(!(window.devicePixelRatio%1));return window.addEventListener("resize",e),e(),()=>{window.removeEventListener("resize",e)}}),[]),Object(Kr.jsxs)(Qr,{fit:!0,overflow:"hidden",className:d&&"image-rendering-pixelated",children:[(!t||n)&&Object(Kr.jsx)(ei,{isError:n,message:i,percent:l}),Object(Kr.jsx)(Hc,{type:Lc.FADE_IN,inProp:t,children:Object(Kr.jsx)(Kb,{})}),Object(Kr.jsx)(Qr,{id:"draggable-windows-container"})]})};s(136);n.b.add(r.a),Object(i.createRoot)(document.getElementById("root")).render(Object(Kr.jsx)(Xb,{}))}},[[137,2,1,3]]]);